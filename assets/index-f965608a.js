(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Hf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oh={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=Symbol.for("react.element"),Df=Symbol.for("react.portal"),Bf=Symbol.for("react.fragment"),$f=Symbol.for("react.strict_mode"),Uf=Symbol.for("react.profiler"),zf=Symbol.for("react.provider"),Wf=Symbol.for("react.context"),Kf=Symbol.for("react.forward_ref"),Vf=Symbol.for("react.suspense"),Yf=Symbol.for("react.memo"),Jf=Symbol.for("react.lazy"),Uu=Symbol.iterator;function Xf(t){return t===null||typeof t!="object"?null:(t=Uu&&t[Uu]||t["@@iterator"],typeof t=="function"?t:null)}var Gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hh=Object.assign,Dh={};function fa(t,e,n){this.props=t,this.context=e,this.refs=Dh,this.updater=n||Gh}fa.prototype.isReactComponent={};fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bh(){}Bh.prototype=fa.prototype;function nc(t,e,n){this.props=t,this.context=e,this.refs=Dh,this.updater=n||Gh}var rc=nc.prototype=new Bh;rc.constructor=nc;Hh(rc,fa.prototype);rc.isPureReactComponent=!0;var zu=Array.isArray,$h=Object.prototype.hasOwnProperty,ac={current:null},Uh={key:!0,ref:!0,__self:!0,__source:!0};function zh(t,e,n){var r,a={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$h.call(e,r)&&!Uh.hasOwnProperty(r)&&(a[r]=e[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:vi,type:t,key:i,ref:o,props:a,_owner:ac.current}}function Qf(t,e){return{$$typeof:vi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ic(t){return typeof t=="object"&&t!==null&&t.$$typeof===vi}function Zf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wu=/\/+/g;function ds(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zf(""+t.key):e.toString(36)}function eo(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vi:case Df:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+ds(o,0):r,zu(a)?(n="",t!=null&&(n=t.replace(Wu,"$&/")+"/"),eo(a,e,n,"",function(u){return u})):a!=null&&(ic(a)&&(a=Qf(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Wu,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",zu(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+ds(i,l);o+=eo(i,e,n,c,a)}else if(c=Xf(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+ds(i,l++),o+=eo(i,e,n,c,a);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ii(t,e,n){if(t==null)return t;var r=[],a=0;return eo(t,r,"","",function(i){return e.call(n,i,a++)}),r}function e0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},to={transition:null},t0={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:to,ReactCurrentOwner:ac};function Wh(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Ii,forEach:function(t,e,n){Ii(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ii(t,function(){e++}),e},toArray:function(t){return Ii(t,function(e){return e})||[]},only:function(t){if(!ic(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=fa;Se.Fragment=Bf;Se.Profiler=Uf;Se.PureComponent=nc;Se.StrictMode=$f;Se.Suspense=Vf;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t0;Se.act=Wh;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hh({},t.props),a=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ac.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)$h.call(e,c)&&!Uh.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:vi,type:t.type,key:a,ref:i,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:Wf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zf,_context:t},t.Consumer=t};Se.createElement=zh;Se.createFactory=function(t){var e=zh.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:Kf,render:t}};Se.isValidElement=ic;Se.lazy=function(t){return{$$typeof:Jf,_payload:{_status:-1,_result:t},_init:e0}};Se.memo=function(t,e){return{$$typeof:Yf,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=to.transition;to.transition={};try{t()}finally{to.transition=e}};Se.unstable_act=Wh;Se.useCallback=function(t,e){return Tt.current.useCallback(t,e)};Se.useContext=function(t){return Tt.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};Se.useEffect=function(t,e){return Tt.current.useEffect(t,e)};Se.useId=function(){return Tt.current.useId()};Se.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return Tt.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};Se.useRef=function(t){return Tt.current.useRef(t)};Se.useState=function(t){return Tt.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return Tt.current.useTransition()};Se.version="18.3.1";Oh.exports=Se;var L=Oh.exports;const b=Hf(L);var Xs={},Kh={exports:{}},Bt={},Vh={exports:{}},Yh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,_){var j=H.length;H.push(_);e:for(;0<j;){var F=j-1>>>1,z=H[F];if(0<a(z,_))H[F]=_,H[j]=z,j=F;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var _=H[0],j=H.pop();if(j!==_){H[0]=j;e:for(var F=0,z=H.length,ne=z>>>1;F<ne;){var oe=2*(F+1)-1,ie=H[oe],ue=oe+1,pe=H[ue];if(0>a(ie,j))ue<z&&0>a(pe,ie)?(H[F]=pe,H[ue]=j,F=ue):(H[F]=ie,H[oe]=j,F=oe);else if(ue<z&&0>a(pe,j))H[F]=pe,H[ue]=j,F=ue;else break e}}return _}function a(H,_){var j=H.sortIndex-_.sortIndex;return j!==0?j:H.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,y=null,p=3,h=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(H){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=H)r(u),_.sortIndex=_.expirationTime,e(c,_);else break;_=n(u)}}function S(H){if(w=!1,f(H),!v)if(n(c)!==null)v=!0,ye(A);else{var _=n(u);_!==null&&ee(S,_.startTime-H)}}function A(H,_){v=!1,w&&(w=!1,g(x),x=-1),h=!0;var j=p;try{for(f(_),y=n(c);y!==null&&(!(y.expirationTime>_)||H&&!k());){var F=y.callback;if(typeof F=="function"){y.callback=null,p=y.priorityLevel;var z=F(y.expirationTime<=_);_=t.unstable_now(),typeof z=="function"?y.callback=z:y===n(c)&&r(c),f(_)}else r(c);y=n(c)}if(y!==null)var ne=!0;else{var oe=n(u);oe!==null&&ee(S,oe.startTime-_),ne=!1}return ne}finally{y=null,p=j,h=!1}}var I=!1,R=null,x=-1,N=5,E=-1;function k(){return!(t.unstable_now()-E<N)}function B(){if(R!==null){var H=t.unstable_now();E=H;var _=!0;try{_=R(!0,H)}finally{_?ae():(I=!1,R=null)}}else I=!1}var ae;if(typeof m=="function")ae=function(){m(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ce=V.port2;V.port1.onmessage=B,ae=function(){ce.postMessage(null)}}else ae=function(){C(B,0)};function ye(H){R=H,I||(I=!0,ae())}function ee(H,_){x=C(function(){H(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,ye(A))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var _=3;break;default:_=p}var j=p;p=_;try{return H()}finally{p=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,_){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=p;p=H;try{return _()}finally{p=j}},t.unstable_scheduleCallback=function(H,_,j){var F=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?F+j:F):j=F,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=j+z,H={id:d++,callback:_,priorityLevel:H,startTime:j,expirationTime:z,sortIndex:-1},j>F?(H.sortIndex=j,e(u,H),n(c)===null&&H===n(u)&&(w?(g(x),x=-1):w=!0,ee(S,j-F))):(H.sortIndex=z,e(c,H),v||h||(v=!0,ye(A))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var _=p;return function(){var j=p;p=_;try{return H.apply(this,arguments)}finally{p=j}}}})(Yh);Vh.exports=Yh;var n0=Vh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0=L,Dt=n0;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jh=new Set,Va={};function Rr(t,e){la(t,e),la(t+"Capture",e)}function la(t,e){for(Va[t]=e,t=0;t<e.length;t++)Jh.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=Object.prototype.hasOwnProperty,a0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ku={},Vu={};function i0(t){return Qs.call(Vu,t)?!0:Qs.call(Ku,t)?!1:a0.test(t)?Vu[t]=!0:(Ku[t]=!0,!1)}function o0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s0(t,e,n,r){if(e===null||typeof e>"u"||o0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,a,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var oc=/[\-:]([a-z])/g;function sc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oc,sc);mt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oc,sc);mt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oc,sc);mt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function lc(t,e,n,r){var a=mt.hasOwnProperty(e)?mt[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s0(e,n,a,r)&&(n=null),r||a===null?i0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kn=r0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ri=Symbol.for("react.element"),Br=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),cc=Symbol.for("react.strict_mode"),Zs=Symbol.for("react.profiler"),Xh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),uc=Symbol.for("react.forward_ref"),el=Symbol.for("react.suspense"),tl=Symbol.for("react.suspense_list"),dc=Symbol.for("react.memo"),Fn=Symbol.for("react.lazy"),Zh=Symbol.for("react.offscreen"),Yu=Symbol.iterator;function Aa(t){return t===null||typeof t!="object"?null:(t=Yu&&t[Yu]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,hs;function qa(t){if(hs===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hs=e&&e[1]||""}return`
`+hs+t}var ys=!1;function ps(t,e){if(!t||ys)return"";ys=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{ys=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qa(t):""}function l0(t){switch(t.tag){case 5:return qa(t.type);case 16:return qa("Lazy");case 13:return qa("Suspense");case 19:return qa("SuspenseList");case 0:case 2:case 15:return t=ps(t.type,!1),t;case 11:return t=ps(t.type.render,!1),t;case 1:return t=ps(t.type,!0),t;default:return""}}function nl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case Br:return"Portal";case Zs:return"Profiler";case cc:return"StrictMode";case el:return"Suspense";case tl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qh:return(t.displayName||"Context")+".Consumer";case Xh:return(t._context.displayName||"Context")+".Provider";case uc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dc:return e=t.displayName||null,e!==null?e:nl(t.type)||"Memo";case Fn:e=t._payload,t=t._init;try{return nl(t(e))}catch{}}return null}function c0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nl(e);case 8:return e===cc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ey(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function u0(t){var e=ey(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Li(t){t._valueTracker||(t._valueTracker=u0(t))}function ty(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ey(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rl(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ju(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ny(t,e){e=e.checked,e!=null&&lc(t,"checked",e,!1)}function al(t,e){ny(t,e);var n=er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?il(t,e.type,n):e.hasOwnProperty("defaultValue")&&il(t,e.type,er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function il(t,e,n){(e!=="number"||yo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pa=Array.isArray;function ta(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+er(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function ol(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Pa(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:er(n)}}function ry(t,e){var n=er(e.value),r=er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ay(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ay(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ei,iy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ei=Ei||document.createElement("div"),Ei.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ei.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d0=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){d0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function oy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function sy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=oy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var h0=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ll(t,e){if(e){if(h0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function cl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ul=null;function hc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dl=null,na=null,ra=null;function ed(t){if(t=xi(t)){if(typeof dl!="function")throw Error(J(280));var e=t.stateNode;e&&(e=zo(e),dl(t.stateNode,t.type,e))}}function ly(t){na?ra?ra.push(t):ra=[t]:na=t}function cy(){if(na){var t=na,e=ra;if(ra=na=null,ed(t),e)for(t=0;t<e.length;t++)ed(e[t])}}function uy(t,e){return t(e)}function dy(){}var fs=!1;function hy(t,e,n){if(fs)return t(e,n);fs=!0;try{return uy(t,e,n)}finally{fs=!1,(na!==null||ra!==null)&&(dy(),cy())}}function Ja(t,e){var n=t.stateNode;if(n===null)return null;var r=zo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var hl=!1;if(Rn)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){hl=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{hl=!1}function y0(t,e,n,r,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Oa=!1,po=null,fo=!1,yl=null,p0={onError:function(t){Oa=!0,po=t}};function f0(t,e,n,r,a,i,o,l,c){Oa=!1,po=null,y0.apply(p0,arguments)}function g0(t,e,n,r,a,i,o,l,c){if(f0.apply(this,arguments),Oa){if(Oa){var u=po;Oa=!1,po=null}else throw Error(J(198));fo||(fo=!0,yl=u)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function td(t){if(Lr(t)!==t)throw Error(J(188))}function m0(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return td(a),t;if(i===r)return td(a),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function py(t){return t=m0(t),t!==null?fy(t):null}function fy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fy(t);if(e!==null)return e;t=t.sibling}return null}var gy=Dt.unstable_scheduleCallback,nd=Dt.unstable_cancelCallback,v0=Dt.unstable_shouldYield,w0=Dt.unstable_requestPaint,rt=Dt.unstable_now,A0=Dt.unstable_getCurrentPriorityLevel,yc=Dt.unstable_ImmediatePriority,my=Dt.unstable_UserBlockingPriority,go=Dt.unstable_NormalPriority,x0=Dt.unstable_LowPriority,vy=Dt.unstable_IdlePriority,Do=null,pn=null;function b0(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Do,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:S0,C0=Math.log,T0=Math.LN2;function S0(t){return t>>>=0,t===0?32:31-(C0(t)/T0|0)|0}var _i=64,ki=4194304;function Na(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=Na(l):(i&=o,i!==0&&(r=Na(i)))}else o=n&~a,o!==0?r=Na(o):i!==0&&(r=Na(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,i=e&-e,a>=i||a===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-on(e),a=1<<n,r|=t[n],e&=~a;return r}function I0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-on(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=I0(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function pl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wy(){var t=_i;return _i<<=1,!(_i&4194240)&&(_i=64),t}function gs(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=n}function L0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-on(n),i=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function pc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-on(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var Oe=0;function Ay(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xy,fc,by,Cy,Ty,fl=!1,qi=[],Wn=null,Kn=null,Vn=null,Xa=new Map,Qa=new Map,Gn=[],E0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rd(t,e){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(e.pointerId)}}function ba(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=xi(e),e!==null&&fc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function _0(t,e,n,r,a){switch(e){case"focusin":return Wn=ba(Wn,t,e,n,r,a),!0;case"dragenter":return Kn=ba(Kn,t,e,n,r,a),!0;case"mouseover":return Vn=ba(Vn,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return Xa.set(i,ba(Xa.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Qa.set(i,ba(Qa.get(i)||null,t,e,n,r,a)),!0}return!1}function Sy(t){var e=fr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=yy(n),e!==null){t.blockedOn=e,Ty(t.priority,function(){by(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function no(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ul=r,n.target.dispatchEvent(r),ul=null}else return e=xi(n),e!==null&&fc(e),t.blockedOn=n,!1;e.shift()}return!0}function ad(t,e,n){no(t)&&n.delete(e)}function k0(){fl=!1,Wn!==null&&no(Wn)&&(Wn=null),Kn!==null&&no(Kn)&&(Kn=null),Vn!==null&&no(Vn)&&(Vn=null),Xa.forEach(ad),Qa.forEach(ad)}function Ca(t,e){t.blockedOn===e&&(t.blockedOn=null,fl||(fl=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,k0)))}function Za(t){function e(a){return Ca(a,t)}if(0<qi.length){Ca(qi[0],t);for(var n=1;n<qi.length;n++){var r=qi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wn!==null&&Ca(Wn,t),Kn!==null&&Ca(Kn,t),Vn!==null&&Ca(Vn,t),Xa.forEach(e),Qa.forEach(e),n=0;n<Gn.length;n++)r=Gn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gn.length&&(n=Gn[0],n.blockedOn===null);)Sy(n),n.blockedOn===null&&Gn.shift()}var aa=kn.ReactCurrentBatchConfig,vo=!0;function q0(t,e,n,r){var a=Oe,i=aa.transition;aa.transition=null;try{Oe=1,gc(t,e,n,r)}finally{Oe=a,aa.transition=i}}function P0(t,e,n,r){var a=Oe,i=aa.transition;aa.transition=null;try{Oe=4,gc(t,e,n,r)}finally{Oe=a,aa.transition=i}}function gc(t,e,n,r){if(vo){var a=gl(t,e,n,r);if(a===null)Is(t,e,r,wo,n),rd(t,r);else if(_0(a,t,e,n,r))r.stopPropagation();else if(rd(t,r),e&4&&-1<E0.indexOf(t)){for(;a!==null;){var i=xi(a);if(i!==null&&xy(i),i=gl(t,e,n,r),i===null&&Is(t,e,r,wo,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Is(t,e,r,null,n)}}var wo=null;function gl(t,e,n,r){if(wo=null,t=hc(r),t=fr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wo=t,null}function Iy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A0()){case yc:return 1;case my:return 4;case go:case x0:return 16;case vy:return 536870912;default:return 16}default:return 16}}var $n=null,mc=null,ro=null;function Ry(){if(ro)return ro;var t,e=mc,n=e.length,r,a="value"in $n?$n.value:$n.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[i-r];r++);return ro=a.slice(t,1<r?1-r:void 0)}function ao(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pi(){return!0}function id(){return!1}function $t(t){function e(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pi:id,this.isPropagationStopped=id,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),e}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vc=$t(ga),Ai=Je({},ga,{view:0,detail:0}),N0=$t(Ai),ms,vs,Ta,Bo=Je({},Ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ta&&(Ta&&t.type==="mousemove"?(ms=t.screenX-Ta.screenX,vs=t.screenY-Ta.screenY):vs=ms=0,Ta=t),ms)},movementY:function(t){return"movementY"in t?t.movementY:vs}}),od=$t(Bo),M0=Je({},Bo,{dataTransfer:0}),F0=$t(M0),j0=Je({},Ai,{relatedTarget:0}),ws=$t(j0),O0=Je({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),G0=$t(O0),H0=Je({},ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D0=$t(H0),B0=Je({},ga,{data:0}),sd=$t(B0),$0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=z0[t])?!!e[t]:!1}function wc(){return W0}var K0=Je({},Ai,{key:function(t){if(t.key){var e=$0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ao(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?U0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(t){return t.type==="keypress"?ao(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ao(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),V0=$t(K0),Y0=Je({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ld=$t(Y0),J0=Je({},Ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),X0=$t(J0),Q0=Je({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z0=$t(Q0),eg=Je({},Bo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tg=$t(eg),ng=[9,13,27,32],Ac=Rn&&"CompositionEvent"in window,Ga=null;Rn&&"documentMode"in document&&(Ga=document.documentMode);var rg=Rn&&"TextEvent"in window&&!Ga,Ly=Rn&&(!Ac||Ga&&8<Ga&&11>=Ga),cd=String.fromCharCode(32),ud=!1;function Ey(t,e){switch(t){case"keyup":return ng.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _y(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ur=!1;function ag(t,e){switch(t){case"compositionend":return _y(e);case"keypress":return e.which!==32?null:(ud=!0,cd);case"textInput":return t=e.data,t===cd&&ud?null:t;default:return null}}function ig(t,e){if(Ur)return t==="compositionend"||!Ac&&Ey(t,e)?(t=Ry(),ro=mc=$n=null,Ur=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ly&&e.locale!=="ko"?null:e.data;default:return null}}var og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!og[t.type]:e==="textarea"}function ky(t,e,n,r){ly(r),e=Ao(e,"onChange"),0<e.length&&(n=new vc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ha=null,ei=null;function sg(t){By(t,0)}function $o(t){var e=Kr(t);if(ty(e))return t}function lg(t,e){if(t==="change")return e}var qy=!1;if(Rn){var As;if(Rn){var xs="oninput"in document;if(!xs){var hd=document.createElement("div");hd.setAttribute("oninput","return;"),xs=typeof hd.oninput=="function"}As=xs}else As=!1;qy=As&&(!document.documentMode||9<document.documentMode)}function yd(){Ha&&(Ha.detachEvent("onpropertychange",Py),ei=Ha=null)}function Py(t){if(t.propertyName==="value"&&$o(ei)){var e=[];ky(e,ei,t,hc(t)),hy(sg,e)}}function cg(t,e,n){t==="focusin"?(yd(),Ha=e,ei=n,Ha.attachEvent("onpropertychange",Py)):t==="focusout"&&yd()}function ug(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $o(ei)}function dg(t,e){if(t==="click")return $o(e)}function hg(t,e){if(t==="input"||t==="change")return $o(e)}function yg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:yg;function ti(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Qs.call(e,a)||!ln(t[a],e[a]))return!1}return!0}function pd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fd(t,e){var n=pd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pd(n)}}function Ny(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ny(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function My(){for(var t=window,e=yo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yo(t.document)}return e}function xc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pg(t){var e=My(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ny(n.ownerDocument.documentElement,n)){if(r!==null&&xc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=fd(n,i);var o=fd(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fg=Rn&&"documentMode"in document&&11>=document.documentMode,zr=null,ml=null,Da=null,vl=!1;function gd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vl||zr==null||zr!==yo(r)||(r=zr,"selectionStart"in r&&xc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Da&&ti(Da,r)||(Da=r,r=Ao(ml,"onSelect"),0<r.length&&(e=new vc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zr)))}function Ni(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wr={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionend:Ni("Transition","TransitionEnd")},bs={},Fy={};Rn&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function Uo(t){if(bs[t])return bs[t];if(!Wr[t])return t;var e=Wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fy)return bs[t]=e[n];return t}var jy=Uo("animationend"),Oy=Uo("animationiteration"),Gy=Uo("animationstart"),Hy=Uo("transitionend"),Dy=new Map,md="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(t,e){Dy.set(t,e),Rr(e,[t])}for(var Cs=0;Cs<md.length;Cs++){var Ts=md[Cs],gg=Ts.toLowerCase(),mg=Ts[0].toUpperCase()+Ts.slice(1);nr(gg,"on"+mg)}nr(jy,"onAnimationEnd");nr(Oy,"onAnimationIteration");nr(Gy,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(Hy,"onTransitionEnd");la("onMouseEnter",["mouseout","mouseover"]);la("onMouseLeave",["mouseout","mouseover"]);la("onPointerEnter",["pointerout","pointerover"]);la("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function vd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,g0(r,e,void 0,t),t.currentTarget=null}function By(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;vd(a,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;vd(a,l,u),i=c}}}if(fo)throw t=yl,fo=!1,yl=null,t}function $e(t,e){var n=e[Cl];n===void 0&&(n=e[Cl]=new Set);var r=t+"__bubble";n.has(r)||($y(e,t,2,!1),n.add(r))}function Ss(t,e,n){var r=0;e&&(r|=4),$y(n,t,r,e)}var Mi="_reactListening"+Math.random().toString(36).slice(2);function ni(t){if(!t[Mi]){t[Mi]=!0,Jh.forEach(function(n){n!=="selectionchange"&&(vg.has(n)||Ss(n,!1,t),Ss(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mi]||(e[Mi]=!0,Ss("selectionchange",!1,e))}}function $y(t,e,n,r){switch(Iy(e)){case 1:var a=q0;break;case 4:a=P0;break;default:a=gc}n=a.bind(null,e,n,t),a=void 0,!hl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Is(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=fr(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}hy(function(){var u=i,d=hc(n),y=[];e:{var p=Dy.get(t);if(p!==void 0){var h=vc,v=t;switch(t){case"keypress":if(ao(n)===0)break e;case"keydown":case"keyup":h=V0;break;case"focusin":v="focus",h=ws;break;case"focusout":v="blur",h=ws;break;case"beforeblur":case"afterblur":h=ws;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=F0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=X0;break;case jy:case Oy:case Gy:h=G0;break;case Hy:h=Z0;break;case"scroll":h=N0;break;case"wheel":h=tg;break;case"copy":case"cut":case"paste":h=D0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=ld}var w=(e&4)!==0,C=!w&&t==="scroll",g=w?p!==null?p+"Capture":null:p;w=[];for(var m=u,f;m!==null;){f=m;var S=f.stateNode;if(f.tag===5&&S!==null&&(f=S,g!==null&&(S=Ja(m,g),S!=null&&w.push(ri(m,S,f)))),C)break;m=m.return}0<w.length&&(p=new h(p,v,null,n,d),y.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==ul&&(v=n.relatedTarget||n.fromElement)&&(fr(v)||v[Ln]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=u,v=v?fr(v):null,v!==null&&(C=Lr(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(w=od,S="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=ld,S="onPointerLeave",g="onPointerEnter",m="pointer"),C=h==null?p:Kr(h),f=v==null?p:Kr(v),p=new w(S,m+"leave",h,n,d),p.target=C,p.relatedTarget=f,S=null,fr(d)===u&&(w=new w(g,m+"enter",v,n,d),w.target=f,w.relatedTarget=C,S=w),C=S,h&&v)t:{for(w=h,g=v,m=0,f=w;f;f=kr(f))m++;for(f=0,S=g;S;S=kr(S))f++;for(;0<m-f;)w=kr(w),m--;for(;0<f-m;)g=kr(g),f--;for(;m--;){if(w===g||g!==null&&w===g.alternate)break t;w=kr(w),g=kr(g)}w=null}else w=null;h!==null&&wd(y,p,h,w,!1),v!==null&&C!==null&&wd(y,C,v,w,!0)}}e:{if(p=u?Kr(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var A=lg;else if(dd(p))if(qy)A=hg;else{A=ug;var I=cg}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=dg);if(A&&(A=A(t,u))){ky(y,A,n,d);break e}I&&I(t,p,u),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&il(p,"number",p.value)}switch(I=u?Kr(u):window,t){case"focusin":(dd(I)||I.contentEditable==="true")&&(zr=I,ml=u,Da=null);break;case"focusout":Da=ml=zr=null;break;case"mousedown":vl=!0;break;case"contextmenu":case"mouseup":case"dragend":vl=!1,gd(y,n,d);break;case"selectionchange":if(fg)break;case"keydown":case"keyup":gd(y,n,d)}var R;if(Ac)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ur?Ey(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Ly&&n.locale!=="ko"&&(Ur||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ur&&(R=Ry()):($n=d,mc="value"in $n?$n.value:$n.textContent,Ur=!0)),I=Ao(u,x),0<I.length&&(x=new sd(x,t,null,n,d),y.push({event:x,listeners:I}),R?x.data=R:(R=_y(n),R!==null&&(x.data=R)))),(R=rg?ag(t,n):ig(t,n))&&(u=Ao(u,"onBeforeInput"),0<u.length&&(d=new sd("onBeforeInput","beforeinput",null,n,d),y.push({event:d,listeners:u}),d.data=R))}By(y,e)})}function ri(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ao(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ja(t,n),i!=null&&r.unshift(ri(t,i,a)),i=Ja(t,e),i!=null&&r.push(ri(t,i,a))),t=t.return}return r}function kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wd(t,e,n,r,a){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Ja(n,i),c!=null&&o.unshift(ri(n,c,l))):a||(c=Ja(n,i),c!=null&&o.push(ri(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wg=/\r\n?/g,Ag=/\u0000|\uFFFD/g;function Ad(t){return(typeof t=="string"?t:""+t).replace(wg,`
`).replace(Ag,"")}function Fi(t,e,n){if(e=Ad(e),Ad(t)!==e&&n)throw Error(J(425))}function xo(){}var wl=null,Al=null;function xl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bl=typeof setTimeout=="function"?setTimeout:void 0,xg=typeof clearTimeout=="function"?clearTimeout:void 0,xd=typeof Promise=="function"?Promise:void 0,bg=typeof queueMicrotask=="function"?queueMicrotask:typeof xd<"u"?function(t){return xd.resolve(null).then(t).catch(Cg)}:bl;function Cg(t){setTimeout(function(){throw t})}function Rs(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),Za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Za(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ma=Math.random().toString(36).slice(2),yn="__reactFiber$"+ma,ai="__reactProps$"+ma,Ln="__reactContainer$"+ma,Cl="__reactEvents$"+ma,Tg="__reactListeners$"+ma,Sg="__reactHandles$"+ma;function fr(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ln]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bd(t);t!==null;){if(n=t[yn])return n;t=bd(t)}return e}t=n,n=t.parentNode}return null}function xi(t){return t=t[yn]||t[Ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function zo(t){return t[ai]||null}var Tl=[],Vr=-1;function rr(t){return{current:t}}function Ue(t){0>Vr||(t.current=Tl[Vr],Tl[Vr]=null,Vr--)}function Be(t,e){Vr++,Tl[Vr]=t.current,t.current=e}var tr={},xt=rr(tr),kt=rr(!1),br=tr;function ca(t,e){var n=t.type.contextTypes;if(!n)return tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function qt(t){return t=t.childContextTypes,t!=null}function bo(){Ue(kt),Ue(xt)}function Cd(t,e,n){if(xt.current!==tr)throw Error(J(168));Be(xt,e),Be(kt,n)}function Uy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(J(108,c0(t)||"Unknown",a));return Je({},n,r)}function Co(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,br=xt.current,Be(xt,t),Be(kt,kt.current),!0}function Td(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=Uy(t,e,br),r.__reactInternalMemoizedMergedChildContext=t,Ue(kt),Ue(xt),Be(xt,t)):Ue(kt),Be(kt,n)}var bn=null,Wo=!1,Ls=!1;function zy(t){bn===null?bn=[t]:bn.push(t)}function Ig(t){Wo=!0,zy(t)}function ar(){if(!Ls&&bn!==null){Ls=!0;var t=0,e=Oe;try{var n=bn;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bn=null,Wo=!1}catch(a){throw bn!==null&&(bn=bn.slice(t+1)),gy(yc,ar),a}finally{Oe=e,Ls=!1}}return null}var Yr=[],Jr=0,To=null,So=0,Wt=[],Kt=0,Cr=null,Cn=1,Tn="";function cr(t,e){Yr[Jr++]=So,Yr[Jr++]=To,To=t,So=e}function Wy(t,e,n){Wt[Kt++]=Cn,Wt[Kt++]=Tn,Wt[Kt++]=Cr,Cr=t;var r=Cn;t=Tn;var a=32-on(r)-1;r&=~(1<<a),n+=1;var i=32-on(e)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Cn=1<<32-on(e)+a|n<<a|r,Tn=i+t}else Cn=1<<i|n<<a|r,Tn=t}function bc(t){t.return!==null&&(cr(t,1),Wy(t,1,0))}function Cc(t){for(;t===To;)To=Yr[--Jr],Yr[Jr]=null,So=Yr[--Jr],Yr[Jr]=null;for(;t===Cr;)Cr=Wt[--Kt],Wt[Kt]=null,Tn=Wt[--Kt],Wt[Kt]=null,Cn=Wt[--Kt],Wt[Kt]=null}var Ht=null,Gt=null,We=!1,an=null;function Ky(t,e){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,Gt=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cr!==null?{id:Cn,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,Gt=null,!0):!1;default:return!1}}function Sl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Il(t){if(We){var e=Gt;if(e){var n=e;if(!Sd(t,e)){if(Sl(t))throw Error(J(418));e=Yn(n.nextSibling);var r=Ht;e&&Sd(t,e)?Ky(r,n):(t.flags=t.flags&-4097|2,We=!1,Ht=t)}}else{if(Sl(t))throw Error(J(418));t.flags=t.flags&-4097|2,We=!1,Ht=t}}}function Id(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function ji(t){if(t!==Ht)return!1;if(!We)return Id(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xl(t.type,t.memoizedProps)),e&&(e=Gt)){if(Sl(t))throw Vy(),Error(J(418));for(;e;)Ky(t,e),e=Yn(e.nextSibling)}if(Id(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Ht?Yn(t.stateNode.nextSibling):null;return!0}function Vy(){for(var t=Gt;t;)t=Yn(t.nextSibling)}function ua(){Gt=Ht=null,We=!1}function Tc(t){an===null?an=[t]:an.push(t)}var Rg=kn.ReactCurrentBatchConfig;function Sa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var a=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Oi(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rd(t){var e=t._init;return e(t._payload)}function Yy(t){function e(g,m){if(t){var f=g.deletions;f===null?(g.deletions=[m],g.flags|=16):f.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function a(g,m){return g=Zn(g,m),g.index=0,g.sibling=null,g}function i(g,m,f){return g.index=f,t?(f=g.alternate,f!==null?(f=f.index,f<m?(g.flags|=2,m):f):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,m,f,S){return m===null||m.tag!==6?(m=Ms(f,g.mode,S),m.return=g,m):(m=a(m,f),m.return=g,m)}function c(g,m,f,S){var A=f.type;return A===$r?d(g,m,f.props.children,S,f.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fn&&Rd(A)===m.type)?(S=a(m,f.props),S.ref=Sa(g,m,f),S.return=g,S):(S=ho(f.type,f.key,f.props,null,g.mode,S),S.ref=Sa(g,m,f),S.return=g,S)}function u(g,m,f,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==f.containerInfo||m.stateNode.implementation!==f.implementation?(m=Fs(f,g.mode,S),m.return=g,m):(m=a(m,f.children||[]),m.return=g,m)}function d(g,m,f,S,A){return m===null||m.tag!==7?(m=Ar(f,g.mode,S,A),m.return=g,m):(m=a(m,f),m.return=g,m)}function y(g,m,f){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ms(""+m,g.mode,f),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ri:return f=ho(m.type,m.key,m.props,null,g.mode,f),f.ref=Sa(g,null,m),f.return=g,f;case Br:return m=Fs(m,g.mode,f),m.return=g,m;case Fn:var S=m._init;return y(g,S(m._payload),f)}if(Pa(m)||Aa(m))return m=Ar(m,g.mode,f,null),m.return=g,m;Oi(g,m)}return null}function p(g,m,f,S){var A=m!==null?m.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return A!==null?null:l(g,m,""+f,S);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ri:return f.key===A?c(g,m,f,S):null;case Br:return f.key===A?u(g,m,f,S):null;case Fn:return A=f._init,p(g,m,A(f._payload),S)}if(Pa(f)||Aa(f))return A!==null?null:d(g,m,f,S,null);Oi(g,f)}return null}function h(g,m,f,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(f)||null,l(m,g,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ri:return g=g.get(S.key===null?f:S.key)||null,c(m,g,S,A);case Br:return g=g.get(S.key===null?f:S.key)||null,u(m,g,S,A);case Fn:var I=S._init;return h(g,m,f,I(S._payload),A)}if(Pa(S)||Aa(S))return g=g.get(f)||null,d(m,g,S,A,null);Oi(m,S)}return null}function v(g,m,f,S){for(var A=null,I=null,R=m,x=m=0,N=null;R!==null&&x<f.length;x++){R.index>x?(N=R,R=null):N=R.sibling;var E=p(g,R,f[x],S);if(E===null){R===null&&(R=N);break}t&&R&&E.alternate===null&&e(g,R),m=i(E,m,x),I===null?A=E:I.sibling=E,I=E,R=N}if(x===f.length)return n(g,R),We&&cr(g,x),A;if(R===null){for(;x<f.length;x++)R=y(g,f[x],S),R!==null&&(m=i(R,m,x),I===null?A=R:I.sibling=R,I=R);return We&&cr(g,x),A}for(R=r(g,R);x<f.length;x++)N=h(R,g,x,f[x],S),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?x:N.key),m=i(N,m,x),I===null?A=N:I.sibling=N,I=N);return t&&R.forEach(function(k){return e(g,k)}),We&&cr(g,x),A}function w(g,m,f,S){var A=Aa(f);if(typeof A!="function")throw Error(J(150));if(f=A.call(f),f==null)throw Error(J(151));for(var I=A=null,R=m,x=m=0,N=null,E=f.next();R!==null&&!E.done;x++,E=f.next()){R.index>x?(N=R,R=null):N=R.sibling;var k=p(g,R,E.value,S);if(k===null){R===null&&(R=N);break}t&&R&&k.alternate===null&&e(g,R),m=i(k,m,x),I===null?A=k:I.sibling=k,I=k,R=N}if(E.done)return n(g,R),We&&cr(g,x),A;if(R===null){for(;!E.done;x++,E=f.next())E=y(g,E.value,S),E!==null&&(m=i(E,m,x),I===null?A=E:I.sibling=E,I=E);return We&&cr(g,x),A}for(R=r(g,R);!E.done;x++,E=f.next())E=h(R,g,x,E.value,S),E!==null&&(t&&E.alternate!==null&&R.delete(E.key===null?x:E.key),m=i(E,m,x),I===null?A=E:I.sibling=E,I=E);return t&&R.forEach(function(B){return e(g,B)}),We&&cr(g,x),A}function C(g,m,f,S){if(typeof f=="object"&&f!==null&&f.type===$r&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Ri:e:{for(var A=f.key,I=m;I!==null;){if(I.key===A){if(A=f.type,A===$r){if(I.tag===7){n(g,I.sibling),m=a(I,f.props.children),m.return=g,g=m;break e}}else if(I.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Fn&&Rd(A)===I.type){n(g,I.sibling),m=a(I,f.props),m.ref=Sa(g,I,f),m.return=g,g=m;break e}n(g,I);break}else e(g,I);I=I.sibling}f.type===$r?(m=Ar(f.props.children,g.mode,S,f.key),m.return=g,g=m):(S=ho(f.type,f.key,f.props,null,g.mode,S),S.ref=Sa(g,m,f),S.return=g,g=S)}return o(g);case Br:e:{for(I=f.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===f.containerInfo&&m.stateNode.implementation===f.implementation){n(g,m.sibling),m=a(m,f.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Fs(f,g.mode,S),m.return=g,g=m}return o(g);case Fn:return I=f._init,C(g,m,I(f._payload),S)}if(Pa(f))return v(g,m,f,S);if(Aa(f))return w(g,m,f,S);Oi(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,m!==null&&m.tag===6?(n(g,m.sibling),m=a(m,f),m.return=g,g=m):(n(g,m),m=Ms(f,g.mode,S),m.return=g,g=m),o(g)):n(g,m)}return C}var da=Yy(!0),Jy=Yy(!1),Io=rr(null),Ro=null,Xr=null,Sc=null;function Ic(){Sc=Xr=Ro=null}function Rc(t){var e=Io.current;Ue(Io),t._currentValue=e}function Rl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){Ro=t,Sc=Xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Sc!==t)if(t={context:t,memoizedValue:e,next:null},Xr===null){if(Ro===null)throw Error(J(308));Xr=t,Ro.dependencies={lanes:0,firstContext:t}}else Xr=Xr.next=t;return e}var gr=null;function Lc(t){gr===null?gr=[t]:gr.push(t)}function Xy(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,Lc(e)):(n.next=a.next,a.next=n),e.interleaved=n,En(t,r)}function En(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jn=!1;function Ec(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,En(t,n)}return a=r.interleaved,a===null?(e.next=e,Lc(r)):(e.next=a.next,a.next=e),r.interleaved=e,En(t,n)}function io(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pc(t,n)}}function Ld(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lo(t,e,n,r){var a=t.updateQueue;jn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var y=a.baseState;o=0,d=u=c=null,l=i;do{var p=l.lane,h=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,w=l;switch(p=e,h=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){y=v.call(h,y,p);break e}y=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(h,y,p):v,p==null)break e;y=Je({},y,p);break e;case 2:jn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=y):d=d.next=h,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(1);if(d===null&&(c=y),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else i===null&&(a.shared.lanes=0);Sr|=o,t.lanes=o,t.memoizedState=y}}function Ed(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(J(191,a));a.call(r)}}}var bi={},fn=rr(bi),ii=rr(bi),oi=rr(bi);function mr(t){if(t===bi)throw Error(J(174));return t}function _c(t,e){switch(Be(oi,e),Be(ii,t),Be(fn,bi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sl(e,t)}Ue(fn),Be(fn,e)}function ha(){Ue(fn),Ue(ii),Ue(oi)}function Zy(t){mr(oi.current);var e=mr(fn.current),n=sl(e,t.type);e!==n&&(Be(ii,t),Be(fn,n))}function kc(t){ii.current===t&&(Ue(fn),Ue(ii))}var Ke=rr(0);function Eo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Es=[];function qc(){for(var t=0;t<Es.length;t++)Es[t]._workInProgressVersionPrimary=null;Es.length=0}var oo=kn.ReactCurrentDispatcher,_s=kn.ReactCurrentBatchConfig,Tr=0,Ye=null,lt=null,ut=null,_o=!1,Ba=!1,si=0,Lg=0;function vt(){throw Error(J(321))}function Pc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function Nc(t,e,n,r,a,i){if(Tr=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oo.current=t===null||t.memoizedState===null?qg:Pg,t=n(r,a),Ba){i=0;do{if(Ba=!1,si=0,25<=i)throw Error(J(301));i+=1,ut=lt=null,e.updateQueue=null,oo.current=Ng,t=n(r,a)}while(Ba)}if(oo.current=ko,e=lt!==null&&lt.next!==null,Tr=0,ut=lt=Ye=null,_o=!1,e)throw Error(J(300));return t}function Mc(){var t=si!==0;return si=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Ye.memoizedState=ut=t:ut=ut.next=t,ut}function Xt(){if(lt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=ut===null?Ye.memoizedState:ut.next;if(e!==null)ut=e,lt=t;else{if(t===null)throw Error(J(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ut===null?Ye.memoizedState=ut=t:ut=ut.next=t}return ut}function li(t,e){return typeof e=="function"?e(t):e}function ks(t){var e=Xt(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=lt,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Tr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var y={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=y,o=r):c=c.next=y,Ye.lanes|=d,Sr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,ln(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,Ye.lanes|=i,Sr|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qs(t){var e=Xt(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=t(i,o.action),o=o.next;while(o!==a);ln(i,e.memoizedState)||(_t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ep(){}function tp(t,e){var n=Ye,r=Xt(),a=e(),i=!ln(r.memoizedState,a);if(i&&(r.memoizedState=a,_t=!0),r=r.queue,Fc(ap.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,ci(9,rp.bind(null,n,r,a,e),void 0,null),dt===null)throw Error(J(349));Tr&30||np(n,e,a)}return a}function np(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rp(t,e,n,r){e.value=n,e.getSnapshot=r,ip(e)&&op(t)}function ap(t,e,n){return n(function(){ip(e)&&op(t)})}function ip(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function op(t){var e=En(t,1);e!==null&&sn(e,t,1,-1)}function _d(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:t},e.queue=t,t=t.dispatch=kg.bind(null,Ye,t),[e.memoizedState,t]}function ci(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sp(){return Xt().memoizedState}function so(t,e,n,r){var a=dn();Ye.flags|=t,a.memoizedState=ci(1|e,n,void 0,r===void 0?null:r)}function Ko(t,e,n,r){var a=Xt();r=r===void 0?null:r;var i=void 0;if(lt!==null){var o=lt.memoizedState;if(i=o.destroy,r!==null&&Pc(r,o.deps)){a.memoizedState=ci(e,n,i,r);return}}Ye.flags|=t,a.memoizedState=ci(1|e,n,i,r)}function kd(t,e){return so(8390656,8,t,e)}function Fc(t,e){return Ko(2048,8,t,e)}function lp(t,e){return Ko(4,2,t,e)}function cp(t,e){return Ko(4,4,t,e)}function up(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dp(t,e,n){return n=n!=null?n.concat([t]):null,Ko(4,4,up.bind(null,e,t),n)}function jc(){}function hp(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yp(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pp(t,e,n){return Tr&21?(ln(n,e)||(n=wy(),Ye.lanes|=n,Sr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function Eg(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=_s.transition;_s.transition={};try{t(!1),e()}finally{Oe=n,_s.transition=r}}function fp(){return Xt().memoizedState}function _g(t,e,n){var r=Qn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gp(t))mp(e,n);else if(n=Xy(t,e,n,r),n!==null){var a=Ct();sn(n,t,r,a),vp(n,e,r)}}function kg(t,e,n){var r=Qn(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gp(t))mp(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,ln(l,o)){var c=e.interleaved;c===null?(a.next=a,Lc(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}n=Xy(t,e,a,r),n!==null&&(a=Ct(),sn(n,t,r,a),vp(n,e,r))}}function gp(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function mp(t,e){Ba=_o=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pc(t,n)}}var ko={readContext:Jt,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},qg={readContext:Jt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:kd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,so(4194308,4,up.bind(null,e,t),n)},useLayoutEffect:function(t,e){return so(4194308,4,t,e)},useInsertionEffect:function(t,e){return so(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_g.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:_d,useDebugValue:jc,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=_d(!1),e=t[0];return t=Eg.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,a=dn();if(We){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),dt===null)throw Error(J(349));Tr&30||np(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,kd(ap.bind(null,r,i,t),[t]),r.flags|=2048,ci(9,rp.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=dt.identifierPrefix;if(We){var n=Tn,r=Cn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=si++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Lg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pg={readContext:Jt,useCallback:hp,useContext:Jt,useEffect:Fc,useImperativeHandle:dp,useInsertionEffect:lp,useLayoutEffect:cp,useMemo:yp,useReducer:ks,useRef:sp,useState:function(){return ks(li)},useDebugValue:jc,useDeferredValue:function(t){var e=Xt();return pp(e,lt.memoizedState,t)},useTransition:function(){var t=ks(li)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:ep,useSyncExternalStore:tp,useId:fp,unstable_isNewReconciler:!1},Ng={readContext:Jt,useCallback:hp,useContext:Jt,useEffect:Fc,useImperativeHandle:dp,useInsertionEffect:lp,useLayoutEffect:cp,useMemo:yp,useReducer:qs,useRef:sp,useState:function(){return qs(li)},useDebugValue:jc,useDeferredValue:function(t){var e=Xt();return lt===null?e.memoizedState=t:pp(e,lt.memoizedState,t)},useTransition:function(){var t=qs(li)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:ep,useSyncExternalStore:tp,useId:fp,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ll(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),a=Qn(t),i=In(r,a);i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,a),e!==null&&(sn(e,t,a,r),io(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),a=Qn(t),i=In(r,a);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,a),e!==null&&(sn(e,t,a,r),io(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Qn(t),a=In(n,r);a.tag=2,e!=null&&(a.callback=e),e=Jn(t,a,r),e!==null&&(sn(e,t,r,n),io(e,t,r))}};function qd(t,e,n,r,a,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ti(n,r)||!ti(a,i):!0}function wp(t,e,n){var r=!1,a=tr,i=e.contextType;return typeof i=="object"&&i!==null?i=Jt(i):(a=qt(e)?br:xt.current,r=e.contextTypes,i=(r=r!=null)?ca(t,a):tr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Pd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function El(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},Ec(t);var i=e.contextType;typeof i=="object"&&i!==null?a.context=Jt(i):(i=qt(e)?br:xt.current,a.context=ca(t,i)),a.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ll(t,e,i,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Vo.enqueueReplaceState(a,a.state,null),Lo(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function ya(t,e){try{var n="",r=e;do n+=l0(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:a,digest:null}}function Ps(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _l(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mg=typeof WeakMap=="function"?WeakMap:Map;function Ap(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Po||(Po=!0,Hl=r),_l(t,e)},n}function xp(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){_l(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_l(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Nd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mg;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=Yg.bind(null,t,e,n),e.then(t,t))}function Md(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fd(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var Fg=kn.ReactCurrentOwner,_t=!1;function bt(t,e,n,r){e.child=t===null?Jy(e,null,n,r):da(e,t.child,n,r)}function jd(t,e,n,r,a){n=n.render;var i=e.ref;return ia(e,a),r=Nc(t,e,n,r,i,a),n=Mc(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,_n(t,e,a)):(We&&n&&bc(e),e.flags|=1,bt(t,e,r,a),e.child)}function Od(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!zc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,bp(t,e,i,r,a)):(t=ho(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ti,n(o,r)&&t.ref===e.ref)return _n(t,e,a)}return e.flags|=1,t=Zn(i,r),t.ref=e.ref,t.return=e,e.child=t}function bp(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(ti(i,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,_n(t,e,a)}return kl(t,e,n,r,a)}function Cp(t,e,n){var r=e.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Zr,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(Zr,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Be(Zr,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Be(Zr,Ft),Ft|=r;return bt(t,e,a,n),e.child}function Tp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kl(t,e,n,r,a){var i=qt(n)?br:xt.current;return i=ca(e,i),ia(e,a),n=Nc(t,e,n,r,i,a),r=Mc(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,_n(t,e,a)):(We&&r&&bc(e),e.flags|=1,bt(t,e,n,a),e.child)}function Gd(t,e,n,r,a){if(qt(n)){var i=!0;Co(e)}else i=!1;if(ia(e,a),e.stateNode===null)lo(t,e),wp(e,n,r),El(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jt(u):(u=qt(n)?br:xt.current,u=ca(e,u));var d=n.getDerivedStateFromProps,y=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Pd(e,o,r,u),jn=!1;var p=e.memoizedState;o.state=p,Lo(e,r,o,a),c=e.memoizedState,l!==r||p!==c||kt.current||jn?(typeof d=="function"&&(Ll(e,n,d,r),c=e.memoizedState),(l=jn||qd(e,n,l,r,p,c,u))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Qy(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:en(e.type,l),o.props=u,y=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jt(c):(c=qt(n)?br:xt.current,c=ca(e,c));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==y||p!==c)&&Pd(e,o,r,c),jn=!1,p=e.memoizedState,o.state=p,Lo(e,r,o,a);var v=e.memoizedState;l!==y||p!==v||kt.current||jn?(typeof h=="function"&&(Ll(e,n,h,r),v=e.memoizedState),(u=jn||qd(e,n,u,r,p,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ql(t,e,n,r,i,a)}function ql(t,e,n,r,a,i){Tp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&Td(e,n,!1),_n(t,e,i);r=e.stateNode,Fg.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=da(e,t.child,null,i),e.child=da(e,null,l,i)):bt(t,e,l,i),e.memoizedState=r.state,a&&Td(e,n,!0),e.child}function Sp(t){var e=t.stateNode;e.pendingContext?Cd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cd(t,e.context,!1),_c(t,e.containerInfo)}function Hd(t,e,n,r,a){return ua(),Tc(a),e.flags|=256,bt(t,e,n,r),e.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Nl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ip(t,e,n){var r=e.pendingProps,a=Ke.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Be(Ke,a&1),t===null)return Il(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Xo(o,r,0,null),t=Ar(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nl(n),e.memoizedState=Pl,t):Oc(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return jg(t,e,o,r,l,a,n);if(i){i=r.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Zn(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Zn(l,i):(i=Ar(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Nl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Pl,r}return i=t.child,t=i.sibling,r=Zn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Oc(t,e){return e=Xo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gi(t,e,n,r){return r!==null&&Tc(r),da(e,t.child,null,n),t=Oc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jg(t,e,n,r,a,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ps(Error(J(422))),Gi(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,a=e.mode,r=Xo({mode:"visible",children:r.children},a,0,null),i=Ar(i,a,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&da(e,t.child,null,o),e.child.memoizedState=Nl(o),e.memoizedState=Pl,i);if(!(e.mode&1))return Gi(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(J(419)),r=Ps(i,r,void 0),Gi(t,e,o,r)}if(l=(o&t.childLanes)!==0,_t||l){if(r=dt,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,En(t,a),sn(r,t,a,-1))}return Uc(),r=Ps(Error(J(421))),Gi(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Jg.bind(null,t),a._reactRetry=e,null):(t=i.treeContext,Gt=Yn(a.nextSibling),Ht=e,We=!0,an=null,t!==null&&(Wt[Kt++]=Cn,Wt[Kt++]=Tn,Wt[Kt++]=Cr,Cn=t.id,Tn=t.overflow,Cr=e),e=Oc(e,r.children),e.flags|=4096,e)}function Dd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rl(t.return,e,n)}function Ns(t,e,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Rp(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;if(bt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dd(t,n,e);else if(t.tag===19)Dd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&Eo(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),Ns(e,!1,a,n,i);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Eo(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}Ns(e,!0,n,null,i);break;case"together":Ns(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Og(t,e,n){switch(e.tag){case 3:Sp(e),ua();break;case 5:Zy(e);break;case 1:qt(e.type)&&Co(e);break;case 4:_c(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;Be(Io,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?Ip(t,e,n):(Be(Ke,Ke.current&1),t=_n(t,e,n),t!==null?t.sibling:null);Be(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Rp(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Be(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Cp(t,e,n)}return _n(t,e,n)}var Lp,Ml,Ep,_p;Lp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ml=function(){};Ep=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,mr(fn.current);var i=null;switch(n){case"input":a=rl(t,a),r=rl(t,r),i=[];break;case"select":a=Je({},a,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":a=ol(t,a),r=ol(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xo)}ll(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Va.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Va.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$e("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};_p=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ia(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Gg(t,e,n){var r=e.pendingProps;switch(Cc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return qt(e.type)&&bo(),wt(e),null;case 3:return r=e.stateNode,ha(),Ue(kt),Ue(xt),qc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ji(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&($l(an),an=null))),Ml(t,e),wt(e),null;case 5:kc(e);var a=mr(oi.current);if(n=e.type,t!==null&&e.stateNode!=null)Ep(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return wt(e),null}if(t=mr(fn.current),ji(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yn]=e,r[ai]=i,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(a=0;a<Ma.length;a++)$e(Ma[a],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Ju(r,i),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$e("invalid",r);break;case"textarea":Qu(r,i),$e("invalid",r)}ll(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Fi(r.textContent,l,t),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Fi(r.textContent,l,t),a=["children",""+l]):Va.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":Li(r),Xu(r,i,!0);break;case"textarea":Li(r),Zu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xo)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ay(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yn]=e,t[ai]=r,Lp(t,e,!1,!1),e.stateNode=t;e:{switch(o=cl(n,r),n){case"dialog":$e("cancel",t),$e("close",t),a=r;break;case"iframe":case"object":case"embed":$e("load",t),a=r;break;case"video":case"audio":for(a=0;a<Ma.length;a++)$e(Ma[a],t);a=r;break;case"source":$e("error",t),a=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),a=r;break;case"details":$e("toggle",t),a=r;break;case"input":Ju(t,r),a=rl(t,r),$e("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Je({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Qu(t,r),a=ol(t,r),$e("invalid",t);break;default:a=r}ll(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?sy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&iy(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ya(t,c):typeof c=="number"&&Ya(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Va.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$e("scroll",t):c!=null&&lc(t,i,c,o))}switch(n){case"input":Li(t),Xu(t,r,!1);break;case"textarea":Li(t),Zu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+er(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ta(t,!!r.multiple,i,!1):r.defaultValue!=null&&ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=xo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)_p(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=mr(oi.current),mr(fn.current),ji(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(i=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:Fi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return wt(e),null;case 13:if(Ue(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&Gt!==null&&e.mode&1&&!(e.flags&128))Vy(),ua(),e.flags|=98560,i=!1;else if(i=ji(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[yn]=e}else ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),i=!1}else an!==null&&($l(an),an=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?ct===0&&(ct=3):Uc())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return ha(),Ml(t,e),t===null&&ni(e.stateNode.containerInfo),wt(e),null;case 10:return Rc(e.type._context),wt(e),null;case 17:return qt(e.type)&&bo(),wt(e),null;case 19:if(Ue(Ke),i=e.memoizedState,i===null)return wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ia(i,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Eo(t),o!==null){for(e.flags|=128,Ia(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Ke,Ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&rt()>pa&&(e.flags|=128,r=!0,Ia(i,!1),e.lanes=4194304)}else{if(!r)if(t=Eo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ia(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return wt(e),null}else 2*rt()-i.renderingStartTime>pa&&n!==1073741824&&(e.flags|=128,r=!0,Ia(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rt(),e.sibling=null,n=Ke.current,Be(Ke,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return $c(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function Hg(t,e){switch(Cc(e),e.tag){case 1:return qt(e.type)&&bo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ha(),Ue(kt),Ue(xt),qc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kc(e),null;case 13:if(Ue(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Ke),null;case 4:return ha(),null;case 10:return Rc(e.type._context),null;case 22:case 23:return $c(),null;case 24:return null;default:return null}}var Hi=!1,At=!1,Dg=typeof WeakSet=="function"?WeakSet:Set,se=null;function Qr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function Fl(t,e,n){try{n()}catch(r){et(t,e,r)}}var Bd=!1;function Bg(t,e){if(wl=vo,t=My(),xc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,y=t,p=null;t:for(;;){for(var h;y!==n||a!==0&&y.nodeType!==3||(l=o+a),y!==i||r!==0&&y.nodeType!==3||(c=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(h=y.firstChild)!==null;)p=y,y=h;for(;;){if(y===t)break t;if(p===n&&++u===a&&(l=o),p===i&&++d===r&&(c=o),(h=y.nextSibling)!==null)break;y=p,p=y.parentNode}y=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Al={focusedElem:t,selectionRange:n},vo=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:en(e.type,w),C);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(S){et(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return v=Bd,Bd=!1,v}function $a(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&Fl(e,n,i)}a=a.next}while(a!==r)}}function Yo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kp(t){var e=t.alternate;e!==null&&(t.alternate=null,kp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[ai],delete e[Cl],delete e[Tg],delete e[Sg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qp(t){return t.tag===5||t.tag===3||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ol(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xo));else if(r!==4&&(t=t.child,t!==null))for(Ol(t,e,n),t=t.sibling;t!==null;)Ol(t,e,n),t=t.sibling}function Gl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gl(t,e,n),t=t.sibling;t!==null;)Gl(t,e,n),t=t.sibling}var ft=null,nn=!1;function Nn(t,e,n){for(n=n.child;n!==null;)Pp(t,e,n),n=n.sibling}function Pp(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Do,n)}catch{}switch(n.tag){case 5:At||Qr(n,e);case 6:var r=ft,a=nn;ft=null,Nn(t,e,n),ft=r,nn=a,ft!==null&&(nn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(nn?(t=ft,n=n.stateNode,t.nodeType===8?Rs(t.parentNode,n):t.nodeType===1&&Rs(t,n),Za(t)):Rs(ft,n.stateNode));break;case 4:r=ft,a=nn,ft=n.stateNode.containerInfo,nn=!0,Nn(t,e,n),ft=r,nn=a;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fl(n,e,o),a=a.next}while(a!==r)}Nn(t,e,n);break;case 1:if(!At&&(Qr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){et(n,e,l)}Nn(t,e,n);break;case 21:Nn(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,Nn(t,e,n),At=r):Nn(t,e,n);break;default:Nn(t,e,n)}}function Ud(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Dg),e.forEach(function(r){var a=Xg.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ft=l.stateNode,nn=!1;break e;case 3:ft=l.stateNode.containerInfo,nn=!0;break e;case 4:ft=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(ft===null)throw Error(J(160));Pp(i,o,a),ft=null,nn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){et(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Np(e,t),e=e.sibling}function Np(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),un(t),r&4){try{$a(3,t,t.return),Yo(3,t)}catch(w){et(t,t.return,w)}try{$a(5,t,t.return)}catch(w){et(t,t.return,w)}}break;case 1:Qt(e,t),un(t),r&512&&n!==null&&Qr(n,n.return);break;case 5:if(Qt(e,t),un(t),r&512&&n!==null&&Qr(n,n.return),t.flags&32){var a=t.stateNode;try{Ya(a,"")}catch(w){et(t,t.return,w)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ny(a,i),cl(l,o);var u=cl(l,i);for(o=0;o<c.length;o+=2){var d=c[o],y=c[o+1];d==="style"?sy(a,y):d==="dangerouslySetInnerHTML"?iy(a,y):d==="children"?Ya(a,y):lc(a,d,y,u)}switch(l){case"input":al(a,i);break;case"textarea":ry(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?ta(a,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?ta(a,!!i.multiple,i.defaultValue,!0):ta(a,!!i.multiple,i.multiple?[]:"",!1))}a[ai]=i}catch(w){et(t,t.return,w)}}break;case 6:if(Qt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(J(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(w){et(t,t.return,w)}}break;case 3:if(Qt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Za(e.containerInfo)}catch(w){et(t,t.return,w)}break;case 4:Qt(e,t),un(t);break;case 13:Qt(e,t),un(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Dc=rt())),r&4&&Ud(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(At=(u=At)||d,Qt(e,t),At=u):Qt(e,t),un(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(y=se=d;se!==null;){switch(p=se,h=p.child,p.tag){case 0:case 11:case 14:case 15:$a(4,p,p.return);break;case 1:Qr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){et(r,n,w)}}break;case 5:Qr(p,p.return);break;case 22:if(p.memoizedState!==null){Wd(y);continue}}h!==null?(h.return=p,se=h):Wd(y)}d=d.sibling}e:for(d=null,y=t;;){if(y.tag===5){if(d===null){d=y;try{a=y.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,c=y.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=oy("display",o))}catch(w){et(t,t.return,w)}}}else if(y.tag===6){if(d===null)try{y.stateNode.nodeValue=u?"":y.memoizedProps}catch(w){et(t,t.return,w)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;d===y&&(d=null),y=y.return}d===y&&(d=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Qt(e,t),un(t),r&4&&Ud(t);break;case 21:break;default:Qt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qp(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ya(a,""),r.flags&=-33);var i=$d(t);Gl(t,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=$d(t);Ol(t,l,o);break;default:throw Error(J(161))}}catch(c){et(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $g(t,e,n){se=t,Mp(t)}function Mp(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var a=se,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Hi;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||At;l=Hi;var u=At;if(Hi=o,(At=c)&&!u)for(se=a;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?Kd(a):c!==null?(c.return=o,se=c):Kd(a);for(;i!==null;)se=i,Mp(i),i=i.sibling;se=a,Hi=l,At=u}zd(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,se=i):zd(t)}}function zd(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Yo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ed(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ed(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var y=d.dehydrated;y!==null&&Za(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}At||e.flags&512&&jl(e)}catch(p){et(e,e.return,p)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Wd(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Kd(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yo(4,e)}catch(c){et(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(c){et(e,a,c)}}var i=e.return;try{jl(e)}catch(c){et(e,i,c)}break;case 5:var o=e.return;try{jl(e)}catch(c){et(e,o,c)}}}catch(c){et(e,e.return,c)}if(e===t){se=null;break}var l=e.sibling;if(l!==null){l.return=e.return,se=l;break}se=e.return}}var Ug=Math.ceil,qo=kn.ReactCurrentDispatcher,Gc=kn.ReactCurrentOwner,Yt=kn.ReactCurrentBatchConfig,ke=0,dt=null,it=null,gt=0,Ft=0,Zr=rr(0),ct=0,ui=null,Sr=0,Jo=0,Hc=0,Ua=null,Et=null,Dc=0,pa=1/0,An=null,Po=!1,Hl=null,Xn=null,Di=!1,Un=null,No=0,za=0,Dl=null,co=-1,uo=0;function Ct(){return ke&6?rt():co!==-1?co:co=rt()}function Qn(t){return t.mode&1?ke&2&&gt!==0?gt&-gt:Rg.transition!==null?(uo===0&&(uo=wy()),uo):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Iy(t.type)),t):1}function sn(t,e,n,r){if(50<za)throw za=0,Dl=null,Error(J(185));wi(t,n,r),(!(ke&2)||t!==dt)&&(t===dt&&(!(ke&2)&&(Jo|=n),ct===4&&Hn(t,gt)),Pt(t,r),n===1&&ke===0&&!(e.mode&1)&&(pa=rt()+500,Wo&&ar()))}function Pt(t,e){var n=t.callbackNode;R0(t,e);var r=mo(t,t===dt?gt:0);if(r===0)n!==null&&nd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nd(n),e===1)t.tag===0?Ig(Vd.bind(null,t)):zy(Vd.bind(null,t)),bg(function(){!(ke&6)&&ar()}),n=null;else{switch(Ay(r)){case 1:n=yc;break;case 4:n=my;break;case 16:n=go;break;case 536870912:n=vy;break;default:n=go}n=$p(n,Fp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Fp(t,e){if(co=-1,uo=0,ke&6)throw Error(J(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var r=mo(t,t===dt?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mo(t,r);else{e=r;var a=ke;ke|=2;var i=Op();(dt!==t||gt!==e)&&(An=null,pa=rt()+500,wr(t,e));do try{Kg();break}catch(l){jp(t,l)}while(1);Ic(),qo.current=i,ke=a,it!==null?e=0:(dt=null,gt=0,e=ct)}if(e!==0){if(e===2&&(a=pl(t),a!==0&&(r=a,e=Bl(t,a))),e===1)throw n=ui,wr(t,0),Hn(t,r),Pt(t,rt()),n;if(e===6)Hn(t,r);else{if(a=t.current.alternate,!(r&30)&&!zg(a)&&(e=Mo(t,r),e===2&&(i=pl(t),i!==0&&(r=i,e=Bl(t,i))),e===1))throw n=ui,wr(t,0),Hn(t,r),Pt(t,rt()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:ur(t,Et,An);break;case 3:if(Hn(t,r),(r&130023424)===r&&(e=Dc+500-rt(),10<e)){if(mo(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=bl(ur.bind(null,t,Et,An),e);break}ur(t,Et,An);break;case 4:if(Hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-on(r);i=1<<o,o=e[o],o>a&&(a=o),r&=~i}if(r=a,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ug(r/1960))-r,10<r){t.timeoutHandle=bl(ur.bind(null,t,Et,An),r);break}ur(t,Et,An);break;case 5:ur(t,Et,An);break;default:throw Error(J(329))}}}return Pt(t,rt()),t.callbackNode===n?Fp.bind(null,t):null}function Bl(t,e){var n=Ua;return t.current.memoizedState.isDehydrated&&(wr(t,e).flags|=256),t=Mo(t,e),t!==2&&(e=Et,Et=n,e!==null&&$l(e)),t}function $l(t){Et===null?Et=t:Et.push.apply(Et,t)}function zg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!ln(i(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~Hc,e&=~Jo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function Vd(t){if(ke&6)throw Error(J(327));oa();var e=mo(t,0);if(!(e&1))return Pt(t,rt()),null;var n=Mo(t,e);if(t.tag!==0&&n===2){var r=pl(t);r!==0&&(e=r,n=Bl(t,r))}if(n===1)throw n=ui,wr(t,0),Hn(t,e),Pt(t,rt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ur(t,Et,An),Pt(t,rt()),null}function Bc(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(pa=rt()+500,Wo&&ar())}}function Ir(t){Un!==null&&Un.tag===0&&!(ke&6)&&oa();var e=ke;ke|=1;var n=Yt.transition,r=Oe;try{if(Yt.transition=null,Oe=1,t)return t()}finally{Oe=r,Yt.transition=n,ke=e,!(ke&6)&&ar()}}function $c(){Ft=Zr.current,Ue(Zr)}function wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xg(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Cc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bo();break;case 3:ha(),Ue(kt),Ue(xt),qc();break;case 5:kc(r);break;case 4:ha();break;case 13:Ue(Ke);break;case 19:Ue(Ke);break;case 10:Rc(r.type._context);break;case 22:case 23:$c()}n=n.return}if(dt=t,it=t=Zn(t.current,null),gt=Ft=e,ct=0,ui=null,Hc=Jo=Sr=0,Et=Ua=null,gr!==null){for(e=0;e<gr.length;e++)if(n=gr[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}gr=null}return t}function jp(t,e){do{var n=it;try{if(Ic(),oo.current=ko,_o){for(var r=Ye.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}_o=!1}if(Tr=0,ut=lt=Ye=null,Ba=!1,si=0,Gc.current=null,n===null||n.return===null){ct=1,ui=e,it=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=gt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,y=d.tag;if(!(d.mode&1)&&(y===0||y===11||y===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Md(o);if(h!==null){h.flags&=-257,Fd(h,o,l,i,e),h.mode&1&&Nd(i,u,e),e=h,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){Nd(i,u,e),Uc();break e}c=Error(J(426))}}else if(We&&l.mode&1){var C=Md(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Fd(C,o,l,i,e),Tc(ya(c,l));break e}}i=c=ya(c,l),ct!==4&&(ct=2),Ua===null?Ua=[i]:Ua.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Ap(i,c,e);Ld(i,g);break e;case 1:l=c;var m=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Xn===null||!Xn.has(f)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=xp(i,l,e);Ld(i,S);break e}}i=i.return}while(i!==null)}Hp(n)}catch(A){e=A,it===n&&n!==null&&(it=n=n.return);continue}break}while(1)}function Op(){var t=qo.current;return qo.current=ko,t===null?ko:t}function Uc(){(ct===0||ct===3||ct===2)&&(ct=4),dt===null||!(Sr&268435455)&&!(Jo&268435455)||Hn(dt,gt)}function Mo(t,e){var n=ke;ke|=2;var r=Op();(dt!==t||gt!==e)&&(An=null,wr(t,e));do try{Wg();break}catch(a){jp(t,a)}while(1);if(Ic(),ke=n,qo.current=r,it!==null)throw Error(J(261));return dt=null,gt=0,ct}function Wg(){for(;it!==null;)Gp(it)}function Kg(){for(;it!==null&&!v0();)Gp(it)}function Gp(t){var e=Bp(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?Hp(t):it=e,Gc.current=null}function Hp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hg(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(n=Gg(n,e,Ft),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ct===0&&(ct=5)}function ur(t,e,n){var r=Oe,a=Yt.transition;try{Yt.transition=null,Oe=1,Vg(t,e,n,r)}finally{Yt.transition=a,Oe=r}return null}function Vg(t,e,n,r){do oa();while(Un!==null);if(ke&6)throw Error(J(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(L0(t,i),t===dt&&(it=dt=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Di||(Di=!0,$p(go,function(){return oa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=Oe;Oe=1;var l=ke;ke|=4,Gc.current=null,Bg(t,n),Np(n,t),pg(Al),vo=!!wl,Al=wl=null,t.current=n,$g(n),w0(),ke=l,Oe=o,Yt.transition=i}else t.current=n;if(Di&&(Di=!1,Un=t,No=a),i=t.pendingLanes,i===0&&(Xn=null),b0(n.stateNode),Pt(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Po)throw Po=!1,t=Hl,Hl=null,t;return No&1&&t.tag!==0&&oa(),i=t.pendingLanes,i&1?t===Dl?za++:(za=0,Dl=t):za=0,ar(),null}function oa(){if(Un!==null){var t=Ay(No),e=Yt.transition,n=Oe;try{if(Yt.transition=null,Oe=16>t?16:t,Un===null)var r=!1;else{if(t=Un,Un=null,No=0,ke&6)throw Error(J(331));var a=ke;for(ke|=4,se=t.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:$a(8,d,i)}var y=d.child;if(y!==null)y.return=d,se=y;else for(;se!==null;){d=se;var p=d.sibling,h=d.return;if(kp(d),d===u){se=null;break}if(p!==null){p.return=h,se=p;break}se=h}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$a(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,se=g;break e}se=i.return}}var m=t.current;for(se=m;se!==null;){o=se;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,se=f;else e:for(o=m;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yo(9,l)}}catch(A){et(l,l.return,A)}if(l===o){se=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,se=S;break e}se=l.return}}if(ke=a,ar(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Do,t)}catch{}r=!0}return r}finally{Oe=n,Yt.transition=e}}return!1}function Yd(t,e,n){e=ya(n,e),e=Ap(t,e,1),t=Jn(t,e,1),e=Ct(),t!==null&&(wi(t,1,e),Pt(t,e))}function et(t,e,n){if(t.tag===3)Yd(t,t,n);else for(;e!==null;){if(e.tag===3){Yd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=ya(n,t),t=xp(e,t,1),e=Jn(e,t,1),t=Ct(),e!==null&&(wi(e,1,t),Pt(e,t));break}}e=e.return}}function Yg(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(gt&n)===n&&(ct===4||ct===3&&(gt&130023424)===gt&&500>rt()-Dc?wr(t,0):Hc|=n),Pt(t,e)}function Dp(t,e){e===0&&(t.mode&1?(e=ki,ki<<=1,!(ki&130023424)&&(ki=4194304)):e=1);var n=Ct();t=En(t,e),t!==null&&(wi(t,e,n),Pt(t,n))}function Jg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Dp(t,n)}function Xg(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),Dp(t,n)}var Bp;Bp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,Og(t,e,n);_t=!!(t.flags&131072)}else _t=!1,We&&e.flags&1048576&&Wy(e,So,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lo(t,e),t=e.pendingProps;var a=ca(e,xt.current);ia(e,n),a=Nc(null,e,r,t,a,n);var i=Mc();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(r)?(i=!0,Co(e)):i=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ec(e),a.updater=Vo,e.stateNode=a,a._reactInternals=e,El(e,r,t,n),e=ql(null,e,r,!0,i,n)):(e.tag=0,We&&i&&bc(e),bt(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(lo(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=Zg(r),t=en(r,t),a){case 0:e=kl(null,e,r,t,n);break e;case 1:e=Gd(null,e,r,t,n);break e;case 11:e=jd(null,e,r,t,n);break e;case 14:e=Od(null,e,r,en(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:en(r,a),kl(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:en(r,a),Gd(t,e,r,a,n);case 3:e:{if(Sp(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,a=i.element,Qy(t,e),Lo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){a=ya(Error(J(423)),e),e=Hd(t,e,r,n,a);break e}else if(r!==a){a=ya(Error(J(424)),e),e=Hd(t,e,r,n,a);break e}else for(Gt=Yn(e.stateNode.containerInfo.firstChild),Ht=e,We=!0,an=null,n=Jy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ua(),r===a){e=_n(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return Zy(e),t===null&&Il(e),r=e.type,a=e.pendingProps,i=t!==null?t.memoizedProps:null,o=a.children,xl(r,a)?o=null:i!==null&&xl(r,i)&&(e.flags|=32),Tp(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&Il(e),null;case 13:return Ip(t,e,n);case 4:return _c(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=da(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:en(r,a),jd(t,e,r,a,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,i=e.memoizedProps,o=a.value,Be(Io,r._currentValue),r._currentValue=o,i!==null)if(ln(i.value,o)){if(i.children===a.children&&!kt.current){e=_n(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=In(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Rl(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Rl(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,ia(e,n),a=Jt(a),r=r(a),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,a=en(r,e.pendingProps),a=en(r.type,a),Od(t,e,r,a,n);case 15:return bp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:en(r,a),lo(t,e),e.tag=1,qt(r)?(t=!0,Co(e)):t=!1,ia(e,n),wp(e,r,a),El(e,r,a,n),ql(null,e,r,!0,t,n);case 19:return Rp(t,e,n);case 22:return Cp(t,e,n)}throw Error(J(156,e.tag))};function $p(t,e){return gy(t,e)}function Qg(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new Qg(t,e,n,r)}function zc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zg(t){if(typeof t=="function")return zc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uc)return 11;if(t===dc)return 14}return 2}function Zn(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ho(t,e,n,r,a,i){var o=2;if(r=t,typeof t=="function")zc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $r:return Ar(n.children,a,i,e);case cc:o=8,a|=8;break;case Zs:return t=Vt(12,n,e,a|2),t.elementType=Zs,t.lanes=i,t;case el:return t=Vt(13,n,e,a),t.elementType=el,t.lanes=i,t;case tl:return t=Vt(19,n,e,a),t.elementType=tl,t.lanes=i,t;case Zh:return Xo(n,a,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xh:o=10;break e;case Qh:o=9;break e;case uc:o=11;break e;case dc:o=14;break e;case Fn:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Vt(o,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function Ar(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function Xo(t,e,n,r){return t=Vt(22,t,r,e),t.elementType=Zh,t.lanes=n,t.stateNode={isHidden:!1},t}function Ms(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function Fs(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function em(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gs(0),this.expirationTimes=gs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Wc(t,e,n,r,a,i,o,l,c){return t=new em(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ec(i),t}function tm(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Br,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Up(t){if(!t)return tr;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(qt(n))return Uy(t,n,e)}return e}function zp(t,e,n,r,a,i,o,l,c){return t=Wc(n,r,!0,t,a,i,o,l,c),t.context=Up(null),n=t.current,r=Ct(),a=Qn(n),i=In(r,a),i.callback=e??null,Jn(n,i,a),t.current.lanes=a,wi(t,a,r),Pt(t,r),t}function Qo(t,e,n,r){var a=e.current,i=Ct(),o=Qn(a);return n=Up(n),e.context===null?e.context=n:e.pendingContext=n,e=In(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jn(a,e,o),t!==null&&(sn(t,a,o,i),io(t,a,o)),o}function Fo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kc(t,e){Jd(t,e),(t=t.alternate)&&Jd(t,e)}function nm(){return null}var Wp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vc(t){this._internalRoot=t}Zo.prototype.render=Vc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Qo(t,e,null,null)};Zo.prototype.unmount=Vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ir(function(){Qo(null,t,null,null)}),e[Ln]=null}};function Zo(t){this._internalRoot=t}Zo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gn.length&&e!==0&&e<Gn[n].priority;n++);Gn.splice(n,0,t),n===0&&Sy(t)}};function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function es(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xd(){}function rm(t,e,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Fo(o);i.call(u)}}var o=zp(e,r,t,0,null,!1,!1,"",Xd);return t._reactRootContainer=o,t[Ln]=o.current,ni(t.nodeType===8?t.parentNode:t),Ir(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Fo(c);l.call(u)}}var c=Wc(t,0,!1,null,null,!1,!1,"",Xd);return t._reactRootContainer=c,t[Ln]=c.current,ni(t.nodeType===8?t.parentNode:t),Ir(function(){Qo(e,c,n,r)}),c}function ts(t,e,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Fo(o);l.call(c)}}Qo(e,o,t,a)}else o=rm(n,e,t,a,r);return Fo(o)}xy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Na(e.pendingLanes);n!==0&&(pc(e,n|1),Pt(e,rt()),!(ke&6)&&(pa=rt()+500,ar()))}break;case 13:Ir(function(){var r=En(t,1);if(r!==null){var a=Ct();sn(r,t,1,a)}}),Kc(t,1)}};fc=function(t){if(t.tag===13){var e=En(t,134217728);if(e!==null){var n=Ct();sn(e,t,134217728,n)}Kc(t,134217728)}};by=function(t){if(t.tag===13){var e=Qn(t),n=En(t,e);if(n!==null){var r=Ct();sn(n,t,e,r)}Kc(t,e)}};Cy=function(){return Oe};Ty=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};dl=function(t,e,n){switch(e){case"input":if(al(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=zo(r);if(!a)throw Error(J(90));ty(r),al(r,a)}}}break;case"textarea":ry(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};uy=Bc;dy=Ir;var am={usingClientEntryPoint:!1,Events:[xi,Kr,zo,ly,cy,Bc]},Ra={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},im={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=py(t),t===null?null:t.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||nm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bi.isDisabled&&Bi.supportsFiber)try{Do=Bi.inject(im),pn=Bi}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=am;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yc(e))throw Error(J(200));return tm(t,e,null,n)};Bt.createRoot=function(t,e){if(!Yc(t))throw Error(J(299));var n=!1,r="",a=Wp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Wc(t,1,!1,null,null,n,!1,r,a),t[Ln]=e.current,ni(t.nodeType===8?t.parentNode:t),new Vc(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=py(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Ir(t)};Bt.hydrate=function(t,e,n){if(!es(e))throw Error(J(200));return ts(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Yc(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=Wp;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zp(e,null,t,1,n??null,a,!1,i,o),t[Ln]=e.current,ni(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Zo(e)};Bt.render=function(t,e,n){if(!es(e))throw Error(J(200));return ts(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!es(t))throw Error(J(40));return t._reactRootContainer?(Ir(function(){ts(null,null,t,!1,function(){t._reactRootContainer=null,t[Ln]=null})}),!0):!1};Bt.unstable_batchedUpdates=Bc;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!es(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return ts(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Kp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kp)}catch(t){console.error(t)}}Kp(),Kh.exports=Bt;var om=Kh.exports,Qd=om;Xs.createRoot=Qd.createRoot,Xs.hydrateRoot=Qd.hydrateRoot;const sm={version:"1.0",lastUpdated:"2026-01-18",description:"Unified airport database combining normal and emergency airports",usage:{normal:"Available for flight planning and diversion selection",emergency:"Only available for DIVERT emergency landing requests"},statistics:{totalAirports:461,normalAirports:83,emergencyAirports:378}},lm=[{iata:"ATL",icao:"KATL",name:"HartsfieldJackson Atlanta International Airport",latitude:33.6366998,longitude:-84.4280976,category:"4F",type:"normal",region:"american",runways:[{name:"08L/26R",length:12390,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:9e3,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:9e3,surface:"Asphalt",category:"Heavy"},{name:"10/28",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"11/29",length:9e3,surface:"Asphalt",category:"Heavy"}],city:"Atlanta",country:"United States",elevation:899,frequencies:[{type:"ATIS",frequency:125.55},{type:"Tower",frequency:119.1},{type:"Ground",frequency:121.9}]},{iata:"LAX",icao:"KLAX",name:"Los Angeles International Airport",latitude:33.9425011,longitude:-118.4079971,category:"4F",type:"normal",region:"american",runways:[{name:"06L/24R",length:12091,surface:"Asphalt",category:"Heavy"},{name:"06R/24L",length:10885,surface:"Asphalt",category:"Heavy"},{name:"07L/25R",length:8975,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:11095,surface:"Asphalt",category:"Heavy"},{name:"08/26",length:8926,surface:"Asphalt",category:"Heavy"}],city:"Los Angeles",country:"United States",elevation:128,frequencies:[{type:"ATIS",frequency:133.8},{type:"Tower",frequency:133.9},{type:"Ground",frequency:121.65}]},{iata:"ORD",icao:"KORD",name:"O'Hare International Airport",latitude:41.9786005,longitude:-87.9048004,category:"4F",type:"normal",region:"american",runways:[{name:"04L/22R",length:10800,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:13e3,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Chicago",country:"United States",elevation:668,frequencies:[{type:"ATIS",frequency:135.4},{type:"Tower",frequency:120.75},{type:"Ground",frequency:121.75}]},{iata:"DFW",icao:"KDFW",name:"Dallas-Fort Worth International Airport",latitude:32.8968,longitude:-97.0372,category:"4F",type:"normal",region:"american",runways:[{name:"01L/19R",length:13400,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:13400,surface:"Concrete",category:"Heavy"},{name:"09L/27R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"17L/35R",length:13400,surface:"Concrete",category:"Heavy"},{name:"17R/35L",length:13400,surface:"Concrete",category:"Heavy"}],city:"Dallas",country:"United States",elevation:607,frequencies:[{type:"ATIS",frequency:117},{type:"Tower",frequency:124.15},{type:"Ground",frequency:121.65}]},{iata:"YVR",icao:"CYVR",name:"Vancouver International Airport",latitude:49.1947002,longitude:-123.1832016,category:"4F",type:"normal",region:"american",runways:[{name:"08L/26R",length:10500,surface:"Concrete",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Concrete",category:"Heavy"},{name:"12/30",length:8e3,surface:"Concrete",category:"Heavy"}],city:"Vancouver",country:"Canada",elevation:30,frequencies:[{type:"ATIS",frequency:134.85},{type:"Tower",frequency:119.625},{type:"Ground",frequency:121.925}]},{iata:"YYZ",icao:"CYYZ",name:"Toronto Pearson International Airport",latitude:43.6772003,longitude:-79.6306992,category:"4F",type:"normal",region:"american",runways:[{name:"05/23",length:11120,surface:"Concrete",category:"Heavy"},{name:"06L/24R",length:1e4,surface:"Concrete",category:"Heavy"},{name:"06R/24L",length:1e4,surface:"Concrete",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Concrete",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Toronto",country:"Canada",elevation:568,frequencies:[{type:"ATIS",frequency:120.825},{type:"Tower",frequency:118.35},{type:"Ground",frequency:121.9}]},{iata:"MEX",icao:"MMMX",name:"Mexico City International Airport",latitude:19.4363003,longitude:-99.0720978,category:"4F",type:"normal",region:"american",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Mexico City",country:"Mexico",elevation:7306,frequencies:[{type:"ATIS",frequency:125.225},{type:"Tower",frequency:120.8},{type:"Ground",frequency:121.6}]},{iata:"DEN",icao:"KDEN",name:"Denver International Airport",latitude:39.8616982,longitude:-104.6731954,category:"4F",type:"normal",region:"american",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"17L/35R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"17R/35L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Denver",country:"United States",elevation:5420,frequencies:[{type:"ATIS",frequency:125.6},{type:"Tower",frequency:135.3},{type:"Ground",frequency:121.85}]},{iata:"JFK",icao:"KJFK",name:"John F. Kennedy International Airport",latitude:40.6397511,longitude:-73.7789256,category:"4F",type:"normal",region:"american",runways:[{name:"04L/22R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07L/25R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"13L/31R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"13R/31L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"New York",country:"United States",elevation:30,frequencies:[{type:"ATIS",frequency:128.725},{type:"Tower",frequency:119.1},{type:"Ground",frequency:121.9}]},{iata:"SFO",icao:"KSFO",name:"San Francisco International Airport",latitude:37.6189995,longitude:-122.375,category:"4F",type:"normal",region:"american",runways:[{name:"01L/19R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"19L/01R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"19R/01L",length:8e3,surface:"Asphalt",category:"Heavy"}],city:"San Francisco",country:"United States",elevation:13,frequencies:[{type:"ATIS",frequency:118.85},{type:"Tower",frequency:120.5},{type:"Ground",frequency:121.8}]},{iata:"SEA",icao:"KSEA",name:"Seattle-Tacoma International Airport",latitude:47.4490013,longitude:-122.3093987,category:"4F",type:"normal",region:"american",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16L/34R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16R/34L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Seattle",country:"United States",elevation:371,frequencies:[{type:"ATIS",frequency:128.225},{type:"Tower",frequency:118.875},{type:"Ground",frequency:121.675}]},{iata:"LAS",icao:"KLAS",name:"McCarran International Airport",latitude:36.0800991,longitude:-115.1522979,category:"4F",type:"normal",region:"american",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07L/25R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"19L/01R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"19R/01L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Las Vegas",country:"United States",elevation:2096,frequencies:[{type:"ATIS",frequency:131.75},{type:"Tower",frequency:120.05},{type:"Ground",frequency:121.775}]},{iata:"MIA",icao:"KMIA",name:"Miami International Airport",latitude:25.7931995,longitude:-80.2905959,category:"4F",type:"normal",region:"american",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Miami",country:"United States",elevation:33,frequencies:[{type:"ATIS",frequency:130},{type:"Tower",frequency:119.925},{type:"Ground",frequency:121.625}]},{iata:"IAH",icao:"KIAH",name:"George Bush Intercontinental Airport",latitude:29.9843998,longitude:-95.3414001,category:"4F",type:"normal",region:"american",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Houston",country:"United States",elevation:112,frequencies:[{type:"ATIS",frequency:125.9},{type:"Tower",frequency:120.625},{type:"Ground",frequency:121.925}]},{iata:"PHX",icao:"KPHX",name:"Phoenix Sky Harbor International Airport",latitude:33.4341993,longitude:-112.0119972,category:"4F",type:"normal",region:"american",runways:[{name:"07L/25R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Phoenix",country:"United States",elevation:1079,frequencies:[{type:"ATIS",frequency:132.575},{type:"Tower",frequency:119.15},{type:"Ground",frequency:121.775}]},{iata:"CLT",icao:"KCLT",name:"Charlotte Douglas International Airport",latitude:35.2140007,longitude:-80.9431998,category:"4F",type:"normal",region:"american",runways:[{name:"05L/23R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"05R/23L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Charlotte",country:"United States",elevation:702,frequencies:[{type:"ATIS",frequency:126.325},{type:"Tower",frequency:120.6},{type:"Ground",frequency:121.8}]},{iata:"BOS",icao:"KBOS",name:"Logan International Airport",latitude:42.3655999,longitude:-71.0091991,category:"4F",type:"normal",region:"american",runways:[{name:"04L/22R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:8e3,surface:"Asphalt",category:"Heavy"}],city:"Boston",country:"United States",elevation:19,frequencies:[{type:"ATIS",frequency:126.35},{type:"Tower",frequency:120.575},{type:"Ground",frequency:121.75}]},{iata:"EWR",icao:"KEWR",name:"Newark Liberty International Airport",latitude:40.6895001,longitude:-74.1744003,category:"4F",type:"normal",region:"american",runways:[{name:"04L/22R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"11L/29R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"11R/29L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Newark",country:"United States",elevation:79,frequencies:[{type:"ATIS",frequency:134.9},{type:"Tower",frequency:120.875},{type:"Ground",frequency:121.95}]},{iata:"DTW",icao:"KDTW",name:"Detroit Metropolitan Wayne County Airport",latitude:42.2123995,longitude:-83.3534012,category:"4F",type:"normal",region:"american",runways:[{name:"03L/21R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"03R/21L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Detroit",country:"United States",elevation:644,frequencies:[{type:"ATIS",frequency:130.6},{type:"Tower",frequency:120.55},{type:"Ground",frequency:121.6}]},{iata:"MSP",icao:"KMSP",name:"Minneapolis-Saint Paul International Airport",latitude:44.8819008,longitude:-93.2217987,category:"4F",type:"normal",region:"american",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12L/30R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12R/30L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"13L/31R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"13R/31L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Minneapolis",country:"United States",elevation:820,frequencies:[{type:"ATIS",frequency:126.425},{type:"Tower",frequency:118.95},{type:"Ground",frequency:121.875}]},{iata:"BWI",icao:"KBWI",name:"Baltimore/Washington International Thurgood Marshall Airport",latitude:39.1750002,longitude:-76.6689987,category:"4F",type:"normal",region:"american",runways:[{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Baltimore",country:"United States",elevation:152,frequencies:[{type:"ATIS",frequency:128.95},{type:"Tower",frequency:119.975},{type:"Ground",frequency:121.9}]},{iata:"PHL",icao:"KPHL",name:"Philadelphia International Airport",latitude:39.8718996,longitude:-75.2410965,category:"4F",type:"normal",region:"american",runways:[{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"17L/35R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"17R/35L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Philadelphia",country:"United States",elevation:75,frequencies:[{type:"ATIS",frequency:120.575},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.925}]},{iata:"STL",icao:"KSTL",name:"St. Louis Lambert International Airport",latitude:38.7483006,longitude:-90.3700027,category:"4F",type:"normal",region:"american",runways:[{name:"12L/30R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12R/30L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"St. Louis",country:"United States",elevation:564,frequencies:[{type:"ATIS",frequency:130.175},{type:"Tower",frequency:119.525},{type:"Ground",frequency:121.825}]},{iata:"DCA",icao:"KDCA",name:"Ronald Reagan Washington National Airport",latitude:38.8512993,longitude:-77.0372991,category:"4F",type:"normal",region:"american",runways:[{name:"01/19",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"15/33",length:7e3,surface:"Asphalt",category:"Heavy"}],city:"Washington",country:"United States",elevation:15,frequencies:[{type:"ATIS",frequency:125.625},{type:"Tower",frequency:119.575},{type:"Ground",frequency:121.875}]},{iata:"IAD",icao:"KIAD",name:"Washington Dulles International Airport",latitude:38.9530983,longitude:-77.4568987,category:"4F",type:"normal",region:"american",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12L/30R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12R/30L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Washington",country:"United States",elevation:262,frequencies:[{type:"ATIS",frequency:130.375},{type:"Tower",frequency:120.025},{type:"Ground",frequency:121.825}]},{iata:"MDW",icao:"KMDW",name:"Chicago Midway International Airport",latitude:41.7868004,longitude:-87.7521973,category:"4F",type:"normal",region:"american",runways:[{name:"13L/31R",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"13R/31L",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"22L/04R",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"22R/04L",length:7e3,surface:"Asphalt",category:"Heavy"}],city:"Chicago",country:"United States",elevation:619,frequencies:[{type:"ATIS",frequency:134},{type:"Tower",frequency:118.15},{type:"Ground",frequency:121.7}]},{iata:"SLC",icao:"KSLC",name:"Salt Lake City International Airport",latitude:40.7883987,longitude:-111.9770012,category:"4F",type:"normal",region:"american",runways:[{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16L/34R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16R/34L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Salt Lake City",country:"United States",elevation:4239,frequencies:[{type:"ATIS",frequency:120.75},{type:"Tower",frequency:118.025},{type:"Ground",frequency:121.65}]},{iata:"CVG",icao:"KCVG",name:"Cincinnati/Northern Kentucky International Airport",latitude:39.0488014,longitude:-84.6678991,category:"4F",type:"normal",region:"american",runways:[{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Cincinnati",country:"United States",elevation:860,frequencies:[{type:"ATIS",frequency:131.15},{type:"Tower",frequency:118.225},{type:"Ground",frequency:121.725}]},{iata:"MCO",icao:"KMCO",name:"Orlando International Airport",latitude:28.4293995,longitude:-81.3089981,category:"4F",type:"normal",region:"american",runways:[{name:"07L/25R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Orlando",country:"United States",elevation:118,frequencies:[{type:"ATIS",frequency:134.8},{type:"Tower",frequency:120.95},{type:"Ground",frequency:121.7}]},{iata:"FLL",icao:"KFLL",name:"Fort Lauderdale-Hollywood International Airport",latitude:26.0725994,longitude:-80.1527987,category:"4F",type:"normal",region:"american",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Fort Lauderdale",country:"United States",elevation:6,frequencies:[{type:"ATIS",frequency:128},{type:"Tower",frequency:118.925},{type:"Ground",frequency:121.875}]},{iata:"LHR",icao:"EGLL",name:"Heathrow Airport",latitude:51.4706001,longitude:-.461941,category:"4F",type:"normal",region:"european",runways:[{name:"09L/27R",length:12799,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:12799,surface:"Asphalt",category:"Heavy"}],city:"London",country:"United Kingdom",elevation:83,frequencies:[{type:"ATIS",frequency:128.075},{type:"Tower",frequency:118.5},{type:"Ground",frequency:121.9}]},{iata:"CDG",icao:"LFPG",name:"Charles de Gaulle International Airport",latitude:49.0096998,longitude:2.547799,category:"4F",type:"normal",region:"european",runways:[{name:"08L/26R",length:12009,surface:"Concrete",category:"Heavy"},{name:"08R/26L",length:12009,surface:"Concrete",category:"Heavy"},{name:"09L/27R",length:11811,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:11811,surface:"Concrete",category:"Heavy"},{name:"10/28",length:9843,surface:"Concrete",category:"Heavy"}],city:"Paris",country:"France",elevation:338,frequencies:[{type:"ATIS",frequency:127.125},{type:"Tower",frequency:118.6},{type:"Ground",frequency:121.8}]},{iata:"FRA",icao:"EDDF",name:"Frankfurt am Main International Airport",latitude:50.0331001,longitude:8.57055,category:"4F",type:"normal",region:"european",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18L/36R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18R/36L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"25C/07C",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Frankfurt",country:"Germany",elevation:318,frequencies:[{type:"ATIS",frequency:123.725},{type:"Tower",frequency:119.9},{type:"Ground",frequency:121.8}]},{iata:"MUC",icao:"EDDM",name:"Munich Airport",latitude:48.3538,longitude:11.7861,category:"4F",type:"normal",region:"european",runways:[{name:"08L/26R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"08R/26L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09/27",length:9843,surface:"Concrete",category:"Heavy"}],city:"Munich",country:"Germany",elevation:1490,frequencies:[{type:"ATIS",frequency:123.125},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.7}]},{iata:"ZRH",icao:"LSZH",name:"Zurich Airport",latitude:47.4647,longitude:8.54917,category:"4F",type:"normal",region:"european",runways:[{name:"10/28",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"16/34",length:9843,surface:"Asphalt",category:"Heavy"}],city:"Zurich",country:"Switzerland",elevation:1375,frequencies:[{type:"ATIS",frequency:128.525},{type:"Tower",frequency:118.1},{type:"Ground",frequency:121.9}]},{iata:"FCO",icao:"LIRF",name:"Leonardo da Vinci-Fiumicino Airport",latitude:41.7999,longitude:12.2516,category:"4F",type:"normal",region:"european",runways:[{name:"05L/23R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"16L/34R",length:9843,surface:"Asphalt",category:"Heavy"},{name:"16R/34L",length:9843,surface:"Asphalt",category:"Heavy"}],city:"Rome",country:"Italy",elevation:-3,frequencies:[{type:"ATIS",frequency:122.45},{type:"Tower",frequency:119.8},{type:"Ground",frequency:121.9}]},{iata:"BCN",icao:"LEBL",name:"Barcelona-El Prat Airport",latitude:41.2974,longitude:2.0781,category:"4F",type:"normal",region:"european",runways:[{name:"07L/25R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"09/27",length:9843,surface:"Asphalt",category:"Heavy"}],city:"Barcelona",country:"Spain",elevation:10,frequencies:[{type:"ATIS",frequency:121.85},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.7}]},{iata:"MAD",icao:"LEMD",name:"Adolfo Surez MadridBarajas Airport",latitude:40.4722,longitude:-3.56194,category:"4F",type:"normal",region:"european",runways:[{name:"18L/36R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"14L/32R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"14R/32L",length:12e3,surface:"Asphalt",category:"Heavy"}],city:"Madrid",country:"Spain",elevation:1949,frequencies:[{type:"ATIS",frequency:122.45},{type:"Tower",frequency:119.525},{type:"Ground",frequency:121.775}]},{iata:"IST",icao:"LTFM",name:"Istanbul Airport",latitude:41.2667,longitude:28.75,category:"4F",type:"normal",region:"european",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Istanbul",country:"Turkiye",elevation:279,frequencies:[{type:"ATIS",frequency:128.2},{type:"Tower",frequency:118.1},{type:"Ground",frequency:121.8}]},{iata:"DUB",icao:"EIDW",name:"Dublin Airport",latitude:53.4213,longitude:-6.27007,category:"4E",type:"normal",region:"european",runways:[{name:"10/28",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16/34",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Dublin",country:"Ireland",elevation:220,frequencies:[{type:"ATIS",frequency:126.075},{type:"Tower",frequency:118.05},{type:"Ground",frequency:121.65}]},{iata:"CPH",icao:"EKCH",name:"Copenhagen Airport",latitude:55.6181,longitude:12.6561,category:"4E",type:"normal",region:"european",runways:[{name:"04L/22R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09/27",length:9843,surface:"Asphalt",category:"Heavy"}],city:"Copenhagen",country:"Denmark",elevation:10,frequencies:[{type:"ATIS",frequency:126.25},{type:"Tower",frequency:118.525},{type:"Ground",frequency:121.925}]},{iata:"ARN",icao:"ESSA",name:"Stockholm Arlanda Airport",latitude:59.6519,longitude:17.9186,category:"4E",type:"normal",region:"european",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08/26",length:9843,surface:"Asphalt",category:"Heavy"}],city:"Stockholm",country:"Sweden",elevation:98,frequencies:[{type:"ATIS",frequency:132.775},{type:"Tower",frequency:120.425},{type:"Ground",frequency:121.7}]},{iata:"OSL",icao:"ENGM",name:"Oslo Gardermoen Airport",latitude:60.1939,longitude:11.07,category:"4E",type:"normal",region:"european",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Oslo",country:"Norway",elevation:0,frequencies:[{type:"ATIS",frequency:129.3},{type:"Tower",frequency:118.8},{type:"Ground",frequency:121.725}]},{iata:"PRG",icao:"LKPR",name:"Vclav Havel Airport Prague",latitude:50.1009,longitude:14.26,category:"4E",type:"normal",region:"european",runways:[{name:"06/24",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12/30",length:9843,surface:"Asphalt",category:"Heavy"}],city:"Prague",country:"Czech Republic",elevation:1200,frequencies:[{type:"ATIS",frequency:135.6},{type:"Tower",frequency:119.1},{type:"Ground",frequency:121.6}]},{iata:"AMS",icao:"EHAM",name:"Amsterdam Airport Schiphol",latitude:52.3086014,longitude:4.763889,category:"4F",type:"normal",region:"european",runways:[{name:"06/24",length:11483,surface:"Concrete",category:"Heavy"},{name:"18C/36C",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18R/36L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18L/36R",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Amsterdam",country:"Netherlands",elevation:23,frequencies:[{type:"ATIS",frequency:122.2},{type:"Tower",frequency:119.225},{type:"Ground",frequency:121.8}]},{iata:"MXP",icao:"LIMC",name:"Milan Malpensa Airport",latitude:45.6397,longitude:8.72167,category:"4F",type:"normal",region:"european",runways:[{name:"17L/35R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"17R/35L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"01/19",length:9843,surface:"Asphalt",category:"Heavy"}],city:"Milan",country:"Italy",elevation:755,frequencies:[{type:"ATIS",frequency:135},{type:"Tower",frequency:119.475},{type:"Ground",frequency:121.7}]},{iata:"LIS",icao:"LPPT",name:"Lisbon Portela Airport",latitude:38.7756,longitude:-9.135,category:"4F",type:"normal",region:"european",runways:[{name:"03/21",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"17/35",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Lisbon",country:"Portugal",elevation:328,frequencies:[{type:"ATIS",frequency:121.575},{type:"Tower",frequency:120.05},{type:"Ground",frequency:121.75}]},{iata:"PEK",icao:"ZBAA",name:"Beijing Capital International Airport",latitude:40.0800991,longitude:116.5899963,category:"4F",type:"normal",region:"asian",runways:[{name:"01/19",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Beijing",country:"China",elevation:177,frequencies:[{type:"ATIS",frequency:135.5},{type:"Tower",frequency:119.3},{type:"Ground",frequency:121.6}]},{iata:"HND",icao:"RJTT",name:"Haneda Airport",latitude:35.5494003,longitude:139.7799988,category:"4F",type:"normal",region:"asian",runways:[{name:"04/22",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"05/23",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"06/24",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Tokyo",country:"Japan",elevation:13,frequencies:[{type:"ATIS",frequency:126.55},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.8}]},{iata:"HKG",icao:"VHHH",name:"Hong Kong International Airport",latitude:22.3080006,longitude:113.9189987,category:"4F",type:"normal",region:"asian",runways:[{name:"07L/25R",length:12467,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12467,surface:"Concrete",category:"Heavy"}],city:"Hong Kong",country:"Hong Kong",elevation:20,frequencies:[{type:"ATIS",frequency:128.2},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.6}]},{iata:"PVG",icao:"ZSPD",name:"Shanghai Pudong International Airport",latitude:31.1433001,longitude:121.8050003,category:"4F",type:"normal",region:"asian",runways:[{name:"17L/35R",length:13123,surface:"Concrete",category:"Heavy"},{name:"17R/35L",length:13123,surface:"Concrete",category:"Heavy"},{name:"18L/36R",length:13123,surface:"Concrete",category:"Heavy"},{name:"18R/36L",length:13123,surface:"Concrete",category:"Heavy"}],city:"Shanghai",country:"China",elevation:13,frequencies:[{type:"ATIS",frequency:120.175},{type:"Tower",frequency:119.275},{type:"Ground",frequency:121.675}]},{iata:"CAN",icao:"ZGGG",name:"Guangzhou Baiyun International Airport",latitude:23.3958,longitude:113.3089981,category:"4F",type:"normal",region:"asian",runways:[{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02/20",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Guangzhou",country:"China",elevation:30,frequencies:[{type:"ATIS",frequency:133.075},{type:"Tower",frequency:120.175},{type:"Ground",frequency:121.9}]},{iata:"SIN",icao:"WSSS",name:"Changi Airport",latitude:1.3591,longitude:103.989,category:"4F",type:"normal",region:"asian",runways:[{name:"02L/20R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"05/23",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Singapore",country:"Singapore",elevation:43,frequencies:[{type:"ATIS",frequency:128.6},{type:"Tower",frequency:118.6},{type:"Ground",frequency:121.725}]},{iata:"ICN",icao:"RKSI",name:"Incheon International Airport",latitude:37.4602,longitude:126.4406,category:"4F",type:"normal",region:"asian",runways:[{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Seoul",country:"South Korea",elevation:20,frequencies:[{type:"ATIS",frequency:121},{type:"Tower",frequency:119.925},{type:"Ground",frequency:121.8}]},{iata:"BKK",icao:"VTBS",name:"Suvarnabhumi Airport",latitude:13.6899996,longitude:100.7400055,category:"4F",type:"normal",region:"asian",runways:[{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"03/21",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Bangkok",country:"Thailand",elevation:7,frequencies:[{type:"ATIS",frequency:127.8},{type:"Tower",frequency:118.1},{type:"Ground",frequency:121.7}]},{iata:"DEL",icao:"VIDP",name:"Indira Gandhi International Airport",latitude:28.5665,longitude:77.1031,category:"4F",type:"normal",region:"asian",runways:[{name:"09L/27R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"11/29",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Delhi",country:"India",elevation:751,frequencies:[{type:"ATIS",frequency:135.925},{type:"Tower",frequency:119.65},{type:"Ground",frequency:121.925}]},{iata:"BOM",icao:"VABB",name:"Chhatrapati Shivaji Maharaj International Airport",latitude:19.0886993,longitude:72.867897,category:"4F",type:"normal",region:"asian",runways:[{name:"09/27",length:1e4,surface:"Concrete",category:"Heavy"},{name:"14/32",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Mumbai",country:"India",elevation:13,frequencies:[{type:"ATIS",frequency:131.4},{type:"Tower",frequency:118.175},{type:"Ground",frequency:121.65}]},{iata:"KUL",icao:"WMKK",name:"Kuala Lumpur International Airport",latitude:2.7456,longitude:101.7092,category:"4F",type:"normal",region:"asian",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"15/33",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Kuala Lumpur",country:"Malaysia",elevation:60,frequencies:[{type:"ATIS",frequency:132.2},{type:"Tower",frequency:118.375},{type:"Ground",frequency:121.9}]},{iata:"TPE",icao:"RCTP",name:"Taiwan Taoyuan International Airport",latitude:25.0775995,longitude:121.2379989,category:"4F",type:"normal",region:"asian",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Taipei",country:"Taiwan",elevation:112,frequencies:[{type:"ATIS",frequency:128},{type:"Tower",frequency:119.15},{type:"Ground",frequency:121.65}]},{iata:"DOH",icao:"OTHH",name:"Hamad International Airport",latitude:25.2644,longitude:51.6033,category:"4F",type:"normal",region:"asian",runways:[{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Doha",country:"Qatar",elevation:10,frequencies:[{type:"ATIS",frequency:128.85},{type:"Tower",frequency:118.625},{type:"Ground",frequency:121.925}]},{iata:"DXB",icao:"OMDB",name:"Dubai International Airport",latitude:25.2528,longitude:55.3644,category:"4F",type:"normal",region:"asian",runways:[{name:"12L/30R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"12R/30L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"14/32",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Dubai",country:"United Arab Emirates",elevation:10,frequencies:[{type:"ATIS",frequency:131.7},{type:"Tower",frequency:118.75},{type:"Ground",frequency:120.35}]},{iata:"CGK",icao:"WIII",name:"Soekarno-Hatta International Airport",latitude:-6.125,longitude:106.65,category:"4F",type:"normal",region:"asian",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09/27",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Jakarta",country:"Indonesia",elevation:62,frequencies:[{type:"ATIS",frequency:126.25},{type:"Tower",frequency:120.5},{type:"Ground",frequency:121.8}]},{iata:"NRT",icao:"RJAA",name:"Narita International Airport",latitude:35.7647018,longitude:140.3860016,category:"4F",type:"normal",region:"asian",runways:[{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05/23",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Tokyo",country:"Japan",elevation:121,frequencies:[{type:"ATIS",frequency:123.525},{type:"Tower",frequency:120.675},{type:"Ground",frequency:121.6}]},{iata:"SZX",icao:"ZGSZ",name:"Shenzhen Bao'an International Airport",latitude:22.6399994,longitude:113.8100052,category:"4F",type:"normal",region:"asian",runways:[{name:"15L/33R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"15R/33L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01/19",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Shenzhen",country:"China",elevation:0,frequencies:[{type:"ATIS",frequency:128.9},{type:"Tower",frequency:119.75},{type:"Ground",frequency:121.625}]},{iata:"CTU",icao:"ZUUU",name:"Chengdu Shuangliu International Airport",latitude:30.5705002,longitude:103.9449997,category:"4F",type:"normal",region:"asian",runways:[{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Chengdu",country:"China",elevation:1608,frequencies:[{type:"ATIS",frequency:120.85},{type:"Tower",frequency:119.825},{type:"Ground",frequency:121.6}]},{iata:"WUH",icao:"ZHHH",name:"Wuhan Tianhe International Airport",latitude:30.7447004,longitude:114.2870026,category:"4F",type:"normal",region:"asian",runways:[{name:"04L/22R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"04R/22L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Wuhan",country:"China",elevation:69,frequencies:[{type:"ATIS",frequency:122.6},{type:"Tower",frequency:120.25},{type:"Ground",frequency:121.625}]},{iata:"XIY",icao:"ZLXY",name:"Xi'an Xianyang International Airport",latitude:34.3461001,longitude:108.7479935,category:"4F",type:"normal",region:"asian",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"12/30",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Xi'an",country:"China",elevation:1240,frequencies:[{type:"ATIS",frequency:131.225},{type:"Tower",frequency:119.15},{type:"Ground",frequency:121.675}]},{iata:"CGO",icao:"ZHCC",name:"Zhengzhou Xinzheng International Airport",latitude:34.5656996,longitude:113.8009949,category:"4F",type:"normal",region:"asian",runways:[{name:"09L/27R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Zhengzhou",country:"China",elevation:531,frequencies:[{type:"ATIS",frequency:130.675},{type:"Tower",frequency:118.575},{type:"Ground",frequency:121.925}]},{iata:"HGH",icao:"ZSHC",name:"Hangzhou Xiaoshan International Airport",latitude:30.2280998,longitude:120.3930054,category:"4F",type:"normal",region:"asian",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"19/01",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Hangzhou",country:"China",elevation:33,frequencies:[{type:"ATIS",frequency:134.2},{type:"Tower",frequency:118.225},{type:"Ground",frequency:121.9}]},{iata:"TSN",icao:"ZBTJ",name:"Tianjin Binhai International Airport",latitude:39.1300011,longitude:117.3600006,category:"4F",type:"normal",region:"asian",runways:[{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Tianjin",country:"China",elevation:10,frequencies:[{type:"ATIS",frequency:133},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.75}]},{iata:"CKG",icao:"ZUCK",name:"Chongqing Jiangbei International Airport",latitude:29.7177,longitude:106.6439972,category:"4F",type:"normal",region:"asian",runways:[{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"15/33",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Chongqing",country:"China",elevation:1348,frequencies:[{type:"ATIS",frequency:126.2},{type:"Tower",frequency:119},{type:"Ground",frequency:121.625}]},{iata:"NKG",icao:"ZSNJ",name:"Nanjing Lukou International Airport",latitude:31.9408005,longitude:118.7879944,category:"4F",type:"normal",region:"asian",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Nanjing",country:"China",elevation:59,frequencies:[{type:"ATIS",frequency:122.125},{type:"Tower",frequency:120.575},{type:"Ground",frequency:121.6}]},{iata:"SYD",icao:"YSSY",name:"Sydney Kingsford Smith Airport",latitude:-33.9461002,longitude:151.1772003,category:"4F",type:"normal",region:"other",runways:[{name:"07L/25R",length:11810,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:10500,surface:"Asphalt",category:"Heavy"},{name:"16/34",length:8e3,surface:"Asphalt",category:"Heavy"}],city:"Sydney",country:"Australia",elevation:7,frequencies:[{type:"ATIS",frequency:126.25},{type:"Tower",frequency:120.5},{type:"Ground",frequency:121.7}]},{iata:"MEL",icao:"YMML",name:"Melbourne Airport",latitude:-37.6698989,longitude:144.8439941,category:"4F",type:"normal",region:"other",runways:[{name:"09/27",length:10835,surface:"Asphalt",category:"Heavy"},{name:"16/34",length:9e3,surface:"Asphalt",category:"Heavy"},{name:"17/35",length:1e4,surface:"Asphalt",category:"Heavy"}],city:"Melbourne",country:"Australia",elevation:371,frequencies:[{type:"ATIS",frequency:129.225},{type:"Tower",frequency:119.2},{type:"Ground",frequency:121.775}]},{iata:"AKL",icao:"NZAA",name:"Auckland Airport",latitude:-37.0089001,longitude:174.780899,category:"4E",type:"normal",region:"other",runways:[{name:"05L/23R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"05R/23L",length:8e3,surface:"Asphalt",category:"Heavy"}],city:"Auckland",country:"New Zealand",elevation:23,frequencies:[{type:"ATIS",frequency:125.05},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.95}]},{iata:"GRU",icao:"SBGR",name:"So Paulo/Guarulhos International Airport",latitude:-23.4356003,longitude:-46.4730988,category:"4F",type:"normal",region:"other",runways:[{name:"09L/27R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"15/33",length:1e4,surface:"Concrete",category:"Heavy"}],city:"So Paulo",country:"Brazil",elevation:2457,frequencies:[{type:"ATIS",frequency:128.25},{type:"Tower",frequency:120.025},{type:"Ground",frequency:121.6}]},{iata:"EZE",icao:"SAEZ",name:"Ministro Pistarini International Airport",latitude:-34.8283005,longitude:-58.5371971,category:"4F",type:"normal",region:"other",runways:[{name:"11/29",length:12e3,surface:"Concrete",category:"Heavy"},{name:"17/35",length:1e4,surface:"Concrete",category:"Heavy"}],city:"Buenos Aires",country:"Argentina",elevation:66,frequencies:[{type:"ATIS",frequency:127.525},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.625}]},{iata:"SCL",icao:"SCEL",name:"Arturo Merino Bentez International Airport",latitude:-33.3930016,longitude:-70.7947006,category:"4F",type:"normal",region:"other",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"}],city:"Santiago",country:"Chile",elevation:1578,frequencies:[{type:"ATIS",frequency:135.125},{type:"Tower",frequency:119.475},{type:"Ground",frequency:121.85}]},{iata:"ABE",icao:"KABE",name:"Lehigh Valley International Airport",latitude:40.6523,longitude:-75.4404,category:"4C",type:"emergency",region:"american",runway:"18/36",runwayLength:7e3,runwayCode:"18/36",frequencies:[{type:"ATIS",frequency:125.1},{type:"Tower",frequency:120.6},{type:"Ground",frequency:121.825}]},{iata:"AGS",icao:"KAGS",name:"Augusta Regional Airport",latitude:33.4674,longitude:-81.9662,category:"4C",type:"emergency",region:"american",runway:"08/26",runwayLength:8e3,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:133.95},{type:"Tower",frequency:119.675},{type:"Ground",frequency:121.725}]},{iata:"ALB",icao:"KALB",name:"Albany International Airport",latitude:42.7485,longitude:-73.8003,category:"4C",type:"emergency",region:"american",runway:"01/19",runwayLength:8500,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:124.575},{type:"Tower",frequency:120.825},{type:"Ground",frequency:121.925}]},{iata:"ANC",icao:"PANC",name:"Ted Stevens Anchorage International Airport",latitude:61.1744,longitude:-149.9983,category:"4F",type:"emergency",region:"american",runway:"07L/25R",runwayLength:12e3,runwayCode:"07L/25R",frequencies:[{type:"ATIS",frequency:132.675},{type:"Tower",frequency:120.85},{type:"Ground",frequency:121.65}]},{iata:"ASE",icao:"KASE",name:"Aspen-Pitkin County Airport",latitude:39.2204,longitude:-106.8628,category:"3C",type:"emergency",region:"american",runway:"15/33",runwayLength:7800,runwayCode:"15/33",frequencies:[{type:"ATIS",frequency:124.975},{type:"Tower",frequency:119.3},{type:"Ground",frequency:121.8}]},{iata:"AUS",icao:"KAUS",name:"Austin-Bergstrom International Airport",latitude:30.1975,longitude:-97.6669,category:"4E",type:"emergency",region:"american",runway:"17L/35R",runwayLength:9e3,runwayCode:"17L/35R",frequencies:[{type:"ATIS",frequency:128.925},{type:"Tower",frequency:120.8},{type:"Ground",frequency:121.85}]},{iata:"AVL",icao:"KAVL",name:"Asheville Regional Airport",latitude:35.4362,longitude:-82.5429,category:"4C",type:"emergency",region:"american",runway:"16/34",runwayLength:8e3,runwayCode:"16/34",frequencies:[{type:"ATIS",frequency:130.025},{type:"Tower",frequency:120.05},{type:"Ground",frequency:121.7}]},{iata:"AVP",icao:"KAVP",name:"Wilkes-Barre/Scranton International Airport",latitude:41.3391,longitude:-75.7273,category:"4C",type:"emergency",region:"american",runway:"04/22",runwayLength:6500,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:124.75},{type:"Tower",frequency:119.725},{type:"Ground",frequency:121.85}]},{iata:"BDL",icao:"KBDL",name:"Bradley International Airport",latitude:41.9389,longitude:-72.6862,category:"4E",type:"emergency",region:"american",runway:"06/24",runwayLength:9500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:135.1},{type:"Tower",frequency:120.825},{type:"Ground",frequency:121.75}]},{iata:"BFL",icao:"KBFL",name:"Meadows Field Airport",latitude:35.2966,longitude:-119.0563,category:"4C",type:"emergency",region:"american",runway:"12L/30R",runwayLength:8500,runwayCode:"12L/30R",frequencies:[{type:"ATIS",frequency:128.975},{type:"Tower",frequency:120.975},{type:"Ground",frequency:121.725}]},{iata:"BGR",icao:"KBGR",name:"Bangor International Airport",latitude:44.8084,longitude:-68.8281,category:"4D",type:"emergency",region:"american",runway:"15/33",runwayLength:9e3,runwayCode:"15/33",frequencies:[{type:"ATIS",frequency:129.525},{type:"Tower",frequency:120.075},{type:"Ground",frequency:121.9}]},{iata:"BHM",icao:"KBHM",name:"Birmingham-Shuttlesworth International Airport",latitude:33.5629,longitude:-86.7535,category:"4D",type:"emergency",region:"american",runway:"06/24",runwayLength:8500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:120.55},{type:"Tower",frequency:118.625},{type:"Ground",frequency:121.65}]},{iata:"BIL",icao:"KBIL",name:"Billings Logan International Airport",latitude:45.8095,longitude:-108.537,category:"4D",type:"emergency",region:"american",runway:"10L/28R",runwayLength:8500,runwayCode:"10L/28R",frequencies:[{type:"ATIS",frequency:121.525},{type:"Tower",frequency:120.65},{type:"Ground",frequency:121.775}]},{iata:"BMI",icao:"KBMI",name:"Central Illinois Regional Airport",latitude:40.477,longitude:-88.916,category:"4C",type:"emergency",region:"american",runway:"02/20",runwayLength:6500,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:131.2},{type:"Tower",frequency:120.925},{type:"Ground",frequency:121.7}]},{iata:"BNA",icao:"KBNA",name:"Nashville International Airport",latitude:36.1634,longitude:-86.7812,category:"4E",type:"emergency",region:"american",runway:"02L/20R",runwayLength:8e3,runwayCode:"02L/20R",frequencies:[{type:"ATIS",frequency:121.05},{type:"Tower",frequency:118.975},{type:"Ground",frequency:121.925}]},{iata:"BOI",icao:"KBOI",name:"Boise Airport",latitude:43.5645,longitude:-116.223,category:"4D",type:"emergency",region:"american",runway:"10R/28L",runwayLength:8500,runwayCode:"10R/28L",frequencies:[{type:"ATIS",frequency:123.4},{type:"Tower",frequency:118.8},{type:"Ground",frequency:121.725}]},{iata:"BPT",icao:"KBPT",name:"Jack Brooks Regional Airport",latitude:29.9513,longitude:-94.0207,category:"4C",type:"emergency",region:"american",runway:"12/30",runwayLength:6500,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:129.65},{type:"Tower",frequency:119.2},{type:"Ground",frequency:121.95}]},{iata:"BRO",icao:"KBRO",name:"Brownsville/South Padre Island International Airport",latitude:25.9068,longitude:-97.4259,category:"4C",type:"emergency",region:"american",runway:"14L/32R",runwayLength:7e3,runwayCode:"14L/32R",frequencies:[{type:"ATIS",frequency:133.75},{type:"Tower",frequency:119.875},{type:"Ground",frequency:121.7}]},{iata:"BTV",icao:"KBTV",name:"Burlington International Airport",latitude:44.4718,longitude:-73.1533,category:"4D",type:"emergency",region:"american",runway:"15/33",runwayLength:8e3,runwayCode:"15/33",frequencies:[{type:"ATIS",frequency:129.725},{type:"Tower",frequency:118.25},{type:"Ground",frequency:121.75}]},{iata:"BZN",icao:"KBZN",name:"Bozeman Yellowstone International Airport",latitude:45.7774,longitude:-111.153,category:"4D",type:"emergency",region:"american",runway:"12/30",runwayLength:9e3,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:125.4},{type:"Tower",frequency:118.825},{type:"Ground",frequency:121.85}]},{iata:"CAK",icao:"KCAK",name:"Akron-Canton Airport",latitude:40.916,longitude:-81.4422,category:"4D",type:"emergency",region:"american",runway:"05/23",runwayLength:8e3,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:134.45},{type:"Tower",frequency:118.725},{type:"Ground",frequency:121.75}]},{iata:"CHA",icao:"KCHA",name:"Chattanooga Metropolitan Airport",latitude:35.0353,longitude:-85.2039,category:"4D",type:"emergency",region:"american",runway:"02/20",runwayLength:7500,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:130},{type:"Tower",frequency:119.225},{type:"Ground",frequency:121.65}]},{iata:"CHS",icao:"KCHS",name:"Charleston International Airport",latitude:32.8986,longitude:-80.0404,category:"4D",type:"emergency",region:"american",runway:"15/33",runwayLength:9e3,runwayCode:"15/33",frequencies:[{type:"ATIS",frequency:130.525},{type:"Tower",frequency:119.85},{type:"Ground",frequency:121.775}]},{iata:"CID",icao:"KCID",name:"The Eastern Iowa Airport",latitude:41.8847,longitude:-91.7011,category:"4D",type:"emergency",region:"american",runway:"09/27",runwayLength:8500,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:131.05},{type:"Tower",frequency:120.2},{type:"Ground",frequency:121.65}]},{iata:"CLE",icao:"KCLE",name:"Cleveland Hopkins International Airport",latitude:41.4114,longitude:-81.8497,category:"4E",type:"emergency",region:"american",runway:"06R/24L",runwayLength:9e3,runwayCode:"06R/24L",frequencies:[{type:"ATIS",frequency:126.425},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.9}]},{iata:"CLL",icao:"KCLL",name:"Easterwood Airport",latitude:30.7168,longitude:-96.3696,category:"4C",type:"emergency",region:"american",runway:"03/21",runwayLength:6500,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:123.725},{type:"Tower",frequency:118.075},{type:"Ground",frequency:121.625}]},{iata:"CMH",icao:"KCMH",name:"John Glenn Columbus International Airport",latitude:39.998,longitude:-82.8919,category:"4D",type:"emergency",region:"american",runway:"10R/28L",runwayLength:8e3,runwayCode:"10R/28L",frequencies:[{type:"ATIS",frequency:121.875},{type:"Tower",frequency:119.15},{type:"Ground",frequency:121.85}]},{iata:"COS",icao:"KCOS",name:"Colorado Springs Airport",latitude:38.8404,longitude:-104.7216,category:"4D",type:"emergency",region:"american",runway:"17L/35R",runwayLength:8500,runwayCode:"17L/35R",frequencies:[{type:"ATIS",frequency:130.35},{type:"Tower",frequency:118.3},{type:"Ground",frequency:121.675}]},{iata:"COU",icao:"KCOU",name:"Columbia Regional Airport",latitude:38.8181,longitude:-92.2197,category:"4C",type:"emergency",region:"american",runway:"13/31",runwayLength:6500,runwayCode:"13/31",frequencies:[{type:"ATIS",frequency:123.375},{type:"Tower",frequency:119.6},{type:"Ground",frequency:121.7}]},{iata:"CPR",icao:"KCPR",name:"Casper/Natrona County International Airport",latitude:42.898,longitude:-106.4634,category:"4D",type:"emergency",region:"american",runway:"03/21",runwayLength:8500,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:130.15},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.675}]},{iata:"CRW",icao:"KCRW",name:"Charleston Yeager Airport",latitude:38.3739,longitude:-81.5933,category:"4C",type:"emergency",region:"american",runway:"05/23",runwayLength:7e3,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:133.3},{type:"Tower",frequency:120},{type:"Ground",frequency:121.75}]},{iata:"CSG",icao:"KCSG",name:"Columbus Metropolitan Airport",latitude:32.5167,longitude:-84.9389,category:"4C",type:"emergency",region:"american",runway:"06/24",runwayLength:6500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:128.6},{type:"Tower",frequency:118.125},{type:"Ground",frequency:121.65}]},{iata:"CSP",icao:"KCSP",name:"Cape Girardeau Regional Airport",latitude:37.2264,longitude:-89.5708,category:"4C",type:"emergency",region:"american",runway:"02/20",runwayLength:6500,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:131},{type:"Tower",frequency:120.375},{type:"Ground",frequency:121.85}]},{iata:"CYS",icao:"KCYS",name:"Cheyenne Regional Airport",latitude:41.1558,longitude:-104.8117,category:"4C",type:"emergency",region:"american",runway:"09/27",runwayLength:8200,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:130.825},{type:"Tower",frequency:120.95},{type:"Ground",frequency:121.75}]},{iata:"DAB",icao:"KDAB",name:"Daytona Beach International Airport",latitude:29.1797,longitude:-81.0575,category:"4D",type:"emergency",region:"american",runway:"07L/25R",runwayLength:8e3,runwayCode:"07L/25R",frequencies:[{type:"ATIS",frequency:127.125},{type:"Tower",frequency:119.75},{type:"Ground",frequency:121.75}]},{iata:"DBQ",icao:"KDBQ",name:"Dubuque Regional Airport",latitude:42.3997,longitude:-90.7095,category:"4C",type:"emergency",region:"american",runway:"13/31",runwayLength:6500,runwayCode:"13/31",frequencies:[{type:"ATIS",frequency:124.675},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.75}]},{iata:"DLH",icao:"KDLH",name:"Duluth International Airport",latitude:46.8415,longitude:-92.1836,category:"4D",type:"emergency",region:"american",runway:"09/27",runwayLength:8500,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:134.25},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DSM",icao:"KDSM",name:"Des Moines International Airport",latitude:41.534,longitude:-93.6637,category:"4D",type:"emergency",region:"american",runway:"05/23",runwayLength:9e3,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:124.425},{type:"Tower",frequency:118.5},{type:"Ground",frequency:121.925}]},{iata:"ELM",icao:"KELM",name:"Elmira Corning Regional Airport",latitude:42.1599,longitude:-76.8916,category:"4C",type:"emergency",region:"american",runway:"06/24",runwayLength:6500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:124.15},{type:"Tower",frequency:119.275},{type:"Ground",frequency:121.9}]},{iata:"ERI",icao:"KERI",name:"Erie International Airport",latitude:42.0831,longitude:-80.1736,category:"4D",type:"emergency",region:"american",runway:"06/24",runwayLength:8e3,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:121.925},{type:"Tower",frequency:118.125},{type:"Ground",frequency:121.725}]},{iata:"ESC",icao:"KESC",name:"Escanaba County Airport",latitude:45.7228,longitude:-87.0339,category:"3C",type:"emergency",region:"american",runway:"09/27",runwayLength:5200,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:124.675},{type:"Tower",frequency:118.975},{type:"Ground",frequency:121.625}]},{iata:"EVV",icao:"KEVV",name:"Evansville Regional Airport",latitude:38.0412,longitude:-87.5325,category:"4D",type:"emergency",region:"american",runway:"04/22",runwayLength:8e3,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:126.725},{type:"Tower",frequency:118.175},{type:"Ground",frequency:121.9}]},{iata:"EYW",icao:"KEYW",name:"Key West International Airport",latitude:24.5567,longitude:-81.7518,category:"4C",type:"emergency",region:"american",runway:"09/27",runwayLength:8e3,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:120.65},{type:"Tower",frequency:120.575},{type:"Ground",frequency:121.8}]},{iata:"FAR",icao:"KFAR",name:"Hector International Airport",latitude:46.9187,longitude:-96.8197,category:"4D",type:"emergency",region:"american",runway:"09/27",runwayLength:9e3,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:128.575},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.65}]},{iata:"FCA",icao:"KFCA",name:"Glacier Park International Airport",latitude:48.3109,longitude:-114.2507,category:"4D",type:"emergency",region:"american",runway:"02/20",runwayLength:8500,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:133.875},{type:"Tower",frequency:120.45},{type:"Ground",frequency:121.875}]},{iata:"FHR",icao:"KFHR",name:"Friday Harbor Airport",latitude:48.5217,longitude:-123.0247,category:"3C",type:"emergency",region:"american",runway:"07/25",runwayLength:3400,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:122.9},{type:"Tower",frequency:119.575},{type:"Ground",frequency:121.775}]},{iata:"FLG",icao:"KFLG",name:"Flagstaff Pulliam Airport",latitude:35.1381,longitude:-111.6693,category:"4C",type:"emergency",region:"american",runway:"03/21",runwayLength:7e3,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:122.975},{type:"Tower",frequency:118.85},{type:"Ground",frequency:121.6}]},{iata:"FNT",icao:"KFNT",name:"Bishop International Airport",latitude:43.0034,longitude:-83.7443,category:"4D",type:"emergency",region:"american",runway:"05/23",runwayLength:8500,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:128.3},{type:"Tower",frequency:120.025},{type:"Ground",frequency:121.825}]},{iata:"FSD",icao:"KFSD",name:"Joe Foss Field Airport",latitude:43.5814,longitude:-96.7417,category:"4D",type:"emergency",region:"american",runway:"03/21",runwayLength:8500,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:126.125},{type:"Tower",frequency:120.675},{type:"Ground",frequency:121.75}]},{iata:"FSM",icao:"KFSM",name:"Fort Smith Regional Airport",latitude:35.3366,longitude:-94.3984,category:"4D",type:"emergency",region:"american",runway:"07/25",runwayLength:8e3,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:120.2},{type:"Tower",frequency:120.325},{type:"Ground",frequency:121.625}]},{iata:"FWA",icao:"KFWA",name:"Fort Wayne International Airport",latitude:40.9785,longitude:-85.1951,category:"4D",type:"emergency",region:"american",runway:"05/23",runwayLength:8e3,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:132.725},{type:"Tower",frequency:118.725},{type:"Ground",frequency:121.725}]},{iata:"GCK",icao:"KGCK",name:"Garden City Regional Airport",latitude:37.9303,longitude:-100.7244,category:"4C",type:"emergency",region:"american",runway:"17/35",runwayLength:6500,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:128.575},{type:"Tower",frequency:120.875},{type:"Ground",frequency:121.85}]},{iata:"GEG",icao:"KGEG",name:"Spokane International Airport",latitude:47.6589,longitude:-117.4383,category:"4C",type:"emergency",region:"american",runway:"03/21",runwayLength:9e3,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:121.45},{type:"Tower",frequency:119.2},{type:"Ground",frequency:121.925}]},{iata:"GFK",icao:"KGFK",name:"Grand Forks International Airport",latitude:47.9492,longitude:-97.1761,category:"4D",type:"emergency",region:"american",runway:"09L/27R",runwayLength:8500,runwayCode:"09L/27R",frequencies:[{type:"ATIS",frequency:128.15},{type:"Tower",frequency:120.925},{type:"Ground",frequency:121.775}]},{iata:"GSO",icao:"KGSO",name:"Piedmont Triad International Airport",latitude:36.1018,longitude:-79.9373,category:"4E",type:"emergency",region:"american",runway:"05/23",runwayLength:1e4,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:133.025},{type:"Tower",frequency:120.8},{type:"Ground",frequency:121.625}]},{iata:"HDN",icao:"KHDN",name:"Yampa Valley Regional Airport",latitude:40.4812,longitude:-107.2187,category:"3C",type:"emergency",region:"american",runway:"10/28",runwayLength:8e3,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:128.35},{type:"Tower",frequency:118.65},{type:"Ground",frequency:121.9}]},{iata:"HNL",icao:"PHNL",name:"Daniel K. Inouye International Airport",latitude:21.3245,longitude:-157.9251,category:"4F",type:"emergency",region:"american",runway:"08L/26R",runwayLength:12200,runwayCode:"08L/26R",frequencies:[{type:"ATIS",frequency:123.025},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.65}]},{iata:"HPN",icao:"KHPN",name:"Westchester County Airport",latitude:41.0669,longitude:-73.7076,category:"3C",type:"emergency",region:"american",runway:"01/19",runwayLength:6e3,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:132.875},{type:"Tower",frequency:118.925},{type:"Ground",frequency:121.8}]},{iata:"HSV",icao:"KHSV",name:"Huntsville International Airport",latitude:34.6403,longitude:-86.7736,category:"4E",type:"emergency",region:"american",runway:"18R/36L",runwayLength:12600,runwayCode:"18R/36L",frequencies:[{type:"ATIS",frequency:129.6},{type:"Tower",frequency:119.975},{type:"Ground",frequency:121.625}]},{iata:"ICT",icao:"KICT",name:"Wichita Dwight D. Eisenhower National Airport",latitude:37.6489,longitude:-97.4331,category:"4D",type:"emergency",region:"american",runway:"01L/19R",runwayLength:10300,runwayCode:"01L/19R",frequencies:[{type:"ATIS",frequency:120.425},{type:"Tower",frequency:118.4},{type:"Ground",frequency:121.9}]},{iata:"IND",icao:"KIND",name:"Indianapolis International Airport",latitude:39.7173,longitude:-86.2944,category:"4E",type:"emergency",region:"american",runway:"05L/23R",runwayLength:12e3,runwayCode:"05L/23R",frequencies:[{type:"ATIS",frequency:124.2},{type:"Tower",frequency:119.5},{type:"Ground",frequency:121.825}]},{iata:"JAX",icao:"KJAX",name:"Jacksonville International Airport",latitude:30.4941,longitude:-81.6879,category:"4E",type:"emergency",region:"american",runway:"07/25",runwayLength:1e4,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:120.925},{type:"Tower",frequency:120.55},{type:"Ground",frequency:121.95}]},{iata:"KSA",icao:"VOPB",name:"Kansai International Airport",latitude:34.4273,longitude:135.244,category:"4F",type:"emergency",region:"american",runway:"04R/22L",runwayLength:13e3,runwayCode:"04R/22L",frequencies:[{type:"ATIS",frequency:126.55},{type:"Tower",frequency:119.675},{type:"Ground",frequency:121.725}]},{iata:"LGB",icao:"KLGB",name:"Long Beach Airport",latitude:33.8177,longitude:-118.1516,category:"4C",type:"emergency",region:"american",runway:"07R/25L",runwayLength:1e4,runwayCode:"07R/25L",frequencies:[{type:"ATIS",frequency:121.15},{type:"Tower",frequency:120.225},{type:"Ground",frequency:121.65}]},{iata:"LIT",icao:"KLIT",name:"Bill and Hillary Clinton National Airport",latitude:34.7294,longitude:-92.2244,category:"4E",type:"emergency",region:"american",runway:"04L/22R",runwayLength:9e3,runwayCode:"04L/22R",frequencies:[{type:"ATIS",frequency:131.3},{type:"Tower",frequency:118.5},{type:"Ground",frequency:121.825}]},{iata:"LNK",icao:"KLNK",name:"Lincoln Airport",latitude:40.8507,longitude:-96.7544,category:"3C",type:"emergency",region:"american",runway:"14/32",runwayLength:12900,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:131.125},{type:"Tower",frequency:118.55},{type:"Ground",frequency:121.875}]},{iata:"LOU",icao:"KLOU",name:"B Bowman Airport",latitude:38.2291,longitude:-85.6637,category:"3C",type:"emergency",region:"american",runway:"06/24",runwayLength:5500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:131.925},{type:"Tower",frequency:118.95},{type:"Ground",frequency:121.925}]},{iata:"MCI",icao:"KMCI",name:"Kansas City International Airport",latitude:39.2976,longitude:-94.7139,category:"4E",type:"emergency",region:"american",runway:"01R/19L",runwayLength:10700,runwayCode:"01R/19L",frequencies:[{type:"ATIS",frequency:122.35},{type:"Tower",frequency:118.025},{type:"Ground",frequency:121.875}]},{iata:"MEM",icao:"KMEM",name:"Memphis International Airport",latitude:35.0424,longitude:-89.9767,category:"4F",type:"emergency",region:"american",runway:"18R/36L",runwayLength:11200,runwayCode:"18R/36L",frequencies:[{type:"ATIS",frequency:135.1},{type:"Tower",frequency:118.05},{type:"Ground",frequency:121.725}]},{iata:"MHT",icao:"KMHT",name:"Manchester-Boston Regional Airport",latitude:42.9326,longitude:-71.4358,category:"4D",type:"emergency",region:"american",runway:"06/24",runwayLength:9200,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:126.725},{type:"Tower",frequency:120.425},{type:"Ground",frequency:121.675}]},{iata:"MKE",icao:"KMKE",name:"Milwaukee Mitchell International Airport",latitude:42.9477,longitude:-87.8966,category:"4E",type:"emergency",region:"american",runway:"01L/19R",runwayLength:8400,runwayCode:"01L/19R",frequencies:[{type:"ATIS",frequency:135.85},{type:"Tower",frequency:119.2},{type:"Ground",frequency:121.625}]},{iata:"MSY",icao:"KMSY",name:"Louis Armstrong New Orleans International Airport",latitude:29.9934,longitude:-90.258,category:"4E",type:"emergency",region:"american",runway:"10/28",runwayLength:10100,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:123.55},{type:"Tower",frequency:120.625},{type:"Ground",frequency:121.775}]},{iata:"OAK",icao:"KOAK",name:"Oakland International Airport",latitude:37.7275,longitude:-122.2167,category:"4D",type:"emergency",region:"american",runway:"10R/28L",runwayLength:1e4,runwayCode:"10R/28L",frequencies:[{type:"ATIS",frequency:120.425},{type:"Tower",frequency:118.1},{type:"Ground",frequency:121.725}]},{iata:"OKC",icao:"KOKC",name:"Will Rogers World Airport",latitude:35.3931,longitude:-97.6009,category:"4E",type:"emergency",region:"american",runway:"17L/35R",runwayLength:9800,runwayCode:"17L/35R",frequencies:[{type:"ATIS",frequency:128.25},{type:"Tower",frequency:118.65},{type:"Ground",frequency:121.95}]},{iata:"OMA",icao:"KOMA",name:"Eppley Airfield",latitude:41.3032,longitude:-95.8936,category:"4E",type:"emergency",region:"american",runway:"03L/21R",runwayLength:9500,runwayCode:"03L/21R",frequencies:[{type:"ATIS",frequency:124.175},{type:"Tower",frequency:119.975},{type:"Ground",frequency:121.775}]},{iata:"PDX",icao:"KPDX",name:"Portland International Airport",latitude:45.5887,longitude:-122.5975,category:"4F",type:"emergency",region:"american",runway:"10L/28R",runwayLength:8200,runwayCode:"10L/28R",frequencies:[{type:"ATIS",frequency:126.875},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.625}]},{iata:"PIT",icao:"KPIT",name:"Pittsburgh International Airport",latitude:40.4914,longitude:-80.2329,category:"4E",type:"emergency",region:"american",runway:"10L/28R",runwayLength:11500,runwayCode:"10L/28R",frequencies:[{type:"ATIS",frequency:127.65},{type:"Tower",frequency:120.95},{type:"Ground",frequency:121.75}]},{iata:"PVD",icao:"KPVD",name:"T. F. Green Airport",latitude:41.7251,longitude:-71.434,category:"4D",type:"emergency",region:"american",runway:"05/23",runwayLength:8716,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:134.1},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.6}]},{iata:"PWM",icao:"KPWM",name:"Portland International Jetport",latitude:43.6465,longitude:-70.3087,category:"4D",type:"emergency",region:"american",runway:"11/29",runwayLength:7200,runwayCode:"11/29",frequencies:[{type:"ATIS",frequency:133.325},{type:"Tower",frequency:119.825},{type:"Ground",frequency:121.95}]},{iata:"RDU",icao:"KRDU",name:"Raleigh-Durham International Airport",latitude:35.8776,longitude:-78.7875,category:"4E",type:"emergency",region:"american",runway:"05L/23R",runwayLength:9e3,runwayCode:"05L/23R",frequencies:[{type:"ATIS",frequency:121.3},{type:"Tower",frequency:119},{type:"Ground",frequency:121.775}]},{iata:"RNO",icao:"KRNO",name:"Reno-Tahoe International Airport",latitude:39.4993,longitude:-119.7681,category:"4E",type:"emergency",region:"american",runway:"07L/25R",runwayLength:1e4,runwayCode:"07L/25R",frequencies:[{type:"ATIS",frequency:128.525},{type:"Tower",frequency:120.6},{type:"Ground",frequency:121.8}]},{iata:"RSW",icao:"KRSW",name:"Southwest Florida International Airport",latitude:26.5362,longitude:-81.7551,category:"4E",type:"emergency",region:"american",runway:"06/24",runwayLength:1e4,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:135.325},{type:"Tower",frequency:119.8},{type:"Ground",frequency:121.625}]},{iata:"SAT",icao:"KSAT",name:"San Antonio International Airport",latitude:29.5334,longitude:-98.4699,category:"4E",type:"emergency",region:"american",runway:"03L/21R",runwayLength:8500,runwayCode:"03L/21R",frequencies:[{type:"ATIS",frequency:125.7},{type:"Tower",frequency:120.05},{type:"Ground",frequency:121.65}]},{iata:"SBA",icao:"KSBA",name:"Santa Barbara Airport",latitude:34.4265,longitude:-119.8424,category:"4C",type:"emergency",region:"american",runway:"07/25",runwayLength:6500,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:129.9},{type:"Tower",frequency:120.9},{type:"Ground",frequency:121.95}]},{iata:"SCE",icao:"KSCE",name:"University Park Airport",latitude:40.8525,longitude:-77.8274,category:"3C",type:"emergency",region:"american",runway:"06/24",runwayLength:5100,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:135.925},{type:"Tower",frequency:118.575},{type:"Ground",frequency:121.95}]},{iata:"SDF",icao:"KSDF",name:"Louisville Muhammad Ali International Airport",latitude:38.1743,longitude:-85.736,category:"4E",type:"emergency",region:"american",runway:"17R/35L",runwayLength:12e3,runwayCode:"17R/35L",frequencies:[{type:"ATIS",frequency:128.1},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.9}]},{iata:"SGF",icao:"KSGF",name:"Springfield-Branson National Airport",latitude:37.2456,longitude:-93.3887,category:"4C",type:"emergency",region:"american",runway:"02/20",runwayLength:8e3,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:134.15},{type:"Tower",frequency:118.325},{type:"Ground",frequency:121.875}]},{iata:"SHV",icao:"KSHV",name:"Shreveport Regional Airport",latitude:32.4462,longitude:-93.8256,category:"4E",type:"emergency",region:"american",runway:"06/24",runwayLength:8500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:124},{type:"Tower",frequency:118.625},{type:"Ground",frequency:121.9}]},{iata:"SJC",icao:"KSJC",name:"San Jose International Airport",latitude:37.3639,longitude:-121.929,category:"4E",type:"emergency",region:"american",runway:"07L/25R",runwayLength:11e3,runwayCode:"07L/25R",frequencies:[{type:"ATIS",frequency:122.775},{type:"Tower",frequency:119.725},{type:"Ground",frequency:121.95}]},{iata:"SJU",icao:"TJSJ",name:"Luis Muoz Marn International Airport",latitude:18.4394,longitude:-66.0018,category:"4E",type:"emergency",region:"american",runway:"08/26",runwayLength:10040,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:134.85},{type:"Tower",frequency:118.4},{type:"Ground",frequency:121.8}]},{iata:"SMF",icao:"KSMF",name:"Sacramento International Airport",latitude:38.6911,longitude:-121.5837,category:"4E",type:"emergency",region:"american",runway:"16L/34R",runwayLength:8600,runwayCode:"16L/34R",frequencies:[{type:"ATIS",frequency:127.55},{type:"Tower",frequency:119.625},{type:"Ground",frequency:121.925}]},{iata:"SMJ",icao:"KSMJ",name:"Southwest Georgia Regional Airport",latitude:31.5356,longitude:-84.1941,category:"3C",type:"emergency",region:"american",runway:"04/22",runwayLength:5e3,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:135.625},{type:"Tower",frequency:118.45},{type:"Ground",frequency:121.8}]},{iata:"SPI",icao:"KSPI",name:"Abraham Lincoln Capital Airport",latitude:39.8441,longitude:-89.6779,category:"3C",type:"emergency",region:"american",runway:"04/22",runwayLength:6500,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:124},{type:"Tower",frequency:118.875},{type:"Ground",frequency:121.6}]},{iata:"SRQ",icao:"KSRQ",name:"Sarasota-Bradenton International Airport",latitude:27.3955,longitude:-82.5544,category:"4D",type:"emergency",region:"american",runway:"04/22",runwayLength:6800,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:125.3},{type:"Tower",frequency:120.325},{type:"Ground",frequency:121.875}]},{iata:"TPA",icao:"KTPA",name:"Tampa International Airport",latitude:27.9755,longitude:-82.5332,category:"4F",type:"emergency",region:"american",runway:"01L/19R",runwayLength:9e3,runwayCode:"01L/19R",frequencies:[{type:"ATIS",frequency:120.35},{type:"Tower",frequency:118.075},{type:"Ground",frequency:121.9}]},{iata:"TUL",icao:"KTUL",name:"Tulsa International Airport",latitude:36.1984,longitude:-95.8881,category:"4E",type:"emergency",region:"american",runway:"08L/26R",runwayLength:1e4,runwayCode:"08L/26R",frequencies:[{type:"ATIS",frequency:126.775},{type:"Tower",frequency:119.8},{type:"Ground",frequency:121.95}]},{iata:"TYS",icao:"KTYS",name:"McGhee Tyson Airport",latitude:35.8114,longitude:-83.994,category:"4E",type:"emergency",region:"american",runway:"05L/23R",runwayLength:9e3,runwayCode:"05L/23R",frequencies:[{type:"ATIS",frequency:126.475},{type:"Tower",frequency:120.65},{type:"Ground",frequency:121.8}]},{iata:"WRV",icao:"PWRV",name:"Whittier Airport",latitude:60.7875,longitude:-148.7169,category:"3C",type:"emergency",region:"american",runway:"01/19",runwayLength:5800,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:133.675},{type:"Tower",frequency:119.075},{type:"Ground",frequency:121.65}]},{iata:"YEG",icao:"CYEG",name:"Edmonton International Airport",latitude:53.3097,longitude:-113.5801,category:"4E",type:"emergency",region:"american",runway:"02/20",runwayLength:8500,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:125.25},{type:"Tower",frequency:118.6},{type:"Ground",frequency:121.7}]},{iata:"YHM",icao:"CYHM",name:"Hamilton International Airport",latitude:43.1734,longitude:-79.9377,category:"4C",type:"emergency",region:"american",runway:"06/24",runwayLength:6500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:133.875},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.8}]},{iata:"YMM",icao:"CYMM",name:"Fort McMurray Airport",latitude:56.6537,longitude:-111.2214,category:"3C",type:"emergency",region:"american",runway:"07/25",runwayLength:8e3,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:128.675},{type:"Tower",frequency:120.925},{type:"Ground",frequency:121.875}]},{iata:"YUL",icao:"CYUL",name:"Montreal-Pierre Elliott Trudeau International Airport",latitude:45.4706,longitude:-73.7497,category:"4E",type:"emergency",region:"american",runway:"06L/24R",runwayLength:9e3,runwayCode:"06L/24R",frequencies:[{type:"ATIS",frequency:126.175},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.725}]},{iata:"YWG",icao:"CYWG",name:"Winnipeg James Armstrong Richardson International Airport",latitude:49.9099,longitude:-97.2399,category:"4E",type:"emergency",region:"american",runway:"13/31",runwayLength:8500,runwayCode:"13/31",frequencies:[{type:"ATIS",frequency:128.275},{type:"Tower",frequency:118.625},{type:"Ground",frequency:121.825}]},{iata:"YXE",icao:"CYXE",name:"Saskatoon John G. Diefenbaker International Airport",latitude:52.1708,longitude:-106.7016,category:"4E",type:"emergency",region:"american",runway:"09/27",runwayLength:8100,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:128.2},{type:"Tower",frequency:118.125},{type:"Ground",frequency:121.675}]},{iata:"YYC",icao:"CYYC",name:"Calgary International Airport",latitude:51.0447,longitude:-114.0719,category:"4F",type:"emergency",region:"american",runway:"11/29",runwayLength:12600,runwayCode:"11/29",frequencies:[{type:"ATIS",frequency:128.175},{type:"Tower",frequency:118.9},{type:"Ground",frequency:121.625}]},{iata:"AAL",icao:"EKYT",name:"Aalborg Airport",latitude:57.0928,longitude:9.8496,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:8e3,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:120.525},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.725}]},{iata:"ACE",icao:"GCRR",name:"Lanzarote Airport",latitude:28.9455,longitude:-13.605,category:"4C",type:"emergency",region:"european",runway:"03/21",runwayLength:8200,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:128.425},{type:"Tower",frequency:120.15},{type:"Ground",frequency:121.775}]},{iata:"AGP",icao:"LEMG",name:"Mlaga-Costa del Sol Airport",latitude:36.6749,longitude:-4.4991,category:"4D",type:"emergency",region:"european",runway:"12/30",runwayLength:9e3,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:135.225},{type:"Tower",frequency:119.925},{type:"Ground",frequency:121.675}]},{iata:"AJA",icao:"LFKJ",name:"Ajaccio Napoleon Bonaparte Airport",latitude:41.9236,longitude:8.7932,category:"4C",type:"emergency",region:"european",runway:"01/19",runwayLength:6500,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:130.475},{type:"Tower",frequency:120.3},{type:"Ground",frequency:121.725}]},{iata:"ANR",icao:"EBAW",name:"Antwerp International Airport",latitude:51.2644,longitude:4.4603,category:"4C",type:"emergency",region:"european",runway:"11/29",runwayLength:5200,runwayCode:"11/29",frequencies:[{type:"ATIS",frequency:131},{type:"Tower",frequency:119.2},{type:"Ground",frequency:121.875}]},{iata:"AOI",icao:"LIPY",name:"Ancona-Falconara Airport",latitude:43.6163,longitude:13.3593,category:"4C",type:"emergency",region:"european",runway:"06/24",runwayLength:6500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:123.85},{type:"Tower",frequency:118.075},{type:"Ground",frequency:121.875}]},{iata:"AYT",icao:"LTAI",name:"Antalya Airport",latitude:36.8987,longitude:30.8005,category:"4F",type:"emergency",region:"european",runway:"18/36",runwayLength:1e4,runwayCode:"18/36",frequencies:[{type:"ATIS",frequency:124.1},{type:"Tower",frequency:120.075},{type:"Ground",frequency:121.825}]},{iata:"BDS",icao:"EIBD",name:"Brest Bretagne Airport",latitude:48.4487,longitude:-4.4183,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:6500,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:133.775},{type:"Tower",frequency:119.8},{type:"Ground",frequency:121.95}]},{iata:"BGY",icao:"LIME",name:"Milan Bergamo Airport",latitude:45.6739,longitude:9.7044,category:"4C",type:"emergency",region:"european",runway:"10/28",runwayLength:6500,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:133.55},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.6}]},{iata:"BHX",icao:"EGBB",name:"Birmingham Airport",latitude:52.4539,longitude:-1.748,category:"4D",type:"emergency",region:"european",runway:"15/33",runwayLength:8500,runwayCode:"15/33",frequencies:[{type:"ATIS",frequency:123.35},{type:"Tower",frequency:118.3},{type:"Ground",frequency:121.75}]},{iata:"BIQ",icao:"LFBZ",name:"Biarritz Pays Basque Airport",latitude:43.3015,longitude:-1.5311,category:"4C",type:"emergency",region:"european",runway:"09/27",runwayLength:6500,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:134.875},{type:"Tower",frequency:118.25},{type:"Ground",frequency:121.8}]},{iata:"BLL",icao:"EKBI",name:"Billund Airport",latitude:55.7404,longitude:9.1517,category:"4C",type:"emergency",region:"european",runway:"09/27",runwayLength:6500,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:120.35},{type:"Tower",frequency:120.25},{type:"Ground",frequency:121.675}]},{iata:"BLQ",icao:"LIPE",name:"Bologna Guglielmo Marconi Airport",latitude:44.5354,longitude:11.2887,category:"4D",type:"emergency",region:"european",runway:"12/30",runwayLength:8500,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:131.925},{type:"Tower",frequency:120.225},{type:"Ground",frequency:121.75}]},{iata:"BOJ",icao:"LBBG",name:"Burgas Airport",latitude:42.5679,longitude:27.5152,category:"4D",type:"emergency",region:"european",runway:"04/22",runwayLength:8200,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:120.825},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.95}]},{iata:"BRS",icao:"EGGD",name:"Bristol Airport",latitude:51.3827,longitude:-2.6911,category:"4D",type:"emergency",region:"european",runway:"09/27",runwayLength:6500,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:124.525},{type:"Tower",frequency:118.425},{type:"Ground",frequency:121.7}]},{iata:"BTS",icao:"LZIB",name:"M. R. tefnik Airport",latitude:48.1702,longitude:17.2127,category:"4C",type:"emergency",region:"european",runway:"13/31",runwayLength:6500,runwayCode:"13/31",frequencies:[{type:"ATIS",frequency:124.125},{type:"Tower",frequency:118.025},{type:"Ground",frequency:121.825}]},{iata:"BVA",icao:"LFOB",name:"Beauvais-Till Airport",latitude:49.4544,longitude:2.1128,category:"4C",type:"emergency",region:"european",runway:"05/23",runwayLength:6500,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:125.9},{type:"Tower",frequency:120.75},{type:"Ground",frequency:121.725}]},{iata:"BZR",icao:"LFMN",name:"Bziers Cap d'Agde Airport",latitude:43.3234,longitude:3.3535,category:"4C",type:"emergency",region:"european",runway:"04/22",runwayLength:6500,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:132.35},{type:"Tower",frequency:119.9},{type:"Ground",frequency:121.65}]},{iata:"CAI",icao:"HECA",name:"Cairo International Airport",latitude:30.1219,longitude:31.4056,category:"4F",type:"emergency",region:"european",runway:"05L/23R",runwayLength:12e3,runwayCode:"05L/23R",frequencies:[{type:"ATIS",frequency:131.125},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.75}]},{iata:"CFU",icao:"LGKR",name:"Corfu International Airport",latitude:39.6019,longitude:19.9117,category:"4D",type:"emergency",region:"european",runway:"06/24",runwayLength:6500,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:126.175},{type:"Tower",frequency:120.25},{type:"Ground",frequency:121.85}]},{iata:"CHQ",icao:"LGSA",name:"Chania International Airport",latitude:35.5316,longitude:24.1497,category:"4D",type:"emergency",region:"european",runway:"12/30",runwayLength:6500,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:130.975},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.825}]},{iata:"CTA",icao:"LICC",name:"Catania-Fontanarossa Airport",latitude:37.4668,longitude:15.0664,category:"4D",type:"emergency",region:"european",runway:"08/26",runwayLength:8500,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:133.75},{type:"Tower",frequency:119.625},{type:"Ground",frequency:121.6}]},{iata:"CTG",icao:"SKCL",name:"Rafael Nez International Airport",latitude:10.4414,longitude:-75.513,category:"4D",type:"emergency",region:"european",runway:"05/23",runwayLength:8500,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:126.875},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.8}]},{iata:"CVA",icao:"LFMD",name:"Cannes-Mandelieu Airport",latitude:43.5422,longitude:6.9556,category:"3C",type:"emergency",region:"european",runway:"17/35",runwayLength:5200,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:123.15},{type:"Tower",frequency:119.725},{type:"Ground",frequency:121.825}]},{iata:"DLC",icao:"ZYTL",name:"Dalian Zhoushuizi International Airport",latitude:38.9744,longitude:121.5388,category:"4E",type:"emergency",region:"european",runway:"03/21",runwayLength:8500,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:128.375},{type:"Tower",frequency:118.95},{type:"Ground",frequency:121.65}]},{iata:"DLG",icao:"PADL",name:"Dillingham Airport",latitude:59.7547,longitude:-158.6189,category:"3C",type:"emergency",region:"european",runway:"01/19",runwayLength:6500,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:120.625},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.75}]},{iata:"DSA",icao:"EGCN",name:"Doncaster Sheffield Airport",latitude:53.4745,longitude:-1.0044,category:"4C",type:"emergency",region:"european",runway:"02/20",runwayLength:6500,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:123.775},{type:"Tower",frequency:118.925},{type:"Ground",frequency:121.95}]},{iata:"DUR",icao:"FADN",name:"King Shaka International Airport",latitude:-29.6144,longitude:31.1196,category:"4F",type:"emergency",region:"european",runway:"06/24",runwayLength:12e3,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:127},{type:"Tower",frequency:118.8},{type:"Ground",frequency:121.9}]},{iata:"EAP",icao:"EDSB",name:"Karlsruhe/Baden-Baden Airport",latitude:48.7793,longitude:8.0803,category:"4C",type:"emergency",region:"european",runway:"03/21",runwayLength:6500,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:126.9},{type:"Tower",frequency:120.425},{type:"Ground",frequency:121.675}]},{iata:"EBU",icao:"LFMU",name:"Nmes-Als-Camargue-Cvennes Airport",latitude:43.7574,longitude:4.4163,category:"4C",type:"emergency",region:"european",runway:"02/20",runwayLength:6500,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:128.75},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.925}]},{iata:"EGO",icao:"EDBW",name:"Weisshorn Airport",latitude:52.1234,longitude:7.6789,category:"3C",type:"emergency",region:"european",runway:"09/27",runwayLength:3400,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:124.675},{type:"Tower",frequency:118.075},{type:"Ground",frequency:121.75}]},{iata:"EIN",icao:"EHEH",name:"Eindhoven Airport",latitude:51.45,longitude:5.3747,category:"4C",type:"emergency",region:"european",runway:"04/22",runwayLength:6500,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:128.525},{type:"Tower",frequency:119.975},{type:"Ground",frequency:121.6}]},{iata:"EMA",icao:"EGNX",name:"East Midlands Airport",latitude:52.8281,longitude:-1.3281,category:"4D",type:"emergency",region:"european",runway:"09/27",runwayLength:8500,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:130.9},{type:"Tower",frequency:119.975},{type:"Ground",frequency:121.925}]},{iata:"ENY",icao:"ECDC",name:"Castelln-Costa Azahar Airport",latitude:40.2188,longitude:.0664,category:"4C",type:"emergency",region:"european",runway:"04/22",runwayLength:6500,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:123.025},{type:"Tower",frequency:118.925},{type:"Ground",frequency:121.8}]},{iata:"ERC",icao:"LTCD",name:"Erzincan Airport",latitude:39.7542,longitude:39.5278,category:"4C",type:"emergency",region:"european",runway:"03/21",runwayLength:6500,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:126.65},{type:"Tower",frequency:118.9},{type:"Ground",frequency:121.7}]},{iata:"ESL",icao:"EDKE",name:"Karlsruhe-Forchheim Airport",latitude:48.9456,longitude:8.4321,category:"3C",type:"emergency",region:"european",runway:"08/26",runwayLength:4e3,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:127.05},{type:"Tower",frequency:120.425},{type:"Ground",frequency:121.7}]},{iata:"ETZ",icao:"LFJL",name:"Metz-Nancy-Lorraine Airport",latitude:48.9871,longitude:6.2589,category:"4C",type:"emergency",region:"european",runway:"04/22",runwayLength:6500,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:125.575},{type:"Tower",frequency:118.75},{type:"Ground",frequency:121.625}]},{iata:"EVE",icao:"ENEV",name:"Harstad/Narvik Airport",latitude:68.4914,longitude:16.6781,category:"4C",type:"emergency",region:"european",runway:"12/30",runwayLength:6500,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:122.175},{type:"Tower",frequency:118.575},{type:"Ground",frequency:121.825}]},{iata:"EXT",icao:"EGTE",name:"Exeter International Airport",latitude:50.7344,longitude:-3.4139,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:6500,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:124.65},{type:"Tower",frequency:118},{type:"Ground",frequency:121.875}]},{iata:"FAO",icao:"LPFR",name:"Faro Airport",latitude:37.0144,longitude:-7.9658,category:"4D",type:"emergency",region:"european",runway:"10/28",runwayLength:8500,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:127.825},{type:"Tower",frequency:120.725},{type:"Ground",frequency:121.9}]},{iata:"FMO",icao:"EDDG",name:"Mnster Osnabrck Airport",latitude:52.1346,longitude:7.6849,category:"4C",type:"emergency",region:"european",runway:"07/25",runwayLength:6500,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:128.475},{type:"Tower",frequency:119.975},{type:"Ground",frequency:121.825}]},{iata:"FUE",icao:"GCFV",name:"Fuerteventura Airport",latitude:28.4524,longitude:-13.8638,category:"4C",type:"emergency",region:"european",runway:"01/19",runwayLength:8200,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:129.3},{type:"Tower",frequency:120.55},{type:"Ground",frequency:121.825}]},{iata:"GVA",icao:"LSGG",name:"Geneva Airport",latitude:46.2382,longitude:6.109,category:"4D",type:"emergency",region:"european",runway:"05/23",runwayLength:8500,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:133.15},{type:"Tower",frequency:119.675},{type:"Ground",frequency:121.775}]},{iata:"HAJ",icao:"EDDV",name:"Hannover Airport",latitude:52.4611,longitude:9.685,category:"4D",type:"emergency",region:"european",runway:"09L/27R",runwayLength:8500,runwayCode:"09L/27R",frequencies:[{type:"ATIS",frequency:132.375},{type:"Tower",frequency:119.85},{type:"Ground",frequency:121.75}]},{iata:"HEL",icao:"EFHK",name:"Helsinki Airport",latitude:60.3172,longitude:24.9633,category:"4F",type:"emergency",region:"european",runway:"04L/22R",runwayLength:11e3,runwayCode:"04L/22R",frequencies:[{type:"ATIS",frequency:126.4},{type:"Tower",frequency:119.45},{type:"Ground",frequency:121.85}]},{iata:"HER",icao:"LGIR",name:"Heraklion International Airport",latitude:35.3397,longitude:25.1803,category:"4D",type:"emergency",region:"european",runway:"09/27",runwayLength:8500,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:126.725},{type:"Tower",frequency:118.525},{type:"Ground",frequency:121.7}]},{iata:"HDB",icao:"EDTB",name:"Heidelberg Airport",latitude:49.391667,longitude:8.652222,category:"4C",type:"emergency",region:"european",runway:"02/20",runwayLength:4987,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:129.625},{type:"Tower",frequency:120.75},{type:"Ground",frequency:121.85}]},{iata:"HIS",icao:"YHID",name:"Hayman Island Airport",latitude:-20.061111,longitude:148.873611,category:"4C",type:"emergency",region:"european",runway:"17/35",runwayLength:6004,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:132.7},{type:"Tower",frequency:119.65},{type:"Ground",frequency:121.65}]},{iata:"HMV",icao:"ESNA",name:"Hemavan Airport",latitude:65.806111,longitude:15.078889,category:"3C",type:"emergency",region:"european",runway:"08/26",runwayLength:4593,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:124.45},{type:"Tower",frequency:119.3},{type:"Ground",frequency:121.8}]},{iata:"HOQ",icao:"EDQM",name:"Hof Airport",latitude:50.288611,longitude:11.855278,category:"4B",type:"emergency",region:"european",runway:"09/27",runwayLength:6562,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:129.575},{type:"Tower",frequency:120.075},{type:"Ground",frequency:121.675}]},{iata:"HSZ",icao:"EDAC",name:"Hof Airport",latitude:50.288611,longitude:11.855278,category:"4B",type:"emergency",region:"european",runway:"09/27",runwayLength:6562,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:128.35},{type:"Tower",frequency:120.85},{type:"Ground",frequency:121.7}]},{iata:"IBZ",icao:"LEIB",name:"Ibiza Airport",latitude:38.872861,longitude:1.373117,category:"4C",type:"emergency",region:"european",runway:"06/24",runwayLength:8202,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:129.725},{type:"Tower",frequency:119.625},{type:"Ground",frequency:121.6}]},{iata:"ILD",icao:"LELG",name:"Lleida-Alguaire Airport",latitude:41.727775,longitude:.538611,category:"4C",type:"emergency",region:"european",runway:"14/32",runwayLength:7874,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:134.075},{type:"Tower",frequency:120.3},{type:"Ground",frequency:121.7}]},{iata:"INV",icao:"EGPA",name:"Inverness Airport",latitude:57.5425,longitude:-4.0475,category:"4C",type:"emergency",region:"european",runway:"05/23",runwayLength:6234,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:128.45},{type:"Tower",frequency:118.45},{type:"Ground",frequency:121.725}]},{iata:"IOA",icao:"LGIO",name:"Ioannina Airport",latitude:39.696389,longitude:20.8225,category:"4C",type:"emergency",region:"european",runway:"12/30",runwayLength:6562,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:122.3},{type:"Tower",frequency:119.45},{type:"Ground",frequency:121.675}]},{iata:"IOM",icao:"EGNS",name:"Isle of Man Airport",latitude:54.083333,longitude:-4.623889,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:5751,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:123.2},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.65}]},{iata:"IOR",icao:"EIIM",name:"Inishmore Airport",latitude:53.106667,longitude:-9.653333,category:"3C",type:"emergency",region:"european",runway:"16/34",runwayLength:4593,runwayCode:"16/34",frequencies:[{type:"ATIS",frequency:120.275},{type:"Tower",frequency:120.675},{type:"Ground",frequency:121.625}]},{iata:"ISL",icao:"LTBA",name:"Ataturk International Airport",latitude:40.976667,longitude:28.814167,category:"4F",type:"emergency",region:"european",runway:"18R/36L",runwayLength:11811,runwayCode:"18R/36L",frequencies:[{type:"ATIS",frequency:135.95},{type:"Tower",frequency:118.55},{type:"Ground",frequency:121.825}]},{iata:"IXG",icao:"VABO",name:"Jamnagar Airport",latitude:22.465833,longitude:69.169167,category:"4C",type:"emergency",region:"european",runway:"06/24",runwayLength:5984,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:128.6},{type:"Tower",frequency:119.125},{type:"Ground",frequency:121.9}]},{iata:"KEM",icao:"EFKE",name:"Kemi-Tornio Airport",latitude:65.781667,longitude:25.076667,category:"4C",type:"emergency",region:"european",runway:"09/27",runwayLength:6562,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:135.5},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.675}]},{iata:"KGD",icao:"UMKK",name:"Khrabrovo Airport",latitude:54.889167,longitude:20.592778,category:"4C",type:"emergency",region:"european",runway:"01/19",runwayLength:8530,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:130.675},{type:"Tower",frequency:120.775},{type:"Ground",frequency:121.6}]},{iata:"KIR",icao:"EIKY",name:"Kerry Airport",latitude:52.180833,longitude:-9.523611,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:4921,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:128.75},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.825}]},{iata:"KLD",icao:"UUEM",name:"Migalovo Air Base",latitude:56.824444,longitude:34.956111,category:"4C",type:"emergency",region:"european",runway:"12/30",runwayLength:9843,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:122.15},{type:"Tower",frequency:119.425},{type:"Ground",frequency:121.8}]},{iata:"KLR",icao:"ESMQ",name:"Kalmar Airport",latitude:56.685,longitude:16.287778,category:"4C",type:"emergency",region:"european",runway:"17/35",runwayLength:7087,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:123.525},{type:"Tower",frequency:119.6},{type:"Ground",frequency:121.925}]},{iata:"KLU",icao:"LOWK",name:"Klagenfurt Airport",latitude:46.6425,longitude:14.337778,category:"4C",type:"emergency",region:"european",runway:"10R/28L",runwayLength:8858,runwayCode:"10R/28L",frequencies:[{type:"ATIS",frequency:133.075},{type:"Tower",frequency:118.3},{type:"Ground",frequency:121.775}]},{iata:"KOK",icao:"EFKO",name:"Kokkola-Pietarsaari Airport",latitude:63.721389,longitude:23.051389,category:"4C",type:"emergency",region:"european",runway:"09/27",runwayLength:8530,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:122.4},{type:"Tower",frequency:120.075},{type:"Ground",frequency:121.75}]},{iata:"KRK",icao:"EPKK",name:"John Paul II International Airport",latitude:50.077778,longitude:19.784722,category:"4E",type:"emergency",region:"european",runway:"07/25",runwayLength:12467,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:130.75},{type:"Tower",frequency:119.65},{type:"Ground",frequency:121.925}]},{iata:"KRN",icao:"ESNG",name:"Kiruna Airport",latitude:67.822778,longitude:20.336944,category:"4C",type:"emergency",region:"european",runway:"03/21",runwayLength:7546,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:128.85},{type:"Tower",frequency:120.075},{type:"Ground",frequency:121.8}]},{iata:"KSC",icao:"LZKZ",name:"Kosice International Airport",latitude:48.663056,longitude:21.241111,category:"4C",type:"emergency",region:"european",runway:"01/19",runwayLength:10499,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:126.825},{type:"Tower",frequency:118.5},{type:"Ground",frequency:121.7}]},{iata:"KTT",icao:"EFKT",name:"Kittila Airport",latitude:67.701389,longitude:24.846389,category:"4C",type:"emergency",region:"european",runway:"07/25",runwayLength:8202,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:120.925},{type:"Tower",frequency:120},{type:"Ground",frequency:121.875}]},{iata:"KUN",icao:"EYKA",name:"Kaunas International Airport",latitude:54.963889,longitude:23.871111,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:10827,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:135.525},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.9}]},{iata:"KVA",icao:"LGKV",name:"Kavala International Airport",latitude:40.913056,longitude:24.619167,category:"4C",type:"emergency",region:"european",runway:"14/32",runwayLength:8202,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:129.475},{type:"Tower",frequency:119.3},{type:"Ground",frequency:121.775}]},{iata:"KXF",icao:"NSKE",name:"Kaitaia Airport",latitude:-35.07,longitude:173.285,category:"3C",type:"emergency",region:"european",runway:"11/29",runwayLength:3937,runwayCode:"11/29",frequencies:[{type:"ATIS",frequency:131.95},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.65}]},{iata:"LBA",icao:"EGNM",name:"Leeds Bradford Airport",latitude:53.865833,longitude:-1.660556,category:"4C",type:"emergency",region:"european",runway:"14/32",runwayLength:11155,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:121.4},{type:"Tower",frequency:119.275},{type:"Ground",frequency:121.8}]},{iata:"LCJ",icao:"EPLL",name:"Lodz Wladyslaw Reymont Airport",latitude:51.721944,longitude:19.398056,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:9186,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:121.8},{type:"Tower",frequency:118.825},{type:"Ground",frequency:121.875}]},{iata:"LDY",icao:"EGAE",name:"City of Derry Airport",latitude:55.042222,longitude:-7.160833,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:5771,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:130.3},{type:"Tower",frequency:119.1},{type:"Ground",frequency:121.925}]},{iata:"LEI",icao:"LEAM",name:"Almeria Airport",latitude:36.843611,longitude:-2.370278,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:9843,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:135.05},{type:"Tower",frequency:120.85},{type:"Ground",frequency:121.925}]},{iata:"LIG",icao:"LFBL",name:"Limoges Airport",latitude:45.862778,longitude:1.179444,category:"4C",type:"emergency",region:"european",runway:"02/20",runwayLength:7546,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:125.15},{type:"Tower",frequency:118.9},{type:"Ground",frequency:121.825}]},{iata:"LIL",icao:"LFQQ",name:"Lille Airport",latitude:50.561111,longitude:3.089444,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:10499,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:128.825},{type:"Tower",frequency:120.1},{type:"Ground",frequency:121.675}]},{iata:"LJU",icao:"LJLJ",name:"Ljubljana Joze Pucnik Airport",latitude:46.223611,longitude:14.457222,category:"4C",type:"emergency",region:"european",runway:"12/30",runwayLength:10827,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:125.25},{type:"Tower",frequency:120.775},{type:"Ground",frequency:121.825}]},{iata:"LMP",icao:"LICD",name:"Lampedusa Airport",latitude:35.517778,longitude:12.618056,category:"4C",type:"emergency",region:"european",runway:"07/25",runwayLength:5249,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:126.55},{type:"Tower",frequency:119.375},{type:"Ground",frequency:121.675}]},{iata:"LNZ",icao:"LOWL",name:"Linz Airport",latitude:48.230278,longitude:14.1875,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:9186,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:125.925},{type:"Tower",frequency:118.825},{type:"Ground",frequency:121.65}]},{iata:"LPL",icao:"EGGP",name:"Liverpool John Lennon Airport",latitude:53.336111,longitude:-2.853889,category:"4C",type:"emergency",region:"european",runway:"09/27",runwayLength:7546,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:124.375},{type:"Tower",frequency:120.325},{type:"Ground",frequency:121.825}]},{iata:"LRH",icao:"LFBH",name:"La Rochelle-Ile de Re Airport",latitude:46.188056,longitude:-1.195278,category:"4C",type:"emergency",region:"european",runway:"09/27",runwayLength:7546,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:122.85},{type:"Tower",frequency:118.45},{type:"Ground",frequency:121.8}]},{iata:"LST",icao:"YMLT",name:"Launceston Airport",latitude:-41.549444,longitude:147.214167,category:"4C",type:"emergency",region:"european",runway:"18/36",runwayLength:6726,runwayCode:"18/36",frequencies:[{type:"ATIS",frequency:123.65},{type:"Tower",frequency:119.225},{type:"Ground",frequency:121.625}]},{iata:"LTN",icao:"EGGW",name:"London Luton Airport",latitude:51.874722,longitude:-.368333,category:"4C",type:"emergency",region:"european",runway:"08/26",runwayLength:11155,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:135.5},{type:"Tower",frequency:118.325},{type:"Ground",frequency:121.8}]},{iata:"LWO",icao:"UKLL",name:"Lviv Danylo Halytskyi Airport",latitude:49.8125,longitude:23.956111,category:"4C",type:"emergency",region:"european",runway:"13/31",runwayLength:11155,runwayCode:"13/31",frequencies:[{type:"ATIS",frequency:129.95},{type:"Tower",frequency:120.8},{type:"Ground",frequency:121.625}]},{iata:"LYS",icao:"LFLL",name:"Lyon-Saint Exupery Airport",latitude:45.725556,longitude:5.081111,category:"4E",type:"emergency",region:"european",runway:"18L/36R",runwayLength:13451,runwayCode:"18L/36R",frequencies:[{type:"ATIS",frequency:128.675},{type:"Tower",frequency:120.55},{type:"Ground",frequency:121.65}]},{iata:"AGX",icao:"VOAT",name:"Agatti Aerodrome",latitude:10.8236,longitude:72.1763,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:6e3,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:131.7},{type:"Tower",frequency:118.725},{type:"Ground",frequency:121.9}]},{iata:"ATQ",icao:"VIAR",name:"Sri Guru Ram Dass Jee International Airport",latitude:31.7077,longitude:74.7972,category:"4C",type:"emergency",region:"asian",runway:"16/34",runwayLength:12e3,runwayCode:"16/34",frequencies:[{type:"ATIS",frequency:128.65},{type:"Tower",frequency:119.75},{type:"Ground",frequency:121.95}]},{iata:"BHO",icao:"VABP",name:"Raja Bhoj International Airport",latitude:23.2877,longitude:77.3373,category:"4C",type:"emergency",region:"asian",runway:"08/26",runwayLength:8200,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:121.85},{type:"Tower",frequency:119.8},{type:"Ground",frequency:121.675}]},{iata:"JAI",icao:"VIJP",name:"Jaipur International Airport",latitude:26.8242,longitude:75.8018,category:"4C",type:"emergency",region:"asian",runway:"10/28",runwayLength:12e3,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:131.825},{type:"Tower",frequency:119.45},{type:"Ground",frequency:121.875}]},{iata:"JDH",icao:"VIJU",name:"Jodhpur Airport",latitude:26.2512,longitude:73.0497,category:"4C",type:"emergency",region:"asian",runway:"08/26",runwayLength:8200,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:128.075},{type:"Tower",frequency:119.025},{type:"Ground",frequency:121.9}]},{iata:"LKO",icao:"VILK",name:"Chaudhary Charan Singh International Airport",latitude:26.7659,longitude:80.8854,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:12e3,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:125.675},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.7}]},{iata:"PAT",icao:"VEPT",name:"Jayaprakash Narayan International Airport",latitude:25.5913,longitude:85.0876,category:"4C",type:"emergency",region:"asian",runway:"07/25",runwayLength:8200,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:133.475},{type:"Tower",frequency:120.95},{type:"Ground",frequency:121.75}]},{iata:"PBQ",icao:"VEBM",name:"Bir Tikendrajit International Airport",latitude:24.7572,longitude:93.8967,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:8200,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:130.325},{type:"Tower",frequency:120.025},{type:"Ground",frequency:121.875}]},{iata:"RPR",icao:"VARP",name:"Swami Vivekananda Airport",latitude:21.1804,longitude:81.7542,category:"4C",type:"emergency",region:"asian",runway:"07/25",runwayLength:8200,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:128.75},{type:"Tower",frequency:120.975},{type:"Ground",frequency:121.9}]},{iata:"TRV",icao:"VOTV",name:"Thiruvananthapuram International Airport",latitude:8.4821,longitude:76.92,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:12e3,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:132.175},{type:"Tower",frequency:119.475},{type:"Ground",frequency:121.775}]},{iata:"UDR",icao:"VAUD",name:"Maharana Pratap Airport",latitude:24.6177,longitude:73.8961,category:"4C",type:"emergency",region:"asian",runway:"06/24",runwayLength:8200,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:120.8},{type:"Tower",frequency:120.8},{type:"Ground",frequency:121.9}]},{iata:"VNS",icao:"VEBN",name:"Lal Bahadur Shastri International Airport",latitude:25.4533,longitude:82.8588,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:8200,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:121.625},{type:"Tower",frequency:119.025},{type:"Ground",frequency:121.675}]},{iata:"AMD",icao:"VAAH",name:"Sardar Vallabhbhai Patel International Airport",latitude:23.0732,longitude:72.6346,category:"4C",type:"emergency",region:"asian",runway:"04/22",runwayLength:11e3,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:134.8},{type:"Tower",frequency:120.625},{type:"Ground",frequency:121.9}]},{iata:"BWA",icao:"VNBW",name:"Bhairahawa Airport",latitude:27.5053,longitude:83.4161,category:"4C",type:"emergency",region:"asian",runway:"06/24",runwayLength:5e3,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:132.475},{type:"Tower",frequency:118.175},{type:"Ground",frequency:121.675}]},{iata:"CEB",icao:"RPVM",name:"Mactan-Cebu International Airport",latitude:10.3075,longitude:123.9784,category:"4E",type:"emergency",region:"asian",runway:"04/22",runwayLength:9e3,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:125.35},{type:"Tower",frequency:120.5},{type:"Ground",frequency:121.9}]},{iata:"CXR",icao:"VVCA",name:"Cam Ranh International Airport",latitude:12.0044,longitude:109.2144,category:"4C",type:"emergency",region:"asian",runway:"02/20",runwayLength:8200,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:124.325},{type:"Tower",frequency:120.15},{type:"Ground",frequency:121.675}]},{iata:"DAD",icao:"VVDN",name:"Da Nang International Airport",latitude:16.0439,longitude:108.1994,category:"4C",type:"emergency",region:"asian",runway:"17/35",runwayLength:8200,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:120.2},{type:"Tower",frequency:118.725},{type:"Ground",frequency:121.875}]},{iata:"DLI",icao:"VODL",name:"Lal Bahadur Shastri International Airport",latitude:11.3743,longitude:78.9187,category:"4C",type:"emergency",region:"asian",runway:"08/26",runwayLength:8200,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:133.1},{type:"Tower",frequency:119.725},{type:"Ground",frequency:121.625}]},{iata:"HBX",icao:"VAHB",name:"Hubli Airport",latitude:15.3617,longitude:75.0849,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:8200,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:127.65},{type:"Tower",frequency:120.05},{type:"Ground",frequency:121.625}]},{iata:"HDY",icao:"VTSS",name:"Hat Yai International Airport",latitude:7.0147,longitude:100.3931,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:8200,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:123.75},{type:"Tower",frequency:119.425},{type:"Ground",frequency:121.95}]},{iata:"HIJ",icao:"RJOA",name:"Hiroshima Airport",latitude:34.4341,longitude:132.9194,category:"4C",type:"emergency",region:"asian",runway:"10/28",runwayLength:8200,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:131.15},{type:"Tower",frequency:120.425},{type:"Ground",frequency:121.825}]},{iata:"HKT",icao:"VTSP",name:"Phuket International Airport",latitude:8.1122,longitude:98.307,category:"4E",type:"emergency",region:"asian",runway:"09/27",runwayLength:12e3,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:126.8},{type:"Tower",frequency:120.175},{type:"Ground",frequency:121.825}]},{iata:"IKT",icao:"UIII",name:"Irkutsk International Airport",latitude:52.2741,longitude:104.3561,category:"4C",type:"emergency",region:"asian",runway:"12/30",runwayLength:9e3,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:126.25},{type:"Tower",frequency:118.375},{type:"Ground",frequency:121.9}]},{iata:"JHG",icao:"ZPJH",name:"Jinghong Xishuangbanna Airport",latitude:21.9747,longitude:100.7602,category:"4C",type:"emergency",region:"asian",runway:"04/22",runwayLength:8200,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:120.3},{type:"Tower",frequency:118.15},{type:"Ground",frequency:121.85}]},{iata:"JOG",icao:"WAHH",name:"Adi Sutjipto International Airport",latitude:-7.7881,longitude:110.4328,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:8200,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:128.475},{type:"Tower",frequency:119.3},{type:"Ground",frequency:121.9}]},{iata:"KBV",icao:"VTSB",name:"Krabi Airport",latitude:8.0994,longitude:98.9887,category:"4C",type:"emergency",region:"asian",runway:"14/32",runwayLength:8200,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:120.75},{type:"Tower",frequency:118.3},{type:"Ground",frequency:121.95}]},{iata:"KMQ",icao:"RJNK",name:"Komatsu Airport",latitude:36.4028,longitude:136.4064,category:"4C",type:"emergency",region:"asian",runway:"01/19",runwayLength:9e3,runwayCode:"01/19",frequencies:[{type:"ATIS",frequency:125.4},{type:"Tower",frequency:118.625},{type:"Ground",frequency:121.65}]},{iata:"KRL",icao:"ZWKL",name:"Korla Airport",latitude:41.7177,longitude:86.1267,category:"4C",type:"emergency",region:"asian",runway:"14/32",runwayLength:6e3,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:133.75},{type:"Tower",frequency:118.25},{type:"Ground",frequency:121.8}]},{iata:"LBU",icao:"WRLB",name:"Labuan Airport",latitude:5.2976,longitude:115.2497,category:"4C",type:"emergency",region:"asian",runway:"14/32",runwayLength:9e3,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:135.425},{type:"Tower",frequency:120.775},{type:"Ground",frequency:121.825}]},{iata:"MES",icao:"WIMM",name:"Soekarno-Hatta International Airport",latitude:3.2964,longitude:98.6717,category:"4C",type:"emergency",region:"asian",runway:"03/21",runwayLength:9e3,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:122.8},{type:"Tower",frequency:120.625},{type:"Ground",frequency:121.6}]},{iata:"MFM",icao:"VMMC",name:"Macau International Airport",latitude:22.1494,longitude:113.5917,category:"4E",type:"emergency",region:"asian",runway:"16/34",runwayLength:8200,runwayCode:"16/34",frequencies:[{type:"ATIS",frequency:133.475},{type:"Tower",frequency:120.275},{type:"Ground",frequency:121.675}]},{iata:"NGO",icao:"RJGG",name:"Chubu Centrair International Airport",latitude:34.8594,longitude:136.8047,category:"4F",type:"emergency",region:"asian",runway:"18/36",runwayLength:12e3,runwayCode:"18/36",frequencies:[{type:"ATIS",frequency:130.5},{type:"Tower",frequency:120.3},{type:"Ground",frequency:121.675}]},{iata:"POM",icao:"AYPY",name:"Port Moresby Jacksons International Airport",latitude:-9.4438,longitude:147.22,category:"4C",type:"emergency",region:"asian",runway:"14/32",runwayLength:9e3,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:121.6},{type:"Tower",frequency:119.5},{type:"Ground",frequency:121.625}]},{iata:"RGN",icao:"VYYY",name:"Yangon International Airport",latitude:16.9077,longitude:96.1333,category:"4C",type:"emergency",region:"asian",runway:"04/22",runwayLength:11e3,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:121.3},{type:"Tower",frequency:118.1},{type:"Ground",frequency:121.925}]},{iata:"ROI",icao:"VTUV",name:" Roi Et Airport",latitude:15.1194,longitude:103.7756,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:6e3,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:129.65},{type:"Tower",frequency:119.175},{type:"Ground",frequency:121.875}]},{iata:"SEL",icao:"RKSS",name:"Seoul Gimpo International Airport",latitude:37.559,longitude:126.7946,category:"4E",type:"emergency",region:"asian",runway:"14R/32L",runwayLength:9e3,runwayCode:"14R/32L",frequencies:[{type:"ATIS",frequency:126.525},{type:"Tower",frequency:120.225},{type:"Ground",frequency:121.775}]},{iata:"SGN",icao:"VVTS",name:"Tan Son Nhat International Airport",latitude:10.8188,longitude:106.652,category:"4E",type:"emergency",region:"asian",runway:"07L/25R",runwayLength:1e4,runwayCode:"07L/25R",frequencies:[{type:"ATIS",frequency:130.625},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.725}]},{iata:"SHA",icao:"ZSSS",name:"Shanghai Hongqiao International Airport",latitude:31.1979,longitude:121.3203,category:"4E",type:"emergency",region:"asian",runway:"18L/36R",runwayLength:12e3,runwayCode:"18L/36R",frequencies:[{type:"ATIS",frequency:127.275},{type:"Tower",frequency:120.75},{type:"Ground",frequency:121.625}]},{iata:"SJW",icao:"ZBSJ",name:"Shijiazhuang Zhengding International Airport",latitude:38.2817,longitude:114.6961,category:"4E",type:"emergency",region:"asian",runway:"15/33",runwayLength:1e4,runwayCode:"15/33",frequencies:[{type:"ATIS",frequency:135.175},{type:"Tower",frequency:120.875},{type:"Ground",frequency:121.875}]},{iata:"TNA",icao:"ZSTN",name:"Jinan Yaoqiang International Airport",latitude:36.8583,longitude:117.2161,category:"4E",type:"emergency",region:"asian",runway:"14/32",runwayLength:1e4,runwayCode:"14/32",frequencies:[{type:"ATIS",frequency:133.45},{type:"Tower",frequency:120.025},{type:"Ground",frequency:121.725}]},{iata:"UIO",icao:"SEQU",name:"Mariscal Sucre International Airport",latitude:-.1292,longitude:-78.3575,category:"4C",type:"emergency",region:"asian",runway:"17/35",runwayLength:8200,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:132.45},{type:"Tower",frequency:119.825},{type:"Ground",frequency:121.775}]},{iata:"VTE",icao:"VLVT",name:"Wattay International Airport",latitude:17.9881,longitude:102.5633,category:"4C",type:"emergency",region:"asian",runway:"13/31",runwayLength:7e3,runwayCode:"13/31",frequencies:[{type:"ATIS",frequency:122.6},{type:"Tower",frequency:119.675},{type:"Ground",frequency:121.85}]},{iata:"WUS",icao:"ZUAQ",name:"Wuyishan Airport",latitude:27.7019,longitude:117.9408,category:"4C",type:"emergency",region:"asian",runway:"03/21",runwayLength:7e3,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:132.275},{type:"Tower",frequency:118.05},{type:"Ground",frequency:121.775}]},{iata:"YNZ",icao:"ZSCN",name:"Yancheng Nanyang International Airport",latitude:33.3858,longitude:120.12,category:"4C",type:"emergency",region:"asian",runway:"04/22",runwayLength:7e3,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:124.7},{type:"Tower",frequency:118.525},{type:"Ground",frequency:121.95}]},{iata:"KWI",icao:"OKKK",name:"Kuwait International Airport",latitude:29.226667,longitude:47.968611,category:"4F",type:"emergency",region:"asian",runway:"15/33",runwayLength:11483,runwayCode:"15/33",frequencies:[{type:"ATIS",frequency:127.175},{type:"Tower",frequency:118.95},{type:"Ground",frequency:121.95}]},{iata:"MCT",icao:"OOMS",name:"Muscat International Airport",latitude:23.593056,longitude:58.284444,category:"4F",type:"emergency",region:"asian",runway:"08L/26R",runwayLength:12136,runwayCode:"08L/26R",frequencies:[{type:"ATIS",frequency:124.675},{type:"Tower",frequency:119.275},{type:"Ground",frequency:121.65}]},{iata:"AUH",icao:"OMAA",name:"Abu Dhabi International Airport",latitude:24.433056,longitude:54.651111,category:"4F",type:"emergency",region:"asian",runway:"13L/31R",runwayLength:13451,runwayCode:"13L/31R",frequencies:[{type:"ATIS",frequency:123.375},{type:"Tower",frequency:120.85},{type:"Ground",frequency:121.625}]},{iata:"SHJ",icao:"OMSJ",name:"Sharjah International Airport",latitude:25.328889,longitude:55.517222,category:"4C",type:"emergency",region:"asian",runway:"12/30",runwayLength:12467,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:120.425},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.875}]},{iata:"RKT",icao:"OMRN",name:"Ras Al Khaimah International Airport",latitude:25.609444,longitude:55.938889,category:"4C",type:"emergency",region:"asian",runway:"16/34",runwayLength:11483,runwayCode:"16/34",frequencies:[{type:"ATIS",frequency:124.475},{type:"Tower",frequency:120.825},{type:"Ground",frequency:121.7}]},{iata:"MED",icao:"OEMA",name:"Prince Mohammad bin Abdulaziz Airport",latitude:24.553333,longitude:39.705,category:"4F",type:"emergency",region:"asian",runway:"16/34",runwayLength:11811,runwayCode:"16/34",frequencies:[{type:"ATIS",frequency:125.7},{type:"Tower",frequency:118},{type:"Ground",frequency:121.625}]},{iata:"JED",icao:"OEJN",name:"King Abdulaziz International Airport",latitude:21.679583,longitude:39.156472,category:"4F",type:"emergency",region:"asian",runway:"16R/34L",runwayLength:13123,runwayCode:"16R/34L",frequencies:[{type:"ATIS",frequency:125.325},{type:"Tower",frequency:119.9},{type:"Ground",frequency:121.75}]},{iata:"HYD",icao:"VOHS",name:"Rajiv Gandhi International Airport",latitude:17.231389,longitude:77.793611,category:"4F",type:"emergency",region:"asian",runway:"09L/27R",runwayLength:12136,runwayCode:"09L/27R",frequencies:[{type:"ATIS",frequency:135},{type:"Tower",frequency:119.75},{type:"Ground",frequency:121.675}]},{iata:"BLR",icao:"VOBL",name:"Kempegowda International Airport",latitude:13.196944,longitude:77.706111,category:"4F",type:"emergency",region:"asian",runway:"09L/27R",runwayLength:12467,runwayCode:"09L/27R",frequencies:[{type:"ATIS",frequency:122.075},{type:"Tower",frequency:120.95},{type:"Ground",frequency:121.6}]},{iata:"CCU",icao:"VECC",name:"Netaji Subhas Chandra Bose International Airport",latitude:22.654722,longitude:88.446667,category:"4C",type:"emergency",region:"asian",runway:"19L/01R",runwayLength:11483,runwayCode:"19L/01R",frequencies:[{type:"ATIS",frequency:135.6},{type:"Tower",frequency:119.375},{type:"Ground",frequency:121.6}]},{iata:"LHE",icao:"OPLA",name:"Allama Iqbal International Airport",latitude:31.521667,longitude:74.403611,category:"4C",type:"emergency",region:"asian",runway:"18R/36L",runwayLength:11155,runwayCode:"18R/36L",frequencies:[{type:"ATIS",frequency:124.5},{type:"Tower",frequency:120.15},{type:"Ground",frequency:121.775}]},{iata:"SAW",icao:"LTFJ",name:"Sabiha Gokcen International Airport",latitude:40.898611,longitude:29.309167,category:"4E",type:"emergency",region:"asian",runway:"06/24",runwayLength:11483,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:123.9},{type:"Tower",frequency:118.025},{type:"Ground",frequency:121.725}]},{iata:"ESB",icao:"LTAC",name:"Ankara Esenboga Airport",latitude:40.128333,longitude:32.995278,category:"4F",type:"emergency",region:"asian",runway:"03R/21L",runwayLength:12467,runwayCode:"03R/21L",frequencies:[{type:"ATIS",frequency:127.4},{type:"Tower",frequency:118.075},{type:"Ground",frequency:121.675}]},{iata:"ADB",icao:"LTBT",name:"Izmir Adnan Menderes Airport",latitude:38.289444,longitude:27.156944,category:"4E",type:"emergency",region:"asian",runway:"16L/34R",runwayLength:11483,runwayCode:"16L/34R",frequencies:[{type:"ATIS",frequency:130.375},{type:"Tower",frequency:120.8},{type:"Ground",frequency:121.925}]},{iata:"KIX",icao:"RJBB",name:"Kansai International Airport",latitude:34.427222,longitude:135.244444,category:"4F",type:"emergency",region:"asian",runway:"06R/24L",runwayLength:13123,runwayCode:"06R/24L",frequencies:[{type:"ATIS",frequency:123.975},{type:"Tower",frequency:120.825},{type:"Ground",frequency:121.75}]},{iata:"TSA",icao:"RCSS",name:"Taipei Songshan Airport",latitude:25.069722,longitude:121.5525,category:"4C",type:"emergency",region:"asian",runway:"10/28",runwayLength:8858,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:135.45},{type:"Tower",frequency:120.175},{type:"Ground",frequency:121.65}]},{iata:"PKX",icao:"ZBAD",name:"Beijing Daxing International Airport",latitude:39.667222,longitude:116.388889,category:"4F",type:"emergency",region:"asian",runway:"01L/19R",runwayLength:12467,runwayCode:"01L/19R",frequencies:[{type:"ATIS",frequency:132.55},{type:"Tower",frequency:118.675},{type:"Ground",frequency:121.9}]},{iata:"PUS",icao:"RKPK",name:"Gimhae International Airport",latitude:35.179444,longitude:128.938333,category:"4C",type:"emergency",region:"asian",runway:"09L/27R",runwayLength:11483,runwayCode:"09L/27R",frequencies:[{type:"ATIS",frequency:127.625},{type:"Tower",frequency:118.075},{type:"Ground",frequency:121.8}]},{iata:"CJU",icao:"RKPC",name:"Jeju International Airport",latitude:33.511667,longitude:126.492778,category:"4C",type:"emergency",region:"asian",runway:"06/24",runwayLength:10827,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:135.775},{type:"Tower",frequency:120.1},{type:"Ground",frequency:121.85}]},{iata:"BKI",icao:"WBKK",name:"Kota Kinabalu International Airport",latitude:5.937778,longitude:116.003056,category:"4C",type:"emergency",region:"asian",runway:"02/20",runwayLength:11155,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:129.45},{type:"Tower",frequency:119.05},{type:"Ground",frequency:121.675}]},{iata:"SUB",icao:"WARR",name:"Juanda International Airport",latitude:-7.379836,longitude:112.786858,category:"4C",type:"emergency",region:"asian",runway:"10/28",runwayLength:11811,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:133.05},{type:"Tower",frequency:118.375},{type:"Ground",frequency:121.625}]},{iata:"DPS",icao:"WADD",name:"Ngurah Rai International Airport",latitude:-8.748167,longitude:115.167167,category:"4C",type:"emergency",region:"asian",runway:"09/27",runwayLength:9843,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:128.175},{type:"Tower",frequency:119.35},{type:"Ground",frequency:121.725}]},{iata:"HAN",icao:"VVNB",name:"Noi Bai International Airport",latitude:21.221667,longitude:105.807222,category:"4C",type:"emergency",region:"asian",runway:"11L/29R",runwayLength:11483,runwayCode:"11L/29R",frequencies:[{type:"ATIS",frequency:120.9},{type:"Tower",frequency:120.45},{type:"Ground",frequency:121.85}]},{iata:"MNL",icao:"RPLL",name:"Ninoy Aquino International Airport",latitude:14.508611,longitude:121.019722,category:"4C",type:"emergency",region:"asian",runway:"06/24",runwayLength:11483,runwayCode:"06/24",frequencies:[{type:"ATIS",frequency:131.15},{type:"Tower",frequency:119.4},{type:"Ground",frequency:121.8}]},{iata:"DMK",icao:"VTBD",name:"Don Mueang International Airport",latitude:13.912503,longitude:100.606728,category:"4C",type:"emergency",region:"asian",runway:"03L/21R",runwayLength:11483,runwayCode:"03L/21R",frequencies:[{type:"ATIS",frequency:123.275},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.775}]},{iata:"PNH",icao:"VDPP",name:"Phnom Penh International Airport",latitude:11.546556,longitude:104.923861,category:"4C",type:"emergency",region:"asian",runway:"05/23",runwayLength:9843,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:128.625},{type:"Tower",frequency:118.125},{type:"Ground",frequency:121.7}]},{iata:"REP",icao:"VDSR",name:"Siem Reap International Airport",latitude:13.410667,longitude:103.812667,category:"4C",type:"emergency",region:"asian",runway:"16/34",runwayLength:9843,runwayCode:"16/34",frequencies:[{type:"ATIS",frequency:133.55},{type:"Tower",frequency:120.775},{type:"Ground",frequency:121.85}]},{iata:"BWN",icao:"WBSB",name:"Brunei International Airport",latitude:4.944167,longitude:114.928333,category:"4C",type:"emergency",region:"asian",runway:"03/21",runwayLength:12136,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:129.3},{type:"Tower",frequency:119.075},{type:"Ground",frequency:121.75}]},{iata:"AAN",icao:"OMAL",name:"Al Ain Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.325},{type:"Tower",frequency:119.675},{type:"Ground",frequency:121.925}]},{iata:"ABJ",icao:"DIAP",name:"Felix Houphouet Boigny Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.3},{type:"Tower",frequency:120.85},{type:"Ground",frequency:121.75}]},{iata:"ACC",icao:"KACC",name:"Kotoka International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:124.875},{type:"Tower",frequency:120.05},{type:"Ground",frequency:121.6}]},{iata:"ALA",icao:"UAAA",name:"Almaty International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:134.25},{type:"Tower",frequency:119.175},{type:"Ground",frequency:121.875}]},{iata:"ATH",icao:"LGAV",name:"Athens International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:128.675},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.7}]},{iata:"BAH",icao:"OBBI",name:"Bahrain International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:124.45},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.6}]},{iata:"BEL",icao:"SBEG",name:"Eduardo Gomes International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.475},{type:"Tower",frequency:119.125},{type:"Ground",frequency:121.65}]},{iata:"BEN",icao:"HLLB",name:"Benina Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:129.05},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.875}]},{iata:"BEY",icao:"OLBA",name:"Beirut-Rafic Hariri International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:134.275},{type:"Tower",frequency:120.425},{type:"Ground",frequency:121.825}]},{iata:"BJL",icao:"GBYD",name:"Banjul International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.025},{type:"Tower",frequency:119.525},{type:"Ground",frequency:121.85}]},{iata:"BME",icao:"YBRM",name:"Broome Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.575},{type:"Tower",frequency:120.5},{type:"Ground",frequency:121.65}]},{iata:"BSB",icao:"SBBR",name:"Presidente Juscelino Kubitschek Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:132.55},{type:"Tower",frequency:119.775},{type:"Ground",frequency:121.775}]},{iata:"BSR",icao:"ORBI",name:"Basra International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:132},{type:"Tower",frequency:119.6},{type:"Ground",frequency:121.675}]},{iata:"BSS",icao:"GABS",name:" Osvaldo Vieira International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:127.6},{type:"Tower",frequency:119.75},{type:"Ground",frequency:121.875}]},{iata:"CCS",icao:"SVMI",name:"Simn Bolvar International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:127.8},{type:"Tower",frequency:118.55},{type:"Ground",frequency:121.6}]},{iata:"CLJ",icao:"LRCL",name:"Cluj Avram Iancu Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:133.2},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.825}]},{iata:"CMB",icao:"VCBI",name:"Bandaranaike International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.525},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.9}]},{iata:"CNF",icao:"SBCF",name:"Tancredo Neves International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:125.85},{type:"Tower",frequency:118.8},{type:"Ground",frequency:121.75}]},{iata:"CNS",icao:"YBCS",name:"Cairns Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:129},{type:"Tower",frequency:120.975},{type:"Ground",frequency:121.75}]},{iata:"COK",icao:"VOCI",name:"Cochin International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:127.475},{type:"Tower",frequency:119.925},{type:"Ground",frequency:121.725}]},{iata:"CPT",icao:"FACT",name:"Cape Town International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:122.6},{type:"Tower",frequency:120.225},{type:"Ground",frequency:121.85}]},{iata:"CUR",icao:"TNCC",name:"Hato International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.25},{type:"Tower",frequency:120.125},{type:"Ground",frequency:121.825}]},{iata:"CWB",icao:"SBCT",name:"Afonso Pena Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.25},{type:"Tower",frequency:120.775},{type:"Ground",frequency:121.85}]},{iata:"DAR",icao:"HTDA",name:"Julius Nyerere International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:126.2},{type:"Tower",frequency:119.675},{type:"Ground",frequency:121.8}]},{iata:"EVN",icao:"UDYZ",name:"Zvartnots International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:124.25},{type:"Tower",frequency:120.425},{type:"Ground",frequency:121.65}]},{iata:"FAMN",icao:"FAMN",name:"Matsapha Airport",latitude:-26.5294,longitude:31.3069,category:"4B",type:"emergency",region:"other",runway:"09/27",runwayLength:6800,frequencies:[{type:"ATIS",frequency:128.075},{type:"Tower",frequency:119.025},{type:"Ground",frequency:121.875}]},{iata:"FDF",icao:"TFFF",name:"Aim Csaire Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.525},{type:"Tower",frequency:120.95},{type:"Ground",frequency:121.65}]},{iata:"FLN",icao:"SBFL",name:"Herclio Luz International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:129.25},{type:"Tower",frequency:119.15},{type:"Ground",frequency:121.8}]},{iata:"FNA",icao:"FAAA",name:"Lungi International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:125.15},{type:"Tower",frequency:120.85},{type:"Ground",frequency:121.775}]},{iata:"FPO",icao:"MYGF",name:"Grand Bahama Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:130.925},{type:"Tower",frequency:119.925},{type:"Ground",frequency:121.6}]},{iata:"GIG",icao:"SBGL",name:"Tom Jobim Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:132.225},{type:"Tower",frequency:120.025},{type:"Ground",frequency:121.925}]},{iata:"GRJ",icao:"FAGG",name:"George Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.55},{type:"Tower",frequency:118.175},{type:"Ground",frequency:121.925}]},{iata:"HLA",icao:"FALA",name:"Lanseria Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:121.525},{type:"Tower",frequency:118.125},{type:"Ground",frequency:121.85}]},{iata:"HRG",icao:"HEGN",name:"Hurghada International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:124.875},{type:"Tower",frequency:120.2},{type:"Ground",frequency:121.625}]},{iata:"IKA",icao:"OIII",name:"Imam Khomeini International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.775},{type:"Tower",frequency:119.1},{type:"Ground",frequency:121.625}]},{iata:"JNB",icao:"FAOR",name:"O.R. Tambo International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:121.15},{type:"Tower",frequency:119.8},{type:"Ground",frequency:121.7}]},{iata:"KJA",icao:"UNKL",name:"Krasnoyarsk International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.75},{type:"Tower",frequency:118.925},{type:"Ground",frequency:121.825}]},{iata:"KMG",icao:"ZPPP",name:"Kunming Changshui International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.4},{type:"Tower",frequency:120.675},{type:"Ground",frequency:121.75}]},{iata:"KRT",icao:"HSNN",name:"Khartoum International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:125.725},{type:"Tower",frequency:119.95},{type:"Ground",frequency:121.7}]},{iata:"LBV",icao:"FOOO",name:"Libreville Leon M'ba Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:125.575},{type:"Tower",frequency:119.175},{type:"Ground",frequency:121.775}]},{iata:"LIM",icao:"SPIM",name:"Jorge Chavez International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:122.925},{type:"Tower",frequency:118.875},{type:"Ground",frequency:121.7}]},{iata:"LXR",icao:"HELX",name:"Luxor International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:122},{type:"Tower",frequency:120.7},{type:"Ground",frequency:121.8}]},{iata:"MBA",icao:"HKMO",name:"Mombasa Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.5},{type:"Tower",frequency:120.275},{type:"Ground",frequency:121.8}]},{iata:"MOS",icao:"ORBM",name:"Mosul Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:124.1},{type:"Tower",frequency:119.2},{type:"Ground",frequency:121.65}]},{iata:"MRU",icao:"FIMP",name:"Sir Seewoosagur Ramgoolam Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.3},{type:"Tower",frequency:120.525},{type:"Ground",frequency:121.775}]},{iata:"MSQ",icao:"UMMS",name:"Minsk National Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:120.025},{type:"Tower",frequency:119.425},{type:"Ground",frequency:121.625}]},{iata:"NBO",icao:"HKJK",name:"Jomo Kenyatta International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:125.275},{type:"Tower",frequency:118.9},{type:"Ground",frequency:121.725}]},{iata:"NIM",icao:"DRRN",name:"Diori Hamani International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:124.375},{type:"Tower",frequency:120.7},{type:"Ground",frequency:121.65}]},{iata:"NQZ",icao:"UACC",name:"Nursultan Nazarbayev Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:134.875},{type:"Tower",frequency:119.925},{type:"Ground",frequency:121.6}]},{iata:"PHE",icao:"YPPD",name:"Port Hedland Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:122.925},{type:"Tower",frequency:118.175},{type:"Ground",frequency:121.75}]},{iata:"PKC",icao:"UHPP",name:"Petropavlovsk Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:126.975},{type:"Tower",frequency:118.725},{type:"Ground",frequency:121.725}]},{iata:"POS",icao:"TTPP",name:"Piarco International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:135.725},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.75}]},{iata:"PTY",icao:"MPTO",name:"Tocumen International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:132.475},{type:"Tower",frequency:118.1},{type:"Ground",frequency:121.775}]},{iata:"REC",icao:"SBRF",name:"Guararapes International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:131.25},{type:"Tower",frequency:119},{type:"Ground",frequency:121.875}]},{iata:"SABR",icao:"SBRB",name:"Plcido de Castro Airport",latitude:-9.8668,longitude:-67.7981,category:"4C",type:"emergency",region:"other",runway:"09/27",runwayLength:8200,frequencies:[{type:"ATIS",frequency:130.05},{type:"Tower",frequency:118.175},{type:"Ground",frequency:121.775}]},{iata:"SAEI",icao:"SAEI",name:"Recife International Airport",latitude:-8.1269,longitude:-34.9236,category:"4E",type:"emergency",region:"other",runway:"14/32",runwayLength:8800,frequencies:[{type:"ATIS",frequency:121.575},{type:"Tower",frequency:118.15},{type:"Ground",frequency:121.875}]},{iata:"SAMI",icao:"SAMI",name:"Mount Pleasant Airport",latitude:-51.8228,longitude:-58.4472,category:"4C",type:"emergency",region:"other",runway:"09/27",runwayLength:7800,frequencies:[{type:"ATIS",frequency:122.8},{type:"Tower",frequency:120.575},{type:"Ground",frequency:121.8}]},{iata:"SAMM",icao:"SAMM",name:"Mar del Plata Airport",latitude:-37.7447,longitude:-57.6291,category:"4C",type:"emergency",region:"other",runway:"09/27",runwayLength:6800,frequencies:[{type:"ATIS",frequency:126.975},{type:"Tower",frequency:118.35},{type:"Ground",frequency:121.9}]},{iata:"SANT",icao:"SANT",name:"Tucumn Airport",latitude:-26.84,longitude:-65.0968,category:"4C",type:"emergency",region:"other",runway:"07/25",runwayLength:8200,frequencies:[{type:"ATIS",frequency:128.825},{type:"Tower",frequency:120.55},{type:"Ground",frequency:121.65}]},{iata:"SAVC",icao:"SAVC",name:"Comodoro Rivadavia Airport",latitude:-45.785,longitude:-67.4608,category:"4C",type:"emergency",region:"other",runway:"07/25",runwayLength:8500,frequencies:[{type:"ATIS",frequency:122.025},{type:"Tower",frequency:119.05},{type:"Ground",frequency:121.75}]},{iata:"SBAR",icao:"SBAR",name:"Santa Maria Airport",latitude:-10.1879,longitude:-48.2641,category:"4C",type:"emergency",region:"other",runway:"08/26",runwayLength:7500,frequencies:[{type:"ATIS",frequency:135.575},{type:"Tower",frequency:118.4},{type:"Ground",frequency:121.7}]},{iata:"SBCY",icao:"SBCY",name:"Cuiab Airport",latitude:-15.595,longitude:-56.1199,category:"4C",type:"emergency",region:"other",runway:"13/31",runwayLength:8200,frequencies:[{type:"ATIS",frequency:127.85},{type:"Tower",frequency:120.4},{type:"Ground",frequency:121.725}]},{iata:"SBFN",icao:"SBFN",name:"Fernando de Noronha Airport",latitude:-3.8546,longitude:-32.4233,category:"4B",type:"emergency",region:"other",runway:"14/32",runwayLength:5800,frequencies:[{type:"ATIS",frequency:130.925},{type:"Tower",frequency:119.025},{type:"Ground",frequency:121.8}]},{iata:"SBGO",icao:"SBBG",name:"Governador Valadares Airport",latitude:-18.8953,longitude:-41.9231,category:"4C",type:"emergency",region:"other",runway:"03/21",runwayLength:6500,frequencies:[{type:"ATIS",frequency:131.4},{type:"Tower",frequency:119.975},{type:"Ground",frequency:121.65}]},{iata:"SBJU",icao:"SBJU",name:"Campo Grande Airport",latitude:-20.4692,longitude:-54.6719,category:"4C",type:"emergency",region:"other",runway:"05/23",runwayLength:7800,frequencies:[{type:"ATIS",frequency:121.425},{type:"Tower",frequency:118.95},{type:"Ground",frequency:121.625}]},{iata:"SBMC",icao:"SBMO",name:"Macei Airport",latitude:-9.5107,longitude:-35.7917,category:"4C",type:"emergency",region:"other",runway:"17/35",runwayLength:7200,frequencies:[{type:"ATIS",frequency:127.075},{type:"Tower",frequency:118.175},{type:"Ground",frequency:121.675}]},{iata:"SBMQ",icao:"SBMQ",name:"Macap Airport",latitude:.0506,longitude:-51.0722,category:"4C",type:"emergency",region:"other",runway:"09/27",runwayLength:7200,frequencies:[{type:"ATIS",frequency:120.35},{type:"Tower",frequency:119.125},{type:"Ground",frequency:121.875}]},{iata:"SBPN",icao:"SBCN",name:"Campina Grande Airport",latitude:-7.2689,longitude:-35.8963,category:"4B",type:"emergency",region:"other",runway:"11/29",runwayLength:6e3,frequencies:[{type:"ATIS",frequency:126.85},{type:"Tower",frequency:118.6},{type:"Ground",frequency:121.725}]},{iata:"SBUL",icao:"SBBU",name:"Uberlndia Airport",latitude:-18.8839,longitude:-48.2253,category:"4C",type:"emergency",region:"other",runway:"08/26",runwayLength:7500,frequencies:[{type:"ATIS",frequency:134.675},{type:"Tower",frequency:120.2},{type:"Ground",frequency:121.825}]},{iata:"SBVT",icao:"SBVT",name:"Vitria Airport",latitude:-20.2593,longitude:-40.286,category:"4C",type:"emergency",region:"other",runway:"05/23",runwayLength:7800,frequencies:[{type:"ATIS",frequency:126.55},{type:"Tower",frequency:118.475},{type:"Ground",frequency:121.875}]},{iata:"SSA",icao:"SBPS",name:"Deputado Lus Eduardo Magalhes Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:120.2},{type:"Tower",frequency:119.75},{type:"Ground",frequency:121.925}]},{iata:"SSH",icao:"HEAL",name:"Sharm El Sheikh Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:126.575},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.625}]},{iata:"SVO",icao:"UUEE",name:"Sheremetyevo International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:133.475},{type:"Tower",frequency:119.9},{type:"Ground",frequency:121.65}]},{iata:"TBS",icao:"UGTB",name:"Tbilisi International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:133.6},{type:"Tower",frequency:120.15},{type:"Ground",frequency:121.775}]},{iata:"TIP",icao:"HLLT",name:"Tripoli International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:121.425},{type:"Tower",frequency:118.65},{type:"Ground",frequency:121.85}]},{iata:"TLV",icao:"LLBG",name:"Ben Gurion Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:120.975},{type:"Tower",frequency:120.3},{type:"Ground",frequency:121.8}]},{iata:"TUN",icao:"DTTA",name:"Tunis Carthage International Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:127.1},{type:"Tower",frequency:119.275},{type:"Ground",frequency:121.65}]},{iata:"TUPA",icao:"TUPA",name:"Tabuk Airport",latitude:28.4194,longitude:36.6178,category:"4B",type:"emergency",region:"other",runway:"07/25",runwayLength:6500,frequencies:[{type:"ATIS",frequency:122.1},{type:"Tower",frequency:118.675},{type:"Ground",frequency:121.725}]},{iata:"VCP",icao:"SBKP",name:"Viracopos Airport",type:"emergency",region:"other",frequencies:[{type:"ATIS",frequency:124.075},{type:"Tower",frequency:118.5},{type:"Ground",frequency:121.775}]},{iata:"WITT",icao:"WITT",name:"Sultan Iskandar Airport",latitude:1.6419,longitude:103.6694,category:"4C",type:"emergency",region:"other",runway:"15/33",runwayLength:7800,frequencies:[{type:"ATIS",frequency:122.9},{type:"Tower",frequency:119.2},{type:"Ground",frequency:121.825}]},{iata:"YBHI",icao:"YBHI",name:"Broken Hill Airport",latitude:-31.8296,longitude:141.4699,category:"4C",type:"emergency",region:"other",runway:"07/25",runwayLength:6500,frequencies:[{type:"ATIS",frequency:128.35},{type:"Tower",frequency:120.775},{type:"Ground",frequency:121.7}]},{iata:"LOS",icao:"DNMM",name:"Murtala Muhammed International Airport",latitude:6.577417,longitude:3.321917,category:"4C",type:"emergency",region:"other",runway:"18R/36L",runwayLength:12467,runwayCode:"18R/36L",frequencies:[{type:"ATIS",frequency:125},{type:"Tower",frequency:118.225},{type:"Ground",frequency:121.675}]},{iata:"QUO",icao:"DNSO",name:"Sam Mbakwe Airport",latitude:5.427167,longitude:6.948167,category:"4C",type:"emergency",region:"other",runway:"03/21",runwayLength:9843,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:135.2},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.625}]},{iata:"ASW",icao:"HEAS",name:"Aswan International Airport",latitude:23.963889,longitude:32.819722,category:"4C",type:"emergency",region:"other",runway:"17/35",runwayLength:10827,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:125.65},{type:"Tower",frequency:119.325},{type:"Ground",frequency:121.9}]},{iata:"ADD",icao:"HAAB",name:"Addis Ababa Bole International Airport",latitude:9.003333,longitude:38.799444,category:"4F",type:"emergency",region:"other",runway:"07L/25R",runwayLength:12467,runwayCode:"07L/25R",frequencies:[{type:"ATIS",frequency:121.925},{type:"Tower",frequency:120.725},{type:"Ground",frequency:121.75}]},{iata:"DIR",icao:"HADR",name:"Aba Tenna Dejazmatch Yilma Airport",latitude:9.624722,longitude:41.854167,category:"4C",type:"emergency",region:"other",runway:"08/26",runwayLength:8858,runwayCode:"08/26",frequencies:[{type:"ATIS",frequency:120.4},{type:"Tower",frequency:119.675},{type:"Ground",frequency:121.8}]},{iata:"JUB",icao:"HSSJ",name:"Juba International Airport",latitude:4.872006,longitude:31.601111,category:"4C",type:"emergency",region:"other",runway:"11/29",runwayLength:11483,runwayCode:"11/29",frequencies:[{type:"ATIS",frequency:125.65},{type:"Tower",frequency:118.025},{type:"Ground",frequency:121.825}]},{iata:"JRO",icao:"HTJK",name:"Kilimanjaro International Airport",latitude:-3.429444,longitude:37.074167,category:"4C",type:"emergency",region:"other",runway:"09/27",runwayLength:12136,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:131.125},{type:"Tower",frequency:118.875},{type:"Ground",frequency:121.95}]},{iata:"ZNZ",icao:"HTZA",name:"Abeid Amani Karume International Airport",latitude:-6.221944,longitude:39.224722,category:"4C",type:"emergency",region:"other",runway:"09/27",runwayLength:8202,runwayCode:"09/27",frequencies:[{type:"ATIS",frequency:129.9},{type:"Tower",frequency:120},{type:"Ground",frequency:121.725}]},{iata:"TNR",icao:"FMMI",name:"Ivato International Airport",latitude:-18.766944,longitude:47.478611,category:"4C",type:"emergency",region:"other",runway:"17/35",runwayLength:10827,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:131.425},{type:"Tower",frequency:118.275},{type:"Ground",frequency:121.75}]},{iata:"RUN",icao:"FMEE",name:"Roland Garros Airport",latitude:-20.887139,longitude:55.510139,category:"4C",type:"emergency",region:"other",runway:"12/30",runwayLength:10827,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:131.075},{type:"Tower",frequency:120.05},{type:"Ground",frequency:121.6}]},{iata:"CMN",icao:"GMMN",name:"Mohammed V International Airport",latitude:33.3675,longitude:-7.589861,category:"4F",type:"emergency",region:"other",runway:"01L/19R",runwayLength:12467,runwayCode:"01L/19R",frequencies:[{type:"ATIS",frequency:131.075},{type:"Tower",frequency:118.125},{type:"Ground",frequency:121.6}]},{iata:"RAK",icao:"GMMX",name:"Marrakesh Menara Airport",latitude:31.606944,longitude:-8.036667,category:"4C",type:"emergency",region:"other",runway:"10/28",runwayLength:11483,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:132.175},{type:"Tower",frequency:120.4},{type:"Ground",frequency:121.925}]},{iata:"RBA",icao:"GMTT",name:"Sale Airport",latitude:34.051111,longitude:-6.747778,category:"4C",type:"emergency",region:"other",runway:"04/22",runwayLength:11155,runwayCode:"04/22",frequencies:[{type:"ATIS",frequency:123.75},{type:"Tower",frequency:119.8},{type:"Ground",frequency:121.6}]},{iata:"ALG",icao:"DAAG",name:"Houari Boumediene Airport",latitude:36.691,longitude:3.215444,category:"4C",type:"emergency",region:"other",runway:"05/23",runwayLength:11155,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:126.4},{type:"Tower",frequency:120.4},{type:"Ground",frequency:121.775}]},{iata:"ORN",icao:"DAOO",name:"Oran Es Senia Airport",latitude:35.623889,longitude:-.621111,category:"4C",type:"emergency",region:"other",runway:"07/25",runwayLength:10827,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:124.4},{type:"Tower",frequency:119.55},{type:"Ground",frequency:121.7}]},{iata:"LAD",icao:"FNLU",name:"Quatro de Fevereiro Airport",latitude:-8.858333,longitude:13.231167,category:"4C",type:"emergency",region:"other",runway:"07/25",runwayLength:12136,runwayCode:"07/25",frequencies:[{type:"ATIS",frequency:126.525},{type:"Tower",frequency:118.325},{type:"Ground",frequency:121.825}]},{iata:"MPM",icao:"FQMA",name:"Maputo International Airport",latitude:-25.920833,longitude:32.5725,category:"4C",type:"emergency",region:"other",runway:"17/35",runwayLength:11483,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:135.5},{type:"Tower",frequency:120.375},{type:"Ground",frequency:121.925}]},{iata:"HRE",icao:"FVHA",name:"Robert Gabriel Mugabe International Airport",latitude:-17.897222,longitude:31.0925,category:"4C",type:"emergency",region:"other",runway:"05/23",runwayLength:10827,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:128.85},{type:"Tower",frequency:120.625},{type:"Ground",frequency:121.775}]},{iata:"LVI",icao:"FLLS",name:"Harry Mwanga Nkumbula International Airport",latitude:-17.821778,longitude:25.822667,category:"4C",type:"emergency",region:"other",runway:"10/28",runwayLength:11483,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:129.925},{type:"Tower",frequency:118.575},{type:"Ground",frequency:121.6}]},{iata:"DSS",icao:"GOBD",name:"Blaise Diagne International Airport",latitude:14.671389,longitude:-17.071667,category:"4F",type:"emergency",region:"other",runway:"01L/19R",runwayLength:11483,runwayCode:"01L/19R",frequencies:[{type:"ATIS",frequency:120.825},{type:"Tower",frequency:119.25},{type:"Ground",frequency:121.7}]},{iata:"DKR",icao:"GOOO",name:"Leopold Sedar Senghor International Airport",latitude:14.670833,longitude:-17.490278,category:"4C",type:"emergency",region:"other",runway:"02/20",runwayLength:11483,runwayCode:"02/20",frequencies:[{type:"ATIS",frequency:124.425},{type:"Tower",frequency:118.225},{type:"Ground",frequency:121.85}]},{iata:"ABV",icao:"DNAA",name:"Nnamdi Azikiwe International Airport",latitude:9.006667,longitude:7.263056,category:"4C",type:"emergency",region:"other",runway:"05/23",runwayLength:11811,runwayCode:"05/23",frequencies:[{type:"ATIS",frequency:131.7},{type:"Tower",frequency:118.05},{type:"Ground",frequency:121.775}]},{iata:"PHC",icao:"DNPO",name:"Port Harcourt International Airport",latitude:5.015389,longitude:6.967583,category:"4C",type:"emergency",region:"other",runway:"03/21",runwayLength:10827,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:131.075},{type:"Tower",frequency:119.7},{type:"Ground",frequency:121.65}]},{iata:"KGL",icao:"HRYR",name:"Kigali International Airport",latitude:-1.968628,longitude:30.139444,category:"4C",type:"emergency",region:"other",runway:"29/11",runwayLength:10827,runwayCode:"29/11",frequencies:[{type:"ATIS",frequency:134.2},{type:"Tower",frequency:118.975},{type:"Ground",frequency:121.75}]},{iata:"DLA",icao:"FKKD",name:"Douala International Airport",latitude:4.006111,longitude:9.719444,category:"4C",type:"emergency",region:"other",runway:"12/30",runwayLength:10827,runwayCode:"12/30",frequencies:[{type:"ATIS",frequency:129.575},{type:"Tower",frequency:118.525},{type:"Ground",frequency:121.85}]},{iata:"NSI",icao:"FKYS",name:"Yaounde Nsimalen International Airport",latitude:3.722556,longitude:11.553278,category:"4C",type:"emergency",region:"other",runway:"03/21",runwayLength:11483,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:122.125},{type:"Tower",frequency:119.925},{type:"Ground",frequency:121.6}]},{iata:"BJM",icao:"HBBA",name:"Bujumbura International Airport",latitude:-3.324,longitude:29.318528,category:"4C",type:"emergency",region:"other",runway:"03/21",runwayLength:11483,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:128.825},{type:"Tower",frequency:118.1},{type:"Ground",frequency:121.9}]},{iata:"EBB",icao:"HUEN",name:"Entebbe International Airport",latitude:.0425,longitude:32.4435,category:"4C",type:"emergency",region:"other",runway:"17/35",runwayLength:12136,runwayCode:"17/35",frequencies:[{type:"ATIS",frequency:127.25},{type:"Tower",frequency:118.05},{type:"Ground",frequency:121.85}]},{iata:"LUJ",icao:"FALU",name:"Lusaka International Airport",latitude:-15.330556,longitude:28.4525,category:"4C",type:"emergency",region:"other",runway:"10/28",runwayLength:13123,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:135.925},{type:"Tower",frequency:118.825},{type:"Ground",frequency:121.75}]},{iata:"LUN",icao:"FLLL",name:"Kenneth Kaunda International Airport",latitude:-15.386111,longitude:28.452444,category:"4C",type:"emergency",region:"other",runway:"10/28",runwayLength:13123,runwayCode:"10/28",frequencies:[{type:"ATIS",frequency:128.05},{type:"Tower",frequency:118.05},{type:"Ground",frequency:121.625}]},{iata:"FIH",icao:"FZAA",name:"Ndjili International Airport",latitude:-4.385556,longitude:15.444444,category:"4C",type:"emergency",region:"other",runway:"06L/24R",runwayLength:12136,runwayCode:"06L/24R",frequencies:[{type:"ATIS",frequency:131.3},{type:"Tower",frequency:118.35},{type:"Ground",frequency:121.875}]},{iata:"BZV",icao:"FCBB",name:"Maya-Maya Airport",latitude:-4.243889,longitude:15.253056,category:"4C",type:"emergency",region:"other",runway:"03/21",runwayLength:10827,runwayCode:"03/21",frequencies:[{type:"ATIS",frequency:127.925},{type:"Tower",frequency:119.1},{type:"Ground",frequency:121.9}]},{iata:"LXA",icao:"ZULS",name:"Lhasa Gonggar Airport",latitude:29.1013889,longitude:91.4805556,category:"4E",type:"normal",region:"asian",runways:[{name:"15/33",length:14852,surface:"Asphalt",category:"Heavy"}],city:"Lhasa",country:"China",elevation:14315,frequencies:[{type:"ATIS",frequency:127.25},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.7}]},{iata:"HKG",icao:"VHHH",name:"Kai Tak Airport (Historical)",latitude:22.3194444,longitude:114.1694444,category:"4F",type:"normal",region:"asian",runways:[{name:"13/31",length:8999,surface:"Asphalt",category:"Heavy"},{name:"07/25",length:6909,surface:"Asphalt",category:"Medium"}],city:"Hong Kong",country:"China",elevation:20,frequencies:[{type:"ATIS",frequency:128.6},{type:"Tower",frequency:118.7},{type:"Ground",frequency:121.8}]},{iata:"PBH",icao:"VQPR",name:"Paro International Airport",latitude:27.4113889,longitude:89.6336111,category:"4D",type:"normal",region:"asian",runways:[{name:"15/33",length:6500,surface:"Asphalt",category:"Medium"}],city:"Paro",country:"Bhutan",elevation:7332,frequencies:[{type:"ATIS",frequency:126.2},{type:"Tower",frequency:118},{type:"Ground",frequency:121.7}]},{iata:"CVF",icao:"LFLJ",name:"Courchevel Airport",latitude:45.3613889,longitude:6.6997222,category:"A1",type:"normal",region:"european",runways:[{name:"06/24",length:1722,surface:"Asphalt",category:"Light"}],city:"Courchevel",country:"France",elevation:6588,frequencies:[{type:"Tower",frequency:118.25},{type:"Ground",frequency:121.8}]},{iata:"TGU",icao:"MHTG",name:"Toncontin International Airport",latitude:14.0658333,longitude:-87.1944444,category:"4D",type:"normal",region:"american",runways:[{name:"02/20",length:6126,surface:"Asphalt",category:"Medium"}],city:"Tegucigalpa",country:"Honduras",elevation:3294,frequencies:[{type:"ATIS",frequency:126.4},{type:"Tower",frequency:118},{type:"Ground",frequency:121.7}]}],hn={metadata:sm,airports:lm},cm=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!1),[a,i]=L.useState(null),[o,l]=L.useState(null),[c,u]=L.useState(null),d=L.useCallback(async w=>{if(!w||w.trim().length<2){e([]);return}r(!0),i(null);try{const g=((hn==null?void 0:hn.airports)||[]).filter(m=>{const f=w.toLowerCase();return m.iata.toLowerCase().includes(f)||m.icao.toLowerCase().includes(f)||m.name&&m.name.toLowerCase().includes(f)||m.city&&m.city.toLowerCase().includes(f)});e(g.slice(0,10))}catch{i("Failed to search airports"),e([])}finally{r(!1)}},[]),y=L.useCallback(w=>{l(w),e([])},[]),p=L.useCallback(w=>{u(w),e([])},[]),h=L.useCallback((w=null)=>{w==="departure"?l(null):(w==="arrival"||l(null),u(null))},[]),v=L.useCallback(w=>((hn==null?void 0:hn.airports)||[]).find(g=>g.iata===w||g.icao===w),[]);return{searchResults:t,isLoading:n,error:a,selectedDeparture:o,selectedArrival:c,searchAirports:d,selectDeparture:y,selectArrival:p,clearSelection:h,getAirportByCode:v}},um=[{model:"Boeing 737-800",type:"Narrow-body",manufacturer:"Boeing",iata:"738",icao:"B738",maxRange:3200,cruiseSpeed:450,fuelConsumption:2500,maxFuelCapacity:26020,maxPayload:18900,maxPassengers:189,typicalFuelBurn:5.4,takeoffDistance:2400,landingDistance:1600,engineType:"CFM56-7B",engineCount:2,hydraulicCount:2,category:"Medium-haul",wingArea:125,wingSpan:35.8,aspectRatio:9.4,maxLiftCoefficient:1.6,stallSpeed:125,maxOperatingMach:.82,emptyWeight:41400,maxTakeoffWeight:79e3,maxThrustPerEngine:12e4,liftCurveSlope:5.7,zeroLiftDragCoefficient:.025,inducedDragFactor:.04,basicLiftCoefficient:.5,horizontalStabilizerArea:25,horizontalStabilizerCL:-.08,horizontalStabilizerMomentArm:12.5,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},specificFuelConsumption:13e-6,elevatorEffectiveness:.00105,aileronEffectiveness:52e-5,rudderEffectiveness:31e-5,sideForceCoefficient:21e-5,initialCruiseThrottle:.56,pidParameters:{altitude:{Kp:82e-5,Ki:105e-6,Kd:.0021,min:-.31,max:.31},speed:{Kp:.52,Ki:.052,Kd:.105,min:-.52,max:.52},heading:{Kp:.82,Ki:.105,Kd:.31,min:-.52,max:.52}},momentOfInertiaRoll:3e4,momentOfInertiaPitch:5e4,momentOfInertiaYaw:8e4,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:1,clIncrement:.3,cdIncrement:.002,label:"1"},{angle:5,clIncrement:.4,cdIncrement:.005,label:"5"},{angle:10,clIncrement:.8,cdIncrement:.01,label:"10"},{angle:15,clIncrement:1,cdIncrement:.02,label:"15"},{angle:25,clIncrement:1.5,cdIncrement:.04,label:"25"},{angle:30,clIncrement:1.8,cdIncrement:.06,label:"30"},{angle:40,clIncrement:2.2,cdIncrement:.08,label:"40"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"ARM",dragIncrement:.01,liftDecrement:-.02},{label:"FLT",dragIncrement:.1,liftDecrement:-.1},{label:"GND",dragIncrement:.25,liftDecrement:-.2}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5,gearHeight:3.5},{model:"Airbus A320-200",type:"Narrow-body",manufacturer:"Airbus",iata:"320",icao:"A320",maxRange:3300,cruiseSpeed:447,fuelConsumption:2400,maxFuelCapacity:23800,maxPayload:16500,maxPassengers:180,typicalFuelBurn:5.3,takeoffDistance:2300,landingDistance:1500,engineType:"CFM56-5A/5B",engineCount:2,hydraulicCount:3,category:"Medium-haul",wingArea:122,wingSpan:34.1,aspectRatio:9.5,maxLiftCoefficient:1.7,stallSpeed:120,maxOperatingMach:.82,emptyWeight:42500,maxTakeoffWeight:77e3,maxThrustPerEngine:115e3,liftCurveSlope:5.8,zeroLiftDragCoefficient:.024,inducedDragFactor:.038,basicLiftCoefficient:.42,horizontalStabilizerArea:24,horizontalStabilizerCL:-.14,horizontalStabilizerMomentArm:12,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},specificFuelConsumption:14e-6,elevatorEffectiveness:.00102,aileronEffectiveness:51e-5,rudderEffectiveness:3e-4,sideForceCoefficient:2e-4,initialCruiseThrottle:.55,pidParameters:{altitude:{Kp:81e-5,Ki:102e-6,Kd:.002,min:-.3,max:.3},speed:{Kp:.51,Ki:.051,Kd:.102,min:-.51,max:.51},heading:{Kp:.81,Ki:.102,Kd:.3,min:-.51,max:.51}},momentOfInertiaRoll:32e3,momentOfInertiaPitch:52e3,momentOfInertiaYaw:85e3,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.5,cdIncrement:.005,label:"1"},{angle:15,clIncrement:1,cdIncrement:.01,label:"2"},{angle:20,clIncrement:1.6,cdIncrement:.03,label:"3"},{angle:35,clIncrement:2.2,cdIncrement:.06,label:"FULL"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"ARM",dragIncrement:.01,liftDecrement:-.02},{label:"1/2",dragIncrement:.03,liftDecrement:-.06},{label:"FULL",dragIncrement:.1,liftDecrement:-.12},{label:"GND",dragIncrement:.25,liftDecrement:-.25}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5,gearHeight:3.8},{model:"Boeing 777-300ER",type:"Wide-body",manufacturer:"Boeing",iata:"77W",icao:"B77W",maxRange:7930,cruiseSpeed:485,fuelConsumption:7500,maxFuelCapacity:181280,maxPayload:69850,maxPassengers:396,typicalFuelBurn:15.5,takeoffDistance:3200,landingDistance:1800,engineType:"GE90-115B",engineCount:2,hydraulicCount:3,category:"Long-haul",wingArea:428,wingSpan:64.8,aspectRatio:9,maxLiftCoefficient:1.8,stallSpeed:145,maxOperatingMach:.89,emptyWeight:167800,maxTakeoffWeight:351500,maxThrustPerEngine:51e4,liftCurveSlope:6,zeroLiftDragCoefficient:.022,inducedDragFactor:.035,basicLiftCoefficient:.45,horizontalStabilizerArea:65,horizontalStabilizerCL:-.18,horizontalStabilizerMomentArm:20,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},specificFuelConsumption:1e-5,elevatorEffectiveness:88e-5,aileronEffectiveness:44e-5,rudderEffectiveness:26e-5,sideForceCoefficient:17e-5,initialCruiseThrottle:.51,pidParameters:{altitude:{Kp:68e-5,Ki:88e-6,Kd:.0017,min:-.27,max:.27},speed:{Kp:.44,Ki:.044,Kd:.088,min:-.44,max:.44},heading:{Kp:.74,Ki:.088,Kd:.26,min:-.44,max:.44}},momentOfInertiaRoll:18e4,momentOfInertiaPitch:25e4,momentOfInertiaYaw:32e4,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.1,cdIncrement:.002,label:"TO1"},{angle:15,clIncrement:.18,cdIncrement:.004,label:"TO2"},{angle:20,clIncrement:.25,cdIncrement:.008,label:"LDG"},{angle:30,clIncrement:.35,cdIncrement:.015,label:"FULL"}]},airbrakeProfile:{positions:[{label:"DN",dragIncrement:0,liftDecrement:0},{label:"ARM",dragIncrement:.01,liftDecrement:-.02},{label:"FLT",dragIncrement:.07,liftDecrement:-.15},{label:"UP",dragIncrement:.22,liftDecrement:-.3}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5,gearHeight:5.5},{model:"Airbus A350-900",type:"Wide-body",manufacturer:"Airbus",iata:"359",icao:"A359",maxRange:8100,cruiseSpeed:488,fuelConsumption:5800,maxFuelCapacity:141e3,maxPayload:53500,maxPassengers:325,typicalFuelBurn:11.9,takeoffDistance:2800,landingDistance:1600,engineType:"Rolls-Royce Trent XWB",engineCount:2,hydraulicCount:2,category:"Long-haul",wingArea:442,wingSpan:64.8,aspectRatio:9.5,maxLiftCoefficient:1.9,stallSpeed:140,maxOperatingMach:.89,emptyWeight:115e3,maxTakeoffWeight:28e4,maxThrustPerEngine:43e4,liftCurveSlope:6.2,zeroLiftDragCoefficient:.021,inducedDragFactor:.033,basicLiftCoefficient:.43,horizontalStabilizerArea:60,horizontalStabilizerCL:-.17,horizontalStabilizerMomentArm:19,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},momentOfInertiaRoll:165e3,momentOfInertiaPitch:23e4,momentOfInertiaYaw:295e3,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.1,cdIncrement:.002,label:"1"},{angle:15,clIncrement:.2,cdIncrement:.005,label:"2"},{angle:20,clIncrement:.3,cdIncrement:.01,label:"3"},{angle:30,clIncrement:.4,cdIncrement:.015,label:"FULL"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"1/2",dragIncrement:.03,liftDecrement:-.05},{label:"FULL",dragIncrement:.065,liftDecrement:-.13},{label:"GND",dragIncrement:.2,liftDecrement:-.28}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5,gearHeight:5.8},{model:"Embraer E190",type:"Regional",manufacturer:"Embraer",iata:"E90",icao:"E190",maxRange:2400,cruiseSpeed:447,fuelConsumption:1800,maxFuelCapacity:12800,maxPayload:10800,maxPassengers:114,typicalFuelBurn:4,takeoffDistance:1800,landingDistance:1200,engineType:"GE CF34-10E",engineCount:2,category:"Regional",wingArea:92,wingSpan:28.7,aspectRatio:8.9,maxLiftCoefficient:1.5,stallSpeed:110,maxOperatingMach:.82,emptyWeight:28e3,maxTakeoffWeight:50790,maxThrustPerEngine:82e3,liftCurveSlope:5.5,zeroLiftDragCoefficient:.027,inducedDragFactor:.042,basicLiftCoefficient:.41,hydraulicCount:3,horizontalStabilizerArea:18,horizontalStabilizerCL:-.13,horizontalStabilizerMomentArm:9,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},momentOfInertiaRoll:18e3,momentOfInertiaPitch:28e3,momentOfInertiaYaw:42e3,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.1,cdIncrement:.002,label:"1"},{angle:20,clIncrement:.2,cdIncrement:.005,label:"2"},{angle:35,clIncrement:.3,cdIncrement:.01,label:"FULL"}]},airbrakeProfile:{positions:[{label:"CL",dragIncrement:0,liftDecrement:0},{label:"OP",dragIncrement:.05,liftDecrement:-.1},{label:"GND",dragIncrement:.15,liftDecrement:-.25}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5,gearHeight:3},{model:"Cessna Citation X",type:"Business",manufacturer:"Cessna",iata:"CEX",icao:"C750",maxRange:3430,cruiseSpeed:528,fuelConsumption:1e3,maxFuelCapacity:6800,maxPayload:1200,maxPassengers:12,typicalFuelBurn:1.9,takeoffDistance:1600,landingDistance:900,engineType:"Rolls-Royce AE3007C",engineCount:2,hydraulicCount:2,category:"Business",wingArea:32.5,wingSpan:19.3,aspectRatio:7.2,maxLiftCoefficient:1.4,stallSpeed:95,maxOperatingMach:.92,emptyWeight:10500,maxTakeoffWeight:16500,maxThrustPerEngine:9700,liftCurveSlope:5.2,zeroLiftDragCoefficient:.03,inducedDragFactor:.05,basicLiftCoefficient:.4,horizontalStabilizerArea:8,horizontalStabilizerCL:-.12,horizontalStabilizerMomentArm:4,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},momentOfInertiaRoll:2500,momentOfInertiaPitch:3500,momentOfInertiaYaw:5500,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:15,clIncrement:.1,cdIncrement:.003,label:"1"},{angle:35,clIncrement:.25,cdIncrement:.008,label:"FULL"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"EXT",dragIncrement:.05,liftDecrement:-.05}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,gearHeight:2.8,groundCollisionPitchTorqueFactor:.5},{model:"Boeing 747-400",type:"Wide-body",manufacturer:"Boeing",iata:"744",icao:"B744",maxRange:7260,cruiseSpeed:475,fuelConsumption:11e3,maxFuelCapacity:216840,maxPayload:112760,maxPassengers:416,typicalFuelBurn:22.5,takeoffDistance:3300,landingDistance:2100,gearHeight:9.5,engineType:"PW4000/CF6-80C2/RB211-524",engineCount:4,hydraulicCount:4,category:"Long-haul",wingArea:525,wingSpan:64.4,aspectRatio:7.9,maxLiftCoefficient:1.7,stallSpeed:155,maxOperatingMach:.92,emptyWeight:178800,maxTakeoffWeight:396900,maxThrustPerEngine:28e4,liftCurveSlope:5.8,zeroLiftDragCoefficient:.023,inducedDragFactor:.037,basicLiftCoefficient:.44,horizontalStabilizerArea:65,horizontalStabilizerCL:-.17,horizontalStabilizerMomentArm:18,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},momentOfInertiaRoll:25e4,momentOfInertiaPitch:38e4,momentOfInertiaYaw:45e4,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:5,clIncrement:.05,cdIncrement:.001,label:"1"},{angle:10,clIncrement:.1,cdIncrement:.002,label:"5"},{angle:15,clIncrement:.18,cdIncrement:.004,label:"10"},{angle:20,clIncrement:.25,cdIncrement:.007,label:"20"},{angle:25,clIncrement:.35,cdIncrement:.012,label:"25"},{angle:30,clIncrement:.45,cdIncrement:.018,label:"30"}]},airbrakeProfile:{positions:[{label:"DN",dragIncrement:0,liftDecrement:0},{label:"ARM",dragIncrement:.01,liftDecrement:-.02},{label:"FLT",dragIncrement:.08,liftDecrement:-.15},{label:"UP",dragIncrement:.25,liftDecrement:-.35}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5},{model:"Airbus A380-800",type:"Wide-body",manufacturer:"Airbus",iata:"388",icao:"A388",maxRange:8200,cruiseSpeed:488,fuelConsumption:13e3,maxFuelCapacity:323546,maxPayload:152400,maxPassengers:853,typicalFuelBurn:26.5,takeoffDistance:2900,landingDistance:2e3,engineType:"Trent 900/GP7200",engineCount:4,hydraulicCount:2,category:"Long-haul",wingArea:845,wingSpan:79.8,aspectRatio:7.5,maxLiftCoefficient:1.8,stallSpeed:130,maxOperatingMach:.89,emptyWeight:277e3,maxTakeoffWeight:575e3,maxThrustPerEngine:35e4,liftCurveSlope:6,zeroLiftDragCoefficient:.02,inducedDragFactor:.032,basicLiftCoefficient:.46,horizontalStabilizerArea:120,horizontalStabilizerCL:-.2,horizontalStabilizerMomentArm:28,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},momentOfInertiaRoll:42e4,momentOfInertiaPitch:58e4,momentOfInertiaYaw:68e4,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.1,cdIncrement:.002,label:"1"},{angle:15,clIncrement:.2,cdIncrement:.005,label:"2"},{angle:20,clIncrement:.3,cdIncrement:.01,label:"3"},{angle:30,clIncrement:.4,cdIncrement:.015,label:"FULL"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"1/2",dragIncrement:.04,liftDecrement:-.08},{label:"FULL",dragIncrement:.08,liftDecrement:-.16},{label:"GND",dragIncrement:.22,liftDecrement:-.32}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5,gearHeight:6.5},{model:"Airbus A330-300",type:"Wide-body",manufacturer:"Airbus",iata:"333",icao:"A333",maxRange:6350,cruiseSpeed:470,fuelConsumption:5700,maxFuelCapacity:139090,maxPayload:45700,maxPassengers:440,typicalFuelBurn:12.1,takeoffDistance:2700,landingDistance:1700,gearHeight:5.8,engineType:"Trent 700/CF6-80E1/PW4000",engineCount:2,hydraulicCount:3,category:"Long-haul",wingArea:363,wingSpan:60.3,aspectRatio:9.3,maxLiftCoefficient:1.7,stallSpeed:135,maxOperatingMach:.86,emptyWeight:122e3,maxTakeoffWeight:233e3,maxThrustPerEngine:32e4,liftCurveSlope:5.9,zeroLiftDragCoefficient:.022,inducedDragFactor:.036,basicLiftCoefficient:.45,horizontalStabilizerArea:50,horizontalStabilizerCL:-.16,horizontalStabilizerMomentArm:17,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},specificFuelConsumption:17e-6,elevatorEffectiveness:95e-5,aileronEffectiveness:47e-5,rudderEffectiveness:28e-5,sideForceCoefficient:19e-5,initialCruiseThrottle:.53,pidParameters:{altitude:{Kp:75e-5,Ki:95e-6,Kd:.0019,min:-.29,max:.29},speed:{Kp:.47,Ki:.047,Kd:.095,min:-.47,max:.47},heading:{Kp:.77,Ki:.095,Kd:.28,min:-.47,max:.47}},momentOfInertiaRoll:15e4,momentOfInertiaPitch:21e4,momentOfInertiaYaw:28e4,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.1,cdIncrement:.002,label:"1"},{angle:15,clIncrement:.2,cdIncrement:.005,label:"2"},{angle:25,clIncrement:.35,cdIncrement:.012,label:"FULL"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"1/2",dragIncrement:.03,liftDecrement:-.06},{label:"FULL",dragIncrement:.07,liftDecrement:-.15},{label:"GND",dragIncrement:.22,liftDecrement:-.32}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5},{model:"Airbus A340-600",type:"Wide-body",manufacturer:"Airbus",iata:"346",icao:"A346",maxRange:7500,cruiseSpeed:475,fuelConsumption:7500,maxFuelCapacity:195880,maxPayload:55400,maxPassengers:475,typicalFuelBurn:15.8,takeoffDistance:3100,landingDistance:1800,gearHeight:6.2,engineType:"Trent 500",engineCount:4,hydraulicCount:3,category:"Long-haul",wingArea:438,wingSpan:63.5,aspectRatio:9.2,maxLiftCoefficient:1.7,stallSpeed:140,maxOperatingMach:.86,emptyWeight:177e3,maxTakeoffWeight:368e3,maxThrustPerEngine:25e4,liftCurveSlope:5.8,zeroLiftDragCoefficient:.023,inducedDragFactor:.037,basicLiftCoefficient:.44,horizontalStabilizerArea:65,horizontalStabilizerCL:-.17,horizontalStabilizerMomentArm:18,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},specificFuelConsumption:19e-6,elevatorEffectiveness:9e-4,aileronEffectiveness:45e-5,rudderEffectiveness:27e-5,sideForceCoefficient:18e-5,initialCruiseThrottle:.52,pidParameters:{altitude:{Kp:7e-4,Ki:9e-5,Kd:.0018,min:-.28,max:.28},speed:{Kp:.45,Ki:.045,Kd:.09,min:-.45,max:.45},heading:{Kp:.75,Ki:.09,Kd:.27,min:-.45,max:.45}},momentOfInertiaRoll:22e4,momentOfInertiaPitch:32e4,momentOfInertiaYaw:39e4,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.1,cdIncrement:.002,label:"1"},{angle:15,clIncrement:.2,cdIncrement:.005,label:"2"},{angle:25,clIncrement:.35,cdIncrement:.012,label:"FULL"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"1/2",dragIncrement:.03,liftDecrement:-.06},{label:"FULL",dragIncrement:.07,liftDecrement:-.15},{label:"GND",dragIncrement:.22,liftDecrement:-.32}]},minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5},{model:"Boeing 757-200",type:"Narrow-body",manufacturer:"Boeing",iata:"752",icao:"B752",maxRange:3900,cruiseSpeed:460,fuelConsumption:3400,maxFuelCapacity:34e3,maxPayload:22e3,maxPassengers:239,typicalFuelBurn:7.4,takeoffDistance:2300,landingDistance:1500,engineType:"RB211-535E4/PW2037/PW2040",engineCount:2,hydraulicCount:3,category:"Medium-haul",wingArea:181,wingSpan:38,aspectRatio:8,maxLiftCoefficient:1.6,stallSpeed:125,maxOperatingMach:.86,emptyWeight:58e3,maxTakeoffWeight:115700,maxThrustPerEngine:195e3,liftCurveSlope:5.6,zeroLiftDragCoefficient:.026,inducedDragFactor:.041,basicLiftCoefficient:.42,flapProfile:{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:1,clIncrement:.05,cdIncrement:.001,label:"1"},{angle:5,clIncrement:.1,cdIncrement:.002,label:"5"},{angle:15,clIncrement:.2,cdIncrement:.005,label:"15"},{angle:25,clIncrement:.3,cdIncrement:.01,label:"25"},{angle:30,clIncrement:.4,cdIncrement:.015,label:"30"}]},airbrakeProfile:{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"1/2",dragIncrement:.03,liftDecrement:-.06},{label:"FULL",dragIncrement:.07,liftDecrement:-.14},{label:"GND",dragIncrement:.22,liftDecrement:-.32}]},horizontalStabilizerArea:35,horizontalStabilizerCL:-.1,horizontalStabilizerMomentArm:14,aerodynamicCenterPosition:.25,centerOfGravityPosition:.15,dragCenterPosition:.75,controlPower:{x:1.2,y:1.5,z:1},specificFuelConsumption:16e-6,elevatorEffectiveness:.001,aileronEffectiveness:5e-4,rudderEffectiveness:3e-4,sideForceCoefficient:2e-4,initialCruiseThrottle:.55,pidParameters:{altitude:{Kp:8e-4,Ki:1e-4,Kd:.002,min:-.3,max:.3},speed:{Kp:.5,Ki:.05,Kd:.1,min:-.5,max:.5},heading:{Kp:.8,Ki:.1,Kd:.3,min:-.5,max:.5}},momentOfInertiaRoll:42e3,momentOfInertiaPitch:65e3,momentOfInertiaYaw:95e3,minNoseGearFailedPitch:-.2,maxGroundPitch:.3,groundCollisionPitchTorqueFactor:.5,gearHeight:4.5}],qr={aircraft:um};let La=null;async function Vp(){return La||(qr&&Array.isArray(qr.aircraft)?La=qr.aircraft:Array.isArray(qr)?La=qr:(console.error("Failed to load aircraft data: Invalid format",qr),La=[])),La}class dm{constructor(){this.aircraftDatabase=null,this.calculateFlightPerformance=this.calculateFlightPerformance.bind(this),this.calculateFuelRequirements=this.calculateFuelRequirements.bind(this),this.getAircraftByModel=this.getAircraftByModel.bind(this),this.validateRoute=this.validateRoute.bind(this)}async initialize(){return this.aircraftDatabase||(this.aircraftDatabase=await Vp()),this.aircraftDatabase}async searchAircraft(e){const n=await this.initialize(),r=e.toLowerCase();return n.filter(a=>a.model.toLowerCase().includes(r)||a.manufacturer.toLowerCase().includes(r)||a.iata.toLowerCase().includes(r)||a.icao.toLowerCase().includes(r)||a.type.toLowerCase().includes(r))}async getAircraftByIATA(e){return(await this.initialize()).find(r=>r.iata===e.toUpperCase())}async getAircraftByICAO(e){return(await this.initialize()).find(r=>r.icao===e.toUpperCase())}async getAircraftByModel(e){return(await this.initialize()).find(r=>r.model.toLowerCase()===e.trim().toLowerCase())}async getControlSurfaceProfiles(e){const n=await this.getAircraftByModel(e);return n?{flaps:n.flapProfile||{positions:[]},airbrakes:n.airbrakeProfile||{positions:[]}}:(console.warn(`Aircraft model '${e}' not found, returning default profiles`),{flaps:{positions:[]},airbrakes:{positions:[]}})}async getAllAircraft(){return await this.initialize()}async getAircraftByCategory(e){return(await this.initialize()).filter(r=>r.category.toLowerCase()===e.toLowerCase())}async getPopularAircraft(){return await this.initialize(),this.aircraftDatabase.map(e=>({model:e.model,manufacturer:e.manufacturer,iata:e.iata,icao:e.icao}))}async calculateFuelRequirements(e,n,r,a=.05){const i=await this.getAircraftByModel(e);if(!i)throw new Error(`Aircraft model '${e}' not found`);const o=Number(n)||0,l=Number(r)||0,c=Number(a)||0,u=Number(i.emptyWeight)||4e4,d=Number(i.maxPayload)||2e4,y=Number(i.cruiseSpeed)||450,p=Number(i.typicalFuelBurn)||5;(p<=0||y<=0)&&console.warn(`Invalid performance data for ${e}: Burn=${p}, Speed=${y}`);const h=u+d*.5+p*y*1.5,v=p*o,w=u+l+v*.5;let C=w/h;(isNaN(C)||C<=.1||C>10)&&(console.warn(`Abnormal weight factor calculated: ${C} (AvgWt: ${w}, TypWt: ${h})`),C=1);const f=o/y+.5,A=p*y*C,I=A*f;let R=1;c>1?R=c:c>0&&c<=1&&(R=1);const x=A*R,N=I+x;if(N>i.maxFuelCapacity)throw console.error(`Fuel calc error: Distance=${o}, CruiseSpeed=${y}, TypicalBurn=${p}, TotalFlightHours=${f}, WeightFactor=${C}, TripFuel=${I}`),new Error(`Fuel requirement (${N.toFixed(0)} kg) exceeds maximum capacity (${i.maxFuelCapacity} kg)`);return{tripFuel:Math.round(I),reserveFuel:Math.round(x),totalFuel:Math.round(N),maxCapacity:i.maxFuelCapacity,fuelPercentage:Math.round(N/i.maxFuelCapacity*100)}}async calculateFlightPerformance(e,n,r=0){const a=await this.getAircraftByModel(e);if(!a)return null;const i=a.typicalFuelBurn,o=i*n,l=n/a.maxRange*100,c=r/a.maxPayload*100,u=n/a.cruiseSpeed;let d=100;return l>80?d-=20:l>60&&(d-=10),c>80?d-=15:c>60&&(d-=5),i<2?d+=10:i<2.5&&(d+=5),d=Math.max(0,Math.min(100,d)),{performance:{rating:Math.round(d),rangeEfficiency:Math.round(l),payloadEfficiency:Math.round(c),fuelEfficiency:i.toFixed(2),flightTime:Math.round(u*60),totalFuel:Math.round(o),suitability:d>=80?"Excellent":d>=60?"Good":d>=40?"Fair":"Poor"}}}async validateRoute(e,n,r=0){const a=await this.getAircraftByModel(e);if(!a)return{isValid:!1,errors:["Aircraft not found"]};const i=[];n>a.maxRange&&i.push(`Distance (${n} NM) exceeds aircraft range (${a.maxRange} NM)`),r>a.maxPayload&&i.push(`Payload (${r} kg) exceeds maximum (${a.maxPayload} kg)`);const o=a.typicalFuelBurn*n;return o>a.maxFuelCapacity&&i.push(`Fuel required (${Math.round(o)} kg) exceeds capacity (${a.maxFuelCapacity} kg)`),{isValid:i.length===0,errors:i,warnings:i.length>0?["Route may not be feasible"]:[]}}async calculateFlightTime(e,n){const r=await this.getAircraftByModel(e);if(!r)throw new Error(`Aircraft model '${e}' not found`);const o=n/r.cruiseSpeed+.5,l=Math.floor(o),c=Math.round((o-l)*60);return{hours:l,minutes:c,totalMinutes:Math.round(o*60)}}async checkPayloadLimits(e,n,r=0){const a=await this.getAircraftByModel(e);if(!a)return{isValid:!1,errors:["Aircraft not found"]};const i=n+r,o=a.maxTakeoffWeight;return{isValid:i<=o,totalWeight:Math.round(i),maxWeight:o,remainingCapacity:Math.round(o-i),percentage:Math.round(i/o*100)}}async getAircraftPhysicsConfig(e){const n=await this.getAircraftByModel(e);if(!n)throw new Error(`Aircraft model '${e}' not found`);return{mass:n.emptyWeight,wingArea:n.wingArea,aspectRatio:n.aspectRatio,maxLiftCoefficient:n.maxLiftCoefficient,cruiseSpeed:n.cruiseSpeed,maxRange:n.maxRange,momentOfInertia:n.momentOfInertia||{x:n.emptyWeight*1e3,y:n.emptyWeight*2e3,z:n.emptyWeight*2500},engine:{maxThrust:n.maxThrustPerEngine||n.emptyWeight*9.81*.3,specificFuelConsumption:n.typicalFuelBurn/1e3}}}async calculateDynamicMass(e,n,r){const a=await this.getAircraftByModel(e);if(!a)throw new Error(`Aircraft model '${e}' not found`);const i=r*a.maxFuelCapacity,o=a.emptyWeight+n+i;return{emptyMass:a.emptyWeight,payload:n,fuelMass:i,totalMass:o,centerOfGravity:{x:(a.emptyWeight*.4+n*.5+i*.45)/o,y:0,z:(a.emptyWeight*.1+n*.1+i*.15)/o}}}async validateAircraftForSimulation(e){const n=await this.getAircraftByModel(e);if(!n)return{isValid:!1,errors:["Aircraft not found"]};const r=[],a=[];return n.wingArea||r.push("Wing area not defined"),n.aspectRatio||a.push("Aspect ratio not defined - using default"),n.maxLiftCoefficient||a.push("Max lift coefficient not defined - using default"),n.momentOfInertia||a.push("Moment of inertia not defined - using estimates"),n.cruiseSpeed||r.push("Cruise speed not defined"),n.maxRange||r.push("Maximum range not defined"),n.typicalFuelBurn||r.push("Fuel consumption data not defined"),{isValid:r.length===0,errors:r,warnings:a,physicsReady:r.length===0&&a.length<=1}}async getPerformanceEnvelope(e){const n=await this.getAircraftByModel(e);if(!n)throw new Error(`Aircraft model '${e}' not found`);return{speed:{min:n.cruiseSpeed*.6,max:n.cruiseSpeed*1.3,cruise:n.cruiseSpeed},altitude:{min:0,max:n.serviceCeiling||41e3,optimal:35e3},weight:{empty:n.emptyWeight,maxTakeoff:n.maxTakeoffWeight,maxLanding:n.maxLandingWeight||n.maxTakeoffWeight*.85},range:{typical:n.maxRange*.85,maximum:n.maxRange}}}async getFlapProfile(e){const n=await this.getAircraftByModel(e);if(!n)throw new Error(`Aircraft model '${e}' not found`);return n.flapProfile||{positions:[{angle:0,clIncrement:0,cdIncrement:0,label:"UP"},{angle:10,clIncrement:.3,cdIncrement:.015,label:"1"},{angle:20,clIncrement:.6,cdIncrement:.035,label:"2"},{angle:30,clIncrement:1,cdIncrement:.07,label:"FULL"}]}}async getAirbrakeProfile(e){const n=await this.getAircraftByModel(e);if(!n)throw new Error(`Aircraft model '${e}' not found`);return n.airbrakeProfile||{positions:[{label:"RET",dragIncrement:0,liftDecrement:0},{label:"EXT",dragIncrement:.06,liftDecrement:-.1},{label:"GND",dragIncrement:.15,liftDecrement:-.2}]}}async getControlSurfaceProfiles(e){if(!await this.getAircraftByModel(e))throw new Error(`Aircraft model '${e}' not found`);return{flaps:await this.getFlapProfile(e),airbrakes:await this.getAirbrakeProfile(e)}}}const Sn=new dm;class hm{constructor(e=""){this.allAirports=(hn==null?void 0:hn.airports)||[],this.apiKey=e,this.useLocalDatabase=!e,this.freeTrialUsed=!1}getAllAirports(){return this.allAirports}getNormalAirports(){return this.allAirports.filter(e=>e.type==="normal")}getEmergencyAirports(){return this.allAirports.filter(e=>e.type==="emergency")}searchAirports(e,n={}){const{type:r="all",includeEmergency:a=!1}=n;if(!e||e.trim().length<2)return[];let i=this.allAirports;r==="normal"||!a&&r==="all"?i=this.getNormalAirports():r==="emergency"&&(i=this.getEmergencyAirports());const o=e.toLowerCase();return i.filter(l=>l.iata.toLowerCase().includes(o)||l.icao.toLowerCase().includes(o)||l.name.toLowerCase().includes(o)||l.city&&l.city.toLowerCase().includes(o))}searchNormalAirports(e){return this.searchAirports(e,{type:"normal"})}searchEmergencyAirports(e){return this.searchAirports(e,{type:"emergency"})}getAirportByCode(e){return this.allAirports.find(n=>n.iata.toUpperCase()===e.toUpperCase()||n.icao.toUpperCase()===e.toUpperCase())}getAirportType(e){const n=this.getAirportByCode(e);return n?n.type:null}getPopularAirports(){const e=["JFK","LAX","LHR","CDG","HND","DXB","SIN","SYD","FRA","ORD"];return this.getNormalAirports().filter(n=>e.includes(n.iata))}calculateDistance(e,n){if(!e||!n)return 0;const r=3440,a=e.latitude*Math.PI/180,i=n.latitude*Math.PI/180,o=(n.latitude-e.latitude)*Math.PI/180,l=(n.longitude-e.longitude)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(a)*Math.cos(i)*Math.sin(l/2)*Math.sin(l/2),u=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return Math.round(r*u)}getAirportsWithinRadius(e,n,r,a={}){const{type:i="all"}=a;let o=this.allAirports;return i==="normal"?o=this.getNormalAirports():i==="emergency"&&(o=this.getEmergencyAirports()),o.filter(l=>this.calculateDistance({latitude:e,longitude:n},{latitude:l.latitude,longitude:l.longitude})<=r)}getAirportsByCategory(e,n={}){const{type:r="all"}=n;let a=this.allAirports;return r==="normal"?a=this.getNormalAirports():r==="emergency"&&(a=this.getEmergencyAirports()),a.filter(i=>i.category===e)}getAirportByFrequency(e){return this.allAirports.find(r=>r.frequencies?r.frequencies.some(a=>Math.abs(a.frequency-e)<.005):!1)}getRunwayInfo(e){const n=this.getAirportByCode(e);return n?n.runways&&Array.isArray(n.runways)?n.runways:n.runway&&n.runwayLength?[{name:n.runway,length:n.runwayLength,surface:"Unknown",category:n.category}]:[]:[]}getFrequencyInfo(e){const n=this.getAirportByCode(e);return n&&n.frequencies?n.frequencies:[]}getSuitableRunways(e,n){return this.getRunwayInfo(e).filter(a=>{switch(n){case"Heavy":return a.category==="Heavy";case"Medium":return a.category==="Medium"||a.category==="Heavy";case"Light":return!0;default:return!1}})}getEnhancedAirportData(e){const n=this.getAirportByCode(e);if(!n)return null;const r={...n};return n.category==="4F"?(r.facilities=["Multiple Terminals","International Gates","Cargo Facilities","Maintenance Hangars","Fuel Services","De-icing Equipment"],r.operatingHours="24/7"):n.category==="4E"&&(r.facilities=["Main Terminal","Regional Gates","Cargo Facilities","Fuel Services"],r.operatingHours="05:00-24:00"),r}getRunwayGeometry(e,n){const r=this.getAirportByCode(e);if(!r)return null;let a=null;n&&r.runways&&(a=r.runways.find(N=>N.name===n)),a||(r.runways&&Array.isArray(r.runways)&&r.runways.length>0?a=r.runways[0]:r.runway?a={name:r.runway,length:r.runwayLength||8e3}:a={name:"09/27",length:8e3});const i=a.name.match(/^(\d{2})/);i&&parseInt(i[1])*10;const o=(a.length||8e3)*.3048,l=45,c=6371e3,u=Math.PI/180,d=180/Math.PI,y=o/2,p=a.name.match(/^(\d{2})/);let h=0;p&&(h=parseInt(p[1])*10);let v=h;if(n){const N=n.match(/^(\d{2})/);N&&(v=parseInt(N[1])*10)}const w=y*Math.cos(h*u)/c*d,C=y*Math.sin(h*u)/(c*Math.cos(r.latitude*u))*d,g={latitude:r.latitude-w,longitude:r.longitude-C,elevation:Number(r.elevation)||0},m={latitude:r.latitude+w,longitude:r.longitude+C,elevation:Number(r.elevation)||0};let f=Math.abs(v-h);f>180&&(f=360-f);let S,A,I;f>90?(S=m,A=g,I=v):(S=g,A=m,I=v);const R={KLAX:{"24R":108.5,"24L":108.4,"25R":108.75,"25L":109.9,"06L":108.4,"06R":108.5,"07L":109.9,"07R":108.75},KSFO:{"28L":109.55,"28R":111.7,"19L":108.9,"19R":108.7,"01L":110.5,"01R":109.3},KJFK:{"04R":109.5,"22L":110.9,"13L":111.5,"31R":112.3},ZSSS:{"18L":109.3,"36R":110.3,"18R":109.9,"36L":111.9},SHA:{"18L":109.3,"36R":110.3,"18R":109.9,"36L":111.9}};let x=null;return R[e]&&R[e][n]?x=R[e][n]:x=110,{airportLat:r.latitude,airportLon:r.longitude,heading:I,length:o,width:l,thresholdStart:S,thresholdEnd:A,runwayName:n||a.name,ilsFrequency:x}}getDatabaseStats(){return hn.metadata.statistics}}const Ve=new hm,ym=()=>{const r=Math.floor(759);return(118e3+Math.floor(Math.random()*(r+1))*25)/1e3},pm=(t=3)=>{const e=[];for(let n=0;n<t;n++){const a=Math.random()>.3?5:3;let i="";for(let o=0;o<a;o++)i+=String.fromCharCode(65+Math.floor(Math.random()*26));e.push(i)}return e},Zd=async(t,e)=>Yp(t,e),js=t=>{if(!t||t.length<3)return"DEF01D";const e=t.substring(0,3);Math.floor(Math.random()*10).toString();const n=Math.floor(Math.random()*90+10).toString();return`${e}${n}D`},Os=t=>{if(!t||t.length<3)return"ARR01A";const e=t.substring(0,3),n=Math.floor(Math.random()*90+10).toString();return`${e}${n}A`},$i=()=>{const t=String.fromCharCode(65+Math.floor(Math.random()*6)),e=Math.floor(Math.random()*50+1);return`${t}${e}`},eh=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return t.charAt(Math.floor(Math.random()*t.length))},th=t=>{let e=[];t&&t.runways&&Array.isArray(t.runways)&&t.runways.length>0?e=t.runways.map(r=>r.name):t&&t.runway?e=[t.runway]:e=["09L/27R","18L/36R"];const n=[];return e.forEach(r=>{r.includes("/")?r.split("/").forEach(a=>n.push(a.trim())):r.includes("-")?r.split("-").forEach(a=>n.push(a.trim())):n.push(r)}),n},Jc=(t,e=null)=>{if(!t)return console.warn(" getRunwayHeading called with empty runwayName"),0;const n=t.split(/[\/\-]/);if(n.length>1&&e!==null){const a=n.map(i=>{const o=i.match(/(\d{1,2})/);return o?parseInt(o[1])*10:null}).filter(i=>i!==null);if(a.length>=2){a.sort((l,c)=>l-c);const i=e?a[0]:a[a.length-1];console.log(` Runway Pair [${t}] -> Preferred: ${i} (Eastward: ${e})`);const o=i%360;return o===0?360:o}}const r=t.match(/(\d{1,2})/);if(r){const a=parseInt(r[1])*10%360;return a===0?360:a}return console.warn(` Could not parse runway heading from: ${t}`),0};function fm(t,e,n,r,a){const i=f=>f*Math.PI/180,o=f=>f*180/Math.PI,l=i(t),c=i(e),u=i(n),d=i(r),y=2*Math.asin(Math.sqrt(Math.sin((u-l)/2)**2+Math.cos(l)*Math.cos(u)*Math.sin((d-c)/2)**2));if(y===0)return{latitude:t,longitude:e};const p=Math.sin((1-a)*y)/Math.sin(y),h=Math.sin(a*y)/Math.sin(y),v=p*Math.cos(l)*Math.cos(c)+h*Math.cos(u)*Math.cos(d),w=p*Math.cos(l)*Math.sin(c)+h*Math.cos(u)*Math.sin(d),C=p*Math.sin(l)+h*Math.sin(u),g=Math.atan2(C,Math.sqrt(v*v+w*w)),m=Math.atan2(w,v);return{latitude:o(g),longitude:o(m)}}const Yp=(t,e)=>{if(!t||!e)return[];const n=6371,r=h=>h*Math.PI/180,a=r(e.latitude-t.latitude),i=r(e.longitude-t.longitude),o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r(t.latitude))*Math.cos(r(e.latitude))*Math.sin(i/2)*Math.sin(i/2),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),c=n*l,u=Math.ceil(c/800),d=Math.max(5,u),y=[],p=pm(d-1);for(let h=1;h<d;h++){const v=h/d,w=fm(t.latitude,t.longitude,e.latitude,e.longitude,v);y.push({name:p[h-1]||`WPT${h}`,latitude:w.latitude,longitude:w.longitude,type:"WAYPOINT",frequency:ym()})}return y};function jt(t,e,n,r){const i=Ui(n-t),o=Ui(r-e),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Ui(t))*Math.cos(Ui(n))*Math.sin(o/2)*Math.sin(o/2),u=3440.065*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)));return Math.round(u*10)/10}function Ui(t){return t*(Math.PI/180)}function gm(t,e=450){const n=t/e,r=Math.floor(n),a=Math.round((n-r)*60);return{hours:r,minutes:a,totalMinutes:Math.round(n*60)}}async function mm(t,e,n=0,r=1){try{return await Sn.calculateFuelRequirements(e,t,n,r)}catch(a){console.warn("Aircraft not found, using generic calculation:",a.message);const o=t*2.5,l=o*r,c=o+l;return{aircraft:"Generic Jet",distance:t,baseFuel:Math.round(o),tripFuel:Math.round(o),payloadFactor:1,adjustedFuel:Math.round(o),reserveFuel:Math.round(l),totalFuel:Math.round(c),maxFuelCapacity:5e4,fuelSufficient:c<=5e4,flightTime:Math.round(t/450*60),units:"kg",isGeneric:!0}}}async function vm(t,e,n,r=0,a=.1){if(!t||!e)throw new Error("Both departure and arrival airports are required");const i=jt(t.latitude,t.longitude,e.latitude,e.longitude);let o;try{o=await Sn.calculateFlightTime(n,i)}catch(y){console.warn("Using generic flight time calculation:",y.message),o=gm(i)}const l=await mm(i,n,r,a),c=await Sn.getAircraftByModel(n),u=c?await Sn.calculateFlightPerformance(n,i,r):null,d=Yp(t,e);return{departure:{airport:t.iata||t.icao,name:t.name,city:t.city,country:t.country,runways:t.runways,frequencies:t.frequencies},arrival:{airport:e.iata||e.icao,name:e.name,city:e.city,country:e.country,runways:e.runways,frequencies:e.frequencies},distance:{nauticalMiles:i,kilometers:Math.round(i*1.852),statuteMiles:Math.round(i*1.151)},time:o,fuel:l,aircraft:c?{model:c.model,manufacturer:c.manufacturer,type:c.type,maxRange:c.maxRange,maxPayload:c.maxPayload,maxPassengers:c.maxPassengers}:null,performance:u?u.performance:null,waypoints:d,validation:u?await Sn.validateRoute(n,i,r):null}}function nh(t){return`${t.toFixed(1)} NM`}function rh(t){return t.hours===0?`${t.minutes}m`:`${t.hours}h ${t.minutes}m`}function ah(t){return!t||!t.totalFuel?"Calculating...":`${t.totalFuel.toLocaleString()} kg`}var Jp={exports:{}},ns={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm=L,Am=Symbol.for("react.element"),xm=Symbol.for("react.fragment"),bm=Object.prototype.hasOwnProperty,Cm=wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tm={key:!0,ref:!0,__self:!0,__source:!0};function Xp(t,e,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bm.call(e,r)&&!Tm.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:Am,type:t,key:i,ref:o,props:a,_owner:Cm.current}}ns.Fragment=xm;ns.jsx=Xp;ns.jsxs=Xp;Jp.exports=ns;var s=Jp.exports;const ih=({placeholder:t,onSelect:e,selectedAirport:n,searchResults:r,handleSearch:a})=>{const[i,o]=L.useState(""),[l,c]=L.useState(!1),u=L.useRef(null),d=h=>{const v=h.target.value;o(v),a(v),c(!0)},y=()=>{o(""),e(null),c(!1)},p=h=>{e(h),o(""),c(!1)};return L.useEffect(()=>{const h=v=>{u.current&&!u.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),s.jsxs("div",{className:"search-input",ref:u,children:[s.jsx("input",{type:"text",placeholder:t,value:i,onChange:d,onFocus:()=>r&&r.length>0&&c(!0),className:"airport-input dispatch-input",autoComplete:"off"}),n&&s.jsxs("div",{className:"selected-airport-badge",children:[s.jsx("span",{className:"airport-code",children:n.iata||n.icao}),s.jsxs("span",{className:"airport-name",children:[" - ",n.name]}),s.jsx("button",{onClick:y,className:"clear-btn",title:"Clear selection",children:""})]}),l&&r&&r.length>0&&!n&&s.jsxs("div",{className:"search-results",children:[s.jsxs("div",{className:"results-count",children:[r.length," airport",r.length!==1?"s":""," found"]}),r.map((h,v)=>s.jsxs("div",{className:"result-item",onClick:()=>p(h),children:[s.jsxs("div",{className:"result-main",children:[s.jsx("span",{className:"airport-code",children:h.iata||h.icao}),s.jsx("span",{className:"airport-name",children:h.name})]}),s.jsxs("div",{className:"result-secondary",children:[(h.city||h.country)&&s.jsx("span",{children:[h.city||"",h.country||""].filter(Boolean).join(", ")}),s.jsx("span",{className:`airport-type type-${h.type}`,children:h.type})]})]},`${h.iata}-${v}`))]})]})};const Sm=[{name:"Delta Air Lines",icao:"DAL",iata:"DL",callsign:"DELTA"},{name:"American Airlines",icao:"AAL",iata:"AA",callsign:"AMERICAN"},{name:"United Airlines",icao:"UAL",iata:"UA",callsign:"UNITED"},{name:"Lufthansa",icao:"DLH",iata:"LH",callsign:"LUFTHANSA"},{name:"British Airways",icao:"BAW",iata:"BA",callsign:"SPEEDBIRD"},{name:"Air France",icao:"AFR",iata:"AF",callsign:"AIRFRANS"},{name:"Emirates",icao:"UAE",iata:"EK",callsign:"EMIRATES"},{name:"Qatar Airways",icao:"QTR",iata:"QR",callsign:"QATARI"},{name:"Singapore Airlines",icao:"SIA",iata:"SQ",callsign:"SINGAPORE"},{name:"Cathay Pacific",icao:"CPA",iata:"CX",callsign:"CATHAY"},{name:"Japan Airlines",icao:"JAL",iata:"JL",callsign:"JAPANAIR"},{name:"ANA All Nippon Airways",icao:"ANA",iata:"NH",callsign:"ALL NIPPON"},{name:"Korean Air",icao:"KAL",iata:"KE",callsign:"KOREANAIR"},{name:"Turkish Airlines",icao:"THY",iata:"TK",callsign:"TURKISH"},{name:"Air Canada",icao:"ACA",iata:"AC",callsign:"AIR CANADA"},{name:"Qantas",icao:"QFA",iata:"QF",callsign:"QANTAS"},{name:"KLM Royal Dutch Airlines",icao:"KLM",iata:"KL",callsign:"KLM"},{name:"Swiss International Air Lines",icao:"SWR",iata:"LX",callsign:"SWISS"},{name:"Virgin Atlantic",icao:"VIR",iata:"VS",callsign:"VIRGIN"},{name:"Alaska Airlines",icao:"ASA",iata:"AS",callsign:"ALASKA"},{name:"Southwest Airlines",icao:"SWA",iata:"WN",callsign:"SOUTHWEST"},{name:"JetBlue Airways",icao:"JBU",iata:"B6",callsign:"JETBLUE"},{name:"Ryanair",icao:"RYR",iata:"FR",callsign:"RYANAIR"},{name:"EasyJet",icao:"EZY",iata:"U2",callsign:"EASY"},{name:"Air China",icao:"CCA",iata:"CA",callsign:"AIR CHINA"},{name:"China Southern Airlines",icao:"CSN",iata:"CZ",callsign:"CHINA SOUTHERN"},{name:"China Eastern Airlines",icao:"CES",iata:"MU",callsign:"CHINA EASTERN"},{name:"Hainan Airlines",icao:"CHH",iata:"HU",callsign:"HAINAN"},{name:"Ethiopian Airlines",icao:"ETH",iata:"ET",callsign:"ETHIOPIAN"},{name:"EgyptAir",icao:"MSR",iata:"MS",callsign:"EGYPTAIR"},{name:"Royal Air Maroc",icao:"RAM",iata:"AT",callsign:"ROYALAIRMAROC"},{name:"Aeroflot",icao:"AFL",iata:"SU",callsign:"AEROFLOT"},{name:"Air India",icao:"AIC",iata:"AI",callsign:"AIRINDIA"},{name:"IndiGo",icao:"IGO",iata:"6E",callsign:"IFLY"},{name:"Thai Airways",icao:"THA",iata:"TG",callsign:"THAI"},{name:"Malaysia Airlines",icao:"MAS",iata:"MH",callsign:"MALAYSIAN"},{name:"Garuda Indonesia",icao:"GIA",iata:"GA",callsign:"INDONESIA"},{name:"Vietnam Airlines",icao:"HVN",iata:"VN",callsign:"VIET NAM AIRLINES"},{name:"Philippine Airlines",icao:"PAL",iata:"PR",callsign:"PHILIPPINE"},{name:"EVA Air",icao:"EVA",iata:"BR",callsign:"EVA"},{name:"Asiana Airlines",icao:"AAR",iata:"OZ",callsign:"ASIANA"},{name:"Saudi Arabian Airlines",icao:"SVA",iata:"SV",callsign:"SAUDIA"},{name:"El Al Israel Airlines",icao:"ELY",iata:"LY",callsign:"ELAL"},{name:"Iberia",icao:"IBE",iata:"IB",callsign:"IBERIA"},{name:"Finnair",icao:"FIN",iata:"AY",callsign:"FINNAIR"},{name:"SAS Scandinavian Airlines",icao:"SAS",iata:"SK",callsign:"SCANDINAVIAN"},{name:"Austrian Airlines",icao:"AUA",iata:"OS",callsign:"AUSTRIAN"},{name:"Brussels Airlines",icao:"BEL",iata:"SN",callsign:"BEE-LINE"},{name:"TAP Air Portugal",icao:"TAP",iata:"TP",callsign:"AIR PORTUGAL"},{name:"Aegean Airlines",icao:"AEE",iata:"A3",callsign:"AEGEAN"},{name:"LATAM Airlines",icao:"LAN",iata:"LA",callsign:"LAN"},{name:"Avianca",icao:"AVA",iata:"AV",callsign:"AVIANCA"},{name:"Aeromexico",icao:"AMX",iata:"AM",callsign:"AEROMEXICO"}],Qp={airlines:Sm};class Im{constructor(){this.airlines=Qp.airlines}getRandomAirline(){return this.airlines[Math.floor(Math.random()*this.airlines.length)]}generateRandomCallsign(e){const n=Math.floor(Math.random()*9e3)+1e3;return`${e.iata}${n}`}async getRandomAircraftForDistance(e){const n=await Sn.getAllAircraft();if(!n||!Array.isArray(n)||n.length===0)return console.error("No aircraft data available for random flight generation."),null;const r=n.filter(a=>(a.range||0)>=e*1.2);return r.length===0?n.reduce((a,i)=>(i.range||0)>(a.range||0)?i:a):r[Math.floor(Math.random()*r.length)]}async getRandomAirports(){const e=Ve.getAllAirports();for(let r=0;r<10;r++){const a=Math.floor(Math.random()*e.length),i=Math.floor(Math.random()*e.length);if(a===i)continue;const o=e[a],l=e[i],c=jt(o.latitude,o.longitude,l.latitude,l.longitude);if(c.nauticalMiles>=100&&c.nauticalMiles<=8e3)return{departure:o,arrival:l,distance:c}}const n=e.filter(r=>r.iata&&["JFK","LAX","LHR","CDG","DXB","HND","SYD","SFO"].includes(r.iata));if(n.length>=2){const r=n[0],a=n[1],i=jt(r.latitude,r.longitude,a.latitude,a.longitude);return{departure:r,arrival:a,distance:i}}return{departure:e[0],arrival:e[1],distance:jt(e[0].latitude,e[0].longitude,e[1].latitude,e[1].longitude)}}roundToSignificantDigits(e,n=3){if(!Number.isFinite(e)||e===0)return e;const r=Math.abs(e),a=Math.floor(Math.log10(r)),i=Math.pow(10,n-a-1);return Math.round(e*i)/i}async generateRandomFlightParameters(){const e=this.getRandomAirline(),n=this.generateRandomCallsign(e),{departure:r,arrival:a,distance:i}=await this.getRandomAirports(),o=await this.getRandomAircraftForDistance(i.nauticalMiles);if(!o)throw new Error("Could not find suitable aircraft for the generated route (or aircraft data missing).");const l=o.passengers||180,c=Math.floor(Math.random()*(l*.8))+Math.floor(l*.2),u=Math.round(this.roundToSignificantDigits(c,3)),d=Math.floor(u*100)+Math.floor(Math.random()*5e3),y=Math.round(this.roundToSignificantDigits(d,3)),p=.1+Math.random()*.1,h=this.roundToSignificantDigits(p,3),v=Math.floor(28e3+Math.random()*12e3),w=Math.round(this.roundToSignificantDigits(v,3)),C=!0,g=!0,m=["rookie","amateur","intermediate","advanced","expert"],f=m[Math.floor(Math.random()*m.length)];return{airline:e.name,callsign:n,aircraftModel:o.model,pax:u,payload:y,fuelReserve:h,cruiseHeight:w,useRandomTime:C,useRandomSeason:g,difficulty:f,selectedDeparture:r,selectedArrival:a,distance:i.nauticalMiles}}validateAircraftForRoute(e,n,r){const a=Sn.getAircraftByModel(e);if(!a)return!1;const i=jt(n.latitude,n.longitude,r.latitude,r.longitude);return(a.range||0)>=i.nauticalMiles*1.2}}const oh=new Im,Gs={narrative:{awaiting:"Awaiting instructions...",phases:{boarding:{default:{0:{title:"Boarding at ${departure}",content:'The smell of jet fuel and coffee fills the cabin as passengers stow their luggage. Outside, the ground crew is prepping for our departure. "Welcome aboard ${callsign}," the flight attendant announces over the PA. The ${aircraft} is ready for the journey to ${arrival}.'},1:{title:"Final Boarding Call",content:'Passengers are taking their seats. The cabin crew is performing final checks. The captain welcomes everyone aboard. "We have a smooth flight ahead to ${arrival}." The doors will be closing shortly.'},2:{title:"Pre-flight Checks",content:'Cockpit preparation is underway. Checking fuel, route, and systems. "Boarding complete," the gate agent confirms. The jetway retracts. We are ready to go.'}},sunny:{0:{title:"Sunny Departure",content:'Sunlight streams through the windows as passengers board. It\'s a beautiful day for flying. "Welcome to ${callsign}," the crew greets everyone warmly.'}},rainy:{0:{title:"Rainy Boarding",content:'Rain drums against the fuselage as passengers hurry on board. "Watch your step," the crew advises. A gray day for a flight to ${arrival}.'}},shakespearean:{0:{title:"The Stage is Set",content:"Friends, Romans, countrymen, lend me your ears! We embark upon a journey to ${arrival}. The iron bird awaits its masters."}}},departure_clearance:{default:{0:{title:"IFR Clearance",content:'The radio crackles. "${callsign}, cleared to ${arrival} via flight plan route. Climb and maintain FL350. Departure frequency 124.7. Squawk 4211." You read back the clearance as the systems come online.'},1:{title:"Clearance Delivery",content:'"${callsign}, ready to copy clearance." "Cleared to ${arrival}, maintain 5000, expect FL350 ten minutes after departure." The pen scratches on the pad. "Readback correct."'},2:{title:"Route Confirmation",content:'Verifying the route to ${arrival}. "Clearance received," the First Officer nods. Setting up the FMS and checking the squawk code. Ready for pushback.'}},shakespearean:{0:{title:"Permission Granted",content:"The gods of the ether have spoken! We are granted passage to the lands of ${arrival}. Let us ascend!"}}},pushback:{default:{0:{title:"Pushback Approved",content:'A gentle jolt as the tug connects. "Ground to Cockpit, brakes released." The terminal building slowly drifts away as you start the engines. The hum of the APU is replaced by the roar of the main turbines.'},1:{title:"Starting Engines",content:'"Pushback complete, set parking brake." "Starting engine 2." The N2 rises, followed by fuel flow and light off. A good start. "Starting engine 1."'},2:{title:"Better Pushback",content:'The tug pushes us back onto the taxiway. "Clear to start." The engines whine to life. "Tow bar disconnected, hand signals on the left." We are under our own power.'}},rainy:{0:{title:"Wet Pushback",content:'Rain streaks the windshield as we push back. The tarmac glistens under the lights. "Engine start approved." The spray kicks up behind us.'}},shakespearean:{0:{title:"Backward We Go",content:"We retreat to advance! The beast awakens, breathing fire and smoke. Release us from our tether!"}}},taxiing:{default:{0:{title:"Taxi to Runway ${departureRunway}",content:'"${callsign}, taxi to runway ${departureRunway} via Alpha, Bravo." You release the parking brake. The tires thump rhythmically over the concrete joints as you weave through the maze of taxiways. Sunlight glints off the tarmac.'},1:{title:"Taxi Instructions",content:'"Hold short of runway 27L." We taxi past heavy jets. "Give way to the 747 on your right." Proceeding to the holding point. Flaps set for takeoff.'},2:{title:"On the Move",content:'Rolling out to the active runway. Performing flight control checks. "Cabin crew, prepare for takeoff." The long line of planes awaits departure.'}},sunny:{0:{title:"Bright Taxi",content:'The sun is blinding as we taxi. Heat haze shimmers over the runway. "Taxi to holding point." Ready to fly.'}},rainy:{0:{title:"Slippery Taxi",content:'Wipers on. The taxiway lights reflect in the puddles. "Caution, braking action reported medium." We taxi carefully to the runway.'}},shakespearean:{0:{title:"The March Begins",content:"We march towards destiny! The path is winding, but the destination is clear. To the runway!"}}},takeoff_prep:{default:{0:{title:"Lined Up and Waiting",content:'Lined up on runway ${departureRunway}. Brakes set. Engines at idle. "Tower, ${callsign} holding in position ${departureRunway}, ready for takeoff." Check flaps, trim, and verify takeoff data.'},1:{title:"Holding Position",content:'Waiting for traffic to clear. "Line up and wait, runway ${departureRunway}." We position on the centerline. The runway stretches out before us.'},2:{title:"Final Checks",content:'Before takeoff checklist complete. "Approaching departure." Engines stable. "Ready to go?" The captain asks. "Ready," you reply.'}},rookie:{title:"Ready for Takeoff",content:"You are on the runway. Push the throttle forward to take off! Pull back on the stick when you reach speed."},shakespearean:{0:{title:"The Precipice",content:"We stand upon the edge of the world! The sky beckons. Shall we fly, or shall we fall?"}}},takeoff:{default:{0:{title:"Takeoff Clearance",content:'Lined up on runway ${departureRunway}. "Wind 130 at 8, runway ${departureRunway} cleared for takeoff." Throttles forward. The engines roar to life, pressing you back into the seat. Rotate at Vr.'},1:{title:"Rolling",content:'"Takeoff thrust set." 80 knots. "V1, Rotate." The nose lifts off the ground. We leave the earth behind.'},2:{title:"Airborne",content:'Full power. The runway blurs. Pulling back. The wheels leave the tarmac. "Positive rate, gear up." We are flying.'}},rookie:{title:"Takeoff!",content:"Full power! Pull up! You are flying!"},rainy:{0:{title:"Wet Takeoff",content:"Spray kicks up from the wheels. Throttles forward. We pierce through the rain and into the clouds."}},shakespearean:{0:{title:"Ascension",content:"We defy gravity! The earth cannot hold us. Up, up, into the heavens!"}}},initial_climb:{default:{0:{title:"Positive Rate",content:'The ground falls away beneath you. "Gear up." Punching through the lower cloud layer into the sunlight. The city of ${departure} shrinks into a miniature grid below. Speed increasing to 250 knots.'},1:{title:"Climbing Out",content:'"Contact Departure." "Climbing to 5000." Flaps up. The view is spectacular. Proceeding on course.'},2:{title:"Departure",content:'Turning to intercept the radial. "Maintain 250 knots." The airport is far behind us now. Climbing steadily.'}},rookie:{title:"Climbing",content:"Keep climbing! Don't go too fast or too slow."},sunny:{0:{title:"Sunny Climb",content:"Breaking through the haze into brilliant sunshine. The world below is a map. Climbing to cruise."}},rainy:{0:{title:"Cloudy Climb",content:"Entering the clouds. Visibility drops. Flying by instruments. Turbulence shakes the wings."}},shakespearean:{0:{title:"Higher Still",content:"We soar on wings of steel! The clouds are our domain. Higher, ever higher!"}}},main_climb:{default:{0:{title:"Climb to Cruise",content:'Passing 10,000 feet. "Accelerate to cruise speed." The sky darkens to a deeper blue as we ascend. The air is smooth. Climbing steadily to Flight Level 350.'},1:{title:"Passing FL180",content:'"Altimeters standard." The air is thin and cold. The engines are efficient here. Settling in for the long haul.'},2:{title:"High Altitude",content:`Approaching top of climb. The curve of the earth is visible. "Traffic at 2 o'clock." We are in the high airways.`}},shakespearean:{0:{title:"The Summit",content:"We reach for the stars! The air is thin, but our spirits are high. Onward to the destination!"}}},cruise:{default:{0:{title:"Cruising at FL350",content:'Level at 35,000 feet. The horizon is a curved line of haze. "Maintain Mach 0.78." The engines hum with a steady, reassuring rhythm. Passengers are settling in for the flight to ${arrival}.'},1:{title:"Smooth Flight",content:'Autopilot is engaged. Monitoring systems. Fuel flow is nominal. "Coffee?" the flight attendant asks. A peaceful journey.'},2:{title:"Mid-flight",content:"Halfway there. Checking navigation. Waypoints pass by. The sun sets on the horizon, painting the sky in orange and purple."}},sunny:{0:{title:"Clear Skies",content:"Not a cloud in sight. The ground is visible miles below. Perfect flying weather."}},shakespearean:{0:{title:"The Voyage",content:"We sail the ocean of the sky. The wind is our friend. Peace reigns in the heavens."}}},descent:{default:{0:{title:"Top of Descent",content:'Throttles back. The pitch drops slightly as we begin our descent. "Descend and maintain 10,000 feet." The destination ${arrival} lies ahead.'},1:{title:"Descending",content:'"Cross constraint at 12,000." Spoilers out to slow down. The city lights of ${arrival} appear in the distance. Preparing for arrival.'},2:{title:"Arrival Prep",content:'Checking arrival ATIS. "Altimeters set." Cabin crew prepare for landing. Descending through the clouds.'}},rainy:{0:{title:"Descent into Rain",content:'Descending into the gloom. Rain lashes the windows again. "Expect ILS approach." Radar shows storms ahead.'}},shakespearean:{0:{title:"The Return",content:"We descend from our throne! The earth reclaims us. Prepare for the return to the mortal coil."}}},approach:{default:{0:{title:"Approach to ${arrival}",content:'Lined up for runway ${landingRunway}. "Gear down, flaps 30." The runway threshold looms ahead through the haze. Speed checked, localized captured.'},1:{title:"Final Approach",content:'"Cleared to land." Three greens. Checklist complete. Focusing on the touchdown zone. 1000 feet.'},2:{title:"Short Final",content:'500 feet. Stable approach. "Land check." The runway lights are bright. Almost there.'}},rainy:{0:{title:"Stormy Approach",content:'Fighting the crosswind. Wipers on high. The runway appears out of the mist. "Minimums." Continuing.'}},shakespearean:{0:{title:"The Landing",content:"The ground rushes to meet us! Steady now, steady. We shall kiss the earth!"}}},landing:{default:{0:{title:"Touchdown",content:'Flare... Touchdown. Spoilers deployed. Reverse thrust roaring. "${callsign}, welcome to ${arrival}." Braking to taxi speed.'},1:{title:"Landed",content:'Firm touchdown. "Speedbrakes up, reversers normal." Slowing down. "Turn off next taxiway." We made it.'},2:{title:"Arrival",content:'Greased it. Smooth rollout. "Welcome to ${arrival}." Passengers applaud. Exiting the runway.'}},rainy:{0:{title:"Wet Landing",content:"Hydroplaning risk. Firm landing to break the water tension. Spray everywhere. Slowing safely."}},shakespearean:{0:{title:"Safe Return",content:"We have returned! The journey ends. Glory to the pilots!"}}},after_land_taxiing:{default:{0:{title:"Taxi to Gate",content:'"Turn left next taxiway, contact Ground." The flight is over. Taxing past other aircraft to our assigned gate.'},1:{title:"Parking",content:"Cleaning up the aircraft. Flaps up, lights off. Approaching the terminal. The marshaller waves us in."},2:{title:"Gate Arrival",content:'Turning into the gate. "Stop." Parking brake set. Engines cooling down. Welcome home.'}},shakespearean:{0:{title:"The End",content:"The chariot stops. The journey is done. Rest now, weary travelers."}}},shutoff:{default:{0:{title:"Engine Shutdown",content:'Parking brake set. Fuel cutoff. The engines spin down into silence. APU off. "Thank you for flying with us." Flight complete.'},1:{title:"Debrief",content:"Completing the logbook. Passengers disembarking. The aircraft is quiet. Job well done."},2:{title:"Shutdown",content:"All systems off. The cockpit goes dark. One last look at the plane. Until next time."}},shakespearean:{0:{title:"Silence",content:"Silence falls. The beast sleeps. Exeunt all."}}}}},failures:{engine:{minor:"Engine ${engineIndex + 1} showing abnormal vibrations. Monitor closely.",critical:"Engine ${engineIndex + 1} FAILED! Immediate action required!",resolved:"Engine ${engineIndex + 1} restored to normal operation."},hydraulic:{minor:"Primary hydraulic pressure dropping. Check systems.",critical:"Primary hydraulic system FAILURE! Manual reversion required!",resolved:"Hydraulic pressure stabilized. System restored."},electrical:{minor:"Electrical bus ${bus} experiencing intermittent power loss.",critical:"Main electrical bus FAILURE! Emergency power engaged!",resolved:"Electrical bus power restored to normal levels."},fuel:{minor:"Fuel imbalance detected. Crossfeed engaged automatically.",critical:"Fuel leak detected! Rapid fuel loss occurring!",resolved:"Fuel imbalance resolved."},default:{minor:"System ${type} failure detected.",critical:"System ${type} CRITICAL FAILURE!",resolved:"System ${type} restored."}},ui:{debug:{title:"FLIGHT DATA & LNAV",lat:"Lat:",lon:"Lon:",alt:"Alt:",ias:"IAS:",gs:"GS:",mode:"Mode:",engaged:"ACTIVE",off:"OFF",tgt_hdg:"Target Hdg:",hdg_err:"Hdg Error:",tgt_roll:"Tgt Roll:",act_roll:"Act Roll:",ils_status:"ILS STATUS",dist:"Dist:",loc_err:"LOC Err:",gs_err:"G/S Err:",tgt_alt:"Tgt Alt:",next_wp:"Next WP:",wp_index:"WP Index:"},flight:{time_zulu:"Time (Zulu)",fuel:"Fuel",oil:"Oil",pax:"PAX",distance:"Dist",altitude:"Alt",speed:"Spd",heading:"Hdg",vertical_speed:"V/S",throttle:"THR",flaps:"Flaps",gear:"Gear",brakes:"Brakes",parking_brake:"Park Brk",spoilers:"Spoilers",messages:{freq_busy:"Frequency is busy. Please wait."}},panels:{overhead_button:"SYSTEMS [OH PNL]",pfd:"PRIMARY FLIGHT DISPLAY",nd:"NAVIGATION DISPLAY",engine_systems:"ENGINE & SYSTEMS",fuel:"FUEL",system_status:"SYSTEM STATUS / ALERTS",controls:"FLIGHT CONTROLS",flaps:"FLAPS",gear:"GEAR",brakes:"BRAKES",trim:"TRIM",systems:{status:"SYSTEM STATUS",hydraulics:"HYDRAULICS",hydraulics_abbrev:"HYD",electrics:"ELECTRICS",electrics_abbrev:"ELEC",warnings:"WARNINGS",no_warnings:"NO ACTIVE WARNINGS",on:"ON",off:"OFF"},active_failures:"ACTIVE FAILURES",no_active_alerts:"NO ACTIVE ALERTS",next_wp:"Next WP",wp_index:"WP Index",tgt_alt:"Tgt Alt"},flight_computer:{title:"Flight Computer",tabs:{plan:"Plan",add:"Add",nearest:"Nearest",radio:"Radio",utils:"Utils",perf:"Perf"},plan:{empty:"No waypoints in flight plan.",end_of_plan:"End of Flight Plan",hold:"HOLD",holding:"HOLDING",active:"(ACTIVE)"},add:{manual_entry:"Manual Entry",lat_placeholder:"Lat (e.g. 37.61)",lon_placeholder:"Lon (e.g. -122.37)",label_placeholder:"Label (Optional)",add_coordinates:"Add Coordinates",or:"OR",airport_search:"Airport Search",search_placeholder:"Search ICAO/IATA/Name...",search_types:{all:"All",normal:"Normal",emergency:"Emergency"},search_btn:"Search",add_to_plan:"+ Add to Plan",no_results:"No airports found.",alerts:{invalid_coords:"Please enter valid coordinates",invalid_freq:"Invalid Frequency. Must be between 108.00 and 117.95 MHz"},searching:"Searching..."},nearest:{title:"Nearest Airports (Top 20)",loading:"Finding nearest airports...",finding:"Finding airports...",empty:"No airports found nearby.",no_results:"No airports found.",add_btn:"+ Add",refresh:"Refresh",emergency_tag:"EMERGENCY"},radio:{title:"Navigation Radio",current_freq:"Current NAV1 Frequency",set_freq:"Set Frequency (MHz)",tune:"TUNE",common_freqs:"Common ILS Frequencies: 108.10, 108.15, ..., 111.95"},utils:{title:"Predictions",next_wp:"Next Waypoint:",distance:"Distance:",ete:"ETE to WPT:",fuel_flow:"Fuel Flow:",time_empty:"Time to Empty:",target_alt:"Target Alt (ft):",time_alt:"Time to Alt:",wrong_vs:"Wrong VS Direction",stable:"Stable"},converter:{title:"Unit Converter",value_placeholder:"Value",result:"Result:",units:{ft:"Feet (ft)",m:"Meters (m)",kts:"Knots (kts)",kmh:"Km/h",inHg:"inHg",hPa:"hPa",nm:"Naut. Miles",km:"Kilometers"}}},menu:{quit:"Return to Initialization"},header:{awaiting:"Awaiting flight instructions...",prepare:"Prepare for takeoff.",checklist_incomplete:" Checklist Incomplete",situation:"SITUATION"},loading:{starting_simulation:"Starting Flight Simulation...",initializing_physics:"Initializing physics engine..."},error:{initialization_error:"Initialization Error",reload_page:"Reload Page"},common:{critical:"CRITICAL"},messages:{cannot_proceed_missing_items:"Cannot proceed. Missing items: ${items}"},narrative:{phases:{boarding:{0:{title:"Boarding at ${departure}",content:'The smell of jet fuel and coffee fills the cabin. Passengers shuffle down the aisle, stowing bags overhead. Outside, the ramp crew is loading the final containers. "Welcome aboard ${callsign}," the flight attendant announces. The ${aircraft} is ready for the journey to ${arrival}.'},1:{title:"Boarding in Progress",content:'Rain streaks the windows at ${departure} as passengers settle in. The soft chime of the cabin overheads closing punctuates the low hum of the APU. "Boarding is complete," the gate agent confirms. We are preparing for our flight to ${arrival}.'},2:{title:"Welcome Aboard",content:'Sunlight streams through the windows of the ${aircraft}. The cabin crew is conducting final safety checks. "Ladies and gentlemen, welcome to flight ${callsign} service to ${arrival}." The air is cool and crisp from the AC vents.'}},departure_clearance:{0:{title:"IFR Clearance",content:'The radio crackles to life. "${callsign}, cleared to ${arrival} via flight plan route. Climb and maintain FL350. Departure frequency 124.7. Squawk 4211." You read back the clearance as the navigation displays align.'},1:{title:"Receiving Clearance",content:'"${callsign}, advise when ready to copy." You grab your pen. "Cleared to ${arrival}, maintain flight level 350, expect higher 10 minutes after departure." The flight computer is programmed and verified.'},2:{title:"Pre-Departure Check",content:'Cockpit preparation complete. Altimeters set. "${callsign}, clearance valid. Contact ground on 121.9 for push." The frequencies are tuned. The crew is ready.'}},pushback:{0:{title:"Pushback Approved",content:'A gentle jolt as the tug connects. "Ground to Cockpit, brakes released." The terminal building slowly drifts away. The hum of the APU is replaced by the rising whine of the main turbines starting up.'},1:{title:"Push and Start",content:'"Commencing pushback, engines clear." The tug groans as it pushes the heavy ${aircraft} back. Engine 2 N1 rising... fuel flow normal. Engine 1 N1 rising. Good start on both.'},2:{title:"Leaving the Gate",content:'The marshaller waves his wands. "Brakes released, pushback commencing." You watch the wingwalkers guide the tips. The engines roar to life with a deep vibration felt through the floor.'}},taxiing:{0:{title:"Taxi to Runway ${departureRunway}",content:'"${callsign}, taxi to runway ${departureRunway} via Alpha, Bravo." You release the parking brake. The tires thump rhythmically over the concrete joints. Sunlight glints off the tarmac as you weave through the taxiways.'},1:{title:"Taxiing",content:'The aircraft sways gently as you navigate the taxiways. "${callsign}, give way to the 737 on your right." You hold short, watching the other traffic pass. "Continue to holding point runway ${departureRunway}."'},2:{title:"Head to Runway",content:'Taxi lights on. The long line of blue lights guides you toward runway ${departureRunway}. The cabin crew performs the safety demonstration. "Cabin ready for departure," the interphone chimes.'}},takeoff:{0:{title:"Takeoff Clearance",content:'Lined up on runway ${departureRunway}. "Wind 130 at 8, runway ${departureRunway} cleared for takeoff." Throttles forward. The engines roar to life, pressing you back into the seat. Rotate at Vr.'},1:{title:"Rolling",content:'"${callsign}, cleared for takeoff." You advance the thrust levers. TOGA set. The centerline lights blur into a stream of white. Airspeed alive. 80 knots... V1... Rotate. The ground drops away.'},2:{title:"Departure",content:"Full power. The engine vibration turns into a smooth hum as speed builds. The runway rushing beneath. Pulling back on the yoke, the nose lifts, and the main wheels leave the ground. Positive rate."}},initial_climb:{0:{title:"Positive Rate",content:'The ground falls away. "Gear up." Punching through the lower cloud layer into the sunlight. The city of ${departure} shrinks into a miniature grid below. Speed increasing to 250 knots.'},1:{title:"Climbing Out",content:'Banking left to intercept the departure radial. Flaps retracting. The air is turbulent near the cloud tops. "Contact Departure on 124.7." You switch frequencies. "${callsign} with you passing 3,000 for 5,000."'},2:{title:"Departure Phase",content:'The altimeter winds up rapidly. The view outside clears as you break through the haze layer. The engines settle into a climb thrust. "Resume navigation," ATC directs. Direct to the first waypoint.'}},main_climb:{0:{title:"Climb to Cruise",content:'Passing 10,000 feet. "Accelerate to cruise speed." The sky darkens to a deeper blue as we ascend. The air is smooth. Climbing steadily to Flight Level 350.'},1:{title:"Ascending",content:"The seatbelt sign dings off. Passengers begin to move about. Outside, the horizon stretches endlessly. We are crossing the transition altitude, setting standard pressure 29.92."},2:{title:"Enroute Climb",content:`Climbing through FL240. The engines are efficient at this altitude. "Traffic 2 o'clock, 10 miles, 1,000 feet above." You spot the contrail of another liner crossing high above.`}},cruise:{0:{title:"Cruising at FL350",content:'Level at 35,000 feet. The horizon is a curved line of haze. "Maintain Mach 0.78." The engines hum with a steady, reassuring rhythm. Passengers are settling in for the flight to ${arrival}.'},1:{title:"Enroute",content:'Navigation is green. "Systems normal." The autopilot tracks the route precisely. Outside, the clouds form a white blanket far below. "Cabin service has commenced."'},2:{title:"Steady Course",content:'The flight computer shows we are on schedule. Fuel burn is within limits. "Contact Center on 132.5." Switching frequencies. The radio chatter is sparse at this altitude.'}},shutoff:{default:{0:{title:"Flight Terminated",content:"The aircraft has come to a stop. Systems are shutting down. Thank you for flying."},1:{title:"Mission Ended",content:"You have reached the end of the simulation. Please review your flight performance."},2:{title:"Simulation Complete",content:"Flight concluded. Passengers are disembarking. Ground power connected."}},crash:{0:{title:"Critical Failure",content:"The aircraft has sustained catastrophic damage. Rescue teams are en route."},1:{title:"Impact",content:"Ground contact was outside safety limits. Simulation terminated due to excessive G-force or structural failure."}}},descent:{0:{title:"Top of Descent",content:'Throttles back. The pitch drops slightly as we begin our descent. "Descend and maintain 10,000 feet." The destination ${arrival} lies ahead.'},1:{title:"Descent Initiation",content:'The engines spool down to idle. The wind noise increases slightly as the speedbrakes extend to manage speed. "${callsign}, cross WPT at FL240." Descending through the flight levels.'},2:{title:"Descending",content:'The clouds below are getting closer. Seatbelt sign back on. "Cabin crew, prepare for landing." We are beginning our arrival into the ${arrival} area. Altimeters reset to local pressure.'}},approach:{0:{title:"Approach to ${arrival}",content:'Lined up for runway ${landingRunway}. "Gear down, flaps 30." The runway threshold looms ahead through the haze. Speed checked, localizer captured.'},1:{title:"Final Approach",content:'Turning base to final. The runway lights pierce the gloom. "Three green, flaps full." Speed is Vref + 5. The PAPI lights show two white, two red. Perfect profile.'},2:{title:"On Final",content:'"${callsign}, cleared to land runway ${landingRunway}." Disengaging autopilot. The controls feel heavy and responsive. Crosswind correction applied. The runway numbers expand in the windscreen.'}},landing:{0:{title:"Touchdown",content:'Flare... Touchdown. Spoilers deployed. Reverse thrust roaring. "${callsign}, welcome to ${arrival}." Braking to taxi speed.'},1:{title:"Landing Roll",content:'The wheels kiss the pavement. A firm landing. Nose gear down. "Decel." Manual braking. You turn off the high-speed exit. "Contact Ground on 121.9."'},2:{title:"Arrival",content:"Main gear down... smoke from the tires. Reversers green. 80 knots. 60 knots. We have arrived at ${arrival}. The cabin erupts in the usual shuffling sounds of arrival."}},after_land_taxiing:{0:{title:"Taxi to Gate",content:'"Turn left next taxiway, contact Ground." The flight is over. Taxing past other aircraft to our assigned gate.'},1:{title:"Taxiing In",content:'Flaps retracting. APU starting up. We navigate the busy apron of ${arrival}. "Hold short of gate B4, waiting for aircraft pushback." Almost there.'},2:{title:"Arrival Taxi",content:'The gate guidance system lights up. "Left... left... stop." Parking brake set. Engines spooling down. The jetway starts to move toward the door.'}},shutoff:{0:{title:"Engine Shutdown",content:'Parking brake set. Fuel cutoff. The engines spin down into silence. APU off. "Thank you for flying with us." Flight complete.'},1:{title:"Shutdown Checklist",content:"Seatbelt sign off. Hydraulics off. The aircraft goes dark as we switch to ground power. The last passengers are deplaning. Another successful flight in the logbook."},2:{title:"Post-Flight",content:"The cockpit becomes quiet. completing the shutdown checklist. Outside, the baggage handlers are already unloading. Time to head to the hotel."}}}},menu:{resume:"Resume Flight",restart:"Restart Scenario",settings:"Settings",quit:"Quit to Main Menu",language:"Language / "},systems:{engines:"Engines",engine:"Engine",electrics:"Electrics",hydraulics:"Hydraulics",fuel:"Fuel",apu:"APU",pumps:"Pumps",generators:"Generators",batteries:"Batteries",on:"ON",off:"OFF",auto:"AUTO",avail:"AVAIL",fault:"FAULT",low_press:"LOW PRESS",status:"System Status",warnings:"Warnings",no_warnings:"No active warnings"},warnings:{gpws:{pull_up:"PULL UP",terrain:"TERRAIN",too_low_gear:"TOO LOW GEAR",too_low_flaps:"TOO LOW FLAPS"},stall:"STALL",overspeed:"OVERSPEED",bank_angle:"BANK ANGLE",fire:{eng1:"ENGINE 1 FIRE",eng2:"ENGINE 2 FIRE",apu:"APU FIRE"},hydraulics:{a_low:"HYD A PRESS LOW",b_low:"HYD B PRESS LOW"},elec:{emer_config:"ELEC EMER CONFIG"},cabin_alt:"CABIN ALTITUDE",fuel_low:"LOW FUEL",engine_fail:"ENGINE ${index} FAIL",config:{flaps:"CONFIG FLAPS",spoilers:"CONFIG SPOILERS",brakes:"CONFIG BRAKES"},tail_strike:"TAIL STRIKE RISK"},startup:{checklist_incomplete:"Startup Checklist Incomplete",missing_items:"Missing Items: ${items}",sys_init:"Systems Initialization",checklist:{systems_not_init:"Systems not initialized",battery_on:"Battery must be ON",adirs_nav:"ADIRS IR switches must be in NAV",adirs_aligning:"ADIRS aligning (${progress}%)",apu_bleed_on:"APU Bleed must be ON",apu_gen_on:"APU Generator must be ON",apu_running:"APU must be running and stabilized",engine_running:"Engine ${index} must be running",gen_on:"Generator ${index} must be ON",apu_shutdown:"APU must be shutdown after engine start",adirs_complete:"ADIRS alignment must be complete"}},radio:{cancel:"Cancel",transmit:"TRANSMIT",preview:"PREVIEW",select:"Select...",enter:"Enter ${param}...",frequency_type:"Frequency Type",busy:"FREQ BUSY",tabs:{READBACK:"READBACK",REQUEST:"REQUEST",INFORM:"INFORM"},template:{ack:{label:"Acknowledge",text:"Copy that, ${callsign}."},wilco:{label:"Wilco",text:"Wilco, ${callsign}."},rb_alt:{label:"Readback Altitude",text:"Climb and maintain ${altitude}, ${callsign}."},rb_hdg:{label:"Readback Heading",text:"Turn ${direction} heading ${heading}, ${callsign}."},rb_freq:{label:"Readback Frequency",text:"Contact ${station} on ${frequency}, ${callsign}."},rb_taxi:{label:"Readback Taxi",text:"Taxi via ${route} and hold short of RW ${runway}, ${callsign}."},req_alt:{label:"Request Altitude",text:"${station}, ${callsign} requesting climb/descent to ${altitude}."},req_direct:{label:"Request Direct",text:"${station}, ${callsign} requesting direct to ${waypoint}."},req_land:{label:"Request Landing",text:"${station}, ${callsign} inbound for landing."},req_startup:{label:"Request Startup",text:"${station}, ${callsign} ready for startup and pushback."},req_taxi:{label:"Request Taxi",text:"${station}, ${callsign} ready for taxi."},req_takeoff:{label:"Request Takeoff",text:"${station}, ${callsign} ready for takeoff, runway ${runway}."},req_atis:{label:"Request ATIS",text:"${station}, ${callsign} requesting current weather / ATIS."},req_freq_change:{label:"Request Freq Change",text:"${station}, ${callsign} requesting frequency change."},inf_checkin:{label:"Check In",text:"${station}, ${callsign} with you at ${altitude}."},inf_pos:{label:"Position Report",text:"${station}, ${callsign} passing ${waypoint} at ${altitude}."},inf_mayday:{label:"Declare Emergency",text:"MAYDAY MAYDAY MAYDAY, ${station}, ${callsign} declaring emergency due to ${failure}. Requesting immediate return/diversion."},inf_pan:{label:"Declare Pan-Pan",text:"PAN-PAN PAN-PAN PAN-PAN, ${station}, ${callsign} has ${issue}. Requesting priority handling."}}}},initialization:{title:"Skyline Tragedy - Flight Initialization",subtitle:"Configure your flight parameters and select difficulty level",steps:{1:"01. OPERATIONAL LEVEL & INTEL",2:"02. FLIGHT PARAMETERS",3:"03. ROUTE SELECTION"},difficulty:{rookie:"ROOKIE",amateur:"AMATEUR",intermediate:"INTERMEDIATE",advanced:"ADVANCED",pro:"PRO",devil:"DEVIL"},intel:{label:"CREW INTELLIGENCE:",descriptions:{rookie:"Highly supportive. NPCs assist with all checks. Standard procedures strictly followed.",amateur:"Experienced crew. Reliable support during significant events. NPC will assist.",intermediate:"Standard operations. Crew follows leads and executes commands precisely.",advanced:"Competent but prone to hesitation or minor errors under high-stress conditions.",pro:"High stress. Crew acts nervously and is prone to significant mistakes during emergencies.",devil:"Independent priorities. Active deviation from procedures possible. Do not rely on assistance."}},params:{airline:"AIRLINE",callsign:"CALLSIGN",aircraft_type:"AIRCRAFT TYPE",crew_count:"CREW COUNT",passengers:"PASSENGERS (PAX)",payload:"PAYLOAD (KG)",cruise_height:"CRUISE HEIGHT (FT)",reserve_fuel:"RESERVE FUEL (HOURS)",zulu_time:"ZULU TIME",season:"SEASON",seasons:{Spring:"SPRING",Summer:"SUMMER",Autumn:"AUTUMN",Winter:"WINTER"},random:"RANDOM"},route:{departure:"DEPARTURE AIRPORT",arrival:"ARRIVAL AIRPORT",summary:{route:"ROUTE:",distance:"DISTANCE:",est_time:"EST. TIME:",fuel_req:"FUEL REQ:",trip:"TRIP",rsv:"RSV",total:"TOTAL"}},buttons:{next_params:"NEXT: FLIGHT PARAMETERS ",next_route:"NEXT: ROUTE SELECTION ",finalize:"FINALIZE DISPATCH & INITIALIZE"},random:{success:"Random flight initialized!\nRoute: ${departure}  ${arrival}\nAircraft: ${aircraft}\nDifficulty: ${difficulty}\nFailure: ${failure}\nWeather: ${weather}",error:"Error initializing random flight. Please try again."},narrative_generator:{roles:["Captain","Commander","Pilot in Command","Skipper","Chief Pilot"],experience:{rookie:["fresh from the flight academy. The ink on your license is barely dry.","on your first week with the airline. Nerves are high, but so is your ambition.","still proving yourself to the chief pilot. Every maneuver counts today.","sitting in the left seat for the first time. Don't forget your training."],amateur:["building your flight hours. You know the aircraft, but she still surprises you sometimes.","gaining confidence with every leg. You've handled calm skies, but today might be different.","no longer a cadet, but not yet a veteran. The crew looks to you for steady hands.","starting to feel at home in the cockpit, though the complex systems still demand full attention."],intermediate:["a seasoned First Officer ready for upgrade. You know the procedures by heart.","an experienced pilot with thousands of hours. Standard operations are second nature.","reliable and steady. The airline trusts you with their most valuable routes.","competent and focused. You've seen your share of rough weather and technical glitches."],advanced:["a senior Captain. Your name is whispered with respect in the crew lounge.","a veteran of the skies. You've flown through hurricanes and landed with engines out.","an instructor examiner. You wrote the manual that others are struggling to learn.","the master of this fleet. The aircraft feels like an extension of your own body."],pro:["a legendary aviator. They say you can land on a postage stamp in a crosswind.","an ace pilot. Systems failures are just an opportunity to show off your skills.","the best of the best. When others panic, you just check your watch.","an elite commander. Nothing surprises you anymore, not even total hydraulic loss."],devil:["a test pilot pushing the envelope. Safety margins are just suggestions.","flying a cursed aircraft. The mechanics crossed themselves when you walked out to the tarmac.","facing the impossible. The odds are stacked against you, just the way you like it.","about to experience a simulation designed to break you. Good luck."]},flight_plan:["Today's manifest lists ${pax} souls on board for the leg from ${departure} to ${arrival}.","You are cleared for the route from ${departure} to ${arrival}, carrying ${pax} passengers depending on you.","The flight plan is filed: ${departure} departure, destination ${arrival}. ${pax} passengers are settling into their seats.","From the gate at ${departure} to the tarmac at ${arrival}, you are responsible for ${pax} lives today."],difficulty:{rookie:["System reports are normal. Focus on your decision-making and standard procedures.","Expect a routine flight with minor procedural tasks. Your crew is fully supportive.","A straightforward mission ahead. Minor issues may arise, but nothing you can't handle with basic logic."],amateur:["A single, significant operational challenge is anticipated. Keep it simple and follow the checklist.","You might encounter an impactful situation today, but your crew is ready to assist with the workload.","Stay alert for one major event. Direct control requirements remain low, letting you focus on management."],intermediate:["Prepare for dynamic conditions and potential interference. This leg requires hands-on flying.","Standard flight protocols apply, but be ready for shifting priorities and active control needs.","Your crew will follow your commands precisely, but the environment is becoming increasingly unpredictable."],advanced:["Multiple critical issues may develop simultaneously. Sharp maneuvers and quick decisions are vital.","Expect deadly scenarios where hands-on control is non-negotiable. Watch your crewthey may falter under pressure.","The simulation will test your reflexes today. Dynamic failures require constant attention and manual intervention."],pro:["Systematic failures are imminent. Automation is unreliable; you are the primary control loop.","Complex CRM and skilled maneuvering are required. Your crew is stressed and prone to significant errors.","Deadly, interconnected issues will challenge every skill you have. Expect a high workload and nervous support."],devil:["Total chaos is the forecast. No autopilot, no safety nets, and no reliable assistance.","The aircraft is pushed beyond its limits. Your crew might actively complicate the situation.",'Forget your trainingthis is about survival. Every system is a potential threat, and your "help" has their own agenda.']}}},weather:{clear:"Clear",cloudy:"Cloudy",rain:"Rain",storm:"Storm",fog:"Fog",snow:"Snow"},failures:{engine_failure:"Engine Failure",hydraulic_failure:"Hydraulic Failure",electrical_failure:"Electrical Failure",instrument_failure:"Instrument Failure",fuel_leak:"Fuel Leak",structural_damage:"Structural Damage"}},Rm={narrative:{phases:{boarding:{default:{0:{title:" ${departure} ",content:" ${callsign}${aircraft}  ${arrival} "},1:{title:"",content:" ${arrival}"},2:{title:"",content:""}},sunny:{0:{title:"",content:" ${callsign}"}},rainy:{0:{title:"",content:" ${arrival} "}},shakespearean:{0:{title:"",content:" ${arrival} "}}},departure_clearance:{default:{0:{title:"IFR ",content:"${callsign} ${arrival} FL350 124.7 4211"},1:{title:"",content:"${callsign} ${arrival} 5000 10  FL350"},2:{title:"",content:" ${arrival}  FMS "}},shakespearean:{0:{title:"",content:" ${arrival} "}}},pushback:{default:{0:{title:"",content:"APU "},1:{title:"",content:" 2 N2  1 "},2:{title:"",content:""}},rainy:{0:{title:"",content:""}},shakespearean:{0:{title:"",content:""}}},taxiing:{default:{0:{title:" ${departureRunway}",content:"${callsign} Alpha, Bravo  ${departureRunway}"},1:{title:"",content:" 27L  747 "},2:{title:"",content:""}},sunny:{0:{title:"",content:""}},rainy:{0:{title:"",content:""}},shakespearean:{0:{title:"",content:""}}},takeoff_prep:{default:{0:{title:"",content:" ${departureRunway} ${callsign}  ${departureRunway} "},1:{title:"",content:" ${departureRunway}"},2:{title:"",content:""}},rookie:{title:"",content:""},shakespearean:{0:{title:"",content:""}}},takeoff:{default:{0:{title:"",content:" ${departureRunway}  130 8 ${departureRunway}  Vr "},1:{title:"",content:"80 V1"},2:{title:"",content:""}},rookie:{title:"",content:""},rainy:{0:{title:"",content:""}},shakespearean:{0:{title:"",content:""}}},initial_climb:{default:{0:{title:"",content:"${departure}  250 "},1:{title:"",content:" 5000"},2:{title:"",content:" 250 "}},rookie:{title:"",content:""},sunny:{0:{title:"",content:""}},rainy:{0:{title:"",content:""}},shakespearean:{0:{title:"",content:""}}},main_climb:{default:{0:{title:"",content:" 10,000  FL350"},1:{title:" FL180",content:""},2:{title:"",content:"2 "}},shakespearean:{0:{title:"",content:""}}},cruise:{0:{title:" FL350",content:" 35,000  0.78  ${arrival} "},1:{title:"",content:" "},2:{title:"",content:" 132.5 "}},descent:{default:{0:{title:"",content:" 10,000  ${arrival} "},1:{title:"",content:" 12,000 ${arrival} "},2:{title:"",content:""}},rainy:{0:{title:"",content:" ILS "}},shakespearean:{0:{title:"",content:""}}},approach:{default:{0:{title:" ${arrival}",content:" ${landingRunway} 30"},1:{title:"",content:"1000 "},2:{title:"",content:"500 "}},rainy:{0:{title:"",content:""}},shakespearean:{0:{title:"",content:""}}},landing:{default:{0:{title:"",content:"... ${callsign} ${arrival}"},1:{title:"",content:""},2:{title:"",content:" ${arrival}"}},rainy:{0:{title:"",content:""}},shakespearean:{0:{title:"",content:""}}},after_land_taxiing:{default:{0:{title:"",content:""},1:{title:"",content:""},2:{title:"",content:""}}},shutoff:{default:{0:{title:"",content:""},2:{content:""}}}}},failures:{engine:{minor:" ${engineIndex + 1} ",critical:" ${engineIndex + 1} ",resolved:" ${engineIndex + 1} "},hydraulic:{minor:"",critical:"",resolved:""},electrical:{minor:" ${bus} ",critical:"",resolved:""},fuel:{minor:"",critical:"",resolved:""},default:{minor:" ${type} ",critical:" ${type} ",resolved:" ${type} "}},ui:{debug:{title:" & LNAV",lat:":",lon:":",alt:":",ias:":",gs:":",mode:":",engaged:"",off:"",tgt_hdg:":",hdg_err:":",tgt_roll:":",act_roll:":",ils_status:"ILS ",dist:":",loc_err:":",gs_err:":",tgt_alt:"",next_wp:":",wp_index:":"},flight:{time_zulu:" (Zulu)",fuel:"",oil:"",pax:"",distance:"",altitude:"",speed:"",heading:"",vertical_speed:"",throttle:"",flaps:"",gear:"",brakes:"",parking_brake:"",spoilers:"",messages:{freq_busy:""}},panels:{overhead_button:" [OH PNL]",pfd:"",nd:"",engine_systems:"",fuel:"",system_status:" / ",controls:"",flaps:"",gear:"",brakes:"",trim:"",systems:{status:"",hydraulics:"",hydraulics_abbrev:"",electrics:"",electrics_abbrev:"",warnings:"",no_warnings:"",on:"",off:""},active_failures:"",no_active_alerts:"",next_wp:"",wp_index:"",tgt_alt:""},flight_computer:{title:"",tabs:{plan:"",add:"",nearest:"",radio:"",utils:"",perf:""},plan:{empty:"",end_of_plan:"",hold:"",holding:"",active:"()"},add:{manual_entry:"",lat_placeholder:" ( 37.61)",lon_placeholder:" ( -122.37)",label_placeholder:" ()",add_coordinates:"",or:"",airport_search:"",search_placeholder:" ICAO/IATA/...",search_types:{all:"",normal:"",emergency:""},search_btn:"",add_to_plan:"+ ",no_results:"",alerts:{invalid_coords:"",invalid_freq:" 108.00  117.95 MHz "},searching:"..."},nearest:{title:" ( 20)",loading:"...",finding:"...",empty:"",no_results:"",add_btn:"+ ",refresh:"",emergency_tag:""},radio:{title:"",current_freq:" NAV1 ",set_freq:" (MHz)",tune:"",common_freqs:" ILS : 108.10, 108.15, ..., 111.95"},utils:{title:"",next_wp:":",distance:":",ete:":",fuel_flow:":",time_empty:":",target_alt:" (ft):",time_alt:":",wrong_vs:"",stable:""},converter:{title:"",value_placeholder:"",result:":",units:{ft:" (ft)",m:" (m)",kts:" (kts)",kmh:"/",inHg:"",hPa:"",nm:"",km:""}}},header:{awaiting:"...",prepare:"",checklist_incomplete:" ",situation:""},loading:{starting_simulation:"...",initializing_physics:"..."},error:{initialization_error:"",reload_page:""},common:{critical:""},messages:{cannot_proceed_missing_items:"${items}"},menu:{resume:"",restart:"",settings:"",quit:"",language:"Language / "},systems:{engines:"",engine:"",electrics:"",hydraulics:"",fuel:"",apu:"APU",pumps:"",generators:"",batteries:"",on:"",off:"",auto:"",avail:"",fault:"",low_press:"",status:"",warnings:"",no_warnings:""},startup:{checklist_incomplete:"",missing_items:": ${items}",cant_proceed:"",continue_anyway:" ()",continue:"",sys_init:"",checklist:{systems_not_init:"",battery_on:"",adirs_nav:"ADIRS IR  NAV ",adirs_aligning:"ADIRS  (${progress}%)",apu_bleed_on:"APU ",apu_gen_on:"APU ",apu_running:"APU ",engine_running:" ${index} ",gen_on:" ${index} ",apu_shutdown:" APU ",adirs_complete:"ADIRS "}},warnings:{gpws:{pull_up:" (PULL UP)",terrain:" (TERRAIN)",too_low_gear:"  (TOO LOW GEAR)",too_low_flaps:"  (TOO LOW FLAPS)"},stall:" (STALL)",overspeed:" (OVERSPEED)",bank_angle:" (BANK ANGLE)",fire:{eng1:" 1 ",eng2:" 2 ",apu:"APU "},hydraulics:{a_low:" A ",b_low:" B "},elec:{emer_config:" "},cabin_alt:" (CABIN ALT)",fuel_low:"",engine_fail:" ${index} ",config:{flaps:" ",spoilers:" ",brakes:" "},tail_strike:""},radio:{cancel:"",transmit:"",preview:"",select:"...",enter:" ${param}...",frequency_type:"",busy:"",tabs:{READBACK:"",REQUEST:"",INFORM:""},template:{ack:{label:"",text:", ${callsign}."},wilco:{label:"",text:", ${callsign}."},rb_alt:{label:"",text:" ${altitude}, ${callsign}."},rb_hdg:{label:"",text:"${direction}  ${heading}, ${callsign}."},rb_freq:{label:"",text:" ${station}  ${frequency}, ${callsign}."},rb_taxi:{label:"",text:" ${route} ,  ${runway} , ${callsign}."},req_alt:{label:"",text:"${station}, ${callsign} / ${altitude}."},req_direct:{label:"",text:"${station}, ${callsign}  ${waypoint}."},req_land:{label:"",text:"${station}, ${callsign} , ."},req_startup:{label:"",text:"${station}, ${callsign} ."},req_taxi:{label:"",text:"${station}, ${callsign} ."},req_takeoff:{label:"",text:"${station}, ${callsign} ,  ${runway}."},req_atis:{label:"",text:"${station}, ${callsign}  / ATIS."},req_freq_change:{label:"",text:"${station}, ${callsign} ."},inf_checkin:{label:"",text:"${station}, ${callsign} ,  ${altitude}."},inf_pos:{label:"",text:"${station}, ${callsign}  ${waypoint}  ${altitude}."},inf_mayday:{label:"",text:"MAYDAY MAYDAY MAYDAY, ${station}, ${callsign} : ${failure}. /."},inf_pan:{label:"PanPan",text:"PAN-PAN PAN-PAN PAN-PAN, ${station}, ${callsign}  ${issue}. ."}}},narrative:{awaiting:"...",phases:{boarding:{default:{0:{title:" ${departure} ",content:'"${callsign}" ${aircraft}  ${arrival}'},1:{title:"",content:'" ${arrival} " '},2:{title:"",content:'"" '}}},takeoff_prep:{default:{0:{title:"",content:" ${departureRunway} ${callsign} "},1:{title:"",content:"${aircraft}  ${departure} "},2:{title:"",content:" ${departureRunway} "}}}}},initialization:{title:" - ",subtitle:"",steps:{1:"01. ",2:"02. ",3:"03. "},difficulty:{rookie:"",amateur:"",intermediate:"",advanced:"",pro:"",devil:""},intel:{label:":",descriptions:{rookie:"NPC ",amateur:"NPC ",intermediate:"",advanced:"",pro:"",devil:""}},params:{airline:"",callsign:"",aircraft_type:"",crew_count:"",passengers:" (PAX)",payload:" (KG)",cruise_height:" (FT)",reserve_fuel:" ()",zulu_time:"",season:"",seasons:{Spring:"",Summer:"",Autumn:"",Winter:""},random:""},route:{departure:"",arrival:"",summary:{route:":",distance:":",est_time:":",fuel_req:":",trip:"",rsv:"",total:""}},buttons:{next_params:":  ",next_route:":  ",finalize:""}},narrative_generator:{roles:["","","","",""],experience:{rookie:["","","",""],amateur:["","","",""],intermediate:["","","",""],advanced:["","","",""],pro:["","","",""],devil:["","","",""]},flight_plan:[" ${pax}  ${departure}  ${arrival} "," ${departure}  ${arrival}  ${pax} ","${departure}  ${arrival}${pax} "," ${departure}  ${arrival}  ${pax} "],difficulty:{rookie:["","",""],amateur:["","",""],intermediate:["","",""],advanced:["","",""],pro:[""," CRM ",""],devil:["","",""]}}},weather:{clear:"",cloudy:"",rain:"",storm:"",fog:"",snow:""},failures:{engine_failure:"",engine_fire:"",hydraulic_failure:"",electrical_failure:"",instrument_failure:"",fuel_leak:"",structural_damage:""}},Zp=L.createContext(),Hs=({children:t})=>{const[e,n]=L.useState("en"),[r,a]=L.useState(Gs);L.useEffect(()=>{a(e==="zh"?Rm:Gs)},[e]);const i=()=>{n(l=>l==="en"?"zh":"en")},o=(l,c={})=>{if(!l||typeof l!="string")return l||"";const u=l.split(".");let d=r;for(const y of u)if(d&&d[y]!==void 0)d=d[y];else{let p=Gs;for(const h of u)if(p&&p[h]!==void 0)p=p[h];else return l;d=p;break}return typeof d=="string"?d.replace(/\$\{(\w+)\}/g,(y,p)=>c[p]!==void 0?c[p]:y):d};return s.jsx(Zp.Provider,{value:{language:e,setLanguage:n,toggleLanguage:i,t:o},children:t})},qn=()=>{const t=L.useContext(Zp);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t};function rs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function Lm(t,e,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(y){o(y)}}function c(d){try{u(r.throw(d))}catch(y){o(y)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})}const Em=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Xc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class _m extends Xc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sh extends Xc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lh extends Xc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ul;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ul||(Ul={}));class km{constructor(e,{headers:n={},customFetch:r,region:a=Ul.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=Em(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Lm(this,arguments,void 0,function*(n,r={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:y}=r;let p={},{region:h}=r;h||(h=this.region);const v=new URL(`${this.url}/${n}`);h&&h!=="any"&&(p["x-region"]=h,v.searchParams.set("forceFunctionRegion",h));let w;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(p["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(p["Content-Type"]="application/json",w=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?w=JSON.stringify(u):w=u;let C=d;y&&(o=new AbortController,i=setTimeout(()=>o.abort(),y),d?(C=o.signal,d.addEventListener("abort",()=>o.abort())):C=o.signal);const g=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:w,signal:C}).catch(A=>{throw new _m(A)}),m=g.headers.get("x-relay-error");if(m&&m==="true")throw new sh(g);if(!g.ok)throw new lh(g);let f=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return f==="application/json"?S=yield g.json():f==="application/octet-stream"||f==="application/pdf"?S=yield g.blob():f==="text/event-stream"?S=g:f==="multipart/form-data"?S=yield g.formData():S=yield g.text(),{data:S,error:null,response:g}}catch(l){return{data:null,error:l,response:l instanceof lh||l instanceof sh?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var qm=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Pm=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var y,p;if(n.method!=="HEAD"){var h;const g=await i.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((h=n.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?l=g:l=JSON.parse(g))}const w=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),C=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");w&&C&&C.length>1&&(c=parseInt(C[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const w=await i.text();try{o=JSON.parse(w),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&w===""?(u=204,d="No Content"):o={message:w}}if(o&&n.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new qm(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="",c="",u="";const d=i==null?void 0:i.cause;if(d){var y,p,h,v;const g=(y=d==null?void 0:d.message)!==null&&y!==void 0?y:"",m=(p=d==null?void 0:d.code)!==null&&p!==void 0?p:"";l=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"Error"}: ${g}`,m&&(l+=` (${m})`),d!=null&&d.stack&&(l+=`
${d.stack}`)}else{var w;l=(w=i==null?void 0:i.stack)!==null&&w!==void 0?w:""}const C=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(u="",c="Request was aborted (timeout or manual cancellation)",C>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${C} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((d==null?void 0:d.name)==="HeadersOverflowError"||(d==null?void 0:d.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",c="HTTP headers exceeded server limits (typically 16KB)",C>this.urlLengthLimit&&(c+=`. Your request URL is ${C} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:c,code:u},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},Nm=class extends Pm{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:i="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ch=new RegExp("[,()]");var Gr=class extends Nm{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ch.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ch.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Mm=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:a=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},a=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),r&&c.append("Prefer",`count=${r}`),new Gr({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new Gr({method:a,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),r&&c.append("Prefer",`count=${r}`),a||c.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,y)=>d.concat(Object.keys(y)),[]);if(u.length>0){const d=[...new Set(u)].map(y=>`"${y}"`);l.searchParams.set("columns",d.join(","))}}return new Gr({method:o,url:l,headers:c,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:a,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Gr({method:r,url:a,headers:i,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Gr({method:n,url:r,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function di(t){"@babel/helpers - typeof";return di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(t)}function Fm(t,e){if(di(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(di(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jm(t){var e=Fm(t,"string");return di(e)=="symbol"?e:e+""}function Om(t,e,n){return(e=jm(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function zi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uh(Object(n),!0).forEach(function(r){Om(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Gm=class ef{constructor(e,{headers:n={},schema:r,fetch:a,timeout:i,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;const l=a??globalThis.fetch;i!==void 0&&i>0?this.fetch=(c,u)=>{const d=new AbortController,y=setTimeout(()=>d.abort(),i),p=u==null?void 0:u.signal;if(p){if(p.aborted)return clearTimeout(y),l(c,u);const h=()=>{clearTimeout(y),d.abort()};return p.addEventListener("abort",h,{once:!0}),l(c,zi(zi({},u),{},{signal:d.signal})).finally(()=>{clearTimeout(y),p.removeEventListener("abort",h)})}return l(c,zi(zi({},u),{},{signal:d.signal})).finally(()=>clearTimeout(y))}:this.fetch=l}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Mm(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new ef(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;const d=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(d)),y=r&&Object.values(n).some(d);y?(l="POST",u=n):r||a?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,v])=>v!==void 0).map(([h,v])=>[h,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([h,v])=>{c.searchParams.append(h,v)})):(l="POST",u=n);const p=new Headers(this.headers);return y?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new Gr({method:l,url:c,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class Hm{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const a=r.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Dm="2.94.1",Bm=`realtime-js/${Dm}`,$m="1.0.0",tf="2.0.0",dh=tf,zl=1e4,Um=1e3,zm=100;var On;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(On||(On={}));var ot;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ot||(ot={}));var rn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rn||(rn={}));var Wl;(function(t){t.websocket="websocket"})(Wl||(Wl={}));var hr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(hr||(hr={}));class Wm{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const a=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var n,r;const a=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var a,i;const o=e.topic,l=(a=e.ref)!==null&&a!==void 0?a:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+y.length,h=new ArrayBuffer(this.HEADER_LENGTH+p);let v=new DataView(h),w=0;v.setUint8(w++,this.KINDS.userBroadcastPush),v.setUint8(w++,c.length),v.setUint8(w++,l.length),v.setUint8(w++,o.length),v.setUint8(w++,u.length),v.setUint8(w++,y.length),v.setUint8(w++,n),Array.from(c,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(l,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(o,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(u,g=>v.setUint8(w++,g.charCodeAt(0))),Array.from(y,g=>v.setUint8(w++,g.charCodeAt(0)));var C=new Uint8Array(h.byteLength+r.byteLength);return C.set(new Uint8Array(h),0),C.set(new Uint8Array(r),h.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,i,o,l,c]=r;return n({join_ref:a,ref:i,topic:o,event:l,payload:c})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,a)}}_decodeUserBroadcast(e,n,r){const a=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(e.slice(c,c+a));c=c+a;const d=r.decode(e.slice(c,c+i));c=c+i;const y=r.decode(e.slice(c,c+o));c=c+o;const p=e.slice(c,e.byteLength),h=l===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,v={type:this.BROADCAST_EVENT,event:d,payload:h};return o>0&&(v.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class nf{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(De||(De={}));const hh=(t,e,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Km(o,t,e,a),i),{}):{}},Km=(t,e,n,r)=>{const a=e.find(l=>l.name===t),i=a==null?void 0:a.type,o=n[t];return i&&!r.includes(i)?rf(i,o):Kl(o)},rf=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Xm(e,n)}switch(t){case De.bool:return Vm(e);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return Ym(e);case De.json:case De.jsonb:return Jm(e);case De.timestamp:return Qm(e);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Kl(e);default:return Kl(e)}},Kl=t=>t,Vm=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ym=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Jm=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Xm=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>rf(e,l))}return t},Qm=t=>typeof t=="string"?t.replace(" ","T"):t,af=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ds{constructor(e,n,r={},a=zl){this.channel=e,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yh||(yh={}));class Wa{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wa.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Wa.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Wa.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,a){const i=this.cloneDeep(e),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const y=i[u];if(y){const p=d.map(C=>C.presence_ref),h=y.map(C=>C.presence_ref),v=d.filter(C=>h.indexOf(C.presence_ref)<0),w=y.filter(C=>p.indexOf(C.presence_ref)<0);v.length>0&&(l[u]=v),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(e,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const y=e[l].map(h=>h.presence_ref),p=d.filter(h=>y.indexOf(h.presence_ref)<0);e[l].unshift(...p)}r(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(y=>y.presence_ref);u=u.filter(y=>d.indexOf(y.presence_ref)<0),e[l]=u,a(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const a=e[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ph;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ph||(ph={}));var Ka;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ka||(Ka={}));var xn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xn||(xn={}));class ea{constructor(e,n={config:{}},r){var a,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ds(this,rn.join,this.params,this.timeout),this.rejoinTimer=new nf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Wa(this),this.broadcastEndpointURL=af(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ot.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Ka.PRESENCE]&&this.bindings[Ka.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,y={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(xn.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(xn.CLOSED)),this.updateJoinPayload(Object.assign({config:p},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){e==null||e(xn.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,C=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,g=[];for(let m=0;m<C;m++){const f=w[m],{filter:{event:S,schema:A,table:I,filter:R}}=f,x=h&&h[m];if(x&&x.event===S&&ea.isFilterValueEqual(x.schema,A)&&ea.isFilterValueEqual(x.table,I)&&ea.isFilterValueEqual(x.filter,R))g.push(Object.assign(Object.assign({},f),{id:x.id}));else{this.unsubscribe(),this.state=ot.errored,e==null||e(xn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(xn.SUBSCRIBED);return}}).receive("error",h=>{this.state=ot.errored,e==null||e(xn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ot.joined&&e===Ka.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Ds(this,rn.leave,{},e),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ot.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ds(this,e,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>zm){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=rn;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var v,w,C;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((C=(w=h.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(h=>h.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var v,w,C,g,m,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const S=h.id,A=(v=h.filter)===null||v===void 0?void 0:v.event;return S&&((w=n.ids)===null||w===void 0?void 0:w.includes(S))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const S=(m=(g=h==null?void 0:h.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((f=n==null?void 0:n.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:w,table:C,commit_timestamp:g,type:m,errors:f}=v;p=Object.assign(Object.assign({},{schema:w,table:C,commit_timestamp:g,eventType:m,new:{},old:{},errors:f}),this._getPayloadRecords(v))}h.callback(p,r)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const a=e.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ea.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rn.close,{},e)}_onError(e){this._on(rn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hh(e.columns,e.old_record)),n}}const Bs=()=>{},Wi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Zm=[1e3,2e3,5e3,1e4],e1=1e4,t1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class n1{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zl,this.transport=null,this.heartbeatIntervalMs=Wi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bs,this.ref=0,this.reconnectTimer=null,this.vsn=dh,this.logger=Bs,this.conn=null,this.sendBuffer=[],this.serializer=new Wm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Wl.websocket}`,this.httpEndpoint=af(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case On.connecting:return hr.Connecting;case On.open:return hr.Open;case On.closing:return hr.Closing;default:return hr.Closed}}isConnected(){return this.connectionState()===hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new ea(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Um,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Wi.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===On.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===On.open||this.conn.readyState===On.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(rn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${r}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([t1],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const i={access_token:n,version:Bm};n&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(rn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new nf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,a,i,o,l,c,u,d,y,p,h;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:zl,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Wi.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Bs,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:dh,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:v=>Zm[v-1]||e1,this.vsn){case $m:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(v,w)=>w(JSON.stringify(v)),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:(v,w)=>w(JSON.parse(v));break;case tf:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var hi=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function r1(t,e,n){const r=new URL(e,t);if(n)for(const[a,i]of Object.entries(n))i!==void 0&&r.searchParams.set(a,i);return r.toString()}async function a1(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function i1(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:a,body:i,headers:o}){const l=r1(t.baseUrl,r,a),c=await a1(t.auth),u=await e(l,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),y=(u.headers.get("content-type")||"").includes("application/json"),p=y&&d?JSON.parse(d):d;if(!u.ok){const h=y?p:void 0,v=h==null?void 0:h.error;throw new hi((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:h})}return{status:u.status,headers:u.headers,data:p}}}}function Ki(t){return t.join("")}var o1=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ki(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ki(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ki(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ki(t.namespace)}`}),!0}catch(e){if(e instanceof hi&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof hi&&n.status===409)return;throw n}}};function Pr(t){return t.join("")}var s1=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof hi&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof hi&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},l1=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=i1({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new o1(this.client,e),this.tableOps=new s1(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},as=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function is(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Vi=class extends as{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},of=class extends as{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const c1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),u1=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Vl=t=>{if(Array.isArray(t))return t.map(n=>Vl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=Vl(r)}),e},d1=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function yi(t){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(t)}function h1(t,e){if(yi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y1(t){var e=h1(t,"string");return yi(e)=="symbol"?e:e+""}function p1(t,e,n){return(e=y1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fh(Object(n),!0).forEach(function(r){p1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const gh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},f1=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const a=t,i=a.status||500;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Vi(gh(o),i,l,r))}).catch(()=>{if(r==="vectors"){const o=i+"";e(new Vi(a.statusText||`HTTP ${i} error`,i,o,r))}else{const o=i+"";e(new Vi(a.statusText||`HTTP ${i} error`,i,o,r))}});else{const o=i+"";e(new Vi(a.statusText||`HTTP ${i} error`,i,o,r))}}else e(new of(gh(t),t,r))},g1=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?me(me({},a),n):(u1(r)?(a.headers=me({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),me(me({},a),n))};async function Ea(t,e,n,r,a,i,o){return new Promise((l,c)=>{t(n,g1(e,r,a,i)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>f1(u,c,r,o))})}function sf(t="storage"){return{get:async(e,n,r,a)=>Ea(e,"GET",n,r,a,void 0,t),post:async(e,n,r,a,i)=>Ea(e,"POST",n,a,i,r,t),put:async(e,n,r,a,i)=>Ea(e,"PUT",n,a,i,r,t),head:async(e,n,r,a)=>Ea(e,"HEAD",n,me(me({},r),{},{noResolveJson:!0}),a,void 0,t),remove:async(e,n,r,a,i)=>Ea(e,"DELETE",n,a,i,r,t)}}const m1=sf("storage"),{get:pi,post:tn,put:Yl,head:v1,remove:Qc}=m1,Ot=sf("vectors");var va=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=c1(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(is(n))return{data:null,error:n};throw n}}},w1=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(is(e))return{data:null,error:e};throw e}}};let lf;lf=Symbol.toStringTag;var A1=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[lf]="BlobDownloadBuilder",this.promise=null}asStream(){return new w1(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(is(e))return{data:null,error:e};throw e}}};const x1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var b1=class extends va{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var a=this;return a.handleOperation(async()=>{let i;const o=me(me({},mh),r);let l=me(me({},a.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(l=me(me({},l),r.headers));const u=a._removeEmptyFolders(e),d=a._getFinalPath(u),y=await(t=="PUT"?Yl:tn)(a.fetch,`${a.url}/object/${d}`,i,me({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:y.Id,fullPath:y.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var a=this;const i=a._removeEmptyFolders(t),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",e),a.handleOperation(async()=>{let c;const u=me({upsert:mh.upsert},r),d=me(me({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await Yl(a.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const a=me({},n.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const i=await tn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(n.url+i.url),l=o.searchParams.get("token");if(!l)throw new as("No token returned by API");return{signedUrl:o.toString(),path:t,token:l}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await tn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await tn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(t),i=await tn(r.fetch,`${r.url}/object/sign/${a}`,me({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const a=await tn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a.map(o=>me(me({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null}))})}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>pi(this.fetch,`${this.url}/${n}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new A1(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Vl(await pi(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await v1(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(is(r)&&r instanceof of){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&r.push(a);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${l}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Qc(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const a=me(me(me({},x1),e),{},{prefix:t||""});return await tn(r.fetch,`${r.url}/object/list/${r.bucketId}`,a,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=me({},t);return await tn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const C1="2.94.1",Ci={"X-Client-Info":`storage-js/${C1}`};var T1=class extends va{constructor(t,e={},n,r){const a=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const i=a.href.replace(/\/$/,""),o=me(me({},Ci),e);super(i,o,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await pi(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await pi(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await tn(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Yl(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await tn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Qc(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},S1=class extends va{constructor(t,e={},n){const r=t.replace(/\/$/,""),a=me(me({},Ci),e);super(r,a,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await tn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),a=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await pi(e.fetch,a,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Qc(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!d1(t))throw new as("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new l1({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},I1=class extends va{constructor(t,e={},n){const r=t.replace(/\/$/,""),a=me(me({},Ci),{},{"Content-Type":"application/json"},e);super(r,a,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await Ot.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await Ot.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},R1=class extends va{constructor(t,e={},n){const r=t.replace(/\/$/,""),a=me(me({},Ci),{},{"Content-Type":"application/json"},e);super(r,a,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},L1=class extends va{constructor(t,e={},n){const r=t.replace(/\/$/,""),a=me(me({},Ci),{},{"Content-Type":"application/json"},e);super(r,a,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Ot.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},E1=class extends L1{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new _1(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},_1=class extends I1{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new k1(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},k1=class extends R1{constructor(t,e,n,r,a){super(t,e,a),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,me(me({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},q1=class extends T1{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new b1(this.url,this.headers,t,this.fetch)}get vectors(){return new E1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new S1(this.url+"/iceberg",this.headers,this.fetch)}};const cf="2.94.1",Hr=30*1e3,Jl=3,$s=Jl*Hr,P1="http://localhost:9999",N1="supabase.auth.token",M1={"X-Client-Info":`gotrue-js/${cf}`},Xl="X-Supabase-Api-Version",uf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},F1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,j1=10*60*1e3;class fi extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function he(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class O1 extends fi{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function G1(t){return he(t)&&t.name==="AuthApiError"}class yr extends fi{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Pn extends fi{constructor(e,n,r,a){super(e,r,a),this.name=n,this.status=r}}class Nt extends Pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Us(t){return he(t)&&t.name==="AuthSessionMissingError"}class Nr extends Pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yi extends Pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ji extends Pn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function H1(t){return he(t)&&t.name==="AuthImplicitGrantRedirectError"}class vh extends Pn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class D1 extends Pn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ql extends Pn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function zs(t){return he(t)&&t.name==="AuthRetryableFetchError"}class wh extends Pn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Zl extends Pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ah=` 	
\r=`.split(""),B1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ah.length;e+=1)t[Ah[e].charCodeAt(0)]=-2;for(let e=0;e<jo.length;e+=1)t[jo[e].charCodeAt(0)]=e;return t})();function xh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(jo[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(jo[r]),e.queuedBits-=6}}function df(t,e,n){const r=B1[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bh(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{z1(o,r,n)};for(let o=0;o<t.length;o+=1)df(t.charCodeAt(o),a,i);return e.join("")}function $1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function U1(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}$1(r,e)}}function z1(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function sa(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)df(t.charCodeAt(a),n,r);return new Uint8Array(e)}function W1(t){const e=[];return U1(t,n=>e.push(n)),new Uint8Array(e)}function vr(t){const e=[],n={queue:0,queuedBits:0},r=a=>{e.push(a)};return t.forEach(a=>xh(a,n,r)),xh(null,n,r),e.join("")}function K1(t){return Math.round(Date.now()/1e3)+t}function V1(){return Symbol("auth-callback")}const yt=()=>typeof window<"u"&&typeof document<"u",or={tested:!1,writable:!1},hf=()=>{if(!yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(or.tested)return or.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),or.tested=!0,or.writable=!0}catch{or.tested=!0,or.writable=!1}return or.writable};function Y1(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{e[a]=r}),e}const yf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),J1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Dr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},sr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ht=async(t,e)=>{await t.removeItem(e)};class os{constructor(){this.promise=new os.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}os.promiseConstructor=Promise;function Xi(t){const e=t.split(".");if(e.length!==3)throw new Zl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!F1.test(e[r]))throw new Zl("JWT not in base64url format");return{header:JSON.parse(bh(e[0])),payload:JSON.parse(bh(e[1])),signature:sa(e[2]),raw:{header:e[0],payload:e[1]}}}async function X1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Q1(t,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function Z1(t){return("0"+t.toString(16)).substr(-2)}function ev(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,Z1).join("")}async function tv(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function nv(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await tv(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mr(t,e,n=!1){const r=ev();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Dr(t,`${e}-code-verifier`,a);const i=await nv(r);return[i,r===i?"plain":"s256"]}const rv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function av(t){const e=t.headers.get(Xl);if(!e||!e.match(rv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function iv(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ov(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fr(t){if(!sv.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ws(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lv(t,e){return new Proxy(t,{get:(n,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,a)}})}function Ch(t){return JSON.parse(JSON.stringify(t))}const dr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cv=[502,503,504];async function Th(t){var e;if(!J1(t))throw new Ql(dr(t),0);if(cv.includes(t.status))throw new Ql(dr(t),t.status);let n;try{n=await t.json()}catch(i){throw new yr(dr(i),i)}let r;const a=av(t);if(a&&a.getTime()>=uf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new wh(dr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Nt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new wh(dr(n),t.status,n.weak_password.reasons);throw new O1(dr(n),t.status||500,r)}const uv=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function ge(t,e,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[Xl]||(i[Xl]=uf["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await dv(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function dv(t,e,n,r,a,i){const o=uv(e,r,a,i);let l;try{l=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new Ql(dr(c),0)}if(l.ok||await Th(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Th(c)}}function Zt(t){var e;let n=null;pv(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=K1(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Sh(t){const e=Zt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Dn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hv(t){return{data:t,error:null}}function yv(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=t,o=rs(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Ih(t){return t}function pv(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ks=["global","local","others"];class fv{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=yf(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Ks[0]){if(Ks.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ks.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Dn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=rs(e,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:yv,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(he(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Ih});if(d.error)throw d.error;const y=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);u[`${C}Page`]=w}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},y),u),error:null}}catch(u){if(he(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Fr(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Fr(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Dn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Fr(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Dn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Fr(e.userId);try{const{data:n,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Fr(e.userId),Fr(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Ih});if(d.error)throw d.error;const y=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(v.split(";")[1].split("=")[1]);u[`${C}Page`]=w}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},y),u),error:null}}catch(u){if(he(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}}function Rh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const jr={debug:!!(globalThis&&hf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gv extends pf{}async function mv(t,e,n){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new gv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(jr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function vv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ff(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function wv(t){return parseInt(t,16)}function Av(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function xv(t){var e;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:y,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=ff(t.address),v=d?`${d}://${r}`:r,w=t.statement?`${t.statement}
`:"",C=`${v} wants you to sign in with your Ethereum account:
${h}

${w}`;let g=`URI: ${y}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(g+=`
Expiration Time: ${a.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let m=`
Resources:`;for(const f of u){if(!f||typeof f!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${f}`);m+=`
- ${f}`}g+=m}return`${C}
${g}`}class at extends Error{constructor({message:e,code:n,cause:r,name:a}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=a??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Oo extends at{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function bv({error:t,options:e}){var n,r,a;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new at({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new at({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new at({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new at({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new at({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new at({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new at({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new at({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(gf(o)){if(i.rp.id!==o)return new at({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new at({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new at({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new at({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new at({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Cv({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new at({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new at({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(gf(r)){if(n.rpId!==r)return new at({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new at({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new at({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new at({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Tv{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Sv=new Tv;function Iv(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,a=rs(t,["challenge","user","excludeCredentials"]),i=sa(e).buffer,o=Object.assign(Object.assign({},n),{id:sa(n.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:sa(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Rv(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=rs(t,["challenge","allowCredentials"]),a=sa(e).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:sa(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Lv(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:vr(new Uint8Array(t.response.attestationObject)),clientDataJSON:vr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ev(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:vr(new Uint8Array(a.authenticatorData)),clientDataJSON:vr(new Uint8Array(a.clientDataJSON)),signature:vr(new Uint8Array(a.signature)),userHandle:a.userHandle?vr(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gf(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Lh(){var t,e;return!!(yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function _v(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Oo("Browser returned unexpected credential type",e)}:{data:null,error:new Oo("Empty credential response",e)}}catch(e){return{data:null,error:bv({error:e,options:t})}}}async function kv(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Oo("Browser returned unexpected credential type",e)}:{data:null,error:new Oo("Empty credential response",e)}}catch(e){return{data:null,error:Cv({error:e,options:t})}}}const qv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Pv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Go(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of t)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const l=r[i];e(l)?r[i]=Go(l,o):r[i]=Go(o)}else r[i]=o}return r}function Nv(t,e){return Go(qv,t,e||{})}function Mv(t,e){return Go(Pv,t,e||{})}class Fv{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:a},i){var o;try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const u=a??Sv.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;if(!d.name){const y=r;if(y)d.name=`${d.id}:${y}`;else{const h=(await this.client.getUser()).data.user,v=((o=h==null?void 0:h.user_metadata)===null||o===void 0?void 0:o.name)||(h==null?void 0:h.email)||(h==null?void 0:h.id)||"User";d.name=`${d.id}:${v}`}}d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=Nv(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:y,error:p}=await _v({publicKey:d,signal:u});return y?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:y}},error:null}:{data:null,error:p}}case"request":{const d=Mv(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:y,error:p}=await kv(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:u}));return y?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:y}},error:null}:{data:null,error:p}}}}catch(l){return he(l)?{data:null,error:l}:{data:null,error:new yr("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new fi("rpId is required for WebAuthn authentication")};try{if(!Lh())return{data:null,error:new yr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return he(o)?{data:null,error:o}:{data:null,error:new yr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new fi("rpId is required for WebAuthn registration")};try{if(!Lh())return{data:null,error:new yr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var y;return(y=d.data)===null||y===void 0?void 0:y.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return he(o)?{data:null,error:o}:{data:null,error:new yr("Unexpected error in register",o)}}}}vv();const jv={url:P1,storageKey:N1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:M1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Eh(t,e,n){return await n()}const Or={};class gi{get jwks(){var e,n;return(n=(e=Or[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Or[this.storageKey]=Object.assign(Object.assign({},Or[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Or[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Or[this.storageKey]=Object.assign(Object.assign({},Or[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},jv),e);if(this.storageKey=i.storageKey,this.instanceID=(n=gi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,gi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&yt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fv({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=yf(i.fetch),this.lock=i.lock||Eh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&yt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=mv:this.lock=Eh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Fv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:hf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rh(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Rh(this.memoryStorage)),yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cf}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(yt()&&(n=Y1(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),yt()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),H1(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return he(n)?this._returnResult({error:n}):this._returnResult({error:new yr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,a;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Zt}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,a;try{let i;if("email"in e){const{email:d,password:y,options:p}=e;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await Mr(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:y,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:v},xform:Zt})}else if("phone"in e){const{phone:d,password:y,options:p}=e;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:y,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(a=p==null?void 0:p.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Zt})}else throw new Yi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await ht(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await ht(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Sh})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Sh})}else throw new Yi("You must provide either an email or phone number and a password");const{data:r,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const i=new Nr;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(he(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,a,i,o,l,c,u,d,y,p;let h,v;if("message"in e)h=e.message,v=e.signature;else{const{chain:w,wallet:C,statement:g,options:m}=e;let f;if(yt())if(typeof C=="object")f=C;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")f=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=C}const S=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href),A=await f.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=ff(A[0]);let R=(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const N=await f.request({method:"eth_chainId"});R=wv(N)}const x={domain:S.host,address:I,statement:g,uri:S.href,version:"1",chainId:R,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=xv(x),v=await f.request({method:"personal_sign",params:[Av(h),I]})}try{const{data:w,error:C}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:v},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Zt});if(C)throw C;if(!w||!w.session||!w.user){const g=new Nr;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:C})}catch(w){if(he(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var n,r,a,i,o,l,c,u,d,y,p,h;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:C,wallet:g,statement:m,options:f}=e;let S;if(yt())if(typeof g=="object")S=g;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))S=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const A=new URL((n=f==null?void 0:f.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const I=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),m?{statement:m}:null));let R;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")R=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)R=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)v=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${A.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(a=(r=f==null?void 0:f.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((y=(d=f==null?void 0:f.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||y===void 0)&&y.length?["Resources",...f.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const I=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=I}}try{const{data:C,error:g}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:vr(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Zt});if(g)throw g;if(!C||!C.session||!C.user){const m=new Nr;return this._returnResult({data:{user:null,session:null},error:m})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:g})}catch(C){if(he(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await sr(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new D1;const{data:i,error:o}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Zt});if(await ht(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Nr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await ht(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=e,l=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zt}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Nr;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(he(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Mr(this.storage,this.storageKey));const{error:y}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Yi("You must provide either an email or phone number.")}catch(l){if(await ht(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var n,r;try{let a,i;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Zt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(he(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,r,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Mr(this.storage,this.storageKey));const u=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:hv});return!((i=u.data)===null||i===void 0)&&i.url&&yt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await ht(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Nt;const{error:a}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:o}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:o,error:l}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Yi("You must provide either an email or phone number and a type")}catch(n){if(he(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await sr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<$s:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await sr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ws()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=lv(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dn}):await this._useSession(async n=>{var r,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nt}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Dn})})}catch(n){if(he(n))return Us(n)&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Nt;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Mr(this.storage,this.storageKey));const{data:u,error:d}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Dn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await ht(this.storage,`${this.storageKey}-code-verifier`),he(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nt;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=Xi(e.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(he(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Nt;const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(he(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!yt())throw new Ji("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ji(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new vh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ji("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vh("No code detected.");const{data:m,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Ji("No session defined in URL");const d=Math.round(Date.now()/1e3),y=parseInt(l);let p=d+y;c&&(p=parseInt(c));const h=p-d;h*1e3<=Hr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${y}s`);const v=p-y;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,d);const{data:w,error:C}=await this._getUser(i);if(C)throw C;const g={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:y,expires_at:p,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(he(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await sr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i&&!Us(i))return this._returnResult({error:i});const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(G1(l)&&(l.status===404||l.status===401||l.status===403)||Us(l)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=V1(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Mr(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await ht(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:y,error:p}=i;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=y.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return yt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(he(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:a,data:{session:i}}=n;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=e,y=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Zt}),{data:p,error:h}=y;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Nr}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(a){if(await ht(this.storage,`${this.storageKey}-code-verifier`),he(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Q1(async a=>(a>0&&await X1(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zt})),(a,i)=>{const o=200*Math.pow(2,a);return i&&zs(i)&&Date.now()+o-r<Hr})}catch(r){if(this._debug(n,"error",r),he(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),yt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await sr(this.storage,this.storageKey);if(a&&this.userStorage){let o=await sr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Dr(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ws()}else if(a&&!a.user&&!a.user){const o=await sr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await ht(this.storage,this.storageKey+"-user"),await Dr(this.storage,this.storageKey,a)):a.user=Ws()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$s;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${$s}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),zs(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new os;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Nt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),he(i)){const o={data:null,error:i};return zs(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ht(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Dr(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=Ch(a);await Dr(this.storage,this.storageKey,i)}else{const a=Ch(n);await Dr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ht(this.storage,this.storageKey),await ht(this.storage,this.storageKey+"-code-verifier"),await ht(this.storage,this.storageKey+"-user"),this.userStorage&&await ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/Hr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Hr}ms, refresh threshold is ${Jl} ticks`),a<=Jl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Mr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?this._returnResult({data:null,error:i}):await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Lv(e.webauthn.credential_response):Ev(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Iv(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Rv(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,a,i;if(e)try{const{payload:h}=Xi(e);let v=null;h.aal&&(v=h.aal);let w=v;const{data:{user:C},error:g}=await this.getUser(e);if(g)return this._returnResult({data:null,error:g});((r=(n=C==null?void 0:C.factors)===null||n===void 0?void 0:n.filter(S=>S.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(w="aal2");const f=h.amr||[];return{data:{currentLevel:v,nextLevel:w,currentAuthenticationMethods:f},error:null}}catch(h){if(he(h))return this._returnResult({data:null,error:h});throw h}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Xi(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(h=>h.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Nt});const o=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&yt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Nt});const o=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&yt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nt})})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+j1>a)return r;const{data:i,error:o}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:h,error:v}=await this.getSession();if(v||!h.session)return this._returnResult({data:null,error:v});r=h.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Xi(r);n!=null&&n.allowExpired||iv(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:i,header:a,signature:o},error:null}}const d=ov(a.alg),y=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,y,o,W1(`${l}.${c}`)))throw new Zl("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}}gi.nextInstanceID={};const Ov=gi,Gv="2.94.1";let Fa="";typeof Deno<"u"?Fa="deno":typeof document<"u"?Fa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fa="react-native":Fa="node";const Hv={"X-Client-Info":`supabase-js-${Fa}/${Gv}`},Dv={headers:Hv},Bv={schema:"public"},$v={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Uv={};function mi(t){"@babel/helpers - typeof";return mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(t)}function zv(t,e){if(mi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wv(t){var e=zv(t,"string");return mi(e)=="symbol"?e:e+""}function Kv(t,e,n){return(e=Wv(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_h(Object(n),!0).forEach(function(r){Kv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_h(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Vv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Yv=()=>Headers,Jv=(t,e,n)=>{const r=Vv(n),a=Yv();return async(i,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Ze(Ze({},o),{},{headers:u}))}};function Xv(t){return t.endsWith("/")?t:t+"/"}function Qv(t,e){var n,r;const{db:a,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:y}=e,p={db:Ze(Ze({},c),a),auth:Ze(Ze({},u),i),realtime:Ze(Ze({},d),o),storage:{},global:Ze(Ze(Ze({},y),l),{},{headers:Ze(Ze({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function Zv(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Xv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var e2=class extends Ov{constructor(t){super(t)}},t2=class{constructor(t,e,n){var r,a;this.supabaseUrl=t,this.supabaseKey=e;const i=Zv(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Bv,realtime:Uv,auth:Ze(Ze({},$v),{},{storageKey:o}),global:Dv},c=Qv(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Jv(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Ze({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Gm(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new q1(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new km(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,y){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new e2({url:this.authUrl.href,headers:Ze(Ze({},p),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:u,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new n1(this.realtimeUrl.href,Ze(Ze({},t),{},{params:Ze(Ze({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const n2=(t,e,n)=>new t2(t,e,n);function r2(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}r2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const a2="https://glfpvweubgzriunhyatg.supabase.co",i2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdsZnB2d2V1Ymd6cml1bmh5YXRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxODM4MDIsImV4cCI6MjA4NTc1OTgwMn0.aToXz8jOVHL4fuNJcM0oeNZCIHPPH1-hvusHsz5o8yI",o2={getItem:t=>{const e=t+"=",r=decodeURIComponent(document.cookie).split(";");for(let a=0;a<r.length;a++){let i=r[a];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},setItem:(t,e)=>{const n=new Date;n.setTime(n.getTime()+365*24*60*60*1e3);const r="expires="+n.toUTCString(),i=window.location.hostname.includes("geeksproductionstudio.com")?"domain=.geeksproductionstudio.com;":"";document.cookie=`${t}=${e};${r};${i}path=/;SameSite=Lax;Secure`},removeItem:t=>{const n=window.location.hostname.includes("geeksproductionstudio.com")?"domain=.geeksproductionstudio.com;":"";document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;${n}path=/;SameSite=Lax;Secure`}},st=n2(a2,i2,{auth:{storage:o2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),_a="flight_saves",ec={async saveFlight(t){if(!st)return{error:{message:"Supabase not configured"}};const{data:{user:e}}=await st.auth.getUser();if(!e)return{error:{message:"User not logged in"}};const{data:n,error:r}=await st.from(_a).select("id").eq("user_id",e.id).eq("status","active").order("updated_at",{ascending:!1}).limit(1);return r?{error:r}:n&&n.length>0?await st.from(_a).update({data:t,updated_at:new Date().toISOString()}).eq("id",n[0].id):await st.from(_a).insert({user_id:e.id,data:t,status:"active"})},async getLatestFlight(){if(!st)return{error:{message:"Supabase not configured"}};const{data:{user:t}}=await st.auth.getUser();if(!t)return{error:{message:"User not logged in"}};const{data:e,error:n}=await st.from(_a).select("*").eq("user_id",t.id).eq("status","active").order("updated_at",{ascending:!1}).limit(1).single();return n&&n.code!=="PGRST116"?{error:n}:{data:e}},async discardFlight(t){return st?await st.from(_a).update({status:"discarded"}).eq("id",t):{error:{message:"Supabase not configured"}}}},mf=L.createContext({}),Zc=()=>L.useContext(mf),s2=({children:t})=>{const[e,n]=L.useState(null),[r,a]=L.useState(!0);L.useEffect(()=>{if(!st){a(!1);return}st.auth.getSession().then(({data:{session:u}})=>{n((u==null?void 0:u.user)??null),a(!1)});const{data:{subscription:c}}=st.auth.onAuthStateChange((u,d)=>{n((d==null?void 0:d.user)??null),a(!1)});return()=>c.unsubscribe()},[]);const i=async()=>{if(!st)return;const{error:c}=await st.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin,queryParams:{}}});c&&(console.error("SSO Login Error:",c),alert("SSO Login failed: "+c.message))},o=async c=>{if(!st)return;const{error:u}=await st.auth.signInWithOtp({email:c});alert(u?u.message:"Check your email for the login link!")},l=async()=>{st&&await st.auth.signOut()};return s.jsx(mf.Provider,{value:{user:e,loading:r,signInWithSSO:i,signInWithEmail:o,signOut:l},children:t})},l2=({difficulty:t,setDifficulty:e,airline:n,setAirline:r,callsign:a,setCallsign:i,aircraftModel:o,setAircraftModel:l,pax:c,setPax:u,payload:d,setPayload:y,fuelReserve:p,setFuelReserve:h,cruiseHeight:v,setCruiseHeight:w,timeZulu:C,setTimeZulu:g,useRandomTime:m,setUseRandomTime:f,season:S,setSeason:A,useRandomSeason:I,setUseRandomSeason:R,selectedDeparture:x,selectedArrival:N,searchResults:E,searchAirports:k,selectDeparture:B,selectArrival:ae,flightPlan:V,formatDistance:ce,formatFlightTime:ye,formatFuel:ee,failureType:H,setFailureType:_,weatherData:j,setWeatherData:F,crewCount:z,setCrewCount:ne,aircraftSuggestions:oe,handleInitializeFlight:ie,handleSearch:ue,handleLoadSave:pe,apiKey:Q,setApiKey:Y})=>{var Ee;const{t:T}=qn(),{user:q}=Zc(),[P,O]=L.useState(null);L.useEffect(()=>{q&&ec.getLatestFlight().then(({data:K})=>{K&&O(K)})},[q]);const D=async()=>{P&&window.confirm("Are you sure you want to discard this save?")&&(await ec.discardFlight(P.id),O(null))},G=()=>{P&&pe&&pe(P.data)},[$,M]=L.useState(1),[Z,de]=L.useState(1),U=(K,_e,Pe)=>{if(K===""||K===null||K===void 0)return!1;const Re=parseFloat(K);return!isNaN(Re)&&Re>=_e&&Re<=Pe},ve=()=>!!t,fe=()=>n.trim()!==""&&a.trim()!==""&&o&&U(c,0,1e3)&&U(d,0,1e5)&&U(v,1e3,5e4)&&U($,.5,5)&&U(z,1,10)&&(m||C.trim()!=="")&&(I||S),Ne=()=>x&&N,Fe=()=>{if(Z===1&&ve()){const K=re(t);F(K);const _e=be(t);_(_e),de(2)}else Z===2&&fe()&&de(3)},we=()=>{const K=["rookie","amateur","intermediate","advanced","pro","devil"],_e=K[Math.floor(Math.random()*K.length)];e(_e)},xe=async()=>{try{const K=await oh.generateRandomFlightParameters();r(K.airline),i(K.callsign),l(K.aircraftModel),u(K.pax),y(K.payload),h(K.fuelReserve),w(K.cruiseHeight),f(!0),R(!0),ne(Math.floor(Math.random()*4)+2);const _e=re(t);F(_e);const Pe=be(t);_(Pe)}catch(K){console.error("Error randomizing flight params:",K)}},te=async()=>{try{const K=await oh.generateRandomFlightParameters();B(K.selectedDeparture),ae(K.selectedArrival)}catch(K){console.error("Error randomizing route:",K)}},Me=()=>{const K=Math.floor(Math.random()*24).toString().padStart(2,"0"),_e=Math.floor(Math.random()*60).toString().padStart(2,"0");return`${K}:${_e}Z`},Xe=()=>{const K=["Spring","Summer","Autumn","Winter"];return K[Math.floor(Math.random()*K.length)]},re=K=>{const _e=["clear","cloudy","rain","storm","fog","snow"],Pe={rookie:[.4,.3,.2,.05,.03,.02],amateur:[.3,.3,.2,.1,.05,.05],intermediate:[.2,.25,.25,.15,.1,.05],advanced:[.15,.2,.25,.2,.1,.1],pro:[.1,.15,.25,.25,.15,.1],devil:[.05,.1,.2,.3,.2,.15]},Re=Pe[K]||Pe.intermediate,tt=Math.random();let ze=0;for(let Qe=0;Qe<_e.length;Qe++)if(ze+=Re[Qe],tt<=ze){const cn=_e[Qe],It=K==="devil"?30:K==="pro"?20:10,Er=K==="devil"?.5:K==="pro"?2:5;return{type:cn,windSpeed:Math.round(It+Math.random()*(K==="devil"?40:20)),visibility:Math.max(.1,Er+Math.random()*(K==="devil"?2:5))}}return{type:"clear",windSpeed:10,visibility:10}},be=K=>{const _e=["engine_failure","hydraulic_failure","electrical_failure","instrument_failure","fuel_leak","structural_damage"],Pe={rookie:[.4,.2,.15,.15,.05,.05],amateur:[.3,.2,.2,.15,.1,.05],intermediate:[.25,.2,.2,.15,.1,.1],advanced:[.2,.2,.2,.15,.15,.1],pro:[.15,.2,.2,.15,.15,.15],devil:[.1,.2,.2,.15,.15,.2]},Re=Pe[K]||Pe.intermediate,tt=Math.random();let ze=0;for(let Qe=0;Qe<_e.length;Qe++)if(ze+=Re[Qe],tt<=ze)return _e[Qe];return _e[0]};return L.useEffect(()=>{},[t]),s.jsxs("div",{className:"flight-initialization",children:[P&&s.jsxs("div",{className:"save-recovery-banner",style:{background:"rgba(30, 64, 175, 0.9)",border:"1px solid #60a5fa",padding:"15px",marginBottom:"20px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{margin:0,color:"#fff"},children:"Previous Flight Found"}),s.jsxs("p",{style:{margin:"5px 0 0",fontSize:"14px",color:"#bfdbfe"},children:["Aircraft: ",((Ee=P.data.aircraftModel)==null?void 0:Ee.name)||"Unknown"," | Last Saved: ",new Date(P.updated_at).toLocaleString()]})]}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("button",{onClick:G,style:{background:"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Resume Flight"}),s.jsx("button",{onClick:D,style:{background:"rgba(239, 68, 68, 0.2)",color:"#fca5a5",border:"1px solid #ef4444",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Discard"})]})]}),s.jsxs("div",{className:"dispatch-section",style:{opacity:Z===1?1:.5,pointerEvents:Z===1?"auto":"none",transition:"all 0.3s ease"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",borderBottom:"2px solid #30363d"},children:[s.jsx("h2",{className:"section-header",style:{borderBottom:"none",marginBottom:0},children:T("initialization.steps.1")}),s.jsx("button",{className:"dispatch-btn random",onClick:we,title:"Randomize Difficulty",children:""})]}),s.jsxs("div",{className:"difficulty-grid",children:[s.jsx("div",{className:"difficulty-buttons",children:["rookie","amateur","intermediate","advanced","pro","devil"].map(K=>s.jsx("button",{className:`difficulty-btn ${K} ${t===K?"active":""}`,onClick:()=>e(K),children:T(`initialization.difficulty.${K}`)},K))}),s.jsx("div",{className:"intel-panel",children:s.jsxs("div",{className:"crew-intel-box",children:[s.jsx("span",{className:"intel-label",children:T("initialization.intel.label")}),s.jsx("p",{className:"intel-text",children:T(`initialization.intel.descriptions.${t}`)||"Awaiting difficulty selection..."})]})})]}),Z===1&&s.jsx("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end"},children:s.jsx("button",{className:"dispatch-btn primary",onClick:Fe,disabled:!ve(),children:T("initialization.buttons.next_params")})})]}),s.jsxs("div",{className:"dispatch-section",style:{opacity:Z===2?1:.5,pointerEvents:Z===2?"auto":"none",transition:"all 0.3s ease"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",borderBottom:"2px solid #30363d"},children:[s.jsx("h2",{className:"section-header",style:{borderBottom:"none",marginBottom:0},children:T("initialization.steps.2")}),s.jsx("button",{className:"dispatch-btn random",onClick:xe,title:"Randomize Parameters",children:""})]}),s.jsxs("div",{className:"dispatch-grid",children:[s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.airline")}),s.jsx("input",{type:"text",value:n,onChange:K=>r(K.target.value),className:"dispatch-input",placeholder:"OPERATOR NAME"})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.callsign")}),s.jsx("input",{type:"text",value:a,onChange:K=>i(K.target.value),className:"dispatch-input",placeholder:"FLIGHT NUMBER"})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.aircraft_type")}),s.jsx("select",{value:o,onChange:K=>l(K.target.value),className:"dispatch-select",children:oe.map((K,_e)=>s.jsxs("option",{value:K.model,children:[K.manufacturer," ",K.model]},_e))})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.crew_count")}),s.jsx("input",{type:"number",value:z,onChange:K=>ne(K.target.value),className:"dispatch-input",min:"1",max:"10",placeholder:"1-10"})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.passengers")}),s.jsx("input",{type:"number",value:c,onChange:K=>u(K.target.value),className:"dispatch-input",min:"0",max:"1000",placeholder:"0-1000"})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.payload")}),s.jsx("input",{type:"number",value:d,onChange:K=>y(K.target.value),className:"dispatch-input",min:"0",max:"100000",placeholder:"KG"})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.cruise_height")}),s.jsx("input",{type:"number",value:v,onChange:K=>w(K.target.value),className:"dispatch-input",min:"1000",max:"50000",placeholder:"FT"})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.reserve_fuel")}),s.jsx("input",{type:"number",value:$,onChange:K=>M(K.target.value),className:"dispatch-input",min:"0.5",max:"5.0",step:"0.1",placeholder:"HRS"})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.zulu_time")}),s.jsxs("div",{className:"checkbox-input-group",children:[s.jsx("input",{type:"text",value:C,onChange:K=>g(K.target.value),className:"dispatch-input",disabled:m,placeholder:"HH:MMZ"}),s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:K=>{f(K.target.checked),K.target.checked&&g(Me())}})," ",T("initialization.params.random")]})]})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.params.season")}),s.jsxs("div",{className:"checkbox-input-group",children:[s.jsxs("select",{value:S,onChange:K=>A(K.target.value),className:"dispatch-select",disabled:I,children:[s.jsx("option",{value:"Spring",children:T("initialization.params.seasons.Spring")}),s.jsx("option",{value:"Summer",children:T("initialization.params.seasons.Summer")}),s.jsx("option",{value:"Autumn",children:T("initialization.params.seasons.Autumn")}),s.jsx("option",{value:"Winter",children:T("initialization.params.seasons.Winter")})]}),s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:I,onChange:K=>{R(K.target.checked),K.target.checked&&A(Xe())}})," ",T("initialization.params.random")]})]})]})]}),Z===2&&s.jsx("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end"},children:s.jsx("button",{className:"dispatch-btn primary",onClick:Fe,disabled:!fe(),children:T("initialization.buttons.next_route")})})]}),s.jsxs("div",{className:"dispatch-section",style:{opacity:Z===3?1:.5,pointerEvents:Z===3?"auto":"none",transition:"all 0.3s ease"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",borderBottom:"2px solid #30363d"},children:[s.jsx("h2",{className:"section-header",style:{borderBottom:"none",marginBottom:0},children:T("initialization.steps.3")}),s.jsx("button",{className:"dispatch-btn random",onClick:te,title:"Randomize Route",children:""})]}),s.jsxs("div",{className:"airport-selection-grid",children:[s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.route.departure")}),s.jsx(ih,{placeholder:"SEARCH ICAO/IATA...",searchResults:E,handleSearch:ue,onSelect:B,selectedAirport:x})]}),s.jsxs("div",{className:"parameter-group",children:[s.jsx("label",{children:T("initialization.route.arrival")}),s.jsx(ih,{placeholder:"SEARCH ICAO/IATA...",searchResults:E,handleSearch:ue,onSelect:ae,selectedAirport:N})]})]})]}),V&&x&&N&&s.jsxs("div",{className:"dispatch-summary",children:[s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:T("initialization.route.summary.route")}),s.jsxs("span",{className:"summary-value",children:[x.iata,"  ",N.iata]})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:T("initialization.route.summary.distance")}),s.jsx("span",{className:"summary-value",children:ce(V.distance.nauticalMiles)})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:T("initialization.route.summary.est_time")}),s.jsx("span",{className:"summary-value",children:ye(V.time)})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("span",{className:"summary-label",children:T("initialization.route.summary.fuel_req")}),s.jsxs("span",{className:"summary-value",style:{fontSize:"0.9em"},children:[T("initialization.route.summary.trip"),": ",V.fuel.tripFuel,"kg | ",T("initialization.route.summary.rsv"),": ",V.fuel.reserveFuel,"kg",s.jsx("br",{}),T("initialization.route.summary.total"),": ",ee(V.fuel)]})]})]}),Z===3&&s.jsx("div",{className:"dispatch-actions",style:{borderTop:"none",paddingTop:0},children:s.jsx("button",{className:"dispatch-btn primary",onClick:ie,disabled:!Ne(),style:{width:"100%"},children:T("initialization.buttons.finalize")})})]})};class c2{constructor(e={}){this.config={maxThrust:e.maxThrust||12e4,bypassRatio:e.bypassRatio||5,tsfc:e.specificFuelConsumption||11e-6,idleN1:20,maxN1:102,spoolUpRate:15,spoolDownRate:20,responsiveness:e.responsiveness||1,...e},this.config.tsfc>.001&&(this.config.tsfc/=3600),this.state={n1:20,n2:22,egt:400,thrust:0,fuelFlow:0,oilPressure:45,vibration:0,running:!0,failed:!1,throttleCommand:0,isReverse:!1,starterEngaged:!1,pneumaticPressure:!1,fuelAvailable:!1,ignition:!1,egtOffset:0},this._prevFuelFlow=0}setThrottle(e){this.state.throttleCommand=e}setStartupState(e,n,r,a){this.state.starterEngaged=e,this.state.pneumaticPressure=n,this.state.fuelAvailable=r,this.state.ignition=a}update(e,n,r,a,i,o){if(this.state.failed)return this.spoolDown(e),this.getOutput();const l=n!==void 0?n:this.state.throttleCommand;this.state.throttleCommand=l,!this.state.running&&this.state.fuelAvailable&&this.state.n2>15&&(this.state.running=!0,this.state.egt+=100),this.state.running&&!this.state.fuelAvailable&&(this.state.running=!1);let c=0,u=!1;if(this.state.running)if(l>=0){const ae=20+l*82;c=10*Math.sqrt(Math.max(0,ae))}else{u=!0;const k=45,B=75,ae=Math.min(1,Math.abs(l)/.7);c=k+ae*(B-k)}else{let k=this.state.pneumaticPressure;k===!0&&(k=30),k===!1&&(k=0),this.state.starterEngaged&&k>5?c=25*Math.min(1.2,Math.max(0,(k-5)/25)):c=0}this.state.isReverse=u;const d=c-this.state.n2;let y=this.config.spoolUpRate;if(!this.state.running&&this.state.starterEngaged){let k=this.state.pneumaticPressure;k===!0&&(k=30),k===!1&&(k=0),y=5*Math.min(1.2,Math.max(0,(k-5)/25))}else d<0&&(y=this.config.spoolDownRate);this.state.n2+=d*y*e*.04*this.config.responsiveness,this.state.n2<0&&(this.state.n2=0);const h=this.calculateN1FromN2(this.state.n2)-this.state.n1;this.state.n1+=h*e*2,this.state.n1<0&&(this.state.n1=0),this.state.n1/this.config.maxN1;let v=0;const w=5;if(this.state.n1>w){const k=(this.state.n1-w)/(this.config.maxN1-w);v=Math.pow(Math.max(0,k),2.5)}u&&l<-.01&&(v=-1*v*1.55);const C=Math.pow(i,.7),g=Math.max(0,1-.2*r);this.state.thrust=this.config.maxThrust*v*C*g;const m=this.computeTSFC(this.config.tsfc,i,r,this.state.n1),f=this.computeIdleFuelFlow(this.config.tsfc,i,this.state.n1),S=Math.abs(this.state.thrust),A=f+m*S,I=.35,R=this._prevFuelFlow*(1-I)+A*I;this.state.fuelFlow=Math.max(f,R),this._prevFuelFlow=this.state.fuelFlow;const x=o,E=400+this.state.n2*4+(this.state.egtOffset||0);return this.state.egt=this.state.running?E:x+(this.state.egt-x)*.99,this.getOutput()}calculateN1FromN2(e){return e<=0?0:e*e/100}computeTSFC(e,n,r,a){const i=.6+.4*Math.max(0,Math.min(1,n)),o=1+.06*Math.max(0,r-.25),l=.8+.25*Math.max(0,Math.min(1,a/this.config.maxN1));return e*i*o*l}computeIdleFuelFlow(e,n,r){const a=Math.max(.15,Math.min(.4,r/this.config.maxN1));return .7*e*this.config.maxThrust*Math.pow(a,1.8)*Math.max(.5,n)}spoolDown(e){this.state.n1*=1-.1*e,this.state.n2*=1-.1*e,this.state.thrust=0,this.state.fuelFlow=0,this.state.running=!1}getOutput(){return{...this.state}}setFailed(e){this.state.failed=e}}class vn{constructor(e,n,r,a,i,o=1){this.kp=e,this.ki=n,this.kd=r,this.min=a,this.max=i,this.smoothing=o,this.integral=0,this.prevError=0,this.prevDerivative=0}reset(){this.integral=0,this.prevError=0,this.prevDerivative=0}initialize(e){if(this.reset(),this.ki!==0){this.integral=e/this.ki;const n=this.max/this.ki,r=this.min/this.ki;this.integral>n?this.integral=n:this.integral<r&&(this.integral=r)}}update(e,n,r){if(r<=0)return 0;const a=e-n;this.integral+=a*r;const i=this.ki*this.integral;i>this.max?this.integral=this.max/this.ki:i<this.min&&(this.integral=this.min/this.ki);const o=(a-this.prevError)/r,l=this.smoothing*o+(1-this.smoothing)*this.prevDerivative;this.prevError=a,this.prevDerivative=l;let c=this.kp*a+this.ki*this.integral+this.kd*l;return c>this.max&&(c=this.max),c<this.min&&(c=this.min),c}}class u2{constructor(){this.speedPID=new vn(.08,.02,.05,0,1,.8),this.vsPID=new vn(1e-4,5e-5,5e-5,-15*Math.PI/180,20*Math.PI/180,1),this.altitudePID=new vn(1.5,.01,0,-3e3,3e3,1),this.pitchPID=new vn(-2.5,-1,-.8,-1,1,1),this.rollPID=new vn(1.8,.3,.25,-1,1,.9),this.headingPID=new vn(1,.02,.3,-30*Math.PI/180,30*Math.PI/180,.8),this.rudderPID=new vn(.5,.1,.5,-1,1,1),this.glideslopePID=new vn(6,.1,2,-2e3,1500,1),this.localizerPID=new vn(12,.5,15,-60,60,1),this.engaged=!1,this.mode="HDG",this.runwayGeometry=null,this.nav1Frequency=0,this.prevTargetRoll=0,this.maxRollRate=20*Math.PI/180,this.targets={speed:0,vs:0,altitude:0,heading:0},this.debugState={headingError:0,targetRoll:0,pitchError:0,targetPitch:0,speedError:0,throttleCmd:0,vsError:0,ilsMessage:""},this.navPlan=null,this.navState={preTurnEngaged:!1}}getState(){return{enabled:this.engaged,mode:this.mode,targets:{...this.targets},runwayGeometry:this.runwayGeometry,navPlan:this.navPlan,navState:this.navState,nav1Frequency:this.nav1Frequency}}loadState(e){e&&(e.enabled!==void 0&&(this.engaged=e.enabled),e.mode&&(this.mode=e.mode),e.targets&&(this.targets={...this.targets,...e.targets}),e.runwayGeometry&&(this.runwayGeometry=e.runwayGeometry),e.navPlan&&(this.navPlan=e.navPlan),e.navState&&(this.navState=e.navState),e.nav1Frequency&&(this.nav1Frequency=e.nav1Frequency,this.debugState.nav1Frequency=e.nav1Frequency),this.speedPID.reset(),this.vsPID.reset(),this.altitudePID.reset(),this.pitchPID.reset(),this.rollPID.reset(),this.headingPID.reset(),this.rudderPID.reset(),this.glideslopePID.reset(),this.localizerPID.reset(),console.log(" Autopilot Service: State Loaded",{mode:this.mode,engaged:this.engaged,targets:this.targets}))}setRunwayGeometry(e){this.runwayGeometry=e}setNavFrequency(e){this.nav1Frequency=e,this.debugState.nav1Frequency=e}setNavigationPlan(e){this.navPlan={fix:e.fix,inboundCourseDeg:e.inboundCourseDeg,leadBankDeg:e.leadBankDeg||25},this.navState={preTurnEngaged:!1}}setTargets(e){e.mode&&(e.mode==="ILS"&&this.runwayGeometry&&this.runwayGeometry.ilsFrequency&&this.nav1Frequency!==this.runwayGeometry.ilsFrequency&&(this.setNavFrequency(this.runwayGeometry.ilsFrequency),this.debugState.ilsMessage=`Auto-tuned ILS ${this.runwayGeometry.ilsFrequency.toFixed(2)}`),this.mode=e.mode),e.ias!==void 0&&(e.speed=e.ias),e.speed!==void 0&&(e.ias=e.speed),e.heading!==void 0&&(e.heading=(e.heading%360+360)%360),this.targets={...this.targets,...e}}setEngaged(e,n=null){if(e&&!this.engaged&&(this.speedPID.reset(),this.vsPID.reset(),this.pitchPID.reset(),this.rollPID.reset(),this.headingPID.reset(),this.glideslopePID.reset(),this.localizerPID.reset(),this.finalApproachDrift=null,this.prevTargetRoll=0,n&&(typeof n.throttle=="number"&&(this.speedPID.initialize(n.throttle),this.debugState.throttleCmd=n.throttle),this.targets.speed===0&&(this.targets.speed=Math.max(150,Math.round(n.airspeed)),this.targets.ias=this.targets.speed),this.targets.vs===0&&(this.targets.vs=Math.round(n.verticalSpeed/100)*100),this.targets.altitude===0&&(this.targets.altitude=Math.round(n.altitude/100)*100),this.targets.heading===0))){let r=n.heading!==void 0?n.heading:0;r=r%360,r<0&&(r+=360),this.targets.heading=r===0?360:r}this.engaged=e}update(e,n,r){if(!this.engaged)return null;const{airspeed:a,verticalSpeed:i,pitch:o,roll:l,heading:c,track:u,latitude:d,longitude:y,altitude:p}=e,h=e.beta||0;if(this.targets.speed===0?(this.targets.speed=Math.round(a),this.targets.ias=this.targets.speed):this.targets.ias===void 0&&(this.targets.ias=this.targets.speed),this.targets.vs===0&&Math.abs(i)>100&&(this.targets.vs=Math.round(i/100)*100),this.targets.heading===0){let ee=c===0?360:c;ee=ee%360,ee<0&&(ee+=360),this.targets.heading=ee}if(this.mode==="LNAV"&&this.navPlan&&typeof d=="number"&&typeof y=="number"){const{fix:ee,inboundCourseDeg:H,leadBankDeg:_}=this.navPlan,j=this.runwayGeometry&&this.runwayGeometry.thresholdStart,F=j?this.runwayGeometry.thresholdStart.latitude:ee.latitude,z=j?this.runwayGeometry.thresholdStart.longitude:ee.longitude,ne=F*Math.PI/180,oe=111132.92,ie=111412.84*Math.cos(ne),ue=(d-F)*oe,pe=(y-z)*ie,Q=H*Math.PI/180,Y=Math.cos(Q),T=Math.sin(Q),q=ue*Y+pe*T,P=-ue*T+pe*Y,O=Math.max(Math.abs(q),500),D=Math.atan2(P,O)*180/Math.PI;let G=H-(typeof u=="number"?u:c);G>180&&(G-=360),G<-180&&(G+=360);const $=9.80665,M=(_||25)*Math.PI/180,Z=a*.514444,de=Z*Z/($*Math.tan(M)),U=ee.latitude*Math.PI/180,ve=111412.84*Math.cos(U),fe=(d-ee.latitude)*oe,Ne=(y-ee.longitude)*ve,Fe=Math.sqrt(fe*fe+Ne*Ne);let xe=(Math.atan2(Ne,fe)*180/Math.PI+360)%360,te=H-xe;te>180&&(te-=360),te<-180&&(te+=360);const Me=$*Math.tan(M)/Math.max(Z,1),Xe=Math.abs(te)*Math.PI/180/Me,re=Math.max(3,Xe*.25),be=Math.max(300,Math.min(4e3,de*Math.tan(Math.abs(te)*Math.PI/180/2)))+Z*re;let Ee=0,K=!1;const _e=45;let Pe=H;if(Fe<=be&&Math.abs(te)>1)K=!0,this.navState.preTurnEngaged=!0,Ee=0,Pe=H;else{let Re=-D*8;Re>_e&&(Re=_e),Re<-_e&&(Re=-_e),Ee=Re,Pe=H+Ee}if(typeof u=="number"&&typeof c=="number"){let Re=u-c;Re>180&&(Re-=360),Re<-180&&(Re+=360),Pe=Pe+Re}if(this.targets.heading=(Pe+360)%360,this.debugState.lnavMessage=K?`Pre-turn align ${Math.round(H)}`:Pe===H+Ee?`Intercept ${Math.round(H)} (dev ${D.toFixed(1)})`:`Direct-to fix (brg ${Math.round(xe)})`,this.debugState.lnav={dist_m:Fe,inbound:H,delta:G,distAlong_m:q,distCross_m:P,dev_deg:D,lead_m:be,preTurn:K,turnDur_s:Xe?Xe.toFixed(1):"0.0"},ee.altitude&&typeof ee.altitude=="number"){this.targets.altitude=ee.altitude;let Re=this.altitudePID.update(ee.altitude,p,r);this.targets.vs=Re}}let v={active:!1,distAlong:0,distCross:0,altError:0,targetAltitude:0,message:""},w=!1;if(this.mode==="ILS"&&this.runwayGeometry&&typeof d=="number"&&typeof y=="number"){const ee=this.runwayGeometry.ilsFrequency;let H=!0;if(ee&&Math.abs(this.nav1Frequency-ee)>.05&&(H=!1),!H)v.message=`Wrong Freq: ${this.nav1Frequency} vs ${ee}`;else{const{thresholdStart:_,heading:j}=this.runwayGeometry,F=_.latitude*Math.PI/180,z=111132.92,ne=111412.84*Math.cos(F),oe=(d-_.latitude)*z,ie=(y-_.longitude)*ne,ue=j*Math.PI/180,pe=Math.cos(ue),Q=Math.sin(ue),Y=oe*pe+ie*Q,T=-oe*Q+ie*pe,q=-Y*3.28084;let P=p;const O=_.elevation||0;q>0&&q<3e5?P=O+50+q*Math.tan(3*Math.PI/180):q<=0&&q>-1e4&&(P=O+50);const D=P-p;let G=0,$=0;D>50?(G=0,$=0,this.glideslopePID.reset()):(G=this.glideslopePID.update(D,0,r),$=-a*5.2,(q<=0||q>12e4)&&($=0,G=G*.1)),this.targets.vs=$+G,this.targets.vs<-4500&&(this.targets.vs=-4500),this.targets.vs>1e3&&(this.targets.vs=1e3);const M=-Y,Z=Math.max(M,500),U=6+Z/1852*1.5;this.localizerPID.kp=Math.min(U,30);const fe=Math.atan2(T,Z)*180/Math.PI;let Ne=0;if(typeof u=="number"){let re=u-c;re>180&&(re-=360),re<-180&&(re+=360),Ne=re-h*180/Math.PI}const Fe=q/6076.12;let we=0;const xe=60;let te=0;if(Math.abs(fe)>1.5){let re=-fe*10;re>xe&&(re=xe),re<-xe&&(re=-xe),te=re,this.localizerPID.reset()}else{let re=this.localizerPID.update(0,fe,r);re>xe&&(re=xe),re<-xe&&(re=-xe),te=re}we=te-Ne,we>60&&(we=60),we<-60&&(we=-60);const Me=Fe<=50&&Math.abs(fe)<70;if(Me||(this.targets.vs=0,this.glideslopePID.reset()),Fe<1){w=!0;const re=5;we>re&&(we=re),we<-re&&(we=-re)}v.message=`ILS Tracking (Dev: ${fe.toFixed(2)})`;let Xe=j+we;if(this.targets.heading=(Xe+360)%360,v={active:!0,runway:this.runwayGeometry.runwayName,distAlong:Y*3.28084,distCross:T*3.28084,altError:D,targetAltitude:P,driftAngle:Ne,message:v.message,locCaptured:Math.abs(fe)<=2,gsCaptured:Me,locDeviationDeg:fe,gsDeviationDeg:Me?0:D/(q||1)*57.29},M>0){const be=Math.atan2(p-this.runwayGeometry.thresholdStart.elevation,M)*180/Math.PI;v.gsDeviationDeg=be-3}else v.gsDeviationDeg=0}}this.debugState.ils=v,v.message&&(this.debugState.ilsMessage=v.message);const C=this.mode==="LNAV"&&this.navPlan&&this.navPlan.fix&&typeof this.navPlan.fix.altitude=="number";let g=this.targets.vs;if(!v.gsCaptured&&!C&&this.targets.altitude>0){const ee=this.targets.altitude-p;Math.abs(ee)<50&&Math.abs(this.targets.vs)<200?g=this.altitudePID.update(this.targets.altitude,p,r):this.altitudePID.reset()}const{speed:m,heading:f}=this.targets,S=g,A=this.speedPID.update(m,a,r),I=this.vsPID.update(g,i,r),R=this.pitchPID.update(I,o,r),x=.5;let E=(typeof n.trim=="number"?n.trim:0)+R*x*r;const k=.8;E>k&&(E=k),E<-k&&(E=-k);const B=R;let ae=0,V=0;if(this.mode==="HDG"||this.mode==="LNAV"||this.mode==="ILS"){V=f-c,V>180&&(V-=360),V<-180&&(V+=360);const ee=V*Math.PI/180,H=isFinite(ee)?ee:0;ae=this.headingPID.update(H,0,r),isFinite(ae)||(ae=0);const _=this.maxRollRate*r,j=ae-this.prevTargetRoll;if(j>_&&(ae=this.prevTargetRoll+_),j<-_&&(ae=this.prevTargetRoll-_),this.prevTargetRoll=ae,w){const F=8*Math.PI/180;ae>F&&(ae=F),ae<-F&&(ae=-F)}}const ce=this.rollPID.update(ae,l,r),ye=this.rudderPID.update(h,0,r);return this.debugState={headingError:V,targetRoll:ae*180/Math.PI,pitchError:(I-o)*180/Math.PI,targetPitch:I*180/Math.PI,speedError:m-a,throttleCmd:A,vsError:S-i,aileronCmd:ce,elevatorCmd:B,rudderCmd:ye,beta:h,mode:this.mode,engaged:this.engaged,ils:v,lnav:this.debugState.lnav,lnavMessage:this.debugState.lnavMessage||""},{throttle:isFinite(A)?A:0,elevator:isFinite(B)?B:0,trim:isFinite(E)?E:0,aileron:isFinite(ce)?ce:0,rudder:isFinite(ye)?ye:0}}}const zn=new Map,d2={FLIGHT_PHASE:"flight.phase",SYSTEM_FAILURE:"system.failure",PHYSICS_EVENT:"physics.event",CONTROL_INPUT:"control.input",NARRATIVE:"narrative",USER_ACTION:"user.action"},Mt={PHASE_CHANGED:"flight.phase.changed",PHASE_COMPLETE:"flight.phase.complete",FAILURE_OCCURRED:"system.failure.occurred",FAILURE_PROGRESSED:"system.failure.progressed",FAILURE_RESOLVED:"system.failure.resolved",STALL_WARNING:"physics.stall.warning",STALL_OCCURRED:"physics.stall.occurred",HIGH_SPEED_WARNING:"physics.highspeed.warning",HIGH_SPEED_OCCURRED:"physics.highspeed.occurred",ALTITUDE_WARNING:"physics.altitude.warning",G_FORCE_WARNING:"physics.gforce.warning",PHYSICS_INITIALIZE:"physics.initialize",THROTTLE_CHANGED:"control.throttle.changed",SURFACE_CHANGED:"control.surface.changed",AUTOPILOT_CHANGED:"control.autopilot.changed",NARRATIVE_UPDATE:"narrative.update",CRITICAL_MESSAGE:"narrative.critical",STATUS_UPDATE:"narrative.status",COMMAND_EXECUTED:"user.command.executed",EMERGENCY_PROCEDURE:"user.emergency.procedure"};function vf(t,e){zn.has(t)||zn.set(t,new Set);const n=zn.get(t);return n.add(e),()=>{n.delete(e),n.size===0&&zn.delete(t)}}function wf(t,e){const n=zn.get(t);if(!(!n||n.size===0))for(const r of n)try{r(e)}catch(a){console.error("eventBus handler error",{type:t,error:a})}}function Af(t,e){const n={...e,timestamp:Date.now(),eventType:t};wf(t,n)}function h2(t){t.forEach(({type:e,payload:n})=>{Af(e,n)})}function y2(t,e){const n=[];for(const[r]of zn.entries())r.startsWith(t)&&n.push(vf(r,e));return()=>{n.forEach(r=>r())}}function p2(){zn.clear()}function f2(){return Array.from(zn.keys())}const Le={subscribe:vf,publish:wf,publishWithMetadata:Af,publishBatch:h2,subscribeToCategory:y2,clear:p2,getRegisteredEventTypes:f2,Categories:d2,Types:Mt};class kh{constructor(e,n={}){this.id=e.id,this.name=e.name,this.category=e.category,this.stages=e.stages||{inactive:{next:"active"},active:{}},this.currentStage="inactive",this.timeInStage=0,this.totalTime=0,this.intensity=0,this.variation={progressionRate:.8+Math.random()*.4,maxIntensity:.7+Math.random()*.3,fluctuation:Math.random(),context:{...n}},this.logs=[]}update(e,n){this.timeInStage+=e,this.totalTime+=e;const r=this.stages[this.currentStage];if(r){if(r.next&&r.duration){let a=r.duration;typeof a=="function"&&(a=a(this.variation.context));const i=a*(1/this.variation.progressionRate);this.timeInStage>i&&this.transitionTo(r.next)}if(r.intensityTarget!==void 0){const a=(r.intensityRate||.1)*e;this.intensity<r.intensityTarget&&(this.intensity=Math.min(r.intensityTarget,this.intensity+a))}}}transitionTo(e){if(this.currentStage===e)return;const n=this.currentStage;this.currentStage=e,this.timeInStage=0,this.stages[e];const r=this.getDescription();this.logs.push({time:this.totalTime,from:n,to:e,message:r}),console.log(`[Failure] ${this.name} transitioned: ${n} -> ${e}`)}getDescription(){const e=this.stages[this.currentStage];return typeof(e==null?void 0:e.description)=="function"?e.description(this.variation.context):(e==null?void 0:e.description)||`${this.name} is ${this.currentStage}`}apply(e){const n=this.stages[this.currentStage];n&&typeof n.effect=="function"&&n.effect(e,this.intensity,this.variation.context)}}const Ut=t=>["advanced","pro","devil","survival"].includes(t.difficulty),g2={ENGINE_FAILURE:{id:"engine_failure",name:"Engine Failure (Generic)",category:"engine",stages:{inactive:{next:"incipient"},incipient:{duration:t=>Ut(t)?12:3,next:"active",description:t=>Ut(t)?`Engine ${t.engineIndex+1} Parameters Fluctuation.`:`Engine ${t.engineIndex+1} Flameout Imminent.`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];if(r)if(Ut(n)){const a=(Math.random()-.5)*2;r.state.n2+=a,r.state.n1+=a*1.5,r.state.oilPressure*=.995,r.state.fuelFlow*=1+(Math.random()-.5)*.1,Math.random()>.8&&(r.state.egt+=50)}else r.state.n1=r.state.n1*.9+Math.random()*5,r.state.egt+=100,r.state.vibration=5}},active:{description:t=>Ut(t)?`Engine ${t.engineIndex+1} Failure.`:`ENGINE ${t.engineIndex+1} FLAMEOUT DETECTED.`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];r&&(r.state.failed||r.setFailed(!0))}}}},ENGINE_FIRE:{id:"engine_fire",name:"Engine Fire",category:"engine",stages:{inactive:{next:"incipient"},incipient:{duration:t=>Ut(t)?5:10,intensityTarget:1,next:"active",description:t=>Ut(t)?`Engine ${t.engineIndex+1} Vibration High.`:`Engine ${t.engineIndex+1} Fire Loop Alert.`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];if(r){r.state.vibration=5+e*2,n.egtOffset===void 0&&(n.egtOffset=0),e>.1&&!n.hasSpiked&&(n.egtOffset+=50,n.hasSpiked=!0);const a=Ut(n)?3:2;n.egtOffset+=a*e,r.state.egtOffset=n.egtOffset}}},active:{description:t=>Ut(t)?`Engine ${t.engineIndex+1} Temp Exceedance.`:`FIRE ALERT: Engine ${t.engineIndex+1}.`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];r&&(r.state.failed||r.state.egtOffset>600&&Math.random()<.05&&r.setFailed(!0,"fire","critical"),t.systems&&t.systems.fire&&(t.systems.fire[`eng${n.engineIndex+1}`]=!0),n.egtOffset===void 0&&(n.egtOffset=0),n.egtOffset+=.5,n.egtOffset<400&&(n.egtOffset=400),r.state.egtOffset=n.egtOffset,r.state.egtOffset>900&&(r.state.egtOffset=900))}}}},DUAL_ENGINE_FAILURE:{id:"dual_engine_failure",name:"Dual Engine Flameout",category:"engine",stages:{inactive:{next:"active"},active:{description:t=>"ALL ENGINES FLAMEOUT.",effect:(t,e,n)=>{t.engines.forEach(r=>r.setFailed(!0))}}}},COMPRESSOR_STALL:{id:"compressor_stall",name:"Compressor Stall",category:"engine",stages:{inactive:{next:"surging"},surging:{duration:15,next:"recovered",description:t=>`Engine ${t.engineIndex+1} Compressor Stall (Surging).`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];r&&(Math.random()>.7&&(r.state.thrust*=.2),r.state.egt+=10,r.state.vibration=8*e)}},recovered:{description:t=>`Engine ${t.engineIndex+1} Stabilized.`,effect:t=>{}}}},FUEL_LEAK:{id:"fuel_leak",name:"Fuel Leak",category:"engine",stages:{inactive:{next:"active"},active:{description:t=>Ut(t)?"Fuel Flow Mismatch Detected.":"Fuel Leak: Tank Imbalance increasing.",effect:(t,e,n)=>{const r=2+e*5,a=n.engineIndex%2===0?"left":"right";if(t.systems&&t.systems.fuel&&t.systems.fuel.tanks){const i=t.systems.fuel.tanks;if(i[a]>0)i[a]-=r*.1;else{const o=t.engines[n.engineIndex];o&&!o.state.failed&&o.setFailed(!0,"flameout","critical")}}}}}},BIRD_STRIKE:{id:"bird_strike",name:"Bird Strike",category:"engine",stages:{inactive:{next:"impact"},impact:{duration:2,next:"active",description:t=>Ut(t)?"LOUD BANG detected.":`Bird Strike Detected: Engine ${t.engineIndex+1}`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];r&&(r.state.vibration=10,r.state.n1=r.state.n1*(.9+Math.random()*.2),Ut(n)&&Math.random()>.5&&(r.state.n1*=.5))}},active:{description:t=>Ut(t)?`Engine ${t.engineIndex+1} Unstable.`:`Engine ${t.engineIndex+1} Severe Damage.`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];r&&(r.state.failed||r.setFailed(!0),r.state.n2>10&&(r.state.vibration=8))}}}},UNCONTAINED_ENGINE:{id:"uncontained_engine_failure",name:"Uncontained Failure",category:"engine",stages:{inactive:{next:"active"},active:{description:t=>`UNCONTAINED FAILURE: Engine ${t.engineIndex+1}.`,effect:(t,e,n)=>{const r=t.engines[n.engineIndex];r&&(r.setFailed(!0),t.systems.fire[`eng${n.engineIndex+1}`]=!0,t.systems.hydraulics.sysA.pressure=0,t.systems.pressurization.breach=!0)}}}}},m2={HYDRAULIC_FAILURE:{id:"hydraulic_failure",name:"Hydraulic System Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Hydraulic Pressure Loss.",effect:(t,e)=>{const n=1-e*.8;t.controls.aileron*=n,t.controls.elevator*=n,t.controls.rudder*=n,t.systems.hydraulics&&(t.systems.hydraulics.sysA.pressure=0,t.systems.hydraulics.sysB.pressure=0)}}}},MAJOR_HYDRAULIC:{id:"major_hydraulic_failure",name:"Major Hydraulic Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"TOTAL HYDRAULIC LOSS.",effect:t=>{t.systems.hydraulics&&(t.systems.hydraulics.sysA.pressure=0,t.systems.hydraulics.sysB.pressure=0,t.systems.hydraulics.sysC&&(t.systems.hydraulics.sysC.pressure=0)),(t.aircraft.id||"").toLowerCase().includes("737")||(t.aircraft.name||"").toLowerCase().includes("737")?(t.controlLag.aileron=10,t.controlLag.elevator=10,t.controlLag.rudder=10,t.controlEffectiveness.aileron=.3,t.controlEffectiveness.elevator=.3,t.controlEffectiveness.rudder=.3):(t.controlEffectiveness.aileron=0,t.controlEffectiveness.elevator=0,t.controlEffectiveness.rudder=0),t.controlLag.gear=20}}}},ELECTRICAL_BUS_FAILURE:{id:"electrical_bus_failure",name:"Electrical Bus Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Electrical Bus Failure. Main AC Bus Lost.",effect:t=>{t.systems.electrical.gen1=!1,t.systems.electrical.gen2=!1,t.systems.electrical.dcVolts=0}}}},PARTIAL_ELECTRICAL:{id:"partial_electrical_failure",name:"Partial Electrical Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Utility Bus Off. Non-essential systems lost.",effect:t=>{}}}},CIRCUIT_BREAKER:{id:"circuit_breaker_trip",name:"Circuit Breaker Trip",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Circuit Breaker Pop: Avionics.",effect:t=>{}}}},PITOT_BLOCKAGE:{id:"pitot_static_failure",name:"Pitot Tube Blockage",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Airspeed Indication Unreliable.",effect:t=>{t.sensors||(t.sensors={}),t.sensors.pitotBlocked=!0}}}},NAV_GLITCH:{id:"navigation_radio_glitch",name:"Nav Radio Glitch",category:"systems",stages:{inactive:{next:"intermittent"},intermittent:{duration:20,next:"active",description:t=>"Nav Radio Signal Intermittent.",effect:t=>{}},active:{description:t=>"Nav Radio Failure.",effect:t=>{}}}},COMM_RADIO_FAILURE:{id:"communication_radio_failure",name:"Comm Radio Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"COM 1 Transmit Failure.",effect:t=>{}}}},SENSOR_ANOMALY:{id:"non_critical_sensor_anomaly",name:"Sensor Anomaly",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"AOA Sensor Disagree.",effect:t=>{}}}},MINOR_INSTRUMENT:{id:"minor_instrument_failure",name:"Minor Instrument Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"PFD Symbol Generator Fault.",effect:t=>{}}}},BRAKE_FAILURE:{id:"brake_failure",name:"Brake Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Autobrake Fault. Manual Braking Required.",effect:t=>{}}}},MINOR_INSTRUMENT:{id:"minor_instrument_failure",name:"Minor Instrument Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Instrument Display Flicker/Loss.",effect:t=>{}}}},SENSOR_ANOMALY:{id:"non_critical_sensor_anomaly",name:"Sensor Anomaly",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Sensor Reading Anomaly.",effect:t=>{}}}},NAV_RADIO_GLITCH:{id:"navigation_radio_glitch",name:"Nav Radio Glitch",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"NAV Radio Signal Lost.",effect:t=>{}}}},COMM_RADIO_FAILURE:{id:"communication_radio_failure",name:"Comm Radio Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"COMMS LOST.",effect:t=>{}}}},BRAKE_FAILURE:{id:"brake_failure",name:"Brake Failure",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Brake System Malfunction.",effect:t=>{t.controls.brakes=0}}}},SENSOR_MISREAD:{id:"sensor_misread_approach",name:"Sensor Misread (Approach)",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"Altimeter/Speed Mismatch.",effect:t=>{}}}},SABOTAGE:{id:"sabotage_explosion",name:"Sabotage / Explosion",category:"systems",stages:{inactive:{next:"active"},active:{description:t=>"EXPLOSION DETECTED. CRITICAL DAMAGE.",effect:t=>{t.systems.electrical.gen1=!1,t.systems.electrical.gen2=!1,t.systems.hydraulics.sysA.pressure=0,t.systems.pressurization.breach=!0,t.systems.fire.cargo=!0}}}}},v2={CONTROL_JAM:{id:"control_jam",name:"Control Surface Jam",category:"controls",stages:{inactive:{next:"active"},active:{description:t=>`${t.surface.toUpperCase()} Jammed.`,effect:(t,e,n)=>{n.surface||(n.surface="elevator"),n.stuckValue===void 0&&(n.stuckValue=0),t.controls[n.surface]=n.stuckValue}}}},STRUCTURAL_JAM:{id:"structural_control_surface_jam",name:"Structural Jam",category:"controls",stages:{inactive:{next:"active"},active:{description:t=>"Control Mechanism Severed/Jammed.",effect:(t,e,n)=>{n.surface||(n.surface="rudder"),t.controls[n.surface]=.2}}}},TOTAL_CONTROL_FAILURE:{id:"total_flight_control_failure",name:"Total Control Loss",category:"controls",stages:{inactive:{next:"active"},active:{description:t=>"FLIGHT CONTROLS UNRESPONSIVE.",effect:t=>{t.controls.aileron=0,t.controls.elevator=0,t.controls.rudder=0}}}},GEAR_FAILURE:{id:"landing_gear_extension_issue",name:"Gear Extension Failure",category:"controls",stages:{inactive:{next:"active"},active:{description:t=>"Landing Gear Extension Fault.",effect:(t,e,n)=>{t.controls.gear>.1&&(t.controls.gear=0)}}}},AUTOPILOT_ANOMALY:{id:"autopilot_anomaly",name:"Autopilot Anomaly",category:"controls",stages:{inactive:{next:"active"},active:{description:t=>"Autopilot Disconnect / Uncommanded Motion.",effect:t=>{t.controls.elevator+=(Math.random()-.5)*.1}}}},AUTOTHROTTLE_MISCOMMAND:{id:"autothrottle_miscommand",name:"Autothrottle Miscommand",category:"controls",stages:{inactive:{next:"active"},active:{description:t=>"Autothrottle Surge.",effect:t=>{t.engines.forEach(e=>{e.thrustTarget=Math.random()>.5?1:0})}}}},RUNWAY_EXCURSION:{id:"runway_excursion",name:"Runway Excursion",category:"controls",stages:{inactive:{next:"active"},active:{description:t=>"Runway Excursion Risk. Braking Compromised.",effect:t=>{}}}}},w2={RAPID_DEPRESSURIZATION:{id:"rapid_depressurization",name:"Rapid Depressurization",category:"environment",stages:{inactive:{next:"active"},active:{description:t=>"CABIN PRESSURE WARNING. HULL INTEGRITY COMPROMISED.",effect:t=>{t.systems.pressurization.breach=!0}}}},HULL_BREACH:{id:"hull_breach",name:"Hull Breach",category:"environment",stages:{inactive:{next:"active"},active:{description:t=>"STRUCTURAL DAMAGE. DECOMPRESSION.",effect:t=>{t.systems.pressurization.breach=!0}}}},TURBULENCE:{id:"severe_turbulence",name:"Severe Turbulence",category:"environment",stages:{inactive:{next:"active"},active:{description:t=>"Encountering Severe Turbulence.",effect:(t,e)=>{t.setEnvironment({turbulence:5*e})}}}},WIND_SHEAR:{id:"wind_shear",name:"Wind Shear",category:"environment",stages:{inactive:{next:"active"},active:{description:t=>"WINDSHEAR AHEAD.",effect:(t,e)=>{}}}},SEVERE_ICING:{id:"severe_icing",name:"Severe Icing",category:"environment",stages:{inactive:{next:"accumulating"},accumulating:{duration:30,next:"critical",description:t=>"Ice Accumulation Detected.",effect:(t,e)=>{}},critical:{description:t=>"Severe Icing. Stall Speed Increased.",effect:t=>{}}}},FUEL_CONTAMINATION:{id:"fuel_contamination",name:"Fuel Contamination",category:"environment",stages:{inactive:{next:"active"},active:{description:t=>"Fuel Filter Bypass. Engine Roughness.",effect:t=>{t.engines.forEach(e=>{e.thrust*=.8+Math.random()*.2})}}}},BIRD_STRIKE:{id:"bird_strike",name:"Bird Strike",category:"environment",stages:{inactive:{next:"impact"},impact:{next:"damage",duration:.5,description:t=>"IMPACT DETECTED.",effect:(t,e,n)=>{}},damage:{description:t=>"Bird Ingestion: Engine Damage.",effect:(t,e,n)=>{const r=n.engineIndex!==void 0?n.engineIndex:0;t.engines[r]&&t.engines[r].setFailed(!0)}}}},UNCONTAINED_ENGINE:{id:"uncontained_engine_failure",name:"Uncontained Engine Failure",category:"environment",stages:{inactive:{next:"active"},active:{description:t=>`EXPLOSION ENGINE ${t.engineIndex+1}. STRUCTURAL DAMAGE.`,effect:(t,e,n)=>{const r=n.engineIndex!==void 0?n.engineIndex:0;t.engines[r]&&t.engines[r].setFailed(!0),t.systems.hydraulics.sysA.pressure=0}}}},SABOTAGE:{id:"sabotage_explosion",name:"Sabotage/IED",category:"environment",stages:{inactive:{next:"active"},active:{description:t=>"CATASTROPHIC FAILURE.",effect:t=>{t.engines.forEach(e=>e.setFailed(!0)),t.systems.pressurization.breach=!0}}}}};class qh{constructor(e={}){this.difficulty=e.difficulty||"intermediate",this.engineCount=e.engineCount||2,this.activeFailures=new Map,this.registry=new Map,this.registerGroup(g2),this.registerGroup(m2),this.registerGroup(v2),this.registerGroup(w2),this.settings=this.getDifficultySettings(this.difficulty),this.time=0,this.nextCheckTime=10}registerGroup(e){e&&Object.values(e).forEach(n=>{this.registry.set(n.id,n)})}getDifficultySettings(e){const n={rookie:{probMultiplier:0,maxFailures:0},amateur:{probMultiplier:.2,maxFailures:1},intermediate:{probMultiplier:.5,maxFailures:2},advanced:{probMultiplier:1,maxFailures:3},pro:{probMultiplier:1.5,maxFailures:4},devil:{probMultiplier:2.5,maxFailures:5}};return n[e]||n.intermediate}update(e,n){this.time+=e,this.activeFailures.forEach(r=>{r.update(e,n)}),this.time>this.nextCheckTime&&(this.checkRandomFailures(n),this.nextCheckTime=this.time+5+Math.random()*5)}applyImpact(e){this.activeFailures.forEach(n=>{n.apply(e)})}triggerFailure(e,n={}){if(this.activeFailures.has(e))return;const r=this.registry.get(e);if(!r){console.warn(`Failure definition not found: ${e}`);return}n.difficulty===void 0&&(n.difficulty=this.difficulty),r.category==="engine"&&n.engineIndex===void 0&&(n.engineIndex=Math.floor(Math.random()*this.engineCount));const a=new kh(r,n);a.transitionTo("incipient"),this.activeFailures.set(e,a),Le.publish(Le.Types.FAILURE_OCCURRED,{type:e,severity:"major",data:n});const i=a.getDescription();Le.publish(Le.Types.CRITICAL_MESSAGE,{title:"SYSTEM ALERT",content:i,severity:"warning"})}checkRandomFailures(e){}reset(){this.activeFailures.clear(),this.time=0}getState(){return{time:this.time,nextCheckTime:this.nextCheckTime,activeFailures:Array.from(this.activeFailures.values()).map(e=>({id:e.id,currentStage:e.currentStage,timeInStage:e.timeInStage,totalTime:e.totalTime,intensity:e.intensity,variation:e.variation,logs:e.logs}))}}loadState(e){e&&(this.reset(),this.time=e.time||0,this.nextCheckTime=e.nextCheckTime||10,e.activeFailures&&Array.isArray(e.activeFailures)&&e.activeFailures.forEach(n=>{const r=this.registry.get(n.id);if(r){const a=new kh(r,n.variation.context);a.currentStage=n.currentStage,a.timeInStage=n.timeInStage,a.totalTime=n.totalTime,a.intensity=n.intensity,a.variation=n.variation,a.logs=n.logs||[],this.activeFailures.set(n.id,a)}}))}}class A2{constructor(){this.GRID_SIZE=.01,this.cache=new Map,this.fetchQueue=[],this.isFetching=!1,this.lastPlayerPos={lat:0,lon:0},this.maxCacheSize=5e3,this.API_ENDPOINT="https://api.open-elevation.com/api/v1/lookup",this.startFetcher()}getGridIndices(e,n){return{latIdx:Math.floor(e/this.GRID_SIZE),lonIdx:Math.floor(n/this.GRID_SIZE)}}getKey(e,n){return`${e}_${n}`}getTerrainHeight(e,n){const{latIdx:r,lonIdx:a}=this.getGridIndices(e,n),i=this.getKey(r,a);return this.cache.has(i)?this.cache.get(i):null}update(e,n,r){this.lastPlayerPos={lat:e,lon:n};const a=r/60,i=e-a,o=e+a,l=n-a,c=n+a,u=this.getGridIndices(i,l),d=this.getGridIndices(o,c),y=[],p=new Set;for(let h=u.latIdx;h<=d.latIdx;h++)for(let v=u.lonIdx;v<=d.lonIdx;v++){const w=this.getKey(h,v);if(!this.cache.has(w)){const C=(h+.5)*this.GRID_SIZE,g=(v+.5)*this.GRID_SIZE,m=(C-e)**2+(g-n)**2;y.push({key:w,latIdx:h,lonIdx:v,lat:C,lon:g,distSq:m})}p.add(w)}y.sort((h,v)=>h.distSq-v.distSq),this.fetchQueue=y,this.cleanup(p)}cleanup(e){if(this.cache.size>this.maxCacheSize){for(const n of this.cache.keys())if(!e.has(n)&&(this.cache.delete(n),this.cache.size<=this.maxCacheSize))break}}async startFetcher(){const e=async()=>{if(this.fetchQueue.length>0&&!this.isFetching){this.isFetching=!0;const n=20,r=this.fetchQueue.splice(0,n);if(r.length>0)try{await this.fetchElevationData(r)}catch(a){console.warn("Terrain fetch failed:",a)}this.isFetching=!1}setTimeout(e,200)};e()}async fetchElevationData(e){const n=e.map(l=>`${l.lat.toFixed(5)},${l.lon.toFixed(5)}`).join("|"),r=`https://api.open-elevation.com/api/v1/lookup?locations=${n}`,a=`https://api.opentopodata.org/v1/aster30m?locations=${n}`,i="https://corsproxy.io/?";let o=!1;try{const l=await fetch(r);if(!l.ok)throw new Error(`Primary API Error: ${l.status}`);const c=await l.json();c&&c.results&&(this.processResults(e,c.results),o=!0)}catch(l){console.warn("Terrain: Primary API failed, switching to Secondary...",l)}if(!o)try{const l=await fetch(i+encodeURIComponent(a));if(!l.ok)throw new Error(`Secondary API Error: ${l.status}`);const c=await l.json();c&&c.results&&(this.processResults(e,c.results),o=!0)}catch(l){console.warn("Terrain: Secondary API also failed.",l)}}processResults(e,n){n.forEach((r,a)=>{if(a<e.length){const i=e[a],o=r.elevation,c=(o??0)*3.28084;this.cache.set(i.key,c)}})}}const Bn=new A2;class x2{constructor(){this.activeWarnings=[],this.lastUpdate=0,this.thresholds={stallAlpha:15,bankAngleWarn:40,overspeedKnots:340,sinkRateWarn:2500,sinkRatePullUp:4e3,terrainClosureWarn:2e3,gearWarningAlt:500,flapsWarningAlt:200,vle:270,vlo:250,vfe:[250,230,210,190,180,170],tailStrikePitch:10,altitudeAlertDiff:300},this.prevApEngaged=!1}update(e,n){if(this.activeWarnings=[],!e)return this.activeWarnings;const{derived:r,controls:a,systems:i,debugPhysics:o,controls:{gear:l,flaps:c,throttle:u,airBrakes:d,brakes:y},verticalSpeed:p,fuel:h,engineParams:v,groundStatus:w,autopilot:C,autopilotTargets:g}=e,m=r.altitude_agl_ft,f=r.altitude_ft,S=r.indicatedAirspeed||r.airspeed,A=e.debugPhysics.phi||0,I=e.debugPhysics.theta||0,R=A*180/Math.PI,x=I*180/Math.PI,N=o.alpha*180/Math.PI;return this.checkGPWS(m,p,l,c,S,w),this.checkEnvelope(N,S,R,x,c,l,w),this.checkConfiguration(c,l,d,u,w,x,y,m),this.checkSystems(i,h,v,m,a),this.checkAutomation(C,g,f),this.activeWarnings.sort((E,k)=>{const B={CRITICAL:0,WARNING:1,ADVISORY:2};return B[E.level]-B[k.level]}),this.activeWarnings}addWarning(e,n,r,a=!1){this.activeWarnings.find(i=>i.id===e)||this.activeWarnings.push({id:e,message:n,level:r,isFlashing:a})}checkGPWS(e,n,r,a,i,o,l){const c=r>.9&&a>.5;if(o&&(o.status==="RUNWAY"||o.status==="GRASS")||c)return;const u=20,d=10;if(n<-100&&e>0){const y=-n/60,p=e/y;p<d?this.addWarning("GPWS_PULL_UP","warnings.gpws.pull_up","CRITICAL",!0):p<u&&this.addWarning("GPWS_TERRAIN","warnings.gpws.terrain","CRITICAL",!0)}if(l&&l.derived&&l.position){const y=l.derived.groundSpeed||0,p=l.derived.heading||0,h=l.position.latitude||0,v=l.position.longitude||0,w=l.derived.altitude_ft||0,C=p*Math.PI/180,g=y/3600,f=g*d/60,S=f*Math.cos(C),A=f*Math.sin(C)/Math.cos(h*Math.PI/180),I=Bn.getTerrainHeight(h+S,v+A);if(I!==null&&I>w)this.addWarning("GPWS_PULL_UP","warnings.gpws.pull_up","CRITICAL",!0);else{const x=g*u/60,N=x*Math.cos(C),E=x*Math.sin(C)/Math.cos(h*Math.PI/180),k=Bn.getTerrainHeight(h+N,v+E);k!==null&&k>w&&this.addWarning("GPWS_TERRAIN","warnings.gpws.terrain","CRITICAL",!0)}}e<this.thresholds.gearWarningAlt&&!r&&i<180&&this.addWarning("GPWS_TOO_LOW_GEAR","warnings.gpws.too_low_gear","WARNING"),e<this.thresholds.flapsWarningAlt&&a<.1&&r&&i<160&&this.addWarning("GPWS_TOO_LOW_FLAPS","warnings.gpws.too_low_flaps","WARNING")}checkEnvelope(e,n,r,a,i,o,l){const c=l&&(l.status==="RUNWAY"||l.status==="GRASS");!c&&e>this.thresholds.stallAlpha&&this.addWarning("STALL","warnings.stall","CRITICAL",!0),n>this.thresholds.overspeedKnots&&this.addWarning("OVERSPEED","warnings.overspeed","CRITICAL",!0),!c&&Math.abs(r)>this.thresholds.bankAngleWarn&&this.addWarning("BANK_ANGLE","warnings.bank_angle","WARNING",!0)}checkSystems(e,n,r,a,i){if(!e)return;e.fire.eng1&&this.addWarning("FIRE_ENG1","warnings.fire.eng1","CRITICAL",!0),e.fire.eng2&&this.addWarning("FIRE_ENG2","warnings.fire.eng2","CRITICAL",!0),e.fire.apu&&this.addWarning("FIRE_APU","warnings.fire.apu","CRITICAL",!0),e.hydraulics.sysA.pressure<1e3&&this.addWarning("HYD_A_LOW","warnings.hydraulics.a_low","ADVISORY"),e.hydraulics.sysB.pressure<1e3&&this.addWarning("HYD_B_LOW","warnings.hydraulics.b_low","ADVISORY"),!e.electrical.gen1&&!e.electrical.gen2&&!e.electrical.apuGen&&this.addWarning("ELEC_EMER","warnings.elec.emer_config","WARNING"),e.pressurization.cabinAlt>1e4&&this.addWarning("CABIN_ALT","warnings.cabin_alt","CRITICAL",!0),n<500&&this.addWarning("FUEL_LOW","warnings.fuel_low","WARNING");const o=typeof(i==null?void 0:i.throttle)=="number"?i.throttle:0,l=e.engines?Object.values(e.engines).map(c=>(c==null?void 0:c.fuelControl)!==!1):[];a>500&&r&&o>.2&&(Array.isArray(r.n1)?r.n1.forEach((c,u)=>{const d=Array.isArray(r.n2)?r.n2[u]:void 0;l[u]!==!1&&c<10&&(d===void 0||d<25)&&this.addWarning(`ENG_${u+1}_FAIL`,{key:"warnings.engine_fail",params:{index:u+1}},"CRITICAL",!0)}):Array.isArray(r)&&r.forEach((c,u)=>{l[u]!==!1&&c.n1<10&&(c.n2===void 0||c.n2<25)&&this.addWarning(`ENG_${u+1}_FAIL`,{key:"warnings.engine_fail",params:{index:u+1}},"CRITICAL",!0)}))}checkConfiguration(e,n,r,a,i,o,l,c){i&&(i.status==="RUNWAY"||i.status==="GRASS")&&a>.7&&(e<.1&&this.addWarning("CONFIG_FLAPS","warnings.config.flaps","WARNING",!0),r>.1&&this.addWarning("CONFIG_SPOILERS","warnings.config.spoilers","WARNING",!0),l>.1&&this.addWarning("CONFIG_BRAKES","warnings.config.brakes","WARNING",!0)),c<=50&&o>this.thresholds.tailStrikePitch&&this.addWarning("TAIL_STRIKE","warnings.tail_strike","CRITICAL",!0)}checkAutomation(e,n,r){e&&n&&typeof n.altitude=="number"&&Math.abs(r-n.altitude)}}class b2{constructor(){this.CONSTANTS={BATTERY_VOLTAGE:24,GEN_VOLTAGE:115,TR_VOLTAGE:28,BATTERY_DRAIN_RATE:.01,APU_START_TIME:25,APU_COOLDOWN_TIME:15,HYD_MAX_PRESSURE:3e3,HYD_BUILD_RATE:800,HYD_DECAY_RATE:150,BLEED_PRESSURE_IDLE:30,BLEED_PRESSURE_THRUST:45,STD_PRESSURE:29.92}}update(e,n,r){e&&(e.adirs||(e.adirs={ir1:"OFF",ir2:"OFF",ir3:"OFF",alignState:0,aligned:!1,onBat:!1}),e.ice||(e.ice={wingAntiIce:!1,eng1AntiIce:!1,eng2AntiIce:!1,probeHeat:!0}),e.signs||(e.signs={seatBelts:!0,noSmoking:!0}),e.lighting||(e.lighting={landing:!1,taxi:!1,strobe:!1,beacon:!1,nav:!1,logo:!1,wing:!1,emergencyLights:!0}),e.comms||(e.comms={vhf1:{active:"118.500",stby:"121.500"},vhf2:{active:"121.900",stby:"119.100"},hf1:{active:"8888",stby:"2992"}}),e.transponder||(e.transponder={code:"1200",mode:"STBY",ident:!1}),this.updateElectrical(e,n,r),this.updateAPU(e,n,r),this.updatePneumatics(e,n,r),this.updateHydraulics(e,n,r),this.updateFuel(e,n,r),this.updatePressurization(e,n,r),this.updateLighting(e,n,r),this.updateEngines(e,n,r),this.updateFireProtection(e,n,r),this.updateADIRS(e,n,r))}updateADIRS(e,n,r){if(!e.adirs)return;const a=e.adirs,i=e.electrical.dcVolts>20,o=(a.ir1==="NAV"||a.ir1==="ALIGN")&&(a.ir2==="NAV"||a.ir2==="ALIGN");if(o&&i){if(!a.aligned){const l=3.3333333333333335;a.alignState+=l*r,a.alignState>=100&&(a.alignState=100,a.aligned=!0)}}else!i&&o?a.onBat=!0:(a.onBat=!1,a.alignState=0,a.aligned=!1),a.ir1==="OFF"&&a.ir2==="OFF"&&(a.alignState=0,a.aligned=!1)}updateElectrical(e,n,r){const a=e.electrical;let i=!1,o=!1,l=0;Object.keys(a).forEach(y=>{if(y.match(/^gen\d+$/)){const p=parseInt(y.replace("gen",""))-1,h=a[y],w=(n.engineN2[p]||0)>25;h&&w?(o=!0,l++,a[`sourceOff${p+1}`]=!1,i=!0):a[`sourceOff${p+1}`]=!0}});const c=e.apu.running&&e.apu.n2>95;a.apuGen&&c?(o=!0,a.apuGenOff=!1,i=!0):a.apuGenOff=!0,a.battery?(i?a.batteryCharge=Math.min(100,(a.batteryCharge||100)+.1*r):a.batteryCharge=Math.max(0,(a.batteryCharge||100)-.05*r),a.dcVolts=a.batteryCharge/100*24+Math.random()*.5):a.dcVolts=0;let u=!1;(o&&a.busTie||l>0)&&(u=!0),u?(a.acVolts=115+(Math.random()*2-1),a.acFreq=400+(Math.random()*4-2),a.dcVolts=28+Math.random()*.5,a.standbyPower=!0):a.battery&&a.stbyPower?(a.acVolts=0,a.acFreq=0,a.standbyPower=!0):(a.acVolts=0,a.acFreq=0,a.standbyPower=!1);let d=0;e.fuel.leftPumps&&(d+=10),e.fuel.rightPumps&&(d+=10),e.hydraulics&&Object.values(e.hydraulics).forEach(y=>{y&&y.elecPump&&(d+=35)}),e.lighting.landing&&(d+=40),e.pressurization.packL&&(d+=20),a.acAmps=u?d:0}updateAPU(e,n,r){const a=e.apu;a.n2===void 0&&(a.n2=0),a.state===void 0&&(a.state="OFF");const i=e.electrical.battery,o=a.master,l=a.start;if(!i){a.state="OFF",a.running=!1,a.n2=0,a.egt=0;return}switch(a.state){case"OFF":a.running=!1,a.n2>0&&(a.n2-=5*r),a.egt>20&&(a.egt-=10*r),o&&(a.state="DOOR_OPEN");break;case"DOOR_OPEN":a.doorTimer||(a.doorTimer=0),a.doorTimer+=r,o?(l||a.starting)&&(a.state="CRANK"):a.state="OFF";break;case"CRANK":a.starting=!0,a.n2+=10*r,o?a.n2>=20&&(a.state="IGNITION"):a.state="OFF";break;case"IGNITION":a.n2+=15*r,a.egt+=120*r,a.egt>700&&(a.egt=700),a.n2>=95&&(a.state="RUNNING"),o||(a.state="OFF");break;case"RUNNING":{a.running=!0,a.starting=!1,a.n2=100;let c=350;e.electrical.apuGenOn&&(c+=50),e.apu.bleed&&(c+=100),a.egt=a.egt+(c-a.egt)*.1,o||(a.state="COOLDOWN");break}case"COOLDOWN":{a.running=!0,a.n2=100;let c=300;a.egt=a.egt+(c-a.egt)*.1,a.cooldownTimer||(a.cooldownTimer=0),a.cooldownTimer+=r,(a.cooldownTimer>this.CONSTANTS.APU_COOLDOWN_TIME||!e.electrical.battery)&&(a.state="OFF",a.cooldownTimer=0),o&&(a.state="RUNNING");break}}}updatePneumatics(e,n,r){const a=e.pressurization,i=e.apu;e.electrical;let o=0,l=0;const c=n.engineN2.length,u=Math.ceil(c/2);for(let w=0;w<c;w++){const C=a[`bleed${w+1}`],g=n.engineN2[w];if(C&&g>10){let m=0;g>=50?m=35+(g-50)/50*15:m=g/50*35,w<u?m>o&&(o=m):m>l&&(l=m)}}const d=i.bleed&&i.running&&i.n2>90?45:0;d>o&&(o=d);let y=0,p=0;if(a.packL&&(y+=12),a.packR&&(p+=12),e.ice&&e.ice.wingAntiIce&&(y+=4,p+=4),e.engines)for(let w=0;w<c;w++){const C=`eng${w+1}`,g=e.engines[C];g&&g.startSwitch==="GRD"&&(w<u?y+=15:p+=15)}a.isolationValve===void 0&&(a.isolationValve=!0);let h=0,v=0;if(a.isolationValve){const w=Math.max(o,l),C=y+p+2,g=Math.max(0,w-C);h=g,v=g}else h=Math.max(0,o-y),v=Math.max(0,l-p);a.ductPressL=h,a.ductPressR=v,a.packLFlow=a.packL&&a.ductPressL>15,a.packRFlow=a.packR&&a.ductPressR>15}updateHydraulics(e,n,r){const a=Object.keys(e.hydraulics),i=n.engineN2.length;a.forEach((o,l)=>{const c=e.hydraulics[o];let u=[];l<i&&u.push(l),i===4&&a.length===2&&(l===0&&(u=[0,1]),l===1&&(u=[2,3]));let d=0;if(u.forEach(w=>{const C=n.engineN2[w];if(C>0){const g=C>=40?this.CONSTANTS.HYD_MAX_PRESSURE:C/40*this.CONSTANTS.HYD_MAX_PRESSURE;g>d&&(d=g)}}),!(c.engPump&&d>0)){const w=n.engineN2.some(C=>C>40);c.engPump&&w&&(d=this.CONSTANTS.HYD_MAX_PRESSURE)}const p=e.electrical.acVolts>100,h=c.elecPump&&p?this.CONSTANTS.HYD_MAX_PRESSURE:0,v=Math.max(d,h);c.pressure<v?c.pressure+=this.CONSTANTS.HYD_BUILD_RATE*r:c.pressure>v&&(c.pressure-=this.CONSTANTS.HYD_DECAY_RATE*r),c.qty||(c.qty=100)})}updateFuel(e,n,r){const a=e.fuel;a.tanks||(a.tanks={left:5e3,right:5e3,center:2e3}),a.pressL=a.leftPumps&&e.electrical.acVolts>100&&a.tanks.left>0?35:0,a.pressR=a.rightPumps&&e.electrical.acVolts>100&&a.tanks.right>0?35:0,a.pressC=a.centerPumps&&e.electrical.acVolts>100&&a.tanks.center>0?35:0;const i=e.apu.running?.2*r:0;e.apu.running&&a.tanks.left>0&&(a.tanks.left-=i)}updatePressurization(e,n,r){const a=e.pressurization,i=a.packLFlow||a.packRFlow,o=n.altitude;if(a.targetAlt,i){let u=6e3;o<6e3&&(u=o);const d=500*r/60;a.cabinAlt<u?a.cabinAlt+=d:a.cabinAlt>u&&(a.cabinAlt-=d)}else{const u=1e3*r/60;Math.abs(a.cabinAlt-o)<u?a.cabinAlt=o:a.cabinAlt<o?a.cabinAlt+=u:a.cabinAlt-=u}const l=14.7-a.cabinAlt*3e-4,c=14.7-o*3e-4;a.diffPressure=Math.max(0,l-c)}updateLighting(e,n,r){const a=e.electrical.dcVolts>20;e.lighting.powered=a}updateEngines(e,n,r){e.engines&&Object.keys(e.engines).forEach(a=>{const i=parseInt(a.replace("eng",""))-1,o=e.engines[a],l=e.pressurization,c=e.fuel,u=Object.keys(e.engines).length,d=Math.ceil(u/2),y=i<d,p=n.altitude||0,h=n.onGround||p<2e4;c.pressC>10||(y?c.pressL>10||h&&c.tanks.left>0||c.crossfeed&&c.pressR>10:c.pressR>10||h&&c.tanks.right>0||c.crossfeed&&c.pressL>10),i<d?l.ductPressL:l.ductPressR;const v=["rookie","student"].includes(n.difficulty);["pro","devil","survival"].includes(n.difficulty),o.startSwitch==="GRD"?o.n2>50&&(o.startSwitch="OFF"):o.startSwitch==="OFF"&&v&&o.fuelControl&&o.n2<20&&o.running})}updateFireProtection(e,n,r){if(!e.fire)return;Object.keys(e.fire).forEach(o=>{if(o.match(/^eng\d+Handle$/)&&e.fire[o]){const l=o.replace("Handle",""),c=parseInt(l.replace("eng",""))-1;e.engines[l].fuelControl=!1,e.electrical[`gen${c+1}`]=!1;const u=Object.keys(e.hydraulics),d=Object.keys(e.engines).length;u.forEach((y,p)=>{let h=[];p<d&&h.push(p),d===4&&u.length===2&&(p===0&&(h=[0,1]),p===1&&(h=[2,3])),h.includes(c)&&(e.hydraulics[y].engPump=!1)})}}),e.fire.apuHandle&&(e.apu.master=!1,e.apu.bleed=!1,e.electrical.apuGen=!1);const a=50*r,i=()=>{Object.keys(e.fire).forEach(o=>{if(o.match(/^eng\d+Handle$/)&&e.fire[o]){const l=o.replace("Handle","");e.fire[l]=!1}})};e.fire.bottle1_discharge&&(e.fire.bottle1>0?(e.fire.bottle1-=a,i()):(e.fire.bottle1=0,e.fire.bottle1_discharge=!1)),e.fire.bottle2_discharge&&(e.fire.bottle2>0?(e.fire.bottle2-=a,i()):(e.fire.bottle2=0,e.fire.bottle2_discharge=!1)),e.fire.apuHandle&&(e.fire.bottle1_discharge||e.fire.bottle2_discharge)&&(e.fire.apu=!1)}}const C2=new b2;class le{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}add(e){return new le(this.x+e.x,this.y+e.y,this.z+e.z)}sub(e){return new le(this.x-e.x,this.y-e.y,this.z-e.z)}scale(e){return new le(this.x*e,this.y*e,this.z*e)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}cross(e){return new le(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){const e=this.magnitude();return e>0?this.scale(1/e):new le}set(e,n,r){return this.x=e,this.y=n,this.z=r,this}clone(){return new le(this.x,this.y,this.z)}}class pt{constructor(e=1,n=0,r=0,a=0){this.w=e,this.x=n,this.y=r,this.z=a}normalize(){const e=Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);return e>0&&(this.w/=e,this.x/=e,this.y/=e,this.z/=e),this}rotate(e){const n=new le(this.x,this.y,this.z),r=n.cross(e),a=n.cross(r);return e.add(r.scale(2*this.w)).add(a.scale(2))}toEuler(){const e=2*(this.w*this.x+this.y*this.z),n=1-2*(this.x*this.x+this.y*this.y),r=Math.atan2(e,n),a=2*(this.w*this.y-this.z*this.x);let i;Math.abs(a)>=1?i=Math.sign(a)*Math.PI/2:i=Math.asin(a);const o=2*(this.w*this.z+this.x*this.y),l=1-2*(this.y*this.y+this.z*this.z),c=Math.atan2(o,l);return{phi:r,theta:i,psi:c}}static fromEuler(e,n,r){const a=Math.cos(r*.5),i=Math.sin(r*.5),o=Math.cos(n*.5),l=Math.sin(n*.5),c=Math.cos(e*.5),u=Math.sin(e*.5);return new pt(c*o*a+u*l*i,u*o*a-c*l*i,c*l*a+u*o*i,c*o*i-u*l*a)}}const T2=6371e3;function S2(t,e,n,r){const a=T2,i=(n-t)*Math.PI/180,o=(r-e)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return a*c}function I2(t,e,n,r){const a=Math.sin((r-e)*Math.PI/180)*Math.cos(n*Math.PI/180),i=Math.cos(t*Math.PI/180)*Math.sin(n*Math.PI/180)-Math.sin(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.cos((r-e)*Math.PI/180);return(Math.atan2(a,i)*180/Math.PI+360)%360}class R2{constructor(){this.flightPlan=[],this.currentWaypointIndex=0,this._prevDistToWaypoint=1/0}updateFlightPlan(e){console.log(" Navigation Service: Updating Flight Plan",e);let n=[];if(Array.isArray(e))n=e;else if(e&&Array.isArray(e.waypoints))n=e.waypoints;else{console.warn(" Navigation Service: Invalid flight plan format"),this.flightPlan=[];return}const r=this.flightPlan&&this.flightPlan.length===n.length,a=this.currentWaypointIndex;this.flightPlan=n,r?this.currentWaypointIndex=a:(this.currentWaypointIndex=0,this._prevDistToWaypoint=1/0),this.currentWaypointIndex>=this.flightPlan.length&&(this.currentWaypointIndex=Math.max(0,this.flightPlan.length-1))}getCurrentWaypoint(){return!this.flightPlan||this.currentWaypointIndex>=this.flightPlan.length?null:this.flightPlan[this.currentWaypointIndex]}update(e,n){if(!this.flightPlan||this.flightPlan.length===0||this.currentWaypointIndex>=this.flightPlan.length)return null;const r=this.flightPlan[this.currentWaypointIndex],a=S2(e.lat,e.lon,r.latitude,r.longitude),i=I2(e.lat,e.lon,r.latitude,r.longitude),o=i*Math.PI/180,l=a>this._prevDistToWaypoint;this._prevDistToWaypoint=a;const c=a<5e3;if((a<2e3||l&&c)&&!r.isHold)return this.currentWaypointIndex++,this._prevDistToWaypoint=1/0,console.log(` Navigation Service: Reached/Passed waypoint ${r.label||this.currentWaypointIndex-1}. Sequencing to index ${this.currentWaypointIndex}`),this.currentWaypointIndex<this.flightPlan.length?this.update(e,n):null;if(n&&n.mode==="LNAV")if(r.isHold){let p=(a-3e3)*.001;p>Math.PI/2&&(p=Math.PI/2),p<-Math.PI/2&&(p=-Math.PI/2);const v=(o+Math.PI/2-p)*180/Math.PI;return n.setTargets({heading:v}),v}else return n.setTargets({heading:i}),i;return null}getState(){return{flightPlan:this.flightPlan,currentWaypointIndex:this.currentWaypointIndex,prevDistToWaypoint:this._prevDistToWaypoint}}loadState(e){e&&(e.flightPlan&&(this.flightPlan=e.flightPlan),typeof e.currentWaypointIndex=="number"&&(this.currentWaypointIndex=e.currentWaypointIndex),typeof e.prevDistToWaypoint=="number"&&(this._prevDistToWaypoint=e.prevDistToWaypoint),console.log(" Navigation Service: State Loaded",{waypoints:this.flightPlan.length,currentIndex:this.currentWaypointIndex}))}}class L2{handleTuning(e,n,r){if(!e)return null;const a=Ve.getAirportByFrequency(e);if(a){const i=a.iata||a.icao;let o=null;if(n&&n.arrival&&(n.arrival.iata===i||n.arrival.icao),n&&n.waypoints){const l=n.waypoints.find(c=>c.type==="airport"&&(c.label===a.iata||c.label===a.icao));l&&l.selectedRunway&&(o=l.selectedRunway)}if(!o&&n&&n.arrival&&(n.arrival.iata===i||n.arrival.icao===i)&&n.arrival.runways&&n.arrival.runways.length>0&&(o=n.arrival.runways[0].name),o||(a.runways&&a.runways.length>0?o=a.runways[0].name.split("/")[0].trim():a.runway?o=a.runway.split("/")[0].trim():o="09",console.log(` Radio Service: No specific runway selected for ${i}, defaulting to ${o}`)),o){let l=[];a.runways?l=a.runways.flatMap(y=>y.name.split("/").map(p=>p.trim())):a.runway?l=a.runway.split("/").map(y=>y.trim()):l=["09","27"];const c=y=>{const p=y.match(/^(\d{2})/);return p?parseInt(p[1])*10:0},u=c(o);let d=Math.abs(r-u);if(d>180&&(d=360-d),d>90){const y=l.find(p=>{const h=c(p);let v=Math.abs(r-h);return v>180&&(v=360-v),v<=90});y&&(console.log(` Radio Service: Auto-switching runway from ${o} to ${y}`),o=y)}}if(o){const l=Ve.getRunwayGeometry(i,o);if(l)return console.log(` Radio Service: ILS geometry resolved for ${i} RWY ${o}`),l}}return null}}class E2{constructor(e,n=0,r=0,a="rookie"){if(this.navService=new R2,this.radioService=new L2,this.aircraft=this.validateAndParseAircraft(e),this.CONSTANTS={G:9.80665,R_GAS:287.05,GAMMA:1.4,SEA_LEVEL_PRESSURE:101325,SEA_LEVEL_DENSITY:1.225,SEA_LEVEL_TEMP:288.15,TEMP_LAPSE_RATE:-.0065},this.state={pos:new le(0,0,-this.aircraft.gearHeight),geo:{lat:n,lon:r},vel:new le(0,0,0),quat:new pt,rates:new le(0,0,0),mass:this.aircraft.mass,fuel:typeof e.fuelWeight=="number"?e.fuelWeight:this.aircraft.maxFuelCapacity??1e4},this.payloadMass=typeof e.payloadWeight=="number"?e.payloadWeight:(this.aircraft.maxPayload||15e3)*.7,this.controls={throttle:0,engineThrottles:Array(this.aircraft.engineCount).fill(0),aileron:0,elevator:0,rudder:0,flaps:0,gear:1,brakes:1,trim:0},this.controlLag={aileron:1,elevator:1,rudder:1,gear:1},this.controlEffectiveness={aileron:1,elevator:1,rudder:1,gear:1},this.vibrationLevel=0,this.engines=Array(this.aircraft.engineCount).fill(0).map(()=>{const i=.95+Math.random()*.1;return new c2({maxThrust:this.aircraft.maxThrust,specificFuelConsumption:this.aircraft.specificFuelConsumption,responsiveness:i})}),this.crashed=!1,this.onGround=!0,this.crashReason="",this.time=0,this.runwayGeometry=null,this.groundStatus={status:"UNKNOWN",remainingLength:0},this.difficulty=a,this.airportElevation=(e.airportElevation||0)*.3048,console.log("Physics Init: Elevation Data",{inputFt:e.airportElevation,convertedM:this.airportElevation,gearHeight:this.aircraft.gearHeight}),this.terrainElevation=null,this.currentGroundZ=0,this.onGround){const i=this.aircraft.gearHeight||2;this.state.pos.z=-i}this.autopilot=new u2,this.failureSystem=new qh({difficulty:this.difficulty,engineCount:this.aircraft.engineCount}),this.warningSystem=new x2,this.sensors={pitotBlocked:!1},this.motionEnabled=!1,this.initializeSystems(this.difficulty)}setMotionEnabled(e){if(this.motionEnabled=!!e,!e&&(this.state.rates=new le(0,0,0),this.state.vel=new le(0,0,0),this.onGround)){const n=this.state.quat.toEuler();this.state.quat=pt.fromEuler(0,0,n.psi)}}initializeSystems(e){const n=e==="pro"||e==="devil"||e==="professional"||e==="survival",r=this.aircraft.engineCount||2,a={};for(let h=1;h<=r;h++)a[`eng${h}`]={startSwitch:"OFF",fuelControl:!n,n2:n?0:20,egt:n?20:400};this.engines&&this.engines.forEach((h,v)=>{n?(h.state.running=!1,h.state.n1=0,h.state.n2=0,h.state.egt=15,h.state.ff=0):(h.state.running=!0,h.state.n1=5,h.state.n2=20,h.state.egt=400,h.state.ff=.3)});const i={battery:!n,batteryCharge:100,stbyPower:!n,apuGen:!1,busTie:!0,dcVolts:n?0:28,acVolts:n?0:115,acFreq:n?0:400,acAmps:n?0:50,apuGenOff:!0};for(let h=1;h<=r;h++)i[`gen${h}`]=!n,i[`sourceOff${h}`]=n;const o={packL:!n,packR:!n,isolationValve:!0,cabinAlt:0,diffPressure:0,targetAlt:35e3,ductPressL:n?0:30,ductPressR:n?0:30,mode:"AUTO"};for(let h=1;h<=r;h++)o[`bleed${h}`]=!n;const l=this.state.fuel,c={tanks:{left:l*.3,right:l*.3,center:l*.4},leftPumps:!n,rightPumps:!n,centerPumps:!n,crossfeed:!1,dump:!1};r<=2&&(c.tanks.left=l*.45,c.tanks.right=l*.45,c.tanks.center=l*.1);const u={apu:!1,cargo:!1,apuHandle:!1,bottle1:100,bottle2:100};for(let h=1;h<=r;h++)u[`eng${h}`]=!1,u[`eng${h}Handle`]=!1;const d={},y=["A","B","C","D"],p=this.aircraft.hydraulicCount||(r>2?4:2);for(let h=0;h<p;h++){const v=h<y.length?`sys${y[h]}`:`sys${h+1}`;d[v]={pressure:n?0:3e3,engPump:!n,elecPump:!n,qty:100}}this.systems={electrical:i,fuel:c,apu:{master:!1,start:!1,running:!1,starting:!1,bleed:!1,egt:0,n2:0,state:"OFF"},hydraulics:d,transponder:{code:2e3,mode:"STBY",ident:!1},pressurization:o,oxygen:{masks:!1,crewPressure:1800,paxPressure:1500},lighting:{landing:!1,taxi:!1,nav:!n,beacon:!n,strobe:!n,logo:!1,wing:!1,powered:!n},nav:{irsL:!n,irsR:!n},engines:a,fire:u,signs:{seatBelts:!n,noSmoking:!n},wipers:{left:!1,right:!1},brakes:{parkingBrake:!0,autobrake:"OFF",temp:[20,20,20,20]},adirs:{ir1:"OFF",ir2:"OFF",ir3:"OFF",alignState:0,aligned:!1,onBat:!1},ice:{windowHeat:!n,probeHeat:!n,wingAntiIce:!1,engAntiIce:!1},flightControls:{yawDamper:!n}}}validateAndParseAircraft(e){const n=e.wingArea||125,r=e.wingSpan||35,a=n/r,i=typeof e.centerOfGravityPosition=="number"?e.centerOfGravityPosition:.15,o=typeof e.aerodynamicCenterPosition=="number"?e.aerodynamicCenterPosition:.25,l=typeof e.groundGravityArm=="number"?e.groundGravityArm:a*i,c=o-i,u=typeof e.groundLiftArm=="number"?e.groundLiftArm:a*(c!==0?c:.1);return{...e,specificFuelConsumption:function(){if(typeof e.specificFuelConsumption=="number")return e.specificFuelConsumption;const d=e.typicalFuelBurn||2.5,y=e.cruiseSpeed||450,p=e.engineCount||2,h=e.maxThrustPerEngine||12e4,v=p*h,w=d*y/3600;return v>0?w/v:15e-6}(),mass:(e.emptyWeight||4e4)+(e.fuelWeight||1e4)+(e.payloadWeight||0),wingArea:n,wingSpan:r,chord:a,groundGravityArm:l,groundLiftArm:u,maxThrust:e.maxThrustPerEngine||12e4,engineCount:e.engineCount||2,enginePositions:e.enginePositions||function(){const d=e.engineCount||2,y=e.wingSpan||35,p=[];if(d===1)p.push(new le(2,0,0));else if(d===2)p.push(new le(0,-y*.25,1)),p.push(new le(0,y*.25,1));else if(d===3)p.push(new le(0,-y*.25,1)),p.push(new le(0,y*.25,1)),p.push(new le(-15,0,-3));else if(d===4)p.push(new le(2,-y*.35,1)),p.push(new le(4,-y*.18,1.5)),p.push(new le(4,y*.18,1.5)),p.push(new le(2,y*.35,1));else for(let h=0;h<d;h++){const v=(h-(d-1)/2)*(y*.5/d);p.push(new le(0,v,1))}return p}(),Ix:e.momentOfInertiaRoll||1e6,Iy:e.momentOfInertiaPitch||2e6,Iz:e.momentOfInertiaYaw||3e6,CL0:e.basicLiftCoefficient||.2,CLa:e.liftCurveSlope||5.5,CD0:e.zeroLiftDragCoefficient||.02,K:e.inducedDragFactor||.025,Cm0:0,Cma:-1.2,Cmq:-15,Cde:-.8,Clb:-.1,Clp:-.4,Cda:.15,Cnb:.1,Cnr:-.2,Cdr:.1,gearHeight:3,gearStiffness:3e6,gearDamping:3e5,frictionCoeff:.02,brakingFriction:.8,flapProfile:e.flapProfile||{positions:[{angle:0,clIncrement:0,cdIncrement:0},{angle:35,clIncrement:.3,cdIncrement:.01}]}}}get flightPlan(){return this.navService.flightPlan}set flightPlan(e){this.navService.updateFlightPlan(e)}get currentWaypointIndex(){return this.navService.currentWaypointIndex}set currentWaypointIndex(e){this.navService.currentWaypointIndex=e}update(e,n){var f,S;if(this.crashed)return this.getOutputState();this.updateGroundStatus();const r=5,a=n/r,i=this.state.quat.rotate(this.state.vel),l=this.calculateAirspeeds().indicatedAirspeed,c=-i.z*196.85,u=this.state.quat.toEuler(),d=(u.psi*180/Math.PI+360)%360,y=(Math.atan2(i.y,i.x)*180/Math.PI+360)%360,p=this.state.vel.x,h=this.state.vel.y,v=Math.abs(p)>1?Math.atan2(h,p):0,w={airspeed:l,verticalSpeed:c,pitch:u.theta,roll:u.phi,altitude:-this.state.pos.z*3.28084,heading:d,track:y,latitude:this.state.geo.lat,longitude:this.state.geo.lon,beta:v};this.navService.update(this.state.geo,this.autopilot);const C=this.navService.getCurrentWaypoint();if(C&&(C.type==="airport"||C.type==="runway")&&C.selectedRunway){const A=((f=C.details)==null?void 0:f.iata)||((S=C.details)==null?void 0:S.icao)||C.label;if(!this.runwayGeometry||this.runwayGeometry.runwayName!==C.selectedRunway&&this.runwayGeometry.airportCode!==A){const I=Ve.getRunwayGeometry(A,C.selectedRunway);I&&this.setRunwayGeometry(I)}}const g=this.autopilot.update(w,this.controls,n);let m=e;g&&(m={...e,throttle:g.throttle,pitch:g.elevator,roll:g.aileron,trim:g.trim,yaw:g.rudder}),this.processInputs(m,n),this.failureSystem&&(this.failureSystem.update(n,this.getOutputState()),this.failureSystem.applyImpact(this)),this.updateSystems(n);for(let A=0;A<r;A++){if(this.time+=a,this.motionEnabled){const ce=this.state.quat.rotate(this.state.vel),ye=this.state.geo.lat*Math.PI/180,ee=111132.92-559.82*Math.cos(2*ye)+1.175*Math.cos(4*ye),H=111412.84*Math.cos(ye)-93.5*Math.cos(3*ye);this.state.geo.lat+=ce.x*a/ee,this.state.geo.lon+=ce.y*a/H}const I=this.calculateEnvironment(this.state.pos.z);this.updateEngines(I,a),this.systems.fuel&&this.systems.fuel.tanks&&(this.state.fuel=(this.systems.fuel.tanks.left||0)+(this.systems.fuel.tanks.right||0)+(this.systems.fuel.tanks.center||0));const R=this.aircraft.emptyWeight||4e4;this.state.mass=R+this.state.fuel+this.payloadMass;const{forces:x,moments:N,aeroForces:E,thrustForces:k,gravityForces:B,groundForces:ae,debug:V}=this.calculateAerodynamicsAndGround(I);if(A===r-1&&(this.aeroForces=E,this.thrustForces=k,this.gravityForces=B,this.groundForces=ae,this.debugData=V),this.motionEnabled?this.integrate(x,N,a):(this.state.vel.set(0,0,0),this.state.rates.set(0,0,0)),this.checkConstraints(),this.crashed)break}return this.getOutputState()}processInputs(e,n){const r=5*n;if(this.controls.throttle+=(e.throttle-this.controls.throttle)*r,e.throttles&&Array.isArray(e.throttles))for(let i=0;i<this.controls.engineThrottles.length;i++){const o=e.throttles[i]!==void 0?e.throttles[i]:e.throttle;this.controls.engineThrottles[i]+=(o-this.controls.engineThrottles[i])*r}else for(let i=0;i<this.controls.engineThrottles.length;i++)this.controls.engineThrottles[i]+=(e.throttle-this.controls.engineThrottles[i])*r;e.pitch!==void 0&&(this.controls.elevator+=(e.pitch-this.controls.elevator)*r*2),e.roll!==void 0&&(this.controls.aileron+=(e.roll-this.controls.aileron)*r*3),e.yaw!==void 0&&(this.controls.rudder+=(e.yaw-this.controls.rudder)*r*2),e.flaps!==void 0&&(this.controls.flaps=e.flaps),e.gear!==void 0&&(this.controls.gear=e.gear?1:0);const a=e.trim!==void 0?e.trim:this.controls.trim;this.controls.trim+=(a-this.controls.trim)*r,this.onGround&&this.controls.throttle<.1}updateSystems(e){const n={engineN2:this.engines.map(r=>r.state.n2||0),altitude:-this.state.pos.z*3.28084,onGround:this.onGround,airspeed:this.state.vel.magnitude()*1.94384,difficulty:this.difficulty};if(C2.update(this.systems,n,e),this.updateControlEffectiveness(e),this.systems.fuel&&this.systems.fuel.tanks){const r=Object.values(this.systems.fuel.tanks).reduce((a,i)=>a+i,0);this.state.fuel=r,this.state.mass=(this.aircraft.emptyWeight||4e4)+this.payloadMass+this.state.fuel}}updateControlEffectiveness(e){if(!this.systems.hydraulics)return;const n=Object.values(this.systems.hydraulics),r=n.length;if(r===0)return;let a=0;n.forEach((c,u)=>{c.pressure>1500&&a++});let i=.1;a>0&&(i=.5+.5*(a/r)),this.controlEffectiveness.elevator=i,this.controlEffectiveness.aileron=i,this.controlEffectiveness.rudder=i,this.controlEffectiveness.gear=i;const o=a/r;this.controlEffectiveness.spoilers=o;const l=a===r?1:1+2*(1-a/r);this.controlLag.elevator=l,this.controlLag.aileron=l,this.controlLag.rudder=l,this.controlLag.gear=l}calculateEnvironment(e){var u,d;const n=-e;let r=this.CONSTANTS.SEA_LEVEL_TEMP+this.CONSTANTS.TEMP_LAPSE_RATE*n;r<216.65&&(r=216.65);const a=this.CONSTANTS.SEA_LEVEL_PRESSURE*Math.pow(r/this.CONSTANTS.SEA_LEVEL_TEMP,-this.CONSTANTS.G/(this.CONSTANTS.TEMP_LAPSE_RATE*this.CONSTANTS.R_GAS)),i=a/(this.CONSTANTS.R_GAS*r),o=Math.sqrt(this.CONSTANTS.GAMMA*this.CONSTANTS.R_GAS*r),l=((u=this.environment)==null?void 0:u.wind)||new le(0,0,0),c=((d=this.environment)==null?void 0:d.turbulence)||0;return{density:i,pressure:a,temp:r,speedOfSound:o,wind:l,turbulence:c}}setEnvironment(e){if(!e)return;const n=(e.windSpeed||0)*.514444,r=(e.windDirection||0)*Math.PI/180,a=-n*Math.cos(r),i=-n*Math.sin(r);this.environment={wind:new le(a,i,0),turbulence:e.turbulence||0,precipitation:e.precipitation||0}}updateEngines(e,n){const r=e.speedOfSound||340,i=new pt(this.state.quat.w,-this.state.quat.x,-this.state.quat.y,-this.state.quat.z).rotate(e.wind||new le(0,0,0)),c=this.state.vel.sub(i).magnitude()/r,u=e.density/this.CONSTANTS.SEA_LEVEL_DENSITY;this.engines.forEach((d,y)=>{const p=this.controls.engineThrottles[y],h=this.systems.engines[`eng${y+1}`],v=this.systems.pressurization;if(h){const w=this.engines.length,C=Math.ceil(w/2),g=y<C,m=g?(v==null?void 0:v.ductPressL)||0:(v==null?void 0:v.ductPressR)||0,f=this.systems.fuel;let S=!1;const A=Math.max(0,(-this.state.pos.z||0)*3.28084),I=d.state.n2>65,R=(this.onGround||A<2e4)&&!I;if(f.pressC>10&&f.tanks.center>0?S=!0:g?((f.pressL>10||R)&&f.tanks.left>0||f.crossfeed&&f.pressR>10&&f.tanks.right>0)&&(S=!0):((f.pressR>10||R)&&f.tanks.right>0||f.crossfeed&&f.pressL>10&&f.tanks.left>0)&&(S=!0),d.setStartupState(h.startSwitch==="GRD",m,h.fuelControl&&S,!0),d.state.running&&d.state.fuelFlow>0){let x=[];if(f.pressC>10&&f.tanks.center>0&&x.push("center"),g?((f.pressL>10||R)&&f.tanks.left>0&&x.push("left"),f.crossfeed&&f.pressR>10&&f.tanks.right>0&&x.push("right")):((f.pressR>10||R)&&f.tanks.right>0&&x.push("right"),f.crossfeed&&f.pressL>10&&f.tanks.left>0&&x.push("left")),x.length>0){const E=d.state.fuelFlow*n/x.length;x.forEach(k=>{f.tanks[k]=Math.max(0,f.tanks[k]-E)})}}}d.update(n,p,c,-this.state.pos.z,u,e.temp),h&&(h.n1=d.state.n1,h.n2=d.state.n2,h.egt=d.state.egt,h.ff=d.state.fuelFlow)}),this.state.fuel<0&&(this.state.fuel=0,this.engines.forEach(d=>d.setFailed(!0)))}calculateAerodynamicCoefficients(e,n,r,a,i){const o=this.getFlapIncrements(),l=o.cl,c=o.cd,u=this.controls.aileron*(this.controlEffectiveness.aileron!==void 0?this.controlEffectiveness.aileron:1),d=this.controls.elevator*(this.controlEffectiveness.elevator!==void 0?this.controlEffectiveness.elevator:1),y=this.controls.rudder*(this.controlEffectiveness.rudder!==void 0?this.controlEffectiveness.rudder:1),p=this.getAirbrakeIncrements(),h=p.cl,v=p.cd,w=Math.abs(n)>.3?-.5*Math.sin((Math.abs(n)-.3)*5):0;let C=this.aircraft.CL0+this.aircraft.CLa*n+l+h+d*.3+w;const g=-this.state.pos.z,m=this.aircraft.wingSpan;let f=1;if(g<m){const j=g/m;f=16*j*j/(1+16*j*j),f<.1&&(f=.1)}const S=c,A=this.controls.gear*.015,I=Math.abs(d)*.02,R=Math.min(Math.abs(C),1.35),x=this.aircraft.K*R*R*f,N=this.aircraft.CD0+x+S+A+v+I,E=-.5*r+y*.2,k=this.aircraft.chord,B=this.aircraft.wingSpan,ae=this.aircraft.Cmq*(a.y*k)/(2*(e+.1)),V=this.controls.flaps*-.01,ce=this.aircraft.Cm0+this.aircraft.Cma*n+ae+this.aircraft.Cde*(d+this.controls.trim)+V,ye=this.aircraft.Clp*(a.x*B)/(2*(e+.1));let ee=this.aircraft.Clb*r+ye+this.aircraft.Cda*u;const H=this.aircraft.Cnr*(a.z*B)/(2*(e+.1)),_=this.aircraft.Cnb*r+H+this.aircraft.Cdr*y;if(e>5&&Math.abs(a.z)>.001){const j=a.z,F=C*j*B/(8*e);ee+=F}return{CL:C,CD:N,CY:E,Cm:ce,Cl:ee,Cn:_}}calculateAerodynamicsAndGround(e){const n=new pt(this.state.quat.w,-this.state.quat.x,-this.state.quat.y,-this.state.quat.z),r=n.rotate(e.wind||new le(0,0,0));if(e.turbulence>0){const P=e.turbulence*5;r.x+=(Math.random()-.5)*P,r.y+=(Math.random()-.5)*P,r.z+=(Math.random()-.5)*P}const a=this.state.vel.sub(r),i=a.magnitude(),o=.5*e.density*i*i;let l=0,c=0;i>1.5&&(l=Math.atan2(a.z,a.x),c=Math.asin(Math.max(-1,Math.min(1,a.y/i))));const{CL:u,CD:d,CY:y,Cm:p,Cl:h,Cn:v}=this.calculateAerodynamicCoefficients(i,l,c,this.state.rates,o),w=this.aircraft.wingArea,C=this.aircraft.wingSpan,g=this.aircraft.chord,m=o*w*u,f=o*w*d,S=o*w*y,A=Math.cos(l),I=Math.sin(l),R=-f*A+m*I;let x=S;const N=-f*I-m*A;let E=o*w*C*h,k=o*w*g*p,B=o*w*C*v;const ae=this.applyRunwayStabilizer();ae&&(x+=ae.Fy,B+=ae.Mz);let V=0,ce=0;if(this.onGround){let P=1,O=1;this.groundStatus&&this.groundStatus.status==="GRASS"&&(O=.3);const D=this.state.mass*80*this.controls.rudder*P*O;V=D,ce=this.state.mass*40*this.controls.rudder*P*O,Math.random()<.001&&console.log(`Physics: Ground Steering Active. Torque: ${D.toFixed(0)}`)}B+=V,x+=ce;let ye=new le(0,0,0),ee=new le(0,0,0);this.engines.forEach((P,O)=>{const D=P.state.thrust,G=new le(D,0,0),M=(this.aircraft.enginePositions[O]||new le(0,0,0)).cross(G);ye=ye.add(G),ee=ee.add(M)});const H=ye.x,_=new le(0,0,this.state.mass*this.CONSTANTS.G),j=n.rotate(_);let F=new le(0,0,0),z=new le(0,0,0);const ne=[{name:"nose",pos:new le(14,0,3),k:8e4,c:35e3},{name:"mainL",pos:new le(-2,-3.5,3),k:15e4,c:15e4},{name:"mainR",pos:new le(-2,3.5,3),k:15e4,c:15e4}];let oe=!1;if(ne.forEach(P=>{const O=P.pos,D=this.state.quat.rotate(O),G=this.state.pos.z+D.z;if(G>this.currentGroundZ){oe=!0;const $=G-this.currentGroundZ,M=this.state.vel.add(this.state.rates.cross(O)),de=this.state.quat.rotate(M).z;let U=-(P.k*$+P.c*de);U>0&&(U=0);const ve=this.state.mass*9.81*4;Math.abs(U)>ve&&(U=-ve);let fe=0;P.name==="nose"&&(fe=this.controls.rudder*70*Math.PI/180);const Ne=Math.cos(fe),Fe=Math.sin(fe),we=M.x*Ne+M.y*Fe,xe=-M.x*Fe+M.y*Ne;let Me=this.controls.brakes>.1&&P.name.includes("main")?this.aircraft.brakingFriction:this.aircraft.frictionCoeff,Xe=.9;if(this.environment&&this.environment.precipitation>0){const ze=Math.min(this.environment.precipitation,10)/10;Me*=1-.4*ze,Xe*=1-.4*ze}if(this.groundStatus&&this.groundStatus.status==="GRASS"&&(Me=.08,Xe=.5,this.state.vel.magnitude()>1)){const ze=(Math.random()-.5)*.2;U*=1+ze}const re=.1;let be=0,Ee=0;const K=Math.abs(U);if(Math.abs(we)<re?be=-we*K*50:be=-Math.sign(we)*K*Me,Math.abs(xe)<re){let ze=-xe*K*30;const Qe=K*Xe;Math.abs(ze)>Qe&&(ze=Math.sign(ze)*Qe),Ee=ze}else Ee=-Math.sign(xe)*K*Xe;const _e=be*Ne-Ee*Fe,Pe=be*Fe+Ee*Ne,Re=n.rotate(new le(0,0,U)),tt=new le(_e+Re.x,Pe+Re.y,Re.z);P.forceMag=U,U<0?P.forceMag=Math.abs(U):P.forceMag=0,F=F.add(tt),z=z.add(O.cross(tt))}else P.forceMag=0}),this.onGround=oe,this.onGround){const P=this.state.mass*this.CONSTANTS.G,O=this.aircraft.groundGravityArm||(this.aircraft.chord||5)*.15,D=this.aircraft.groundLiftArm||(this.aircraft.chord||5)*.2,G=-P*O,$=m*D;k+=G+$}const ie=ne[0],ue=[ne[1],ne[2]],pe=this.state.mass*9.81;if(this.onGround&&ie.forceMag<pe*.1&&ue[0].forceMag+ue[1].forceMag>pe*.5){const P=ue[0].pos.add(ue[1].pos).scale(.5),O=this.state.vel.z-this.state.rates.y*P.x,D=1e5,G=-O*D,$=-P.x*G;F.z+=G,z.y+=$}const Q=this.currentGroundZ-this.state.pos.z,Y=6.1;if(Q<Y||this.onGround){let P=Math.max(0,Math.min(1,Q/Y));this.onGround&&(P=.2),E*=P,B*=P}if(this.onGround){this.aircraft.Ix;const P=this.aircraft.Iy||2e6,O=this.aircraft.Iz||3e6,D=5;z.y-=this.state.rates.y*(P*D),z.z-=this.state.rates.z*(O*D);const $=this.state.quat.toEuler().phi,M=4e6,Z=1e6;z.x-=$*M+this.state.rates.x*Z,Math.abs(this.state.vel.z)<1&&(F.z-=this.state.vel.z*(this.state.mass*10))}const T=new le(R+H+j.x+F.x,x+j.y+F.y+ce,N+j.z+F.z),q=new le(E+z.x+ee.x,k+z.y+ee.y,B+z.z+ee.z);return{forces:T,moments:q,aeroForces:new le(R,x,N),thrustForces:new le(H,0,0),gravityForces:j,groundForces:F,debug:{alpha:l,beta:c,q:o,CL:u,CD:d,Cm:p,Cl:h,Cn:v,lift:m,drag:f,side:S,pitchMoment:k,groundMomentY:z.y,yawMoment:B,steeringMoment:V,thrustMomentYaw:ee.z,thrustMomentPitch:ee.y}}}integrate(e,n,r){const a=e.scale(1/this.state.mass).sub(this.state.rates.cross(this.state.vel));this.state.vel=this.state.vel.add(a.scale(r));const i=this.aircraft.Ix,o=this.aircraft.Iy,l=this.aircraft.Iz,c=this.state.rates.x,u=this.state.rates.y,d=this.state.rates.z,y=(n.x-(l-o)*u*d)/i,p=(n.y-(i-l)*c*d)/o,h=(n.z-(o-i)*c*u)/l;this.state.rates=this.state.rates.add(new le(y,p,h).scale(r));const v=this.state.quat.rotate(this.state.vel);this.state.pos=this.state.pos.add(v.scale(r));const w=this.state.quat,C=new pt(.5*(-w.x*c-w.y*u-w.z*d),.5*(w.w*c+w.y*d-w.z*u),.5*(w.w*u-w.x*d+w.z*c),.5*(w.w*d+w.x*u-w.y*c));this.state.quat.w+=C.w*r,this.state.quat.x+=C.x*r,this.state.quat.y+=C.y*r,this.state.quat.z+=C.z*r,this.state.quat.normalize(),this.onGround&&this.state.vel.magnitude()<.5&&this.controls.throttle<.1&&(this.state.vel=new le(0,0,0),this.state.rates=new le(0,0,0))}checkConstraints(){const e=this.currentGroundZ-this.state.pos.z;if(this.state.pos.z>this.currentGroundZ&&(!this.crashed&&this.state.vel.z>10&&(this.crashed=!0,this.crashReason="Hard Landing / Crash"),!this.crashed)){this.state.pos.z=this.currentGroundZ,this.state.vel.z>0&&(this.state.vel.z=0);const n=this.state.quat.toEuler();this.state.quat=pt.fromEuler(0,n.theta,n.psi),this.state.rates.x=0,this.onGround=!0}!this.crashed&&e<3.05&&this.groundStatus.status==="OBJECTS"&&(this.crashed=!0,this.crashReason="Collision with Ground Objects",console.log("CRASH: Collision with objects at altitude "+e.toFixed(2)+"m"))}getOutputState(){var d,y,p,h,v,w,C,g,m,f;const e=this.state.quat.toEuler(),n=-this.state.pos.z,r=n+(this.airportElevation||0),a=this.currentGroundZ-this.state.pos.z,o=-this.state.quat.rotate(this.state.vel).z,l=this.calculateAirspeeds(),c=this.getAutopilotStatus?this.getAutopilotStatus():{engaged:!1,targets:{}},u={position:{x:this.state.pos.x,y:this.state.pos.y,z:n,latitude:this.state.geo.lat,longitude:this.state.geo.lon},velocity:{u:this.state.vel.x,v:this.state.vel.y,w:this.state.vel.z},orientation:{phi:e.phi,theta:e.theta,psi:e.psi},angularRates:{p:this.state.rates.x,q:this.state.rates.y,r:this.state.rates.z},controls:{throttle:this.controls.throttle,pitch:this.controls.elevator,roll:this.controls.aileron,yaw:this.controls.rudder,trim:this.controls.trim},flaps:this.controls.flaps,gear:this.controls.gear>.5,airBrakes:this.controls.brakes,verticalSpeed:o*196.85,hasCrashed:this.crashed,crashWarning:this.crashReason,autopilot:c,autopilotTargets:c.targets,autopilotDebug:this.autopilot.debugState,engineParams:{n1:this.engines.map(S=>S.state.n1),n2:this.engines.map(S=>S.state.n2),egt:this.engines.map(S=>S.state.egt),fuelFlow:this.engines.map(S=>S.state.fuelFlow),oilPressure:this.engines.map(S=>S.state.oilPressure),vibration:this.engines.map(S=>S.state.vibration)},engineThrottles:this.engines.map(S=>S.state.throttleCommand*100),systems:this.systems,fuel:this.state.fuel,currentWaypointIndex:this.currentWaypointIndex||0,derived:{altitude_ft:r*3.28084,altitude_agl_ft:a*3.28084,terrain_elevation_ft:(this.terrainElevation||0)*3.28084,airport_elevation_ft:(this.airportElevation||0)*3.28084,airspeed:l.trueAirspeed,groundSpeed:l.groundSpeed,heading:(e.psi*180/Math.PI+360)%360},debugPhysics:{theta:e.theta,phi:e.phi,psi:e.psi,dynamicPressure_q:((d=this.debugData)==null?void 0:d.q)||0,pitchMoment_y:((y=this.debugData)==null?void 0:y.pitchMoment)||0,pitchRate_q:this.state.rates.y,altitude_z:n,altitude_amsl:r,altitude_agl:a,ground_z_ned:this.currentGroundZ,isOnGround:this.onGround,lift:((p=this.debugData)==null?void 0:p.lift)||0,pitchTorque:((h=this.debugData)==null?void 0:h.pitchMoment)||0,yawMoment_n:((v=this.debugData)==null?void 0:v.yawMoment)||0,steeringMoment_n:((w=this.debugData)==null?void 0:w.steeringMoment)||0,alpha:((C=this.debugData)==null?void 0:C.alpha)||0,beta:((g=this.debugData)==null?void 0:g.beta)||0,Cm:((m=this.debugData)==null?void 0:m.Cm)||0,CL:((f=this.debugData)==null?void 0:f.CL)||0,elevator:this.controls.elevator,trim:this.controls.trim},runwayGeometry:this.runwayGeometry,groundStatus:this.groundStatus};return this.warningSystem&&(u.activeWarnings=this.warningSystem.update(u,.016)),u}setFlaps(e){this.controls.flaps=e}setGear(e){this.controls.gear=e?1:0}setAirBrakes(e){this.controls.brakes=e}setTrim(e){this.controls.trim=e}setAutopilot(e,n){if(n&&this.autopilot.setTargets(n),typeof e=="boolean"){const r=this.state.quat.rotate(this.state.vel),a=this.calculateAirspeeds(),i=this.state.quat.toEuler(),o={airspeed:a.indicatedAirspeed,verticalSpeed:-r.z*196.85,pitch:i.theta,roll:i.phi,altitude:-this.state.pos.z*3.28084,heading:(i.psi*180/Math.PI+360)%360,throttle:this.controls.throttle};this.autopilot.setEngaged(e,o)}}performSystemAction(e,n,r){if(!this.systems[e]){console.warn(`System ${e} not found`);return}const a=i=>r!==void 0?r:typeof i=="boolean"?!i:i;if(e==="hydraulics")if(n.includes(".")){const[i,o]=n.split("."),l=this.systems.hydraulics[i];l&&Object.prototype.hasOwnProperty.call(l,o)?l[o]=a(l[o]):console.warn(`Hydraulics nested action ${n} not found`)}else n==="eng1Pump"&&this.systems.hydraulics.sysA?this.systems.hydraulics.sysA.engPump=a(this.systems.hydraulics.sysA.engPump):n==="elec1Pump"&&this.systems.hydraulics.sysA?this.systems.hydraulics.sysA.elecPump=a(this.systems.hydraulics.sysA.elecPump):n==="eng2Pump"&&this.systems.hydraulics.sysB?this.systems.hydraulics.sysB.engPump=a(this.systems.hydraulics.sysB.engPump):n==="elec2Pump"&&this.systems.hydraulics.sysB?this.systems.hydraulics.sysB.elecPump=a(this.systems.hydraulics.sysB.elecPump):console.warn(`Hydraulics action ${n} not found`);else if(e==="apu")if(n==="bleed"){if(!this.systems.apu.running)return;this.systems.apu.bleed=a(this.systems.apu.bleed)}else this.systems.apu[n]!==void 0?this.systems.apu[n]=a(this.systems.apu[n]):console.warn(`APU action ${n} not found`);else if(e==="engines"){const i=o=>{const l=["OFF","GRD","CONT","FLT"],c=l.indexOf(o);return l[(c+1)%l.length]};n==="eng1_start_toggle"?this.systems.engines.eng1.startSwitch=i(this.systems.engines.eng1.startSwitch):n==="eng2_start_toggle"?this.systems.engines.eng2.startSwitch=i(this.systems.engines.eng2.startSwitch):n==="eng3_start_toggle"&&this.systems.engines.eng3?this.systems.engines.eng3.startSwitch=i(this.systems.engines.eng3.startSwitch):n==="eng4_start_toggle"&&this.systems.engines.eng4?this.systems.engines.eng4.startSwitch=i(this.systems.engines.eng4.startSwitch):n==="eng1_fuel"?this.systems.engines.eng1.fuelControl=a(this.systems.engines.eng1.fuelControl):n==="eng2_fuel"?this.systems.engines.eng2.fuelControl=a(this.systems.engines.eng2.fuelControl):n==="eng3_fuel"&&this.systems.engines.eng3?this.systems.engines.eng3.fuelControl=a(this.systems.engines.eng3.fuelControl):n==="eng4_fuel"&&this.systems.engines.eng4&&(this.systems.engines.eng4.fuelControl=a(this.systems.engines.eng4.fuelControl))}else if(e==="fire")n==="eng1_handle"?this.systems.fire.eng1Handle=a(this.systems.fire.eng1Handle):n==="eng2_handle"?this.systems.fire.eng2Handle=a(this.systems.fire.eng2Handle):n==="apu_handle"?this.systems.fire.apuHandle=a(this.systems.fire.apuHandle):n==="eng1_bottle1"?this.systems.fire.bottle1_discharge=!0:n==="eng1_bottle2"&&(this.systems.fire.bottle2_discharge=!0);else if(e==="transponder")n==="code"?this.systems.transponder.code=r:n==="mode"?this.systems.transponder.mode=r:n==="ident"&&(this.systems.transponder.ident=r);else if(e==="comms"){if(n.startsWith("swap_")){const i=n.replace("swap_","");if(this.systems.comms[i]){const o=this.systems.comms[i].active;this.systems.comms[i].active=this.systems.comms[i].stby,this.systems.comms[i].stby=o}}else if(n.startsWith("set_stby_")){const i=n.replace("set_stby_","");this.systems.comms[i]&&(this.systems.comms[i].stby=r)}else if(n.startsWith("set_code_")){const i=n.replace("set_code_","");this.systems.comms[i]&&(this.systems.comms[i].stby=r)}}else this.systems[e][n]!==void 0?this.systems[e][n]=a(this.systems[e][n]):console.warn(`Action ${n} not found on system ${e}`);console.log(`Physics Service: System Action ${e}.${n} -> ${r===void 0?"TOGGLE":r}`)}updateSystemLogic(e,n,r){}handleRadioTuning(e,n){const a=(this.state.quat.toEuler().psi*180/Math.PI+360)%360,i=this.radioService.handleTuning(e,n||this.flightPlan,a);i&&this.setRunwayGeometry(i)}setRunwayGeometry(e){this.runwayGeometry=e,this.autopilot&&typeof this.autopilot.setRunwayGeometry=="function"&&(this.autopilot.setRunwayGeometry(e),e.ilsFrequency&&typeof this.autopilot.setNavFrequency=="function"&&(this.autopilot.setNavFrequency(e.ilsFrequency),console.log(` Physics Service: Auto-tuned NAV1 to ${e.ilsFrequency} MHz for ${e.runwayName}`))),console.log("Physics Service: Runway Geometry Set",e)}updateGroundStatus(){if(!this.runwayGeometry){this.groundStatus={status:"UNKNOWN",remainingLength:0},this.currentGroundZ=0;return}const{thresholdStart:e,heading:n,length:r,width:a}=this.runwayGeometry,i=this.state.geo.lat,o=this.state.geo.lon,l=i*Math.PI/180,c=111132.92,u=111412.84*Math.cos(l),d=i-e.latitude,y=o-e.longitude,p=d*c,h=y*u,v=n*Math.PI/180,w=Math.cos(v),C=Math.sin(v),g=p*w+h*C,m=Math.abs(p*C-h*w);let f="OBJECTS";g>=0&&g<=r&&m<=a/2?f="RUNWAY":g>=-500&&g<=r+500&&m<=a*2&&(f="GRASS");let S=0;g<0?S=r:g>r?S=0:S=r-g,this.groundStatus={status:f,remainingLength:S};let A=this.airportElevation;f!=="RUNWAY"&&f!=="GRASS"&&this.terrainElevation!==null&&(A=this.terrainElevation),this.currentGroundZ=-(A-this.airportElevation)}applyRunwayStabilizer(){if(this.difficulty==="devil"||!this.onGround||this.groundStatus.status!=="RUNWAY"||!this.runwayGeometry||!this.runwayGeometry.thresholdStart)return null;const e=this.runwayGeometry,n=this.state.geo.lat,r=this.state.geo.lon,a=e.thresholdStart.latitude,i=e.thresholdStart.longitude,o=a*Math.PI/180,l=111132.92,c=111412.84*Math.cos(o),u=(n-a)*l,d=(r-i)*c,y=e.heading*Math.PI/180,p=Math.cos(y),h=Math.sin(y),v=u*p+d*h,w=d*p-u*h,C=this.state.quat.toEuler();let m=C.psi-y;for(;m>Math.PI;)m-=2*Math.PI;for(;m<-Math.PI;)m+=2*Math.PI;if(this.difficulty==="rookie"){const f=v*p,S=v*h,A=a+f/l,I=i+S/c;return this.state.geo.lat=A,this.state.geo.lon=I,this.state.quat=pt.fromEuler(C.phi,C.theta,y),this.state.vel.y=0,this.state.rates.z=0,null}else{const f=this.state.vel.y,S=5e3,A=1e4;let I=-w*S-f*A;const R=this.state.mass*2;I>R&&(I=R),I<-R&&(I=-R);const x=5e5,N=5e5;let E=-m*x-this.state.rates.z*N;const k=5e6;return E>k&&(E=k),E<-k&&(E=-k),{Fy:I,Mz:E}}}setColdStart(){console.log(" Physics Service: Applying Cold & Dark Configuration"),this.systems.electrical={...this.systems.electrical,battery:!1,stbyPower:!1,gen1:!1,gen2:!1,apuGen:!1,busTie:!0,dcVolts:0,acVolts:0,acFreq:0,acAmps:0,sourceOff1:!0,sourceOff2:!0,apuGenOff:!0},this.systems.fuel={...this.systems.fuel,leftPumps:!1,rightPumps:!1,centerPumps:!1,crossfeed:!1,pressL:0,pressR:0,pressC:0},this.systems.apu={...this.systems.apu,master:!1,start:!1,running:!1,starting:!1,bleed:!1,egt:0,n2:0,state:"OFF"},this.systems.hydraulics.sysA.engPump=!1,this.systems.hydraulics.sysA.elecPump=!1,this.systems.hydraulics.sysB.engPump=!1,this.systems.hydraulics.sysB.elecPump=!1,this.systems.hydraulics.sysA.pressure=0,this.systems.hydraulics.sysB.pressure=0,this.systems.pressurization={...this.systems.pressurization,packL:!1,packR:!1,bleed1:!1,bleed2:!1,isolationValve:!0,ductPressL:0,ductPressR:0},this.systems.lighting={landing:!1,taxi:!1,nav:!1,beacon:!1,strobe:!1,logo:!1,wing:!1,powered:!1},this.systems.engines&&Object.keys(this.systems.engines).forEach(e=>{this.systems.engines[e].startSwitch="OFF",this.systems.engines[e].fuelControl=!1,this.systems.engines[e].n2=0,this.systems.engines[e].egt=20}),this.engines.forEach(e=>{e.state.n1=0,e.state.n2=0,e.state.egt=20,e.state.fuelFlow=0,e.state.oilPressure=0,e.state.running=!1})}setInitialConditions(e){if(e){if(e.latitude!==void 0&&(this.state.geo.lat=e.latitude),e.longitude!==void 0&&(this.state.geo.lon=e.longitude),e.orientation&&e.orientation.psi!==void 0)this.state.quat=pt.fromEuler(0,0,e.orientation.psi);else if(e.heading!==void 0){const n=e.heading*Math.PI/180;this.state.quat=pt.fromEuler(0,0,n)}if(e.difficulty?this.difficulty=e.difficulty:this.difficulty="rookie",["pro","professional","survival","devil"].includes(this.difficulty)?this.setColdStart():e.coldStart&&this.setColdStart(),e.flightPlan&&(this.flightPlan=e.flightPlan,this.currentWaypointIndex=0),e.altitude!==void 0?this.state.pos.z=-(e.altitude*.3048):e.position&&e.position.z!==void 0&&(this.state.pos.z=-e.position.z),e.throttle!==void 0&&(this.controls.throttle=e.throttle,this.controls.engineThrottles&&this.controls.engineThrottles.fill(e.throttle),this.engines.forEach(n=>n.setThrottle(e.throttle))),e.brakes!==void 0&&(this.controls.brakes=e.brakes),e.gear!==void 0&&(this.controls.gear=e.gear?1:0),this.state.vel=new le(0,0,0),this.state.rates=new le(0,0,0),e.speed!==void 0){const n=e.speed*.514444;e.heading!==void 0&&e.heading*Math.PI/180,this.state.vel.x=n}if(e.orientation&&e.orientation.psi!==void 0){const n=(e.orientation.psi*180/Math.PI+360)%360;this.autopilot.setTargets({heading:n===0?360:n})}if(this.failureSystem){const n={engineCount:this.aircraft.engineCount};e.difficulty&&(n.difficulty=e.difficulty),e.difficulty?this.failureSystem=new qh(n):this.failureSystem.reset()}}}updateAutopilotTargets(e){this.autopilot.setTargets(e)}updateFlightPlan(e){this.navService.updateFlightPlan(e)}getSerializableState(){return{timestamp:this.time,physics:{position:{x:this.state.pos.x,y:this.state.pos.y,z:this.state.pos.z},velocity:{x:this.state.vel.x,y:this.state.vel.y,z:this.state.vel.z},orientation:{w:this.state.quat.w,x:this.state.quat.x,y:this.state.quat.y,z:this.state.quat.z},rates:{x:this.state.rates.x,y:this.state.rates.y,z:this.state.rates.z},mass:this.state.mass,fuel:this.state.fuel},geo:{lat:this.state.geo.lat,lon:this.state.geo.lon},controls:this.controls,systems:this.systems,engines:this.engines.map(e=>({n1:e.state.n1,n2:e.state.n2,egt:e.state.egt,fuelFlow:e.state.fuelFlow,oilPressure:e.state.oilPressure,running:e.state.running,throttleCommand:e.state.throttleCommand,failed:e.state.failed})),autopilot:this.autopilot.getState(),navigation:this.navService.getState(),failures:this.failureSystem?this.failureSystem.getState():null,context:{airportElevation:this.airportElevation,motionEnabled:this.motionEnabled,crashed:this.crashed,crashReason:this.crashReason,onGround:this.onGround,groundStatus:this.groundStatus}}}loadFlightState(e){var a,i;if(!e)return;console.log(" Physics Service: Restoring State...",e);const n=e.physicsState&&e.physicsState.physics?e.physicsState:e;if(n.physics){const o=n.physics;o.position&&(this.state.pos=new le(o.position.x,o.position.y,o.position.z)),o.velocity&&(this.state.vel=new le(o.velocity.x,o.velocity.y,o.velocity.z)),o.orientation&&(this.state.quat=new pt(o.orientation.w,o.orientation.x,o.orientation.y,o.orientation.z)),o.rates&&(this.state.rates=new le(o.rates.x,o.rates.y,o.rates.z)),o.mass!==void 0&&(this.state.mass=o.mass),o.fuel!==void 0&&(this.state.fuel=o.fuel),n.geo&&(this.state.geo.lat=n.geo.lat,this.state.geo.lon=n.geo.lon),n.controls&&(this.controls={...this.controls,...n.controls}),n.systems&&(this.systems=JSON.parse(JSON.stringify(n.systems))),n.engines&&Array.isArray(n.engines)&&n.engines.forEach((l,c)=>{if(this.engines[c]){const u=this.engines[c];u.state.n1=l.n1,u.state.n2=l.n2,u.state.egt=l.egt,u.state.fuelFlow=l.fuelFlow,u.state.oilPressure=l.oilPressure,u.state.running=l.running,u.state.throttleCommand=l.throttleCommand,u.state.failed=l.failed}}),n.autopilot&&this.autopilot.loadState(n.autopilot),n.navigation&&this.navService.loadState(n.navigation),this.failureSystem&&n.failures&&this.failureSystem.loadState(n.failures),n.context&&(n.context.airportElevation!==void 0&&(this.airportElevation=n.context.airportElevation),n.context.motionEnabled!==void 0&&(this.motionEnabled=n.context.motionEnabled),n.context.crashed!==void 0&&(this.crashed=n.context.crashed),n.context.crashReason!==void 0&&(this.crashReason=n.context.crashReason),n.context.onGround!==void 0&&(this.onGround=n.context.onGround),n.context.groundStatus!==void 0&&(this.groundStatus=n.context.groundStatus)),n.timestamp&&(this.time=n.timestamp);return}if(e.physicsState){const o=e.physicsState;if(o.position&&(o.position.latitude!==void 0&&(this.state.geo.lat=o.position.latitude),o.position.longitude!==void 0&&(this.state.geo.lon=o.position.longitude),this.state.pos=new le(o.position.x,o.position.y,-Math.abs(o.position.z))),o.velocity&&(o.velocity.u!==void 0?this.state.vel=new le(o.velocity.u,o.velocity.v,o.velocity.w):this.state.vel=new le(o.velocity.x,o.velocity.y,o.velocity.z)),o.orientation&&(o.orientation.w!==void 0?this.state.quat=new pt(o.orientation.w,o.orientation.x,o.orientation.y,o.orientation.z):o.orientation.theta!==void 0&&(this.state.quat=pt.fromEuler(o.orientation.phi,o.orientation.theta,o.orientation.psi))),o.angularRates?this.state.rates=new le(o.angularRates.p,o.angularRates.q,o.angularRates.r):o.rates?this.state.rates=new le(o.rates.x,o.rates.y,o.rates.z):this.state.rates=new le(0,0,0),o.controls&&(this.controls={...this.controls,...o.controls},(!this.controls.engineThrottles||this.controls.engineThrottles.length!==this.aircraft.engineCount)&&(this.controls.engineThrottles=Array(this.aircraft.engineCount).fill(this.controls.throttle),o.controls.throttles&&Array.isArray(o.controls.throttles)&&o.controls.throttles.forEach((l,c)=>{c<this.controls.engineThrottles.length&&(this.controls.engineThrottles[c]=l)}))),o.engineParams&&this.engines.forEach((l,c)=>{o.engineParams.n1&&o.engineParams.n1[c]!==void 0&&(l.state.n1=o.engineParams.n1[c]),o.engineParams.n2&&o.engineParams.n2[c]!==void 0&&(l.state.n2=o.engineParams.n2[c]),o.engineParams.egt&&o.engineParams.egt[c]!==void 0&&(l.state.egt=o.engineParams.egt[c]),o.engineParams.fuelFlow&&o.engineParams.fuelFlow[c]!==void 0&&(l.state.fuelFlow=o.engineParams.fuelFlow[c]),l.running=l.state.n2>20,this.controls.engineThrottles[c]!==void 0&&l.setThrottle(this.controls.engineThrottles[c])}),o.autopilot){this.autopilot.setEngaged(o.autopilot.engaged),o.autopilot.mode&&this.autopilot.setTargets({mode:o.autopilot.mode});const l=o.autopilot.targets||e.physicsState.autopilotTargets;l&&this.autopilot.setTargets(l)}o.systems&&(this.systems={...this.systems,...o.systems}),e.flightData&&e.flightData.fuel!==void 0&&(this.state.fuel=e.flightData.fuel)}else if(e.flightData){const o=e.flightData;o.position&&(this.state.pos=new le(o.position.x,o.position.y,o.position.z));const l=(o.pitch||0)*Math.PI/180,c=(o.roll||0)*Math.PI/180,u=(o.heading||0)*Math.PI/180;this.state.quat=pt.fromEuler(c,l,u);const d=(o.airspeed||0)*.514444;this.state.vel=new le(d,0,0),this.state.rates=new le(0,0,0)}e.flightPlan&&(this.flightPlan=e.flightPlan,this.currentWaypointIndex=((a=e.flightData)==null?void 0:a.currentWaypointIndex)||0),this.crashed=!1,this.crashReason="",this.time=(i=e.flightData)!=null&&i.frame?e.flightData.frame*.016:0,this.state.pos.z>0,e.runwayGeometry&&(this.runwayGeometry=e.runwayGeometry),-this.state.pos.z<100?this.state.vel.magnitude()<40?this.onGround=!0:this.onGround=!1:this.onGround=!1,this.groundStatus={status:"UNKNOWN",remainingLength:0},console.log(" Flight state loaded. Crash state reset.")}getFlapIncrements(){const e=this.aircraft.flapProfile;if(!e||!e.positions||e.positions.length===0)return{cl:0,cd:0};let n=this.controls.flaps;const r=e.positions,i=r.length-1;n<0&&(n=0),n>i&&(n=i);const o=Math.floor(n),l=Math.min(o+1,i),c=n-o,u=r[o],d=r[l],y=u.clIncrement||0,p=u.cdIncrement||0,h=d.clIncrement||0,v=d.cdIncrement||0,w=y+(h-y)*c,C=p+(v-p)*c;return{cl:w,cd:C}}getAirbrakeIncrements(){const e=this.aircraft.airbrakeProfile,n=this.controlEffectiveness.spoilers!==void 0?this.controlEffectiveness.spoilers:1;if(e&&e.airPosition&&!e.positions){const m=this.controls.brakes;return e.hasTwoTier?m<=1?{cl:0,cd:0}:m===2?{cl:(e.airPosition.liftDecrement||0)*n,cd:(e.airPosition.dragIncrement||0)*n}:m>=3?{cl:(e.groundPosition.liftDecrement||0)*n,cd:(e.groundPosition.dragIncrement||0)*n}:{cl:0,cd:0}:this.onGround?{cl:(e.groundPosition.liftDecrement||0)*m*n,cd:(e.groundPosition.dragIncrement||0)*m*n}:{cl:(e.airPosition.liftDecrement||0)*m*n,cd:(e.airPosition.dragIncrement||0)*m*n}}if(!e||!e.positions||e.positions.length===0)return{cl:0,cd:0};let r=this.controls.brakes;const a=e.positions,o=a.length-1;r<0&&(r=0),r>o&&(r=o);const l=Math.floor(r),c=Math.min(l+1,o),u=r-l,d=a[l],y=a[c],p=d.liftDecrement||0,h=d.dragIncrement||0,v=y.liftDecrement||0,w=y.dragIncrement||0,C=(p+(v-p)*u)*n,g=(h+(w-h)*u)*n;return{cl:C,cd:g}}setDifficulty(e){this.difficulty=e,this.failureSystem&&(this.failureSystem.difficulty=e,this.failureSystem.settings=this.failureSystem.getDifficultySettings(e))}setAutopilotMode(e){this.autopilot.setTargets({mode:e})}getAutopilotStatus(){return{engaged:this.autopilot.engaged,mode:this.autopilot.mode,targets:this.autopilot.targets}}setEngineThrottle(e,n){this.controls.engineThrottles&&e>=0&&e<this.controls.engineThrottles.length&&(this.controls.engineThrottles[e]=n,this.engines[e]&&this.engines[e].setThrottle(n))}reset(){const n=-(this.aircraft.gearHeight||2);this.state.pos=new le(0,0,n),this.currentGroundZ=0,this.state.vel=new le(0,0,0),this.state.rates=new le(0,0,0),this.state.quat=new pt,this.crashed=!1,this.currentWaypointIndex=0,this.controls.throttle=0,this.controls.engineThrottles.fill(0),this.controls.aileron=0,this.controls.elevator=0,this.controls.rudder=0,this.controls.brakes=0,this.engines.forEach(r=>{r.state.n1=0,r.state.n2=0,r.state.thrust=0,r.setThrottle(0),r.setFailed(!1)}),this.sensors={pitotBlocked:!1},this.systems&&this.initializeSystems(this.difficulty),this.failureSystem&&this.failureSystem.reset()}resetFailureState(){this.controlLag={aileron:1,elevator:1,rudder:1,gear:1},this.controlEffectiveness={aileron:1,elevator:1,rudder:1,gear:1},this.vibrationLevel=0}calculateAirspeeds(){var u;const e=((u=this.environment)==null?void 0:u.wind)||new le(0,0,0),r=new pt(this.state.quat.w,-this.state.quat.x,-this.state.quat.y,-this.state.quat.z).rotate(e),i=this.state.vel.sub(r).magnitude()*1.94384,o=this.calculateEnvironment(this.state.pos.z).density,l=i*Math.sqrt(o/1.225),c=this.state.vel.magnitude()*1.94384;return{trueAirspeed:i,indicatedAirspeed:l,groundSpeed:c}}}function _2(t={},e=!0,n="realistic"){console.log(" useAircraftPhysics: HOOK CALLED",{config:t,autoStart:e,timestamp:new Date().toISOString()});const[r,a]=L.useState({altitude:0,airspeed:0,indicatedAirspeed:0,verticalSpeed:0,pitch:0,roll:0,heading:0,throttle:0,elevator:0,aileron:0,rudder:0,lift:0,drag:0,thrust:0,weight:0,cg:{x:0,y:0,z:0},flapsPosition:"up",airBrakesPosition:"up",gearPosition:"down",flapsValue:0,airBrakesValue:0,gearValue:!0,frame:0,systems:{}}),[i,o]=L.useState({isRunning:!1,lastUpdate:null,totalUpdates:0}),[l,c]=L.useState(!1),[u,d]=L.useState(null),[y,p]=L.useState(!1),h=L.useRef(null),v=L.useRef({throttle:.47,pitch:0,roll:0,yaw:0}),w=L.useRef(Date.now()),[C,g]=L.useState(1),m=L.useRef(1),f=L.useCallback(_=>{console.log(` Time Scale set to ${_}x`);const j=Math.max(1,Math.floor(_));m.current=j,g(j)},[]);L.useRef(null),console.log(" useAircraftPhysics: STATE INITIALIZED",{initialFlightData:r.verticalSpeed,physicsState:i,timestamp:new Date().toISOString()}),L.useEffect(()=>{console.log(" useAircraftPhysics: INITIALIZING PHYSICS SERVICE...");async function _(){var j,F,z,ne,oe,ie,ue,pe,Q,Y,T,q,P;try{let O;try{O=await Vp()}catch(ve){console.error(" Failed to load aircraft database:",ve),O=null}let D=null;if(O&&Array.isArray(O)&&O.length>0)if(t&&(t.aircraftModel||t.model)){const ve=t.aircraftModel||t.model;if(D=O.find(fe=>fe.model===ve)||O[0],D&&!D.maxThrustPerEngine){const fe=O.find(Ne=>Ne.model===D.model);fe&&(D={...D,...fe})}}else D=O[0];let $={...D||{name:"Boeing 737-800",mass:41410,maxThrustPerEngine:12e4,engineCount:2,emptyWeight:41410,fuelWeight:21800,payloadWeight:8e3,wingArea:124.6,liftCurveSlope:5.7,maxLiftCoefficient:1.4,dragPolar:{cd0:.02,k:.04},maxThrust:17e4,engineConfiguration:"twin"}};t&&(typeof t.fuelWeight=="number"&&!isNaN(t.fuelWeight)&&t.fuelWeight>0&&($.fuelWeight=t.fuelWeight),typeof t.payloadWeight=="number"&&!isNaN(t.payloadWeight)&&t.payloadWeight>=0&&($.payloadWeight=t.payloadWeight),typeof t.cruiseHeight=="number"&&!isNaN(t.cruiseHeight)&&t.cruiseHeight>0&&($.initialCruiseAltitudeFt=t.cruiseHeight),typeof t.windSpeedKts=="number"&&!isNaN(t.windSpeedKts)&&($.windSpeedKts=t.windSpeedKts),typeof t.maxThrustPerEngine=="number"&&!isNaN(t.maxThrustPerEngine)&&t.maxThrustPerEngine>0&&($.maxThrustPerEngine=t.maxThrustPerEngine),typeof t.airportElevation=="number"&&!isNaN(t.airportElevation)&&($.airportElevation=t.airportElevation)),console.log(" useAircraftPhysics: DEFAULT AIRCRAFT DATA:",{name:$.name||"Unknown Aircraft",mass:$.mass||0,thrust:$.maxThrustPerEngine||0});const{initialLatitude:M,initialLongitude:Z,...de}=t,U=new E2($,M,Z,t.difficulty);if(U&&typeof U.setInitialConditions=="function"){const ve=(t.initialHeading||0)*Math.PI/180;U.setInitialConditions({latitude:M,longitude:Z,orientation:{psi:ve,theta:0,phi:0},flightPlan:t.flightPlan,difficulty:t.difficulty,failureType:t.failureType});let fe=((j=t.departure)==null?void 0:j.iata)||((F=t.departure)==null?void 0:F.icao)||((ne=(z=t.flightPlan)==null?void 0:z.departure)==null?void 0:ne.iata)||((oe=t.flightPlan)==null?void 0:oe.departure),Ne=t.departureRunway||((ie=t.flightPlan)==null?void 0:ie.departureRunway);const Fe=((ue=t.arrival)==null?void 0:ue.iata)||((pe=t.arrival)==null?void 0:pe.icao)||((Y=(Q=t.flightPlan)==null?void 0:Q.arrival)==null?void 0:Y.iata)||((T=t.flightPlan)==null?void 0:T.arrival);if(fe&&Fe&&M&&Z){const we=Ve.getAirportByCode(fe),xe=Ve.getAirportByCode(Fe);if(we&&xe){const te=Math.sqrt(Math.pow(we.latitude-M,2)+Math.pow(we.longitude-Z,2));Math.sqrt(Math.pow(xe.latitude-M,2)+Math.pow(xe.longitude-Z,2))<te&&(fe=Fe,Ne=t.arrivalRunway||((q=t.flightPlan)==null?void 0:q.arrivalRunway))}}else!fe&&Fe&&(fe=Fe,Ne=t.arrivalRunway||((P=t.flightPlan)==null?void 0:P.arrivalRunway));if(!fe&&M&&Z){const we=Ve.getAirportsWithinRadius(M,Z,20);we&&we.length>0&&(we.sort((xe,te)=>{const Me=Math.pow(xe.latitude-M,2)+Math.pow(xe.longitude-Z,2),Xe=Math.pow(te.latitude-M,2)+Math.pow(te.longitude-Z,2);return Me-Xe}),fe=we[0].iata||we[0].icao,console.log(` useAircraftPhysics: Auto-detected nearest airport: ${fe}`))}if(fe){const we=Ve.getRunwayGeometry(fe,Ne);we&&U.setRunwayGeometry(we)}}if(t&&U&&U.aircraft&&(typeof t.payloadWeight=="number"&&!isNaN(t.payloadWeight)&&t.payloadWeight>=0&&(U.aircraft.payloadWeight=t.payloadWeight),typeof t.fuelWeight=="number"&&!isNaN(t.fuelWeight)&&t.fuelWeight>0&&(U.aircraft.fuelWeight=t.fuelWeight,U.state&&typeof U.state.fuel=="number"&&(U.state.fuel=t.fuelWeight)),typeof U.aircraft.emptyWeight=="number")){const ve=typeof U.aircraft.fuelWeight=="number"?U.aircraft.fuelWeight:0,fe=typeof U.aircraft.payloadWeight=="number"?U.aircraft.payloadWeight:0;U.aircraft.mass=U.aircraft.emptyWeight+ve+fe}h.current=U,c(!0)}catch(O){console.error(" useAircraftPhysics: PHYSICS SERVICE INITIALIZATION FAILED",O),console.error(" useAircraftPhysics: ERROR STACK:",O.stack),d(O.message)}}_()},[n]),L.useEffect(()=>{e&&l&&h.current&&S()},[e,l]);const S=()=>{const _=.016666666666666666,j=()=>{const F=Date.now(),z=(F-w.current)/1e3;if(h.current&&z>=_)try{A(_,F)}catch(ne){console.error(" PHYSICS LOOP: UPDATE ERROR",ne)}requestAnimationFrame(j)};requestAnimationFrame(j)},A=L.useCallback((_=1/60,j=null)=>{var F,z,ne,oe,ie,ue,pe,Q,Y,T,q;if(!l||!h.current){console.warn(" Physics update skipped - not initialized");return}try{const P=h.current,O=j||Date.now(),D=_,G=m.current,$=v.current.throttle;isNaN($)&&console.error(" Throttle is NaN in useAircraftPhysics update:",$);let M;for(let cn=0;cn<G&&(M=P.update({throttle:isNaN($)?0:$,throttles:v.current.engineThrottles,pitch:v.current.pitch,roll:v.current.roll,yaw:v.current.yaw,trim:v.current.trim||0},D),!M.hasCrashed);cn++);const de=Math.max(0,M.position.z)*3.28084,U=P.calculateAirspeeds(),ve=isNaN(U==null?void 0:U.trueAirspeed)?450:U.trueAirspeed,fe=isNaN(U==null?void 0:U.indicatedAirspeed)?280:U.indicatedAirspeed,Ne=isNaN(U==null?void 0:U.groundSpeed)?0:U.groundSpeed,Fe=M.verticalSpeed||0,we=M.autopilot||{},xe=!!we.engaged,te=we.mode||"LNAV";let Me=$;xe&&P&&P.state&&P.state.controls&&typeof P.state.controls.throttle=="number"&&(Me=P.state.controls.throttle),xe&&(v.current={...v.current,throttle:Me,engineThrottles:null}),console.log(" VERTICAL SPEED DEBUG - Full Analysis:",{physics_service_update_called:!!M,"newState.verticalSpeed":M.verticalSpeed,"newState.position.z":(F=M.position)==null?void 0:F.z,"newState.velocity.w":(z=M.velocity)==null?void 0:z.w,altitude_m:(ne=M.position)==null?void 0:ne.z,altitude_ft:de,verticalSpeed_ftmin:Fe,timestamp:new Date().toLocaleTimeString(),physics_running:l});const Xe=M.flaps!==void 0?M.flaps:0,re=M.airBrakes!==void 0?M.airBrakes:0,be=M.gear!==void 0?M.gear:!1,Ee=Xe===0?"up":"down",K=re===0?"up":"down",_e=be===!1?"up":"down",Pe=typeof M.crashWarning=="string"?M.crashWarning:"",Re=Array.isArray(M.alarms)?M.alarms:[],tt=!!M.hasCrashed,ze=M.autopilotTargets||we.targets||null,Qe={altitude:de,airspeed:ve,indicatedAirspeed:fe,groundSpeed:Ne,verticalSpeed:Fe,pitch:M.orientation.theta*180/Math.PI,roll:M.orientation.phi*180/Math.PI,heading:typeof M.heading=="number"?M.heading:(M.orientation.psi*180/Math.PI+360)%360,throttle:Me*100,engineThrottles:v.current.engineThrottles?v.current.engineThrottles.map(cn=>cn*100):[Me*100,Me*100],elevator:v.current.pitch*180/Math.PI,aileron:v.current.roll*180/Math.PI,rudder:v.current.yaw*180/Math.PI,lift:((oe=P.aeroForces)==null?void 0:oe.z)||0,drag:Math.max(0,-(((ie=P.aeroForces)==null?void 0:ie.x)||0)),thrust:((ue=P.thrustForces)==null?void 0:ue.x)||0,weight:0,position:M.position,cg:{x:M.position.x,y:M.position.y,z:M.position.z},flapsPosition:Ee,airBrakesPosition:K,gearPosition:_e,flapsValue:Xe,airBrakesValue:re,gearValue:be,trimValue:((pe=M.controls)==null?void 0:pe.trim)||0,frame:typeof M.frame=="number"?M.frame:0,engineN1:((Q=M.engineParams)==null?void 0:Q.n1)!==void 0?M.engineParams.n1:[22,22],engineN2:((Y=M.engineParams)==null?void 0:Y.n2)!==void 0?M.engineParams.n2:[45,45],engineEGT:((T=M.engineParams)==null?void 0:T.egt)!==void 0?M.engineParams.egt:[400,400],engineFuelFlow:((q=M.engineParams)==null?void 0:q.fuelFlow)!==void 0?M.engineParams.fuelFlow:[0,0],fuel:M.fuel!==void 0?M.fuel:100,currentWaypointIndex:M.currentWaypointIndex||0,hasCrashed:tt,timeToCrash:typeof M.timeToCrash=="number"?M.timeToCrash:null,crashWarning:Pe,alarms:Re,activeWarnings:M.activeWarnings||[],autopilotEngaged:xe,autopilotMode:te,autopilotTargets:ze,debugPhysics:M.debugPhysics,systems:M.systems||{}};return a(Qe),p(tt),o(M),w.current=O,M}catch(P){return console.error(" Physics update error:",P),d(P.message),null}},[l]),I=L.useCallback(_=>{if(isNaN(_)){console.error(" Attempting to set throttle to NaN:",_);return}const j=Math.max(-.7,Math.min(1,_));console.log(" useAircraftPhysics: setThrottle:",{input:_,normalized:j,percentage:(j*100).toFixed(1)+"%"}),v.current={...v.current,throttle:j,engineThrottles:null}},[]),R=L.useCallback(_=>{const j=Math.abs(_)<=1?_:_/100,F=25;v.current={...v.current,pitch:j*F*Math.PI/180}},[]),x=L.useCallback(_=>{const j=Math.abs(_)<=1?_:_/100,F=30;v.current={...v.current,roll:j*F*Math.PI/180}},[]),N=L.useCallback(_=>{v.current={...v.current,yaw:_*30*Math.PI/180}},[]),E=L.useCallback((_,j)=>{var ie,ue;const F=Math.max(-.7,Math.min(1,j));h.current&&typeof h.current.setEngineThrottle=="function"&&h.current.setEngineThrottle(_,F);const z=((ue=(ie=h.current)==null?void 0:ie.engines)==null?void 0:ue.length)||2,ne=v.current.throttle!==void 0?v.current.throttle:0,oe=Array.isArray(v.current.engineThrottles)?[...v.current.engineThrottles]:Array(z).fill(ne);if(_>=0){for(;oe.length<=_;)oe.push(ne);oe[_]=F}v.current={...v.current,engineThrottles:oe,throttle:F}},[]),k=L.useCallback(_=>{h.current&&h.current.setFlaps(_)},[]),B=L.useCallback(_=>{h.current&&h.current.setAirBrakes(_)},[]),ae=L.useCallback(_=>{h.current&&h.current.setGear(_)},[]),V=L.useCallback(_=>{h.current&&typeof h.current.setMotionEnabled=="function"&&h.current.setMotionEnabled(_)},[]),ce=L.useCallback(_=>{const z=(Math.abs(_)<=1?_:_/100)*.2;h.current&&typeof h.current.setTrim=="function"&&h.current.setTrim(z),v.current={...v.current,trim:z}},[]),ye=L.useCallback((_,j,F)=>{h.current&&typeof h.current.performSystemAction=="function"&&(h.current.performSystemAction(_,j,F),a(z=>({...z,systems:JSON.parse(JSON.stringify(h.current.systems))})))},[]),ee=L.useCallback(_=>{h.current&&h.current.updateFlightPlan(_)},[]),H=L.useCallback(()=>{h.current&&h.current.reset(),v.current={throttle:.05,engineThrottles:[.05,.05],pitch:0,roll:0,yaw:0},a({altitude:0,airspeed:0,indicatedAirspeed:0,verticalSpeed:0,pitch:0,roll:0,heading:0,throttle:5,engineThrottles:[5,5],elevator:0,aileron:0,rudder:0,lift:0,drag:0,thrust:0,weight:0,cg:{x:0,y:0,z:0},flapsPosition:"up",airBrakesPosition:"up",gearPosition:"down",flapsValue:0,airBrakesValue:0,gearValue:!0}),w.current=Date.now(),console.log(" Aircraft reset to neutral configuration")},[]);return L.useEffect(()=>{h.current&&l&&(console.log(" Initializing physics with runway configuration"),A())},[l]),{physicsState:i,flightData:r,isInitialized:l,error:u,isCrashed:y,physicsService:h.current,setThrottle:I,setEngineThrottle:E,setPitch:R,setRoll:x,setYaw:N,setFlaps:k,setAirBrakes:B,setGear:ae,setMotionEnabled:V,setTrim:ce,performSystemAction:ye,setEnvironment:L.useCallback(_=>{h.current&&typeof h.current.setEnvironment=="function"&&h.current.setEnvironment(_)},[]),updatePhysics:A,resetAircraft:H,updateFlightPlan:ee,setTimeScale:f,timeScale:C}}const k2={range:[-20,40],variationSpeed:.5,distribution:"normal"},q2={range:[0,50],variationSpeed:1,distribution:"exponential"},P2={range:[0,70],variationSpeed:1.5,distribution:"exponential"},N2={range:[0,359],variationSpeed:5,distribution:"uniform"},M2={range:[0,100],variationSpeed:2,distribution:"uniform"},F2={range:[100,2e4],variationSpeed:100,distribution:"lognormal"},j2=30,O2=.01,G2=[{name:"EQ_TROPIC",latitudeRange:[-10,10],longitudeRange:[-180,180],temperatureOffset:5,windSpeedMultiplier:1,cloudCoverOffset:30,visibilityOffset:-5e3,typicalPhenomena:"Thunderstorms, heavy rain, deep convection",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"MONSOON_ASIA",latitudeRange:[5,30],longitudeRange:[60,100],temperatureOffset:0,windSpeedMultiplier:1.2,cloudCoverOffset:40,visibilityOffset:-8e3,typicalPhenomena:"Seasonal monsoon rains, strong convection",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"SUBTROP_HIGH_N",latitudeRange:[25,35],longitudeRange:[-180,180],temperatureOffset:10,windSpeedMultiplier:.7,cloudCoverOffset:-30,visibilityOffset:2e3,typicalPhenomena:"Clear skies, gentle winds, dust storms",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"SUBTROP_HIGH_S",latitudeRange:[-35,-25],longitudeRange:[-180,180],temperatureOffset:10,windSpeedMultiplier:.7,cloudCoverOffset:-30,visibilityOffset:2e3,typicalPhenomena:"Clear skies, gentle winds, dust storms",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"MIDLAT_NA",latitudeRange:[30,60],longitudeRange:[-170,-30],temperatureOffset:0,windSpeedMultiplier:1.3,cloudCoverOffset:10,visibilityOffset:0,typicalPhenomena:"Fronts, jet stream CAT",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"MIDLAT_EUROPE",latitudeRange:[35,60],longitudeRange:[-10,40],temperatureOffset:0,windSpeedMultiplier:1.2,cloudCoverOffset:20,visibilityOffset:-3e3,typicalPhenomena:"Extratropical storms, frontal rain/snow",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"POLAR_NH",latitudeRange:[60,90],longitudeRange:[-180,180],temperatureOffset:-25,windSpeedMultiplier:1,cloudCoverOffset:10,visibilityOffset:-1e4,typicalPhenomena:"Cold stable air, snow/ice fog",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"OCEANIC_NATL",latitudeRange:[30,60],longitudeRange:[-60,0],temperatureOffset:-5,windSpeedMultiplier:1.5,cloudCoverOffset:40,visibilityOffset:-5e3,typicalPhenomena:"Long frontal cloud bands, wind shear",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"MOUNTAIN_WEST_ROCKIES",latitudeRange:[30,50],longitudeRange:[-120,-105],temperatureOffset:-10,windSpeedMultiplier:1.8,cloudCoverOffset:30,visibilityOffset:-4e3,typicalPhenomena:"Mountain waves, orographic precipitation",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"MOUNTAIN_WEST_ANDES",latitudeRange:[-50,10],longitudeRange:[-80,-65],temperatureOffset:-10,windSpeedMultiplier:1.8,cloudCoverOffset:30,visibilityOffset:-4e3,typicalPhenomena:"Mountain waves, orographic precipitation",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}},{name:"CYCLONE_ATL",latitudeRange:[10,30],longitudeRange:[-80,-20],temperatureOffset:8,windSpeedMultiplier:2.5,cloudCoverOffset:50,visibilityOffset:-15e3,typicalPhenomena:"Tropical cyclone winds/rain (seasonal)",seasonalVariations:{summer:{temperatureOffset:15,windSpeedMultiplier:.8},winter:{temperatureOffset:-10,windSpeedMultiplier:1.2},spring:{temperatureOffset:5,windSpeedMultiplier:1},autumn:{temperatureOffset:5,windSpeedMultiplier:1}}}],Lt={temperature:k2,windSpeed:q2,windGust:P2,windDirection:N2,cloudCover:M2,visibility:F2,atisUpdateIntervalMinutes:j2,extremeWeatherProbability:O2,regionalVariations:G2},zt={CLEAR:"Clear",PARTLY_CLOUDY:"Partly Cloudy",CLOUDY:"Cloudy",OVERCAST:"Overcast",FOG:"Fog",MIST:"Mist",RAIN:"Rain",SNOW:"Snow",THUNDERSTORM:"Thunderstorm",WINDY:"Windy"};function xf(t,e){const[n,r]=t;switch(e){case"uniform":return Math.random()*(r-n)+n;case"normal":let a=0,i=0;for(;a===0;)a=Math.random();for(;i===0;)i=Math.random();let o=Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*i);return o=o/6+.5,o*(r-n)+n;case"exponential":return n+Math.log(1-Math.random())*(-1/(1/(r-n)));case"lognormal":let l=0,c=0;for(;l===0;)l=Math.random();for(;c===0;)c=Math.random();let u=Math.sqrt(-2*Math.log(l))*Math.cos(2*Math.PI*c),d=Math.exp(u*.5+Math.log((r+n)/2)-.5*.5/2);return Math.max(n,Math.min(r,d));default:return Math.random()*(r-n)+n}}function bf(t,e,n,r){var i;const a=(i=r.seasonalVariations)==null?void 0:i[e];if(!a)return t;switch(n){case"temperature":return t+(a.temperatureOffset||0);case"windSpeed":case"windGust":return t*(a.windSpeedMultiplier||1);default:return t}}function Cf(t,e){const n={temperatureOffset:0,windSpeedMultiplier:1,cloudCoverOffset:0,visibilityOffset:0,typicalPhenomena:"Clear skies"};return Lt.regionalVariations.find(a=>t>=a.latitudeRange[0]&&t<a.latitudeRange[1]&&e>=a.longitudeRange[0]&&e<a.longitudeRange[1])||n}function H2(t,e,n,r){const a={},i=Cf(t,e);for(const o in Lt)if(Lt[o].range){let l=xf(Lt[o].range,Lt[o].distribution);switch(l=bf(l,n,o,i),o){case"temperature":l+=i.temperatureOffset||0;break;case"windSpeed":case"windGust":l*=i.windSpeedMultiplier||1;break;case"cloudCover":l+=i.cloudCoverOffset||0;break;case"visibility":l+=i.visibilityOffset||0;break}a[o]=parseFloat(l.toFixed(2))}return a.season=n,a.zuluTime=r,a.latitude=t,a.longitude=e,a.weatherCondition=Tf(i.typicalPhenomena),a}function D2(t,e){const n={...t};if(e<Lt.atisUpdateIntervalMinutes)return n;const r=Cf(n.latitude,n.longitude);for(const i in Lt)if(Lt[i].range&&n[i]!==void 0){const o=Lt[i],l=n[i],c=xf([-o.variationSpeed,o.variationSpeed],"uniform");let u=l+c*(e/Lt.atisUpdateIntervalMinutes);switch(u=bf(u,n.season,i,r),i){case"temperature":u+=r.temperatureOffset||0;break;case"windSpeed":case"windGust":u*=r.windSpeedMultiplier||1;break;case"cloudCover":u+=r.cloudCoverOffset||0;break;case"visibility":u+=r.visibilityOffset||0;break}u=Math.max(o.range[0],Math.min(o.range[1],u)),n[i]=parseFloat(u.toFixed(2))}Math.random()<Lt.extremeWeatherProbability*(e/Lt.atisUpdateIntervalMinutes)&&(n.weatherCondition=Tf(r.typicalPhenomena));const a=new Date(n.zuluTime);return a.setMinutes(a.getMinutes()+e),n.zuluTime=a.toISOString(),n}function Tf(t=""){const e=Object.values(zt);let n=[];return(t.includes("Thunderstorms")||t.includes("convection"))&&n.push(...Array(5).fill(zt.THUNDERSTORM)),(t.includes("rain")||t.includes("monsoon"))&&n.push(...Array(5).fill(zt.RAIN)),(t.includes("snow")||t.includes("ice fog"))&&n.push(...Array(5).fill(zt.SNOW)),(t.includes("fog")||t.includes("mist"))&&n.push(...Array(5).fill(zt.FOG)),(t.includes("dust")||t.includes("sand"))&&n.push(...Array(3).fill(zt.MIST)),(t.includes("wind")||t.includes("squalls")||t.includes("wind shear")||t.includes("cyclone"))&&n.push(...Array(5).fill(zt.WINDY)),(t.includes("Clear skies")||t.includes("gentle winds"))&&n.push(...Array(5).fill(zt.CLEAR)),(t.includes("cloud bands")||t.includes("Overcast"))&&n.push(...Array(5).fill(zt.OVERCAST)),n.length===0?n=e:(n.push(...Array(2).fill(zt.CLEAR)),n.push(...Array(2).fill(zt.PARTLY_CLOUDY)),n.push(...Array(2).fill(zt.CLOUDY))),n[Math.floor(Math.random()*n.length)]}const B2="https://api.open-meteo.com/v1/forecast";class $2{constructor(){this.cache={},this.CACHE_DURATION=15*60*1e3}async getWeather(e,n){const r=`${e.toFixed(2)},${n.toFixed(2)}`,a=Date.now();if(this.cache[r]&&a-this.cache[r].timestamp<this.CACHE_DURATION)return this.cache[r].data;try{const i=new URLSearchParams({latitude:e,longitude:n,current:["temperature_2m","relative_humidity_2m","apparent_temperature","precipitation","rain","showers","snowfall","weather_code","cloud_cover","pressure_msl","surface_pressure","wind_speed_10m","wind_direction_10m","wind_gusts_10m"].join(","),wind_speed_unit:"kn",precipitation_unit:"mm"}),o=await fetch(`${B2}?${i.toString()}`);if(!o.ok)throw new Error(`Weather API error: ${o.statusText}`);const c=(await o.json()).current,u={temperature:c.temperature_2m,humidity:c.relative_humidity_2m,pressure:c.pressure_msl,pressureInHg:c.pressure_msl*.02953,windSpeed:c.wind_speed_10m,windDirection:c.wind_direction_10m,windGust:c.wind_gusts_10m,cloudCover:c.cloud_cover,precipitation:c.precipitation,weatherCode:c.weather_code,visibility:this.estimateVisibility(c.weather_code,c.cloud_cover),turbulence:this.estimateTurbulence(c.wind_speed_10m,c.wind_gusts_10m,c.weather_code)};return this.cache[r]={timestamp:a,data:u},u}catch(i){return console.error("Failed to fetch real weather:",i),{temperature:15,humidity:50,pressure:1013.25,windSpeed:0,windDirection:0,windGust:0,cloudCover:0,precipitation:0,weatherCode:0,visibility:1e4,turbulence:0}}}estimateVisibility(e,n){return e>=45&&e<=48?500:e>=95?2e3:e>=71&&e<=77?1500:e>=61&&e<=67?4e3:e>=51&&e<=57?6e3:n>90?8e3:2e4}estimateTurbulence(e,n,r){let a=0;e>15&&(a+=.2),e>30&&(a+=.3);const i=Math.max(0,n-e);return a+=i*.05,r>=95?a+=.5:r>=80&&(a+=.3),Math.min(1,a)}generateATIS(e,n,r){const a=new Date().toISOString().substring(11,16).replace(":","")+"Z",i=`${r.windDirection.toString().padStart(3,"0")} AT ${Math.round(r.windSpeed)} KNOTS`,o=r.visibility>=1e4?"10 KILOMETERS OR MORE":`${Math.round(r.visibility)} METERS`;let l="SKY CLEAR";r.cloudCover>80?l="OVERCAST":r.cloudCover>50?l="BROKEN":r.cloudCover>20&&(l="SCATTERED");const c=Math.round(r.temperature),u=Math.round(r.temperature-(100-r.humidity)/5),d=`${c}/${u}`,y=`QNH ${Math.round(r.pressure)}`;return`${e} INFORMATION ${n} ${a}. WIND ${i}. VISIBILITY ${o}. ${l}. TEMPERATURE ${d}. ${y}. ADVISE ON INITIAL CONTACT YOU HAVE INFORMATION ${n}.`}}const U2=new $2,z2="https://api.open-elevation.com/api/v1/lookup";class W2{constructor(){this.cache=new Map,this.lastCallTime=0,this.pendingRequest=null,this.MIN_INTERVAL=1e3,this.failureCount=0,this.nextRetryTime=0,this.RETRY_DELAY=6e4,this.MAX_FAILURES=5}async getElevation(e,n){const r=`${e.toFixed(3)},${n.toFixed(3)}`;if(this.cache.has(r))return this.cache.get(r);const a=Date.now();if(a<this.nextRetryTime)return 0;if(a-this.lastCallTime<this.MIN_INTERVAL)return null;this.lastCallTime=a;try{const o=await fetch(`${z2}?locations=${e},${n}`);if(!o.ok)throw new Error("Terrain API failed");const l=await o.json();if(l.results&&l.results.length>0){const c=l.results[0].elevation;if(this.cache.set(r,c),this.cache.size>1e3){const u=this.cache.keys().next().value;this.cache.delete(u)}return this.failureCount=0,this.nextRetryTime=0,c}}catch(o){this.failureCount++,this.failureCount>=this.MAX_FAILURES?(console.warn(`Terrain API failed ${this.failureCount} times. Backing off for ${this.RETRY_DELAY/1e3}s.`),this.nextRetryTime=a+this.RETRY_DELAY,this.failureCount=0):console.warn("Terrain fetch failed:",o)}return 0}}const K2=new W2,V2=({flashActive:t,flashText:e,onAlertComplete:n})=>{const[r,a]=L.useState(!1),[i,o]=L.useState(!1);if(L.useEffect(()=>{if(t){a(!0),o(!0);const u=setTimeout(()=>{o(!1)},600),d=setTimeout(()=>{a(!1),n&&n()},1e3);return()=>{clearTimeout(u),clearTimeout(d)}}else a(!1),o(!1)},[t,n]),!r)return null;const l="crash-warning-flash",c=i?"flashBlink 0.2s 3":"none";return b.createElement("div",{className:l,style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",minWidth:"300px",height:"auto",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,fontSize:"4rem",fontWeight:"bold",color:"#ff0000",textShadow:"0 0 20px #ff0000, 0 0 40px #ff0000",padding:"30px 60px",borderRadius:"10px",border:"4px solid #ff0000",boxShadow:"0 0 50px rgba(255, 0, 0, 0.5)",animation:c,pointerEvents:"none",transition:"opacity 0.3s ease",fontFamily:"monospace",letterSpacing:"5px"}},e)},Y2=({showCrashPanel:t,resetFlight:e})=>t?b.createElement("div",{className:"crash-panel",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(139, 0, 0, 0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1001,color:"white",fontSize:"3rem",fontWeight:"bold"}},b.createElement("h1",{style:{fontSize:"5rem",marginBottom:"2rem"}},"CRASHED"),b.createElement("div",{style:{fontSize:"2rem",marginBottom:"1rem"}},"Final Score: 0"),b.createElement("div",{style:{fontSize:"1.5rem",marginBottom:"2rem"}},"You failed to maintain control of the aircraft"),b.createElement("button",{onClick:e,style:{padding:"1rem 2rem",fontSize:"1.5rem",backgroundColor:"#ff4444",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}},"Try Again")):null,J2=({controlPitch:t,controlRoll:e,flightState:n})=>{const[r,a]=L.useState(!1),[i,o]=L.useState({x:0,y:0}),l=L.useRef(null),c=50,u=L.useRef(null),d=L.useRef(0);L.useEffect(()=>{const w=()=>{l.current&&o({x:0,y:0})};return w(),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),u.current&&clearInterval(u.current)}},[]);const y=L.useCallback(()=>{if(!r||n.autopilot||n.hasCrashed)return;const w=Date.now();if(w-d.current<50)return;d.current=w;const C=i.x/c,m=-(i.y/c)*.3,f=C*.3;t(m),e(f)},[r,i.x,i.y,t,e,n.autopilot,n.hasCrashed]);L.useEffect(()=>{if(r)return y(),u.current=setInterval(y,100),()=>{u.current&&(clearInterval(u.current),u.current=null)};u.current&&(clearInterval(u.current),u.current=null)},[r,y]);const p=w=>{n.autopilot||n.hasCrashed||(w.preventDefault(),a(!0))},h=L.useCallback(w=>{if(!r||!l.current)return;const C=l.current.getBoundingClientRect(),g=C.left+C.width/2,m=C.top+C.height/2,f=w.clientX-g,S=w.clientY-m,A=Math.sqrt(f*f+S*S),I=Math.min(A,c);if(A>0){const R=I/A,x=f*R,N=S*R;o({x,y:N})}},[r]),v=L.useCallback(()=>{r&&(a(!1),o({x:0,y:0}),t(0),e(0))},[r,t,e]);return L.useEffect(()=>{if(r)return document.addEventListener("mousemove",h),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",v)}},[r,h,v]),b.createElement("div",{className:"draggable-joystick",style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",padding:"15px",borderRadius:"10px",border:"2px solid #475569",minWidth:"150px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)"}},b.createElement("h4",null,"Flight Controls"),b.createElement("div",{ref:l,className:`joystick-base ${n.autopilot||n.hasCrashed?"disabled":""}`,onMouseDown:p,style:{userSelect:"none",cursor:n.autopilot||n.hasCrashed?"not-allowed":"grab"}},b.createElement("div",{className:"joystick-handle",style:{transform:`translate(calc(-50% + ${i.x}px), calc(-50% + ${i.y}px))`,transition:r?"none":"transform 0.2s ease-out"}},"")),b.createElement("div",{className:"joystick-status"}))},X2=({controlThrust:t,flightState:e})=>{const n=Array.isArray(e==null?void 0:e.engineN1)?e.engineN1.length:Array.isArray(e==null?void 0:e.engineN2)?e.engineN2.length:2,r=Array(n).fill(.2),[a,i]=L.useState(r),[o,l]=L.useState(Array(n).fill(!1)),[c,u]=L.useState(!0),d=a.map(g=>g*100),y=b.useRef(Array(n).fill(!1));L.useEffect(()=>{if(!y.current.some(g=>g)){if(Array.isArray(e==null?void 0:e.engineThrottles)){const g=e.engineThrottles.map(m=>{const f=typeof m=="number"?m/100:0;return f<0?(f+1)*.2:f*.8+.2});g.length===n&&(i(g),l(g.map(m=>m<=.2)))}else if(typeof(e==null?void 0:e.throttle)=="number"){const g=e.throttle/100;let m;g<0?m=(g+1)*.2:m=g*.8+.2,i(Array(n).fill(m)),l(Array(n).fill(m<=.2))}}},[e==null?void 0:e.engineThrottles,e==null?void 0:e.throttle,n]);const p=g=>{const m=Math.max(0,Math.min(1,g)),f=.2;return m<=f?-1+m/f:(m-f)/(1-f)},h=L.useCallback((g,m)=>{const f=Math.max(0,Math.min(1,m));i(A=>{const I=[...A];if(I[g]=f,c)for(let R=0;R<n;R++)I[R]=f;return I}),l(A=>{const I=[...A],R=f<=.2;if(I[g]=R,c)for(let x=0;x<n;x++)I[x]=R;return I});const S=p(f);if(t&&t(g,S),c){for(let A=0;A<n;A++)if(A!==g){const I=p(f);t&&t(A,I)}}},[t,c,n]),v=(g,m)=>{y.current[g]=!0;const S=m.currentTarget.getBoundingClientRect(),A=o[g],I=x=>{const N=(x.touches?x.touches[0].clientY:x.clientY)-S.top,k=Math.max(0,Math.min(100,(1-N/S.height)*100))/100;let B=k;A?B=Math.min(.2,k):B=Math.max(.201,k),h(g,B)},R=()=>{y.current[g]=!1,window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",R)};window.addEventListener("mousemove",I),window.addEventListener("mouseup",R),window.addEventListener("touchmove",I,{passive:!0}),window.addEventListener("touchend",R),I(m)},w=g=>{const S=a[g]<=.2?.21:.19;h(g,S)},C=g=>{const m=Array.isArray(e==null?void 0:e.engineN1)?e.engineN1[g]:(e==null?void 0:e.engineN1)||22,f=Array.isArray(e==null?void 0:e.engineN2)?e.engineN2[g]:(e==null?void 0:e.engineN2)||45,S=Array.isArray(e==null?void 0:e.engineEGT)?e.engineEGT[g]:(e==null?void 0:e.engineEGT)||400,A=d[g],I=o[g];return b.createElement("div",{key:g,style:{background:"rgba(0, 0, 0, 0.3)",padding:"8px",borderRadius:"8px",border:"1px solid #475569",width:"80px"}},b.createElement("div",{style:{textAlign:"center",marginBottom:"6px",color:"#00ff00",fontFamily:"monospace",fontSize:"10px"}},`ENG ${g+1}`),b.createElement("div",{style:{position:"relative",height:"120px",width:"25px",background:"#2a2a2a",borderRadius:"12px",margin:"6px auto",border:"1px solid #555",cursor:"grab",userSelect:"none"},onMouseDown:R=>v(g,R),onTouchStart:R=>v(g,R)},b.createElement("div",{style:{position:"absolute",top:"4px",left:"4px",right:"4px",bottom:"4px",background:"linear-gradient(to top, #ff4444 0%, #ffaa00 50%, #00ff00 100%)",borderRadius:"8px",opacity:.25}}),b.createElement("div",{style:{position:"absolute",bottom:`${A}%`,left:"2px",right:"2px",height:"14px",background:"linear-gradient(to top, #ff4444, #ffaa00, #00ff00)",borderRadius:"8px",boxShadow:"0 0 4px rgba(0,255,0,0.7)"}}),b.createElement("div",{style:{position:"absolute",bottom:`${A}%`,left:"-5px",width:"35px",height:"14px",background:"#fff",border:"1px solid #000",borderRadius:"8px",transform:"translateY(50%)",fontSize:"8px",fontWeight:"bold",color:"#000",display:"flex",alignItems:"center",justifyContent:"center"}},I?"REV":"THR")),b.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"4px",marginTop:"4px"}},b.createElement("div",{style:{width:"100%",height:"14px",background:I?"#ef4444":"#10b981",color:"#fff",borderRadius:"4px",textAlign:"center",lineHeight:"14px",fontSize:"8px",cursor:"pointer"},onClick:()=>w(g)},I?"REV":"FWD")),b.createElement("div",{style:{marginTop:"6px",background:"#0a0a0a",borderRadius:"4px",border:"1px solid #333",padding:"4px"}},b.createElement("div",{style:{fontSize:"8px",color:"#888",marginBottom:"2px",textAlign:"center"}},"ENG"),b.createElement("div",{style:{fontSize:"8px",fontFamily:"monospace",textAlign:"center"}},b.createElement("div",{style:{color:"#00ff00"}},`N1: ${(m||0).toFixed(0)}%`),b.createElement("div",{style:{color:"#00ff00"}},`N2: ${(f||0).toFixed(0)}%`),b.createElement("div",{style:{color:"#ffaa00"}},`EGT: ${(S||0).toFixed(0)}C`),I&&b.createElement("div",{style:{color:"#ef4444",fontWeight:"bold"}},"REV"))))};return b.createElement("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",padding:"15px",borderRadius:"10px",border:"2px solid #475569",display:"flex",gap:"10px",alignItems:"flex-start",width:"fit-content",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)"}},b.createElement("div",{style:{display:"flex",gap:"10px"}},Array.from({length:n}).map((g,m)=>C(m))),b.createElement("div",{style:{marginLeft:"8px"}},b.createElement("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#ccc"}},b.createElement("input",{type:"checkbox",checked:c,onChange:g=>{const m=g.target.checked;if(u(m),m){const f=o[0]||!1;l(Array(n).fill(f))}}}),"Sync")))},Q2=({flightState:t,setAutopilotTargets:e,toggleAutopilot:n,setAutopilotMode:r,setAltimeter:a,frequencyContext:i})=>{const o=t!=null&&t.autopilotTargets?{ias:Number(t.autopilotTargets.ias)||Number(t.indicatedAirspeed)||0,vs:Number(t.autopilotTargets.vs)||Number(t.verticalSpeed)||0,altitude:Number(t.autopilotTargets.altitude)||Number(t.altitude)||0,heading:Number(t.autopilotTargets.heading)||Number(t.heading)||0}:{ias:Number(t.indicatedAirspeed)||0,vs:Number(t.verticalSpeed)||0,altitude:Number(t.altitude)||0,heading:Number(t.heading)||0},[l,c]=L.useState(o),u=t.autopilotMode||"LNAV";L.useEffect(()=>{t!=null&&t.autopilotTargets&&c(y=>{const p=Number(t.autopilotTargets.ias),h=Number(t.autopilotTargets.vs),v=Number(t.autopilotTargets.altitude),w=Number(t.autopilotTargets.heading),C=isNaN(w)?y.heading:(w%360+360)%360,g=!isNaN(w)&&(u==="LNAV"||y.heading===0);return{ias:!isNaN(p)&&p>0?p:y.ias,vs:isNaN(h)?y.vs:h,altitude:!isNaN(v)&&v>0?v:y.altitude,heading:g?C:y.heading}})},[t==null?void 0:t.autopilotTargets,u]);const d=(y,p)=>{const h={...l,[y]:p};c(h),e&&e(h)};return b.createElement("div",{className:"modern-autopilot-module",style:{padding:"8px",background:"rgba(15, 23, 42, 0.9)",borderRadius:"8px",border:"1px solid #334155",display:"flex",flexDirection:"column",gap:"8px",width:"fit-content"}},b.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",borderBottom:"1px solid #334155",paddingBottom:"6px"}},b.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},b.createElement("button",{style:{padding:"4px 12px",fontSize:"11px",fontWeight:"bold",borderRadius:"4px",cursor:"pointer",background:t.autopilot?"#22c55e":"#334155",color:"white",border:t.autopilot?"1px solid #4ade80":"1px solid #475569",boxShadow:t.autopilot?"0 0 10px rgba(34, 197, 94, 0.4)":"none",transition:"all 0.2s"},onClick:n,disabled:t.hasCrashed},t.autopilot?"AP ON":"AP OFF"),(()=>{var v,w,C,g;const y=((w=(v=t.autopilotDebug)==null?void 0:v.ils)==null?void 0:w.locCaptured)||((g=(C=t.autopilotDebug)==null?void 0:C.ils)==null?void 0:g.gsCaptured),p=u==="ILS"?y?"#22c55e":"#f59e0b":"#334155",h=u==="ILS"?y?"1px solid #4ade80":"1px solid #fbbf24":"1px solid #475569";return b.createElement("button",{style:{padding:"4px 8px",fontSize:"10px",fontWeight:"bold",borderRadius:"4px",cursor:"pointer",background:p,color:"white",border:h,transition:"all 0.2s",opacity:i==="TOWER"?1:.5},onClick:()=>{i==="TOWER"&&r&&r(u==="ILS"?"HDG":"ILS")},disabled:t.hasCrashed||i!=="TOWER",title:i!=="TOWER"?"Requires Tower Frequency":y?"Approach Captured":"Approach Armed"},"APP")})(),b.createElement("button",{style:{padding:"4px 8px",fontSize:"10px",fontWeight:"bold",borderRadius:"4px",cursor:"pointer",background:u==="LNAV"?"#3b82f6":"#8b5cf6",color:"white",border:"none",transition:"all 0.2s"},onClick:()=>r&&r(u==="LNAV"?"HDG":"LNAV"),disabled:t.hasCrashed},u)),b.createElement("div",{style:{fontSize:"10px",color:t.autopilot?"#22c55e":"#94a3b8",fontWeight:"bold",letterSpacing:"0.05em"}},t.autopilot?" ACTIVE":" STANDBY")),b.createElement("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start"}},b.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px",width:"70px"}},b.createElement("label",{style:{fontSize:"9px",color:"#94a3b8",fontWeight:"bold"}},"SPD (KTS)"),b.createElement("div",{style:{display:"flex",alignItems:"center",background:"#0f172a",borderRadius:"4px",padding:"2px",border:"1px solid #1e293b"}},b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("ias",Math.max(150,l.ias-5)),disabled:t.hasCrashed},"-"),b.createElement("span",{style:{flex:1,textAlign:"center",fontSize:"13px",color:"#f8fafc",fontFamily:"monospace",fontWeight:"bold"}},`${l.ias.toFixed(0)}`),b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("ias",Math.min(350,l.ias+5)),disabled:t.hasCrashed},"+"))),b.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px",width:"70px"}},b.createElement("label",{style:{fontSize:"9px",color:"#94a3b8",fontWeight:"bold"}},"HDG"),b.createElement("div",{style:{display:"flex",alignItems:"center",background:"#0f172a",borderRadius:"4px",padding:"2px",border:"1px solid #1e293b"}},b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("heading",(l.heading-5+360)%360),disabled:t.hasCrashed},"-"),b.createElement("span",{style:{flex:1,textAlign:"center",fontSize:"13px",color:u==="LNAV"?"#64748b":"#f8fafc",fontFamily:"monospace",fontWeight:"bold"}},`${l.heading.toFixed(0)}`),b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("heading",(l.heading+5)%360),disabled:t.hasCrashed},"+"))),b.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px",width:"85px"}},b.createElement("label",{style:{fontSize:"9px",color:"#94a3b8",fontWeight:"bold"}},"V/S (FPM)"),b.createElement("div",{style:{display:"flex",alignItems:"center",background:"#0f172a",borderRadius:"4px",padding:"2px",border:"1px solid #1e293b"}},b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("vs",Math.max(-4e3,l.vs-100)),disabled:t.hasCrashed},"-"),b.createElement("span",{style:{flex:1,textAlign:"center",fontSize:"13px",color:"#f8fafc",fontFamily:"monospace",fontWeight:"bold"}},`${l.vs>=0?"+":""}${l.vs.toFixed(0)}`),b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("vs",Math.min(4e3,l.vs+100)),disabled:t.hasCrashed},"+"))),b.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px",width:"80px"}},b.createElement("label",{style:{fontSize:"9px",color:"#94a3b8",fontWeight:"bold"}},"ALT (FT)"),b.createElement("div",{style:{display:"flex",alignItems:"center",background:"#0f172a",borderRadius:"4px",padding:"2px",border:"1px solid #1e293b"}},b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("altitude",Math.max(0,l.altitude-100)),disabled:t.hasCrashed},"-"),b.createElement("span",{style:{flex:1,textAlign:"center",fontSize:"13px",color:"#f8fafc",fontFamily:"monospace",fontWeight:"bold"}},`${l.altitude.toFixed(0)}`),b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>d("altitude",Math.min(45e3,l.altitude+100)),disabled:t.hasCrashed},"+"))),b.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2px",width:"70px"}},b.createElement("label",{style:{fontSize:"9px",color:"#94a3b8",fontWeight:"bold"}},"BARO (IN)"),b.createElement("div",{style:{display:"flex",alignItems:"center",background:"#0f172a",borderRadius:"4px",padding:"2px",border:"1px solid #1e293b"}},b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>a&&a(Math.max(28,(t.altimeter||29.92)-.01)),disabled:t.hasCrashed},"-"),b.createElement("span",{style:{flex:1,textAlign:"center",fontSize:"13px",color:"#38bdf8",fontFamily:"monospace",fontWeight:"bold"}},`${(t.altimeter||29.92).toFixed(2)}`),b.createElement("button",{style:{background:"none",border:"none",color:"#64748b",cursor:"pointer",padding:"0 4px",fontSize:"14px"},onClick:()=>a&&a(Math.min(31,(t.altimeter||29.92)+.01)),disabled:t.hasCrashed},"+")))))},Ph=({label:t,size:e,innerSize:n,onChange:r,sensitivity:a=1,color:i="#cbd5e1"})=>{const[o,l]=L.useState(0),[c,u]=L.useState(!1);L.useRef(0),L.useRef(0);const d=L.useRef(0),y=v=>{v.preventDefault(),u(!0),d.current=v.clientY,document.addEventListener("mousemove",p),document.addEventListener("mouseup",h),document.body.style.cursor="ns-resize"},p=v=>{const w=d.current-v.clientY,C=10;if(Math.abs(w)>=C){const g=Math.floor(Math.abs(w)/C)*Math.sign(w);r(g),l(m=>m+g*15),d.current=v.clientY}},h=()=>{u(!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h),document.body.style.cursor="default"};return b.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"}},b.createElement("div",{onMouseDown:y,style:{width:`${e}px`,height:`${e}px`,borderRadius:"50%",background:`conic-gradient(#334155 0%, ${i} 10%, #334155 20%, #334155 100%)`,transform:`rotate(${o}deg)`,cursor:"ns-resize",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.5), inset 0 2px 4px rgba(255, 255, 255, 0.1)",border:"2px solid #475569",position:"relative"}},b.createElement("div",{style:{position:"absolute",top:"0",left:"50%",width:"2px",height:"10px",background:"#f8fafc",transform:"translateX(-50%)"}})),b.createElement("span",{style:{fontSize:"9px",color:"#94a3b8",fontWeight:"bold",textTransform:"uppercase"}},t))},Nh=({flightState:t,setRadioFreq:e,flightPlan:n,radioMessages:r=[],frequencyContext:a,currentRegion:i})=>{const o=(t==null?void 0:t.radioFreq)||121.5,[l,c]=L.useState({name:"No Signal",type:"",connected:!1}),[u,d]=L.useState([]),[y,p]=L.useState([]),[h,v]=L.useState(null),[w,C]=L.useState("LOG"),g=L.useRef(null),m=L.useRef({lat:null,lon:null}),[f,S]=L.useState(!1),A=L.useRef(0);L.useEffect(()=>{r.length>A.current&&w!=="LOG"&&S(!0),A.current=r.length,w==="LOG"&&g.current&&(g.current.scrollTop=g.current.scrollHeight,S(!1))},[r,w]),L.useEffect(()=>{const E=t==null?void 0:t.latitude,k=t==null?void 0:t.longitude;if(E===void 0||k===void 0||m.current.lat!==null&&Math.sqrt(Math.pow(E-m.current.lat,2)+Math.pow(k-m.current.lon,2))<.1)return;m.current={lat:E,lon:k};const B=500,V=Ve.getAirportsWithinRadius(E,k,B).map(ce=>({...ce,distance:Ve.calculateDistance({latitude:E,longitude:k},{latitude:ce.latitude,longitude:ce.longitude})}));p(V),v({lat:E,lon:k})},[t==null?void 0:t.latitude,t==null?void 0:t.longitude]);const R=((t==null?void 0:t.altitude)||0)>5e3;L.useEffect(()=>{i&&console.log("CommunicationModule: currentRegion available:",i);const E=[];if(h||(t==null||t.latitude,t==null||t.longitude),i&&E.push({name:i.name,type:"Center",frequency:parseFloat(i.frequency),desc:i.name,distance:0}),E.push({name:"EMERGENCY",type:"GUARD",frequency:121.5,desc:"Universal Emergency",distance:-1}),!R)for(const V of y)V.frequencies&&V.frequencies.forEach(ce=>{E.push({name:V.iata,type:ce.type,frequency:ce.frequency,desc:`${V.iata} ${ce.type}`,distance:V.distance})});const k=[],B=new Set;E.sort((V,ce)=>(V.distance||99999)-(ce.distance||99999)),E.forEach(V=>{const ce=`${V.desc}-${V.frequency}`;B.has(ce)||(B.add(ce),k.push(V))});const ae=k.slice(0,10);d(V=>JSON.stringify(V)!==JSON.stringify(ae)?ae:V)},[y,n,h,i,R]),L.useEffect(()=>{let E=null;const k=u.find(B=>Math.abs(B.frequency-o)<.01);k&&(E={name:k.name,type:k.type,connected:!0}),c(E||{name:"No Signal",type:"",connected:!1})},[o,u]);const x=E=>{let k=Math.floor(o),B=o-k;k+=E,k<118&&(k=118),k>136&&(k=136),e(Math.round((k+B)*1e3)/1e3)},N=E=>{let k=o+E*.025;k=Math.round(k*1e3)/1e3,k<118&&(k=118),k>136.975&&(k=136.975),e(k)};return b.createElement("div",{className:"communication-module",style:{padding:"8px",background:"rgba(15, 23, 42, 0.9)",borderRadius:"8px",border:"1px solid #334155",display:"flex",flexDirection:"row",gap:"12px",alignItems:"center",height:"140px",flex:1}},b.createElement("div",{style:{width:"120px",flexShrink:0,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 8px",borderRight:"1px solid #334155",height:"100%",color:"#64748b"}},b.createElement("div",{style:{fontSize:"9px",fontWeight:"bold",color:"#94a3b8",display:"flex",justifyContent:"space-between",alignItems:"center"}},"ACTIVE COMM",f&&b.createElement("span",{style:{color:"#ef4444",fontSize:"8px",padding:"1px 3px",background:"rgba(239,68,68,0.1)",borderRadius:"2px"}},"NEW MSG")),b.createElement("div",{style:{fontSize:"11px",color:l.connected?"#38bdf8":"#64748b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},l.name),b.createElement("div",{style:{fontSize:"10px",marginTop:"2px",color:l.connected?"#4ade80":"#64748b"}},l.connected?`${l.type} - Connected`:"Searching...")),b.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",borderRight:"1px solid #334155",height:"100%",padding:"0",overflow:"hidden",position:"relative"}},b.createElement("div",{style:{display:"flex",borderBottom:"1px solid #334155",background:"rgba(15, 23, 42, 0.5)",height:"20px"}},["LOG","SIGNALS"].map(E=>b.createElement("button",{key:E,onClick:()=>C(E),style:{flex:1,background:w===E?"transparent":"rgba(30, 41, 59, 0.5)",border:"none",borderBottom:w===E?"2px solid #38bdf8":"none",color:w===E?"#38bdf8":"#64748b",fontSize:"9px",fontWeight:"bold",padding:"0 4px",cursor:"pointer",position:"relative"}},E,E==="LOG"&&f&&b.createElement("div",{style:{position:"absolute",top:"4px",right:"8px",width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#ef4444",boxShadow:"0 0 4px #ef4444"}})))),w==="SIGNALS"?b.createElement("div",{className:"no-scrollbar",style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"2px",padding:"4px 8px"}},u.length>0?u.map((E,k)=>b.createElement("div",{key:k,onClick:()=>e(E.frequency),style:{fontSize:"10px",color:Math.abs(E.frequency-o)<.01?"#4ade80":E.type==="Center"?"#38bdf8":"#64748b",cursor:"pointer",display:"flex",justifyContent:"space-between",padding:"2px 4px",borderRadius:"2px",backgroundColor:Math.abs(E.frequency-o)<.01?"rgba(74, 222, 128, 0.1)":"transparent",transition:"background-color 0.2s"},onMouseEnter:B=>{Math.abs(E.frequency-o)>=.01&&(B.currentTarget.style.backgroundColor="rgba(148, 163, 184, 0.1)")},onMouseLeave:B=>{Math.abs(E.frequency-o)>=.01&&(B.currentTarget.style.backgroundColor="transparent")}},b.createElement("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"}},E.desc),b.createElement("span",{style:{fontFamily:"monospace"}},E.frequency.toFixed(3)))):b.createElement("div",{style:{fontSize:"10px",color:"#475569",fontStyle:"italic",padding:"4px"}},"No signals detected")):b.createElement("div",{ref:g,className:"no-scrollbar",style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"2px",padding:"2px 4px",background:"rgba(0,0,0,0.2)"}},r.length>0?r.filter(E=>!a||E.type==="system"||!E.frequency?!0:typeof E.frequency=="number"?Math.abs(E.frequency-o)<.005:E.frequency===a).map((E,k)=>b.createElement("div",{key:k,style:{width:"100%",padding:"1px 0",color:E.sender==="ATC"?"#ffffff":E.type==="traffic"?"#facc15":"#4ade80",fontSize:"11px",fontFamily:"monospace",lineHeight:"1.2",textAlign:"left"}},b.createElement("span",{style:{fontWeight:"bold",marginRight:"6px",opacity:.8}},E.sender==="ATC"?"ATC:":E.type==="traffic"?`${E.sender}:`:">"),E.text)):b.createElement("div",{style:{fontSize:"10px",color:"#475569",fontStyle:"italic",textAlign:"center",marginTop:"4px"}},"Radio silent"))),b.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",width:"90px"}},b.createElement("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:"4px",padding:"2px 6px",fontFamily:"monospace",fontSize:"14px",color:"#38bdf8",fontWeight:"bold",letterSpacing:"1px",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.5)",minWidth:"80px",textAlign:"center"}},o.toFixed(3)),b.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"flex-end"}},b.createElement(Ph,{label:"MHz",size:24,onChange:x,color:"#94a3b8"}),b.createElement(Ph,{label:"kHz",size:18,onChange:N,color:"#cbd5e1"}))))},Z2=({flightState:t})=>{const e=t.indicatedAirspeed||0,n=t.derived&&t.derived.altitude_ft?t.derived.altitude_ft:t.altitude||0,r=t.verticalSpeed||0,a=t.heading||0,i=t.groundSpeed||0,o=t.trueAirspeed||0,l=t.pitch||0,c=t.roll||0,u=t.altimeter||29.92,d=t.localQNH||29.92,y=t.terrainElevation||0,p=n+(u-d)*1e3,h=y+(u-d)*1e3,v=t.derived&&t.derived.altitude_agl_ft?t.derived.altitude_agl_ft:n-y,w=t.visibility;let C=0;w!=null&&(w<500?C=.95-w/500*.15:w<2e3?C=.8-(w-500)/1500*.4:w<8e3&&(C=.4-(w-2e3)/6e3*.4));const g=Math.round(p/20)*20,f=(t.autopilotDebug||{}).ils||{},S=f.active||f.runway&&f.runway.length>0,A=f.locDeviationDeg||0,I=f.gsDeviationDeg||0,R=Math.max(-100,Math.min(100,-A/2.5*100)),x=Math.max(-100,Math.min(100,-I/.7*100));return b.createElement("div",{className:"civil-aviation-pose-panel"},b.createElement("h3",null,"Primary Flight Display"),b.createElement("div",{className:"pfd-compressed-3col"},b.createElement("div",{className:"ias-vertical-bar compressed"},b.createElement("div",{className:"ias-label"},"IAS"),b.createElement("div",{className:"vertical-scale-container"},b.createElement("div",{className:"vertical-scale"},Array.from({length:5},(N,E)=>{const k=E*100,B=k/400*100;return b.createElement("div",{key:`speed-${k}`,className:"scale-mark",style:{bottom:`${B}%`}},b.createElement("span",{className:"scale-value"},k))})),b.createElement("div",{className:"current-indicator ias-indicator",style:{bottom:`${Math.min(100,e/400*100)}%`}},b.createElement("div",{className:"indicator-line"}),b.createElement("span",{className:"current-value"},`${e.toFixed(0)}`)))),b.createElement("div",{className:"artificial-horizon compressed"},b.createElement("div",{className:"horizon-container",style:{transform:`rotate(${-c}deg)`}},b.createElement("div",{className:"sky",style:{transform:`translateY(${l*3}px)`,height:"300%",width:"200%",top:"-250%",left:"-50%"}}),b.createElement("div",{className:"ground",style:{transform:`translateY(${l*3}px)`,height:"300%",width:"200%",bottom:"-250%",left:"-50%"}}),C>0&&b.createElement("div",{className:"fog-overlay",style:{position:"absolute",top:"-250%",left:"-50%",width:"200%",height:"300%",backgroundColor:"#e2e8f0",opacity:C,pointerEvents:"none",zIndex:2}}),b.createElement("div",{className:"pitch-ladder"},Array.from({length:13},(N,E)=>{const k=(E-6)*10,B=k*3;return b.createElement("div",{key:`pitch-${k}`,className:`pitch-line ${k===0?"center-line":""}`,style:{top:`calc(50% + ${B}px)`}},k!==0&&b.createElement("span",{className:"pitch-value"},Math.abs(k)))})),b.createElement("div",{className:"aircraft-symbol"},b.createElement("div",{className:"wings"}),b.createElement("div",{className:"fuselage"}))),b.createElement("div",{className:"roll-indicator"},b.createElement("div",{className:"roll-triangle",style:{transform:`rotate(${-c}deg)`}}),b.createElement("div",{className:"roll-scale"},Array.from({length:5},(N,E)=>{const k=(E-2)*30;return b.createElement("div",{key:`roll-${k}`,className:`roll-mark ${k===0?"center-mark":""}`,style:{transform:`rotate(${k}deg)`}})}))),S&&b.createElement("div",{className:"ils-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:20}},b.createElement("div",{className:"loc-scale",style:{position:"absolute",bottom:"15%",left:"50%",transform:"translateX(-50%)",width:"60%",height:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"}},[-2,-1,0,1,2].map(N=>b.createElement("div",{key:N,style:{width:N===0?"6px":"4px",height:N===0?"6px":"4px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.6)",border:N===0?"1px solid black":"none"}})),b.createElement("div",{className:"loc-diamond",style:{position:"absolute",left:`${50+R*.5}%`,transform:"translate(-50%, -50%) rotate(45deg)",width:"12px",height:"12px",backgroundColor:"#ff00ff",border:"1px solid white",boxShadow:"0 0 4px black"}})),b.createElement("div",{className:"gs-scale",style:{position:"absolute",right:"10%",top:"50%",transform:"translateY(-50%)",height:"60%",width:"20px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"}},[2,1,0,-1,-2].map(N=>b.createElement("div",{key:N,style:{width:N===0?"6px":"4px",height:N===0?"6px":"4px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.6)",border:N===0?"1px solid black":"none"}})),b.createElement("div",{className:"gs-diamond",style:{position:"absolute",top:`${50-x*.5}%`,transform:"translate(-50%, -50%) rotate(45deg)",width:"12px",height:"12px",backgroundColor:"#ff00ff",border:"1px solid white",boxShadow:"0 0 4px black"}})))),b.createElement("div",{className:"alt-vertical-bar compressed"},b.createElement("div",{className:"alt-label"},"ALT"),b.createElement("div",{className:"vertical-scale-container"},b.createElement("div",{className:"vertical-scale"},Array.from({length:5},(N,E)=>{const k=E*1e4,B=k/45e3*100;return b.createElement("div",{key:`alt-${k}`,className:"scale-mark",style:{bottom:`${B}%`}},b.createElement("span",{className:"scale-value"},k/1e3))})),b.createElement("div",{className:"terrain-mark",style:{position:"absolute",bottom:`${Math.min(100,Math.max(0,h/45e3*100))}%`,left:0,width:"100%",height:"2px",backgroundColor:"red",zIndex:5}}),b.createElement("div",{className:"current-indicator alt-indicator",style:{bottom:`${Math.min(100,p/45e3*100)}%`}},b.createElement("div",{className:"indicator-line"}),b.createElement("span",{className:"current-value"},`${g}`)),v<2500&&b.createElement("div",{style:{position:"absolute",bottom:"5px",right:"5px",color:v<1e3?"red":"#fbbf24",fontSize:"10px",fontWeight:"bold",textAlign:"right",zIndex:10}},`${Math.max(0,v).toFixed(0)}ft above terrain`)))),b.createElement("div",{className:"pfd-bottom-info compressed"},b.createElement("div",{className:"vs-display"},b.createElement("span",{className:"label"},"VS"),b.createElement("span",{className:`value ${r>0?"climbing":r<0?"descending":"level"}`},`${r>=0?"+":""}${r.toFixed(0)}`)),b.createElement("div",{className:"heading-display"},b.createElement("span",{className:"label"},"HDG"),b.createElement("span",{className:"value"},`${a.toFixed(0)}`)),b.createElement("div",{className:"gs-display"},b.createElement("span",{className:"label"},"GS"),b.createElement("span",{className:"value"},`${i.toFixed(0)}`)),b.createElement("div",{className:"tas-display"},b.createElement("span",{className:"label"},"TAS"),b.createElement("span",{className:"value"},`${o.toFixed(0)}`))))},ew=({flightState:t,selectedArrival:e,flightPlan:n,npcs:r=[]})=>{const a=L.useRef(null),i=L.useRef(0),[o,l]=L.useState(0),[c,u]=L.useState(40),[d,y]=L.useState([]),p=(t==null?void 0:t.groundSpeed)||0,h=(t==null?void 0:t.trueAirspeed)||0,v=(t==null?void 0:t.heading)||0,w=(t==null?void 0:t.altitude)||0,C=(n==null?void 0:n.waypoints)||[],[g,m]=L.useState("N/A"),[f,S]=L.useState(0),A=[5,10,20,40,80,160,320,640],I=()=>{const x=(A.indexOf(c)+1)%A.length;u(A[x])};return L.useEffect(()=>{if(!(t!=null&&t.latitude)||!(t!=null&&t.longitude))return;const R=Ve.getAirportsWithinRadius(t.latitude,t.longitude,Math.max(c,20));y(R)},[t==null?void 0:t.latitude,t==null?void 0:t.longitude,c]),L.useEffect(()=>{if(!(t!=null&&t.latitude)||!(t!=null&&t.longitude))return;const R=Date.now();if(R-i.current>1e3){const x=Math.min(c,80);Bn.update(t.latitude,t.longitude,x),i.current=R}},[t==null?void 0:t.latitude,t==null?void 0:t.longitude,c]),L.useEffect(()=>{if(t&&e){const R=t.latitude,x=t.longitude,N=e.latitude,E=e.longitude;if(R!==void 0&&x!==void 0&&N!==void 0&&E!==void 0){const k=jt(R,x,N,E);l(k)}}if(t&&C.length>0){const R=t.latitude,x=t.longitude;if(R!==void 0&&x!==void 0){let N=null,E=1/0;if(typeof t.currentWaypointIndex=="number"&&t.currentWaypointIndex>=0&&t.currentWaypointIndex<C.length)N=C[t.currentWaypointIndex],E=jt(R,x,N.latitude,N.longitude);else{let k=1/0;for(let B=0;B<C.length;B++){const ae=C[B],V=jt(R,x,ae.latitude,ae.longitude);V<k&&(k=V,N=ae,E=V)}}N&&(m(N.label||N.name||"WPT"),S(E))}}},[t,e,C]),L.useEffect(()=>{const R=a.current;if(!R)return;const x=R.getContext("2d");R.width=R.clientWidth,R.height=R.clientHeight;const N=R.width,E=N/2,k=N/2-10,B=ee=>ee*Math.PI/180,ae=ee=>ee*180/Math.PI,V=(ee,H,_,j)=>{const F=B(ee),z=B(_),ne=B(j-H),oe=Math.sin(ne)*Math.cos(z),ie=Math.cos(F)*Math.sin(z)-Math.sin(F)*Math.cos(z)*Math.cos(ne);return(ae(Math.atan2(oe,ie))+360)%360},ce=ee=>{const H=w-ee;return H>5e3?null:ee>w?"rgba(255, 0, 0, 0.8)":H<500?"rgba(255, 0, 0, 0.6)":H<1e3?"rgba(255, 255, 0, 0.6)":H<2e3?"rgba(0, 255, 0, 0.4)":`rgba(0, 100, 0, ${.4*(1-(H-2e3)/3e3)})`};(()=>{if(x.clearRect(0,0,N,N),x.save(),x.translate(E,E),x.rotate(-v*Math.PI/180),t!=null&&t.latitude&&(t!=null&&t.longitude)){const _=k/c,j=Bn.GRID_SIZE,F=j*60,z=Math.ceil(F*_),ne=Math.min(c,160),oe=c>40?Math.ceil(c/40):1,ie=ne/60,ue=t.latitude-ie,pe=t.latitude+ie,Q=t.longitude-ie,Y=t.longitude+ie,T=Bn.getGridIndices(ue,Q),q=Bn.getGridIndices(pe,Y);for(let P=T.latIdx;P<=q.latIdx;P+=oe)for(let O=T.lonIdx;O<=q.lonIdx;O+=oe){const D=(P+.5)*j,G=(O+.5)*j,$=Bn.getTerrainHeight(D,G);if($!==null){const M=ce($);if(M){const Z=(D-t.latitude)*60,U=(G-t.longitude)*60*Math.cos(t.latitude*Math.PI/180)*_,ve=-Z*_;if(U*U+ve*ve<k*k){x.fillStyle=M;const fe=z*oe+(oe>1?.5:0);x.fillRect(U-fe/2,ve-fe/2,fe,fe)}}}}}r&&r.length>0&&r.forEach(_=>{const j=_.latitude-t.latitude,F=_.longitude-t.longitude,z=j*60,ne=F*60*Math.cos(t.latitude*Math.PI/180),oe=k/c,ie=ne*oe,ue=-z*oe,pe=Math.sqrt(z*z+ne*ne),Q=Math.abs(_.altitude-w);if(pe>c*1.2)return;const Y=(t.trueAirspeed||0)+(_.speed||0),T=Y>0?pe/(Y/3600):999,q=w>3e3&&Q<1e3&&T*3600<20;let P="#38bdf8";q?P="#ff0000":Q<1e3?P="#fbbf24":pe<10&&(P="#facc15"),x.save(),x.translate(ie,ue),x.rotate(_.heading*Math.PI/180),x.beginPath(),x.moveTo(0,-6),x.lineTo(4,4),x.lineTo(-4,4),x.closePath(),x.fillStyle=P,x.fill(),x.rotate(-_.heading*Math.PI/180),x.rotate(v*Math.PI/180),x.fillStyle=P,x.font="10px monospace",x.fillText(`FL ${Math.round(_.altitude/100)}`,8,3),x.restore()}),x.beginPath(),x.arc(0,0,k,0,Math.PI*2),x.fillStyle="rgba(0, 20, 0, 0.2)",x.fill(),x.strokeStyle="#00ff00",x.lineWidth=2,x.stroke(),x.strokeStyle="#00aa00",x.lineWidth=1;const ee=4;for(let _=1;_<=ee;_++)x.beginPath(),x.arc(0,0,k*_/ee,0,Math.PI*2),x.stroke();x.fillStyle="#00ff00",x.font="12px Arial",x.textAlign="center",x.textBaseline="middle";for(let _=0;_<360;_+=10){const j=_*Math.PI/180,F=(k+5)*Math.sin(j),z=-(k+5)*Math.cos(j);if(x.save(),x.rotate(j),x.beginPath(),x.moveTo(0,-k),x.lineTo(0,-k-(_%90===0?10:5)),x.stroke(),x.restore(),_%90===0){let ne="";_===0?ne="N":_===90?ne="E":_===180?ne="S":_===270&&(ne="W"),x.save(),x.translate(F,z),x.rotate(-j),x.rotate(v*Math.PI/180),x.fillText(ne,0,0),x.restore()}else if(_%30===0){const ne=_.toString();x.save(),x.translate(F,z),x.rotate(-j),x.rotate(v*Math.PI/180),x.fillText(ne,0,0),x.restore()}}let H=null;if(d.length>0&&typeof(t==null?void 0:t.latitude)=="number"){let _=null,j=1/0;if(d.forEach(F=>{const z=jt(t.latitude,t.longitude,F.latitude,F.longitude);if(z<c*1.2){const oe=V(t.latitude,t.longitude,F.latitude,F.longitude)*Math.PI/180,ie=Math.min(c*2,z)/c*k,ue=ie*Math.sin(oe),pe=-ie*Math.cos(oe);x.beginPath(),x.arc(ue,pe,4,0,Math.PI*2),x.strokeStyle="#00ffff",x.lineWidth=1,x.stroke(),x.save(),x.translate(ue,pe),x.rotate(v*Math.PI/180),x.fillStyle="#00ffff",x.font="9px monospace",x.textAlign="center",x.fillText(F.iata||F.icao,0,10),x.restore()}let ne=[];F.runways&&Array.isArray(F.runways)?ne=F.runways:F.runway?ne=[{name:F.runway,length:F.runwayLength}]:ne=[{name:"09/27",length:8e3}],ne.forEach(oe=>{const ie=Ve.getRunwayGeometry(F.iata||F.icao,oe.name);if(ie){const ue=(ie.thresholdStart.latitude+ie.thresholdEnd.latitude)/2,pe=(ie.thresholdStart.longitude+ie.thresholdEnd.longitude)/2,Q=jt(t.latitude,t.longitude,ue,pe);if(Q<j&&(j=Q,_={...ie,midLat:ue,midLon:pe}),z<c*1.2){x.strokeStyle="#d8b4fe",x.lineWidth=2;const Y=V(t.latitude,t.longitude,ie.thresholdStart.latitude,ie.thresholdStart.longitude)*Math.PI/180,T=Math.min(c*2,jt(t.latitude,t.longitude,ie.thresholdStart.latitude,ie.thresholdStart.longitude)/c*k),q=T*Math.sin(Y),P=-T*Math.cos(Y),O=V(t.latitude,t.longitude,ie.thresholdEnd.latitude,ie.thresholdEnd.longitude)*Math.PI/180,D=Math.min(c*2,jt(t.latitude,t.longitude,ie.thresholdEnd.latitude,ie.thresholdEnd.longitude)/c*k),G=D*Math.sin(O),$=-D*Math.cos(O);x.beginPath(),x.moveTo(q,P),x.lineTo(G,$),x.stroke()}}})}),_&&j<10){let z=(V(t.latitude,t.longitude,_.midLat,_.midLon)-v+360)%360;z>180&&(z-=360),H={relBearing:z}}}if(Array.isArray(C)&&C.length>0&&typeof(t==null?void 0:t.latitude)=="number"&&typeof(t==null?void 0:t.longitude)=="number"){const _=c,j=C.map(F=>{const z=jt(t.latitude,t.longitude,F.latitude,F.longitude),ne=V(t.latitude,t.longitude,F.latitude,F.longitude)*Math.PI/180,oe=Math.min(1,z/_)*k,ie=oe*Math.sin(ne),ue=-oe*Math.cos(ne);return{x:ie,y:ue,name:F.label||F.name||"WPT",distNm:z}});if(j.length>0){x.strokeStyle="#00ff88",x.lineWidth=1.5,x.beginPath(),x.moveTo(0,0);for(let F=0;F<j.length;F++)x.lineTo(j[F].x,j[F].y);x.stroke();for(let F=0;F<j.length;F++){const z=j[F].name===g;x.beginPath(),x.arc(j[F].x,j[F].y,z?5:3,0,Math.PI*2),x.fillStyle=z?"#ffdd00":"#00ff88",x.fill(),x.save(),x.translate(j[F].x,j[F].y),x.rotate(v*Math.PI/180),x.fillStyle="#ffffff",x.font="10px Arial",x.textAlign="center",x.textBaseline="bottom",x.fillText(j[F].name,0,-8),x.restore()}}}if(x.restore(),H){const{relBearing:_}=H,j=20,F=N*.8,z=(N-F)/2;x.beginPath(),x.rect(z,j-2,F,4),x.fillStyle="rgba(0, 0, 0, 0.5)",x.fill(),x.strokeStyle="#aaaaaa",x.lineWidth=1,x.stroke(),x.beginPath(),x.moveTo(N/2,j-5),x.lineTo(N/2,j+5),x.strokeStyle="#ffffff",x.stroke();const ne=45;let oe=_*(F/2)/ne;oe>F/2&&(oe=F/2),oe<-F/2&&(oe=-F/2);const ie=N/2+oe;let ue="#00ff00";Math.abs(_)>5&&(ue="#ffff00"),Math.abs(_)>15&&(ue="#ff0000"),x.beginPath(),x.rect(ie-4,j-6,8,12),x.fillStyle=ue,x.fill(),x.strokeStyle="#ffffff",x.stroke()}x.save(),x.translate(E,E),x.beginPath(),x.moveTo(0,-10),x.lineTo(6,5),x.lineTo(0,0),x.lineTo(-6,5),x.closePath(),x.fillStyle="#ff0000",x.fill(),x.restore(),x.font="10px monospace",x.fillStyle="#00ff00",x.textAlign="left",x.textBaseline="top",x.fillText(`RANGE: ${c}NM`,5,5),x.textAlign="right",x.fillText("HDG UP",N-5,5)})()},[t,v,w,C,g,c,d]),b.createElement("div",{className:"navigation-panel"},b.createElement("div",{className:"radar-display-container"},b.createElement("div",{className:"radar-top-info"},b.createElement("div",{className:"radar-speed-info"},b.createElement("span",{className:"label"},"TAS"),b.createElement("span",{className:"value"},`${h.toFixed(0)}kts`),b.createElement("span",{className:"label"},"GS"),b.createElement("span",{className:"value"},`${p.toFixed(0)}kts`)),b.createElement("div",{className:"radar-heading-info"},b.createElement("span",{className:"value"},`${v.toFixed(0)}`)),b.createElement("div",{className:"radar-waypoint-info"},b.createElement("span",{className:"label"},"NEXT WP"),b.createElement("span",{className:"value"},`${g}`))),b.createElement("canvas",{ref:a,className:"radial-radar-canvas"})),b.createElement("div",{style:{marginTop:"15px",display:"flex",gap:"5px",height:"90px"}},b.createElement("div",{style:{flex:1,padding:"5px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",overflowY:"auto",border:"1px solid #00aa00"}},b.createElement("h4",{style:{color:"#00ff00",marginBottom:"5px",textAlign:"center",fontSize:"12px",margin:"0 0 5px 0"}},"Flight Plan"),C.length>0?b.createElement("ul",{style:{listStyleType:"none",padding:0,margin:0}},C.map((R,x)=>b.createElement("li",{key:x,style:{color:"#e6e6e6",fontSize:"11px",padding:"2px 0",borderBottom:x<C.length-1?"1px dashed rgba(0, 170, 0, 0.3)":"none",display:"flex",justifyContent:"space-between"}},b.createElement("span",{style:{fontWeight:"bold",color:(R.label||R.name)===g?"#ffdd00":"#00ff00"}},R.label||R.name||"WPT"),b.createElement("span",{style:{color:"#aaaaaa"}},`${R.latitude.toFixed(2)}, ${R.longitude.toFixed(2)}`)))):b.createElement("p",{style:{color:"#e6e6e6",fontSize:"12px",textAlign:"center"}},"No Waypoints")),b.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"50px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",border:"1px solid #00aa00",padding:"2px"}},b.createElement("span",{style:{color:"#00ff00",fontSize:"10px",marginBottom:"4px",fontWeight:"bold"}},"RNG"),b.createElement("button",{onClick:I,style:{background:"#003300",border:"1px solid #00ff00",color:"#00ff00",borderRadius:"4px",padding:"4px 2px",fontSize:"11px",cursor:"pointer",width:"40px",textAlign:"center",fontWeight:"bold",boxShadow:"0 0 5px rgba(0, 255, 0, 0.3)"}},c))))},tw=({flightState:t,onToggleSystems:e})=>{t.alarms;const n=t.crashWarning||"",r=t.engineN1||[0,0],a=t.engineN2||[0,0],i=t.engineEGT||[0,0],o=t.fuel||0,c=[...t.activeWarnings||[]];n&&(c.find(y=>y.message===n)||c.unshift({id:"CRASH_WARN",message:n,level:"CRITICAL"}));const u=Math.max(2,Math.min(4,r.length||2)),d=[{id:1,position:"Left",header:"#4a90e2",background:"rgba(74, 144, 226, 0.1)",border:"#4a90e2"},{id:2,position:"Right",header:"#50e3c2",background:"rgba(80, 227, 194, 0.1)",border:"#50e3c2"},{id:3,position:"Inner Left",header:"#ff6b6b",background:"rgba(255, 107, 107, 0.1)",border:"#ff6b6b"},{id:4,position:"Inner Right",header:"#feca57",background:"rgba(254, 202, 87, 0.1)",border:"#feca57"}];return b.createElement("div",{className:"central-panel",style:{padding:"10px"}},b.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},b.createElement("h3",{style:{margin:0,fontSize:"16px",color:"#fff",flex:1,textAlign:"center"}},"ENGINE & SYSTEMS"),b.createElement("button",{onClick:e,style:{background:"#4a90e2",border:"none",borderRadius:"4px",color:"white",padding:"4px 8px",fontSize:"10px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}},"OH PNL")),b.createElement("div",{className:"engine-params",style:{display:"flex",gap:"8px",justifyContent:"center",marginBottom:"15px",flexWrap:"wrap"}},Array.from({length:u}).map((y,p)=>{const h=d[p];return b.createElement("div",{key:h.id,className:"engine-group",style:{flex:"0 0 calc(50% - 4px)",maxWidth:u>2?"48%":"100%",background:h.background,border:`1px solid ${h.border}`,borderRadius:"6px",padding:"8px",textAlign:"center",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.2)"}},b.createElement("div",{style:{fontSize:"10px",fontWeight:"bold",color:h.header,marginBottom:"6px",display:"flex",justifyContent:"space-between",alignItems:"center"}},b.createElement("span",null,`ENG ${h.id}`),b.createElement("span",null,h.position)),b.createElement("div",{className:"engine-data",style:{fontSize:"11px"}},b.createElement("div",{style:{fontFamily:"monospace",color:"#00ff00",marginBottom:"2px"}},`N1: ${(r[p]||0).toFixed(0)}%`),b.createElement("div",{style:{fontFamily:"monospace",color:"#00ff00",marginBottom:"2px"}},`N2: ${(a[p]||0).toFixed(0)}%`),b.createElement("div",{style:{fontFamily:"monospace",color:"#ffaa00"}},`EGT: ${(i[p]||0).toFixed(0)}`)))})),b.createElement("div",{className:"fuel-display",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid #444",borderRadius:"6px",padding:"10px",marginBottom:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"}},b.createElement("span",{className:"label",style:{fontSize:"12px",color:"#888",fontWeight:"bold"}},"FUEL"),b.createElement("span",{className:"value",style:{fontSize:"18px",fontWeight:"bold",color:"#ffaa00"}},`${o.toFixed(0)}kg`)),b.createElement("div",{className:"error-log",style:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid #444",borderRadius:"6px",padding:"10px",flexGrow:1,display:"flex",flexDirection:"column",maxHeight:"200px"}},b.createElement("div",{style:{marginBottom:"8px",fontSize:"12px",color:"#ffaa00",fontWeight:"bold",borderBottom:"1px solid #555",paddingBottom:"4px"}},"SYSTEM STATUS / ALERTS"),b.createElement("div",{className:"status-items",style:{display:"flex",flexDirection:"column",gap:"4px",overflowY:"auto",height:"100%",paddingRight:"5px"}},c.length>0?c.map((y,p)=>{let h="#ffff00",v="transparent";return y.level==="CRITICAL"?h="#ff4444":y.level==="WARNING"?h="#ffaa00":h="#00ffff",b.createElement("div",{key:y.id||`warn-${p}`,className:"alarm-item",style:{color:h,backgroundColor:v,padding:"2px 0",fontSize:"14px",fontWeight:"bold",fontFamily:"monospace",textAlign:"left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",borderBottom:"1px solid rgba(255,255,255,0.1)"}},y.message)}):b.createElement("div",{className:"status-ok",style:{color:"#00ff00",fontSize:"12px",fontWeight:"bold",textAlign:"left",padding:"5px 0",fontStyle:"italic",fontFamily:"monospace"}},"NO ACTIVE ALERTS"))))},nw=({controlFlaps:t,controlGear:e,controlAirBrakes:n,controlTrim:r,flightState:a,aircraftModel:i})=>{const[o,l]=L.useState(null),[c,u]=L.useState(null),[d,y]=L.useState(!0),p=(a==null?void 0:a.trimValue)||0;L.useEffect(()=>{(async()=>{y(!0);try{const S=await Sn.getControlSurfaceProfiles(i||"Boeing 737-800");l(S.flaps),u(S.airbrakes)}catch(S){console.error("Error fetching aircraft profiles:",S)}finally{y(!1)}})()},[i]);const h=({label:f,position:S,maxPosition:A,onToggle:I,positionLabels:R,colorMap:x,height:N=90})=>{const E=S/A*100,k=R[S]||S,B=x[S]||"#f59e0b";return b.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",width:"60px"}},b.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px",fontWeight:"bold",height:"30px",justifyContent:"center"}},b.createElement("span",{style:{color:"#93c5fd",marginBottom:"2px"}},f),b.createElement("span",{style:{color:B,background:"rgba(255, 255, 255, 0.1)",padding:"1px 4px",borderRadius:"3px",fontSize:"9px"}},k)),b.createElement("div",{style:{position:"relative",height:`${N}px`,width:"32px",background:"linear-gradient(180deg, #1e293b, #0f172a)",borderRadius:"16px",border:"1px solid #3b82f6",boxShadow:"inset 0 1px 4px rgba(0, 0, 0, 0.6)",userSelect:"none",cursor:"pointer"},onMouseDown:ae=>{console.log(`LeverControl: onMouseDown for ${f}`,{clientY:ae.clientY,maxPosition:A,position:S}),ae.preventDefault(),ae.stopPropagation();const ce=ae.currentTarget.getBoundingClientRect(),ye=_=>{const F=(_-ce.top)/ce.height,z=Math.round(F*A),ne=Math.max(0,Math.min(A,z));ne!==S&&(console.log(`LeverControl: onToggle for ${f} with new position ${ne}`),I(ne))};ye(ae.clientY);const ee=_=>{console.log(`LeverControl: handleMouseMove for ${f}`,{clientY:_.clientY}),ye(_.clientY)},H=()=>{console.log(`LeverControl: handleMouseUp for ${f}`),document.removeEventListener("mousemove",ee),document.removeEventListener("mouseup",H),document.body.style.cursor=""};document.body.style.cursor="grabbing",document.addEventListener("mousemove",ee),document.addEventListener("mouseup",H)},onClick:ae=>{A===1&&I(S===0?1:0)}},Array.from({length:A+1}).map((ae,V)=>{const ce=V/A*100,ye=V===S;return b.createElement("div",{key:V,style:{position:"absolute",top:`${ce}%`,left:"50%",transform:"translateX(-50%)",width:"3px",height:"5px",background:ye?B:"#475569",borderRadius:"1px",boxShadow:ye?`0 0 4px ${B}`:"none",transition:"all 0.2s ease",zIndex:1}})}),b.createElement("div",{style:{position:"absolute",top:`${E}%`,left:"-5px",width:"42px",height:"18px",background:`linear-gradient(135deg, ${B}, ${B}88)`,borderRadius:"9px",transform:"translateY(-50%) rotate(10deg)",border:"1px solid #1e293b",boxShadow:`0 2px 6px rgba(0, 0, 0, 0.8), 0 0 8px ${B}44`,cursor:"grab",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",fontWeight:"bold",color:"#ffffff",transition:"top 0.2s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease",textShadow:"0 1px 1px rgba(0, 0, 0, 0.8)",zIndex:2}},f.substring(0,3))))},v=({value:f,onChange:S})=>{const I=f/.01*360,R=N=>{N.preventDefault();const E=-N.deltaY,ae=(I+E*.5)/360*.01,V=Math.max(-.2,Math.min(.2,ae));S(V/.2)},x=N=>{N.preventDefault();const k=N.currentTarget.getBoundingClientRect(),B=k.left+k.width/2,ae=k.top+k.height/2,V=(_,j)=>{const F=_-B,z=j-ae;return Math.atan2(z,F)*(180/Math.PI)};let ce=V(N.clientX,N.clientY),ye=I;const ee=_=>{const j=V(_.clientX,_.clientY);let F=j-ce;F>180&&(F-=360),F<-180&&(F+=360),ye+=F,ce=j;const z=ye/360*.01,ne=Math.max(-.2,Math.min(.2,z));S(ne/.2)},H=()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",H),document.body.style.cursor=""};document.body.style.cursor="grabbing",window.addEventListener("mousemove",ee),window.addEventListener("mouseup",H)};return b.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",width:"80px"}},b.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",fontSize:"10px",fontWeight:"bold"}},b.createElement("span",{style:{color:"#93c5fd"}},"TRIM"),b.createElement("span",{style:{color:"#f59e0b",background:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"4px",marginTop:"2px",minWidth:"40px",textAlign:"center"}},(f*100).toFixed(1))),b.createElement("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"conic-gradient(from 0deg, #1e293b 0%, #334155 50%, #1e293b 100%)",border:"4px solid #475569",boxShadow:"0 4px 10px rgba(0,0,0,0.5), inset 0 0 10px rgba(0,0,0,0.8)",position:"relative",cursor:"grab",transform:`rotate(${I}deg)`,transition:"transform 0.05s linear"},onMouseDown:x,onWheel:R},b.createElement("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",borderRadius:"50%",border:"2px dashed #64748b",opacity:.5}}),b.createElement("div",{style:{position:"absolute",top:"5px",left:"50%",transform:"translateX(-50%)",width:"4px",height:"15px",background:"#ffffff",borderRadius:"2px",boxShadow:"0 0 4px rgba(255,255,255,0.5)"}}),b.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"20px",height:"20px",borderRadius:"50%",background:"#0f172a",border:"1px solid #475569"}})))};if(d)return b.createElement("div",{className:"control-surface-panel",style:{minWidth:"220px",height:"180px",display:"flex",alignItems:"center",justifyContent:"center",background:"#1e293b",borderRadius:"10px",color:"#93c5fd"}},"Loading Aircraft Data...");const w=(o==null?void 0:o.positions.reduce((f,S,A)=>(f[A]=S.label,f),{}))||{0:"UP",1:"TO",2:"LDG"},C=((o==null?void 0:o.positions.length)||3)-1,g=c!=null&&c.positions?c.positions.reduce((f,S,A)=>(f[A]=S.label,f),{}):c!=null&&c.hasTwoTier?{0:"RET",1:"ARM",2:"FLT",3:"GND"}:{0:"RET",1:"EXT"},m=c!=null&&c.positions?c.positions.length-1:c!=null&&c.hasTwoTier?3:1;return b.createElement("div",{className:"control-surface-panel",style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",border:"2px solid #475569",borderRadius:"10px",padding:"12px",display:"flex",flexDirection:"row",gap:"15px",color:"white",fontFamily:"Courier New, monospace",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5)",alignItems:"flex-start"}},b.createElement("div",{style:{display:"flex",flexDirection:"row",gap:"15px"}},b.createElement(h,{label:"FLAPS",position:a.flapsValue||0,maxPosition:C,onToggle:t,positionLabels:w,colorMap:{0:"#10b981",[C]:"#ef4444"}}),b.createElement(h,{label:"GEAR",position:a.gearValue?1:0,maxPosition:1,onToggle:f=>e(f===1),positionLabels:{0:"UP",1:"DN"},colorMap:{0:"#10b981",1:"#ef4444"}}),b.createElement(h,{label:"BRAKES",position:a.airBrakesValue||0,maxPosition:m,onToggle:n,positionLabels:g,colorMap:{0:"#10b981",[m]:"#ef4444"}}),b.createElement(v,{value:p,onChange:r})),b.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"12px",borderLeft:"1px solid rgba(75, 85, 99, 0.5)",minWidth:"110px"}},b.createElement("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#3b82f6",marginBottom:"2px"}},"SYSTEMS"),b.createElement("div",{style:{fontSize:"9px",display:"flex",justifyContent:"space-between"}},b.createElement("span",{style:{color:"#94a3b8"}},"HYD:"),b.createElement("span",{style:{color:a.hydraulicPressure>2e3?"#10b981":"#ef4444",fontWeight:"bold"}},`${a.hydraulicPressure}`)),b.createElement("div",{style:{fontSize:"9px",display:"flex",justifyContent:"space-between"}},b.createElement("span",{style:{color:"#94a3b8"}},"STATUS:"),b.createElement("span",{style:{color:a.hydraulicPressure>1e3?"#10b981":"#ef4444",fontWeight:"bold"}},a.hydraulicPressure>1e3?"OK":"FAIL")),b.createElement("div",{style:{fontSize:"9px",marginTop:"4px",color:"#60a5fa",fontStyle:"italic",maxWidth:"100px"}},(i==null?void 0:i.substring(0,15))||"B737-800")))};const rw=({onClose:t,flightState:e,onSystemAction:n,aircraftModel:r})=>{const a=(r||"").toLowerCase(),i=a.includes("a3")||a.includes("airbus"),o=a.includes("737")||a.includes("b73"),c=(a.includes("boeing")||a.startsWith("b7"))&&!o&&!i,u=(Q,Y)=>{if(!e.systems)return Y;const T=Q.split(".");let q=e.systems;for(const P of T){if(q==null)return Y;q=q[P]}return q??Y},d=u("electrical.dcVolts",0)>15,p=u("electrical.acVolts",0)>100,h=u("apu.running",!1),v=u("pressurization.ductPressL",0),w=u("pressurization.ductPressR",0),C=v>20||w>20,g=({label:Q,color:Y="amber",active:T})=>s.jsx("div",{style:{background:T&&d?Y==="red"?"#ff3333":Y==="blue"?"#00ccff":Y==="green"?"#00ff00":"#ffaa00":"#222",color:T&&d?"#000":"#444",fontSize:"9px",fontWeight:"bold",padding:"2px 4px",borderRadius:"1px",textAlign:"center",minWidth:"40px",boxShadow:T&&d?`0 0 8px ${Y==="red"?"#f00":Y==="blue"?"#0cf":Y==="green"?"#0f0":"#fa0"}`:"none",border:"1px solid #111",marginTop:"2px",opacity:T&&d?1:.7,transition:"all 0.1s"},children:Q}),A=i?({label:Q,active:Y,onClick:T,fault:q=!1,subLabel:P="ON",invertLight:O=!1,specialLabel:D=null,enabled:G=!0,annunciator:$})=>{let M=null,Z=null,de=!1;return d&&G&&(q?(M="FAULT",Z="#ff9900",de=!0):$&&$.active?(M=$.label,Z=$.color==="blue"?"#00ffff":$.color==="green"?"#00ff00":"#ff9900",de=!0):D?(M=D,Z="#00ff00",de=!0):O?Y&&(M=P||"ON",Z="#00ffff",de=!0):Y||(M="OFF",Z="#ffffff",de=!0)),s.jsx("div",{className:"airbus-button-container",style:{margin:"6px"},children:s.jsxs("div",{onClick:T,style:{width:"45px",height:"45px",background:"#151515",border:"2px solid #555",borderRadius:"4px",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",boxShadow:Y?"inset 0 0 5px rgba(0,0,0,0.8)":"inset 0 0 2px rgba(255,255,255,0.1)",position:"relative",padding:"4px 0"},children:[s.jsx("div",{style:{fontSize:"9px",color:"#bbb",textAlign:"center",lineHeight:"1.1"},children:Q}),s.jsx("div",{style:{height:"16px",width:"36px",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"2px"},children:de&&s.jsx("div",{style:{color:Z,fontSize:"9px",fontWeight:"bold",textShadow:`0 0 4px ${Z}`,width:"100%",textAlign:"center",background:"rgba(0,0,0,0.4)"},children:M})})]})})}:o?({label:Q,active:Y,onClick:T,annunciator:q,subLabel:P,enabled:O=!0})=>s.jsxs("div",{className:"metallic-switch-wrapper",style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"8px"},children:[q&&s.jsx("div",{style:{marginBottom:"4px"},children:s.jsx(g,{label:q.label,active:q.active,color:q.color})}),s.jsxs("div",{onClick:O?T:void 0,style:{width:"40px",height:"40px",position:"relative",cursor:O?"pointer":"default",opacity:O?1:.6},children:[s.jsx("div",{style:{position:"absolute",top:"5px",left:"5px",right:"5px",bottom:"5px",background:"#888",borderRadius:"50%",boxShadow:"inset 0 0 5px #000",border:"1px solid #555"}}),s.jsx("div",{style:{position:"absolute",top:Y?"2px":"18px",left:"12px",width:"16px",height:"24px",background:"linear-gradient(90deg, #d0d0d0, #f8f8f8, #a0a0a0)",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.5)",transition:"top 0.15s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:2},children:s.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(255,255,255,0.8)",borderRadius:"8px 8px 0 0"}})})]}),s.jsx("span",{style:{fontSize:"10px",marginTop:"2px",color:"#eee",textAlign:"center",fontWeight:"bold",textShadow:"0 1px 2px #000"},children:Q}),P&&s.jsx("span",{style:{fontSize:"8px",color:"#ccc"},children:P})]}):({label:Q,active:Y,onClick:T,fault:q=!1,subLabel:P="ON",invertLight:O=!1,specialLabel:D=null,enabled:G=!0,annunciator:$})=>{const M=d&&Y,Z=d&&(q||$&&$.active),de=D||P||"ON",U=q?"FAULT":$?$.label:"",ve=q?"#ff9900":$&&$.color==="blue"?"#00ffff":"#ff9900";return s.jsxs("div",{className:"boeing-btn-wrapper",style:{margin:"6px",display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("div",{style:{fontSize:"10px",color:"#ccc",marginBottom:"4px",fontWeight:"bold"},children:Q}),s.jsxs("div",{onClick:G?T:void 0,style:{width:"40px",height:"40px",background:"#111",border:"2px solid #555",borderRadius:"2px",cursor:G?"pointer":"default",display:"flex",flexDirection:"column",opacity:G?1:.6,boxShadow:Y?"inset 0 0 5px #000":"0 2px 4px rgba(0,0,0,0.5)"},children:[s.jsx("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"1px solid #333",background:M?"rgba(0, 255, 0, 0.2)":"transparent"},children:s.jsx("span",{style:{fontSize:"9px",fontWeight:"bold",color:M?"#00ff00":"#444",textShadow:M?"0 0 5px #00ff00":"none",visibility:M?"visible":"hidden"},children:de})}),s.jsx("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",background:Z?`rgba(${ve==="#00ffff"?"0,255,255":"255,160,0"}, 0.2)`:"transparent"},children:s.jsx("span",{style:{fontSize:"8px",fontWeight:"bold",color:Z?ve:"#444",textShadow:Z?`0 0 5px ${ve}`:"none",visibility:Z?"visible":"hidden"},children:U})})]})]})},I=({label:Q,value:Y,unit:T,min:q=0,max:P=100,color:O="#0f0"})=>s.jsxs("div",{style:{background:"#111",padding:"5px",borderRadius:"4px",border:"1px solid #333",textAlign:"center",minWidth:"60px"},children:[s.jsx("div",{style:{fontSize:"9px",color:"#aaa",marginBottom:"2px"},children:Q}),s.jsx("div",{style:{fontSize:"14px",fontFamily:"monospace",color:O,fontWeight:"bold"},children:Y}),s.jsx("div",{style:{fontSize:"8px",color:"#666"},children:T}),s.jsx("div",{style:{width:"100%",height:"3px",background:"#333",marginTop:"3px"},children:s.jsx("div",{style:{width:`${Math.min(100,Math.max(0,(Y-q)/(P-q)*100))}%`,height:"100%",background:O}})})]}),R=({label:Q,active:Y,onClick:T,subLabel:q,enabled:P=!0})=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"8px"},children:[s.jsxs("div",{onClick:P?T:void 0,style:{width:"36px",height:"36px",borderRadius:"50%",background:"conic-gradient(#ddd 0deg, #999 90deg, #ddd 180deg, #999 270deg)",border:"1px solid #444",position:"relative",transform:Y?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s cubic-bezier(0.4, 0.0, 0.2, 1)",cursor:P?"pointer":"default",boxShadow:"0 4px 6px rgba(0,0,0,0.5)"},children:[s.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"36px",height:"6px",background:"#e0e0e0",transform:"translate(-50%, -50%)",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0,0,0,0.5)"}}),s.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",width:"4px",height:"16px",background:"#333",transform:"translate(-50%, -100%)",borderRadius:"1px"}})]}),s.jsx("div",{style:{fontSize:"9px",marginTop:"4px",color:"#eee",fontWeight:"bold"},children:Q}),q&&s.jsx("div",{style:{fontSize:"8px",color:"#aaa"},children:q})]}),x=()=>{const Q=u("fuel.tanks.left",0),Y=u("fuel.tanks.right",0),T=u("fuel.tanks.center",0),q=u("fuel.pressL",0),P=u("fuel.pressR",0),O=u("fuel.pressC",0),D=u("fuel.leftPumps"),G=u("fuel.rightPumps"),$=u("fuel.centerPumps"),M=u("fuel.crossfeed");return s.jsxs("div",{className:"panel-section",style:{position:"relative",display:"flex",flexDirection:"column"},children:[s.jsx("h4",{className:"panel-title",children:"FUEL"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px",marginBottom:"15px",background:"#000",padding:"4px",border:"2px solid #555"},children:[s.jsx("div",{className:"digital-qty",style:{textAlign:"center"},children:Math.round(Q)}),s.jsx("div",{className:"digital-qty",style:{textAlign:"center"},children:Math.round(T)}),s.jsx("div",{className:"digital-qty",style:{textAlign:"center"},children:Math.round(Y)})]}),s.jsxs("div",{style:{position:"relative",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gridTemplateRows:"80px 80px",padding:"10px 0"},children:[s.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.8,zIndex:0},children:[s.jsx("line",{x1:"12.5%",y1:"25%",x2:"12.5%",y2:"75%",stroke:D?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"37.5%",y1:"25%",x2:"37.5%",y2:"50%",stroke:$?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"62.5%",y1:"25%",x2:"62.5%",y2:"50%",stroke:$?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"87.5%",y1:"25%",x2:"87.5%",y2:"75%",stroke:G?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"12.5%",y1:"75%",x2:"87.5%",y2:"75%",stroke:M?"#0f0":"#444",strokeWidth:"3"}),s.jsx("circle",{cx:"50%",cy:"75%",r:"18",stroke:M?"#0f0":"#444",strokeWidth:"2",fill:"#1a1a1a"})]}),s.jsx("div",{style:{justifySelf:"center",alignSelf:"center",zIndex:1},children:s.jsx(A,{label:"L PUMP 1",active:u("fuel.leftPumps"),onClick:()=>n("fuel","leftPumps"),annunciator:{label:"LOW PRESS",active:q<10,color:"amber"},enabled:d})}),s.jsx("div",{style:{justifySelf:"center",alignSelf:"center",zIndex:1},children:s.jsx(A,{label:"CTR L",active:u("fuel.centerPumps"),onClick:()=>n("fuel","centerPumps"),annunciator:{label:"LOW PRESS",active:u("fuel.centerPumps")&&O<10,color:"amber"},enabled:d})}),s.jsx("div",{style:{justifySelf:"center",alignSelf:"center",zIndex:1},children:s.jsx(A,{label:"CTR R",active:u("fuel.centerPumps"),onClick:()=>n("fuel","centerPumps"),annunciator:{label:"LOW PRESS",active:u("fuel.centerPumps")&&O<10,color:"amber"},enabled:d})}),s.jsx("div",{style:{justifySelf:"center",alignSelf:"center",zIndex:1},children:s.jsx(A,{label:"R PUMP 1",active:u("fuel.rightPumps"),onClick:()=>n("fuel","rightPumps"),annunciator:{label:"LOW PRESS",active:P<10,color:"amber"},enabled:d})}),s.jsx("div",{style:{justifySelf:"center",alignSelf:"center",zIndex:1},children:s.jsx(A,{label:"L PUMP 2",active:u("fuel.leftPumps"),onClick:()=>n("fuel","leftPumps"),annunciator:{label:"LOW PRESS",active:q<10,color:"amber"},enabled:d})}),s.jsxs("div",{style:{gridColumn:"2 / span 2",justifySelf:"center",alignSelf:"center",zIndex:2},children:[s.jsx(R,{label:"CROSSFEED",active:u("fuel.crossfeed"),onClick:()=>n("fuel","crossfeed"),subLabel:"VALVE"}),s.jsx("div",{style:{fontSize:"8px",color:"#0af",textAlign:"center",marginTop:"2px",background:"#000",padding:"1px"},children:u("fuel.crossfeed")?"OPEN":""})]}),s.jsx("div",{style:{justifySelf:"center",alignSelf:"center",zIndex:1},children:s.jsx(A,{label:"R PUMP 2",active:u("fuel.rightPumps"),onClick:()=>n("fuel","rightPumps"),annunciator:{label:"LOW PRESS",active:P<10,color:"amber"},enabled:d})})]})]})},N=()=>{const Q=u("electrical.dcVolts",0),Y=u("electrical.acVolts",0),T=u("electrical.battery"),q=u("electrical.gen1"),P=u("electrical.gen2"),O=u("electrical.apuGen"),D=q||P||O||T;return s.jsxs("div",{className:"panel-section",style:{position:"relative",display:"flex",flexDirection:"column"},children:[s.jsx("h4",{className:"panel-title",children:"ELECTRICAL"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto 1fr 1fr",gap:"5px",marginBottom:"15px",background:"#111",padding:"5px",border:"1px solid #444"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"9px",color:"#ccc"},children:"DC AMPS"}),s.jsx("div",{style:{fontSize:"14px",color:"#0f0",fontFamily:"monospace"},children:"0"})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"9px",color:"#ccc"},children:"DC VOLTS"}),s.jsx("div",{style:{fontSize:"14px",color:"#0f0",fontFamily:"monospace"},children:Math.round(Q)})]}),s.jsx("div",{style:{width:"1px",background:"#444"}}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"9px",color:"#ccc"},children:"AC FREQ"}),s.jsx("div",{style:{fontSize:"14px",color:"#0f0",fontFamily:"monospace"},children:"400"})]}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"9px",color:"#ccc"},children:"AC VOLTS"}),s.jsx("div",{style:{fontSize:"14px",color:"#0f0",fontFamily:"monospace"},children:Math.round(Y)})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",rowGap:"20px",position:"relative",paddingBottom:"10px"},children:[s.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.8},children:[s.jsx("line",{x1:"16.67%",y1:"25%",x2:"83.33%",y2:"25%",stroke:T?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"16.67%",y1:"50%",x2:"83.33%",y2:"50%",stroke:D?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"16.67%",y1:"75%",x2:"16.67%",y2:"50%",stroke:q?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"83.33%",y1:"75%",x2:"83.33%",y2:"50%",stroke:P?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"50%",y1:"75%",x2:"50%",y2:"50%",stroke:O?"#0f0":"#444",strokeWidth:"2"})]}),s.jsx("div",{style:{justifySelf:"center",zIndex:1},children:s.jsx(A,{label:"BAT",active:T,onClick:()=>n("electrical","battery"),subLabel:"ON",annunciator:{label:"DISCHARGE",active:!u("electrical.gen1")&&T,color:"amber"}})}),s.jsx("div",{style:{justifySelf:"center",zIndex:1}}),s.jsx("div",{style:{justifySelf:"center",zIndex:1},children:s.jsx(R,{label:"STBY PWR",active:u("electrical.stbyPower"),onClick:()=>n("electrical","stbyPower"),subLabel:"AUTO"})}),s.jsx("div",{style:{justifySelf:"center",zIndex:1},children:s.jsx(A,{label:"GEN 1",active:u("electrical.gen1"),onClick:()=>n("electrical","gen1"),annunciator:{label:"OFF BUS",active:u("electrical.sourceOff1"),color:"blue"},subLabel:"ON"})}),s.jsx("div",{style:{justifySelf:"center",zIndex:1},children:s.jsx(A,{label:"APU GEN",active:u("electrical.apuGen"),onClick:()=>n("electrical","apuGen"),annunciator:{label:"OFF BUS",active:u("electrical.apuGenOff"),color:"blue"},subLabel:"ON"})}),s.jsx("div",{style:{justifySelf:"center",zIndex:1},children:s.jsx(A,{label:"GEN 2",active:u("electrical.gen2"),onClick:()=>n("electrical","gen2"),annunciator:{label:"OFF BUS",active:u("electrical.sourceOff2"),color:"blue"},subLabel:"ON"})})]})]})},E=()=>{const Q=u("electrical.battery");u("electrical.batteryCharge",100);const Y=u("electrical.dcVolts",0),T=u("electrical.acVolts",0),q=u("electrical.acFreq",0),P=u("electrical.acAmps",0),O=u("electrical",{}),D=Object.keys(O).filter(de=>de.match(/^gen\d+$/)).sort(),G=O.gen1,$=O.gen2,M=u("electrical.apuGen"),Z=G||$||M||Q;return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"ELECTRICAL"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px",marginBottom:"10px"},children:[s.jsx(I,{label:"DC VOLTS",value:Y.toFixed(1),unit:"V",max:30,color:Y>22?"#0f0":"#f00"}),s.jsx(I,{label:"DC AMPS",value:(P*.2).toFixed(0),unit:"A",max:100})," ",s.jsx(I,{label:"AC VOLTS",value:Math.round(T),unit:"V",min:0,max:130,color:T>110?"#0f0":"#fa0"}),s.jsx(I,{label:"AC FREQ",value:Math.round(q),unit:"Hz",min:380,max:420})]}),s.jsxs("div",{style:{position:"relative",padding:"10px 0"},children:[s.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.8},children:[s.jsx("line",{x1:"10%",y1:"45%",x2:"90%",y2:"45%",stroke:Z?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"30%",y1:"15%",x2:"30%",y2:"45%",stroke:Q?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"70%",y1:"15%",x2:"70%",y2:"45%",stroke:u("electrical.stbyPower")?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"20%",y1:"85%",x2:"20%",y2:"45%",stroke:G?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"50%",y1:"85%",x2:"50%",y2:"45%",stroke:M?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"80%",y1:"85%",x2:"80%",y2:"45%",stroke:$?"#0f0":"#444",strokeWidth:"2"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-evenly",marginBottom:"20px",position:"relative",zIndex:1},children:[s.jsx("div",{style:{width:"20%"}})," ",s.jsx(A,{label:"BAT",active:Q,onClick:()=>n("electrical","battery"),annunciator:{label:"DISCH",active:!u("electrical.gen1")&&!u("electrical.gen2")&&Q,color:"amber"}}),s.jsx(A,{label:"STBY PWR",active:u("electrical.stbyPower"),onClick:()=>n("electrical","stbyPower"),subLabel:"AUTO",annunciator:{label:"OFF",active:!u("electrical.stbyPower"),color:"amber"}}),s.jsx("div",{style:{width:"20%"}})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-evenly",position:"relative",zIndex:1},children:[D.includes("gen1")&&s.jsx(A,{label:"GEN 1",active:O.gen1,onClick:()=>n("electrical","gen1"),annunciator:{label:"OFF BUS",active:u("electrical.sourceOff1"),color:"blue"}}),s.jsx(A,{label:"APU GEN",active:u("electrical.apuGen"),onClick:()=>n("electrical","apuGen"),annunciator:{label:"OFF BUS",active:u("electrical.apuGenOff"),color:"blue"},fault:u("electrical.apuGenOff")}),D.includes("gen2")&&s.jsx(A,{label:"GEN 2",active:O.gen2,onClick:()=>n("electrical","gen2"),annunciator:{label:"OFF BUS",active:u("electrical.sourceOff2"),color:"blue"}}),D.filter(de=>de!=="gen1"&&de!=="gen2").map((de,U)=>s.jsx(A,{label:`GEN ${de.replace("gen","")}`,active:O[de],onClick:()=>n("electrical",de),annunciator:{label:"OFF BUS",active:u(`electrical.sourceOff${de.replace("gen","")}`),color:"blue"}},de))]})]})]})},k=()=>{const Q=u("apu.egt",0),Y=u("apu.n2",0),T=u("apu.running"),q=u("apu.starting");return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"APU"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"10px"},children:[s.jsx(I,{label:"EGT",value:Math.round(Q),unit:"C",max:800,color:Q>700?"#f00":"#0f0"}),s.jsx(I,{label:"RPM",value:Math.round(Y),unit:"%",max:110})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[s.jsx(A,{label:"MASTER",active:u("apu.master"),onClick:()=>n("apu","master"),annunciator:{label:"FAULT",active:!1,color:"amber"},invertLight:!0,subLabel:"ON"}),s.jsx(A,{label:"START",active:u("apu.start"),onClick:()=>n("apu","start"),subLabel:T?"AVAIL":q?"ON":"",annunciator:{label:"MAINT",active:!1,color:"blue"},invertLight:!0,specialLabel:T?"AVAIL":q?"ON":null})]})]})},B=()=>{const Q=u("fuel.tanks.left",0),Y=u("fuel.tanks.right",0),T=u("fuel.tanks.center",0),q=u("fuel.pressL",0),P=u("fuel.pressR",0),O=u("fuel.pressC",0),D=u("fuel.leftPumps"),G=u("fuel.rightPumps"),$=u("fuel.centerPumps"),M=u("fuel.crossfeed");return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"FUEL"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px",background:"#000",padding:"5px",borderRadius:"4px"},children:[s.jsxs("div",{className:"fuel-qty",children:[s.jsx("span",{children:"LEFT"}),s.jsx("span",{className:"digital",children:Math.round(Q)})]}),s.jsxs("div",{className:"fuel-qty",children:[s.jsx("span",{children:"CTR"}),s.jsx("span",{className:"digital",children:Math.round(T)})]}),s.jsxs("div",{className:"fuel-qty",children:[s.jsx("span",{children:"RIGHT"}),s.jsx("span",{className:"digital",children:Math.round(Y)})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",position:"relative"},children:[s.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.8,zIndex:0},children:[s.jsx("line",{x1:"16.67%",y1:"10%",x2:"16.67%",y2:"90%",stroke:D?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"83.33%",y1:"10%",x2:"83.33%",y2:"90%",stroke:G?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"50%",y1:"10%",x2:"50%",y2:"60%",stroke:$?"#0f0":"#444",strokeWidth:"2"}),s.jsx("line",{x1:"16.67%",y1:"80%",x2:"83.33%",y2:"80%",stroke:M?"#0f0":"#444",strokeWidth:"3"})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1},children:[s.jsx(A,{label:"L PUMP 1",active:u("fuel.leftPumps"),onClick:()=>n("fuel","leftPumps"),annunciator:{label:"LOW PRESS",active:q<10,color:"amber"},enabled:d}),s.jsx(A,{label:"L PUMP 2",active:u("fuel.leftPumps"),onClick:()=>n("fuel","leftPumps"),annunciator:{label:"LOW PRESS",active:q<10,color:"amber"},enabled:d})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1},children:[s.jsx(A,{label:"CTR L",active:u("fuel.centerPumps"),onClick:()=>n("fuel","centerPumps"),annunciator:{label:"LOW PRESS",active:u("fuel.centerPumps")&&O<10,color:"amber"},enabled:d}),s.jsx(A,{label:"CTR R",active:u("fuel.centerPumps"),onClick:()=>n("fuel","centerPumps"),annunciator:{label:"LOW PRESS",active:u("fuel.centerPumps")&&O<10,color:"amber"},enabled:d}),s.jsx("div",{style:{marginTop:"10px"},children:s.jsx(A,{label:"X-FEED",active:u("fuel.crossfeed"),onClick:()=>n("fuel","crossfeed"),subLabel:"VALVE OPEN",annunciator:{label:"VALVE OPEN",active:u("fuel.crossfeed"),color:"blue"},enabled:d})})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",zIndex:1},children:[s.jsx(A,{label:"R PUMP 1",active:u("fuel.rightPumps"),onClick:()=>n("fuel","rightPumps"),annunciator:{label:"LOW PRESS",active:P<10,color:"amber"},enabled:d}),s.jsx(A,{label:"R PUMP 2",active:u("fuel.rightPumps"),onClick:()=>n("fuel","rightPumps"),annunciator:{label:"LOW PRESS",active:P<10,color:"amber"},enabled:d})]})]})]})},ae=()=>{const Q=u("pressurization.ductPressL",0),Y=u("pressurization.ductPressR",0),T=u("pressurization.cabinAlt",0),q=u("pressurization.diffPressure",0),P=u("pressurization",{}),O=Object.keys(P).filter(D=>D.match(/^bleed\d+$/)).sort();return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"AIR CONDITIONING"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[s.jsx(I,{label:"DUCT L",value:Math.round(Q),unit:"PSI",max:60}),s.jsx(I,{label:"DUCT R",value:Math.round(Y),unit:"PSI",max:60})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[O.map((D,G)=>s.jsx(A,{label:`BLEED ${G+1}`,active:P[D],onClick:()=>n("pressurization",D),annunciator:{label:"OFF",active:!P[D],color:"amber"},enabled:p||h},D)),s.jsx(A,{label:"APU BLEED",active:u("apu.bleed"),onClick:()=>n("apu","bleed"),annunciator:{label:"VALVE OPEN",active:u("apu.bleed")&&u("apu.running"),color:"blue"},enabled:h})]}),s.jsx("div",{style:{marginTop:"10px",display:"flex",justifyContent:"center"},children:s.jsx(A,{label:"ISOLATION",active:u("pressurization.isolationValve"),onClick:()=>n("pressurization","isolationValve"),subLabel:"VALVE",annunciator:{label:"OPEN",active:u("pressurization.isolationValve"),color:"blue"}})}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"20px",marginTop:"15px",borderTop:"1px solid #444",paddingTop:"10px"},children:[s.jsx(A,{label:"PACK L",active:u("pressurization.packL"),onClick:()=>n("pressurization","packL"),subLabel:"AUTO",enabled:p||h}),s.jsx(A,{label:"PACK R",active:u("pressurization.packR"),onClick:()=>n("pressurization","packR"),subLabel:"AUTO",enabled:p||h})]}),s.jsxs("div",{style:{marginTop:"10px",background:"#000",padding:"5px",borderRadius:"4px",textAlign:"center",fontSize:"11px",color:"#0f0"},children:["CAB ALT: ",Math.round(T)," FT | DIFF: ",q.toFixed(1)," PSI"]})]})},V=()=>{const Q=u("engines",{}),Y=Object.keys(Q).filter(q=>q.startsWith("eng")).sort(),T=({label:q,value:P,onClick:O,enabled:D})=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"5px"},children:[s.jsxs("div",{onClick:D?O:void 0,style:{width:"40px",height:"40px",borderRadius:"50%",background:D?"#333":"#222",border:"2px solid #555",display:"flex",justifyContent:"center",alignItems:"center",cursor:D?"pointer":"default",position:"relative",opacity:D?1:.5},children:[s.jsx("div",{style:{width:"4px",height:"15px",background:"#fff",transform:P==="GRD"?"rotate(-45deg)":P==="CONT"?"rotate(45deg)":P==="FLT"?"rotate(90deg)":"rotate(0deg)",transformOrigin:"bottom center",position:"absolute",top:"5px"}}),s.jsx("div",{style:{fontSize:"8px",color:"#fff",marginTop:"45px"},children:P})]}),s.jsx("div",{style:{fontSize:"10px",color:"#ccc",marginTop:"5px"},children:q})]});return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"ENGINES"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px"},children:Y.map((q,P)=>{const O=Q[q],D=e.engineN2?e.engineN2[P]:O.n2||0,G=e.engineEGT?e.engineEGT[P]:O.egt||0;return s.jsxs("div",{style:{display:"flex",gap:"5px"},children:[s.jsx(I,{label:`N2 ${P+1}`,value:Math.round(D),unit:"%",max:105}),s.jsx(I,{label:`EGT ${P+1}`,value:Math.round(G),unit:"C",max:1e3,color:G>850?"#f00":"#0f0"})]},q)})}),s.jsx("div",{style:{display:"flex",justifyContent:"space-around",borderTop:"1px solid #444",paddingTop:"10px",flexWrap:"wrap"},children:Y.map((q,P)=>{const O=Q[q];return s.jsx(T,{label:`ENG ${P+1} START`,value:O.startSwitch||"OFF",onClick:()=>n("engines",`${q}_start_toggle`),enabled:C},q)})}),s.jsx("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"10px",flexWrap:"wrap"},children:Y.map((q,P)=>{const O=Q[q];return s.jsx(A,{label:`ENG ${P+1}`,active:O.fuelControl,onClick:()=>n("engines",`${q}_fuel`),subLabel:"CUTOFF",annunciator:{label:"RUN",active:O.fuelControl,color:"green"},enabled:C},q)})})]})},ce=()=>{const Q=u("fire",{}),Y=Object.keys(Q).filter(q=>q.match(/^eng\d+Handle$/)).sort(),T=({label:q,active:P,pulled:O,onClick:D,onDischarge:G})=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"5px"},children:[s.jsxs("div",{onClick:D,style:{width:"50px",height:"60px",background:O?"#500":"#333",border:"2px solid #555",borderRadius:"4px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:P?"0 0 10px #f00":"none",transform:O?"translateY(10px)":"none",transition:"transform 0.2s"},children:[s.jsx("div",{style:{fontSize:"10px",color:"#fff",fontWeight:"bold"},children:q}),s.jsx("div",{style:{width:"30px",height:"30px",background:P?"#f00":"#550000",borderRadius:"50%",marginTop:"5px"}}),s.jsx("div",{style:{fontSize:"8px",color:"#ccc"},children:O?"PULLED":"IN"})]}),O&&s.jsxs("div",{style:{display:"flex",gap:"5px",marginTop:"5px"},children:[s.jsx("button",{onClick:$=>{$.stopPropagation(),G(1)},style:{fontSize:"8px",padding:"2px",background:"#444",color:"#fff",border:"1px solid #666",cursor:"pointer"},children:"BTL 1"}),s.jsx("button",{onClick:$=>{$.stopPropagation(),G(2)},style:{fontSize:"8px",padding:"2px",background:"#444",color:"#fff",border:"1px solid #666",cursor:"pointer"},children:"BTL 2"})]})]});return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"FIRE PROTECTION"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"20px",flexWrap:"wrap"},children:[Y.map((q,P)=>{const O=q.replace("Handle","");return s.jsx(T,{label:`ENG ${P+1}`,active:Q[O],pulled:Q[q],onClick:()=>n("fire",q),onDischarge:D=>n("fire",`bottle${D}_discharge`)},q)}),s.jsx(T,{label:"APU",active:Q.apu,pulled:Q.apuHandle,onClick:()=>n("fire","apuHandle"),onDischarge:q=>n("fire",`bottle${q}_discharge`)})]})]})},ye=()=>{const Q=u("hydraulics",{}),Y=Object.keys(Q).sort();return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"HYDRAULICS"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Y.length}, 1fr)`,gap:"10px"},children:Y.map(T=>{const q=T.replace("sys","SYS ").toUpperCase(),P=Q[T];return s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("span",{style:{fontSize:"10px",color:"#aaa"},children:q}),s.jsx(I,{label:"PRESS",value:Math.round(P.pressure||0),unit:"PSI",max:4e3}),s.jsxs("div",{style:{fontSize:"10px",marginTop:"2px"},children:["QTY: ",Math.round(P.qty||0),"%"]})]},T)})}),s.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"10px",flexWrap:"wrap"},children:Y.map((T,q)=>{const P=Q[T];T.replace("sys","SYS ").toUpperCase();const O=s.jsx(A,{label:`ENG ${q+1}`,active:P.engPump,onClick:()=>n("hydraulics",`${T}.engPump`),annunciator:{label:"LOW PRESS",active:(P.pressure||0)<1500,color:"amber"},enabled:p},`${T}_eng`),D=s.jsx(A,{label:`ELEC ${q+1}`,active:P.elecPump,onClick:()=>n("hydraulics",`${T}.elecPump`),annunciator:{label:"OVERHEAT",active:!1,color:"amber"},enabled:p},`${T}_elec`);return s.jsxs("div",{style:{display:"flex",gap:"5px"},children:[O,D]},T)})})]})},ee=()=>s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"EXT LIGHTS"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",justifyItems:"center"},children:[s.jsx(A,{label:"LANDING",active:u("lighting.landing"),onClick:()=>n("lighting","landing"),invertLight:!0,subLabel:"ON",enabled:p}),s.jsx(A,{label:"TAXI",active:u("lighting.taxi"),onClick:()=>n("lighting","taxi"),invertLight:!0,subLabel:"ON",enabled:p}),s.jsx(A,{label:"STROBE",active:u("lighting.strobe"),onClick:()=>n("lighting","strobe"),invertLight:!0,subLabel:"ON",enabled:p}),s.jsx(A,{label:"BEACON",active:u("lighting.beacon"),onClick:()=>n("lighting","beacon"),invertLight:!0,subLabel:"ON",enabled:p}),s.jsx(A,{label:"NAV",active:u("lighting.nav"),onClick:()=>n("lighting","nav"),invertLight:!0,subLabel:"ON",enabled:p}),s.jsx(A,{label:"LOGO",active:u("lighting.logo"),onClick:()=>n("lighting","logo"),invertLight:!0,subLabel:"ON",enabled:p}),s.jsx(A,{label:"WING",active:u("lighting.wing"),onClick:()=>n("lighting","wing"),invertLight:!0,subLabel:"ON",enabled:p})]})]}),H=()=>{const Q=u("adirs.ir1","OFF"),Y=u("adirs.ir2","OFF"),T=u("adirs.aligned",!1),q=u("adirs.alignState",0),P=u("adirs.onBat",!1),O=D=>{const $=u(`adirs.${D}`,"OFF")==="OFF"?"NAV":"OFF";n("adirs",D,$)};return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"ADIRS"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"20px"},children:[s.jsx(A,{label:"IRS 1",active:Q==="NAV",onClick:()=>O("ir1"),subLabel:"NAV",annunciator:{label:"ON BAT",active:P,color:"amber"},enabled:d}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s.jsx("div",{style:{fontSize:"10px",color:"#ccc",marginBottom:"4px"},children:"ALIGN"}),T?s.jsx("div",{style:{color:"#0f0",fontWeight:"bold"},children:"RDY"}):Q!=="OFF"||Y!=="OFF"?s.jsx("div",{style:{width:"40px",background:"#333",height:"6px",borderRadius:"3px"},children:s.jsx("div",{style:{width:`${q}%`,background:"#fa0",height:"100%",borderRadius:"3px"}})}):s.jsx("div",{style:{color:"#444"},children:"OFF"})]}),s.jsx(A,{label:"IRS 2",active:Y==="NAV",onClick:()=>O("ir2"),subLabel:"NAV",annunciator:{label:"ON BAT",active:P,color:"amber"},enabled:d})]})]})},_=()=>{const Q=u("comms",{}),Y=u("transponder",{}),T=Q.vhf1||{active:"118.500",stby:"121.500"},q=Q.vhf2||{active:"121.900",stby:"119.100"},P=({label:O,freq:D,onSwap:G})=>s.jsxs("div",{style:{background:"#000",padding:"4px",borderRadius:"4px",border:"1px solid #444",marginBottom:"4px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2px"},children:[s.jsx("span",{style:{fontSize:"9px",color:"#888",fontWeight:"bold"},children:O}),s.jsx("button",{onClick:G,style:{fontSize:"8px",background:"#333",border:"1px solid #555",color:"#fff",cursor:"pointer",padding:"1px 4px",borderRadius:"2px"},children:"SWAP"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontSize:"14px",fontFamily:"monospace",color:"#ff9900",fontWeight:"bold",letterSpacing:"1px"},children:D.active}),s.jsx("div",{style:{fontSize:"12px",fontFamily:"monospace",color:"#cc7700",opacity:.8},children:D.stby})]})]});return s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"COMM / XPDR"}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[s.jsx(P,{label:"VHF 1",freq:T,onSwap:()=>n("comms","swap_vhf1")}),s.jsx(P,{label:"VHF 2",freq:q,onSwap:()=>n("comms","swap_vhf2")}),s.jsxs("div",{style:{background:"#000",padding:"4px",borderRadius:"4px",border:"1px solid #444",marginTop:"2px"},children:[s.jsxs("div",{style:{fontSize:"9px",color:"#888",marginBottom:"2px",fontWeight:"bold",display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"XPDR"}),s.jsx("span",{style:{color:Y.ident?"#0f0":"#444"},children:"IDENT"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontSize:"14px",fontFamily:"monospace",color:"#0f0",fontWeight:"bold",background:"#111",padding:"2px 4px",border:"1px solid #333",letterSpacing:"1px"},children:Y.code||"1200"}),s.jsx("div",{style:{transform:"scale(0.8)"},children:s.jsx(R,{label:"MODE",active:Y.mode==="TA/RA",onClick:()=>{const O=["STBY","ALT","TA/RA"],D=O.indexOf(Y.mode||"STBY"),G=O[(D+1)%O.length];n("transponder","mode",G)},subLabel:Y.mode||"STBY"})})]})]})]})]})},j=()=>s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"ICE & RAIN"}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"10px"},children:[s.jsx(A,{label:"WING",active:u("ice.wingAntiIce"),onClick:()=>n("ice","wingAntiIce"),annunciator:{label:"VALVE OPEN",active:u("ice.wingAntiIce"),color:"blue"},invertLight:!0,subLabel:"ON"}),s.jsx(A,{label:"ENG 1",active:u("ice.eng1AntiIce"),onClick:()=>n("ice","eng1AntiIce"),annunciator:{label:"VALVE OPEN",active:u("ice.eng1AntiIce"),color:"blue"},invertLight:!0,subLabel:"ON"}),s.jsx(A,{label:"ENG 2",active:u("ice.eng2AntiIce"),onClick:()=>n("ice","eng2AntiIce"),annunciator:{label:"VALVE OPEN",active:u("ice.eng2AntiIce"),color:"blue"},invertLight:!0,subLabel:"ON"}),s.jsx("div",{style:{width:"100%",height:"5px"}}),s.jsx(A,{label:"PROBE",active:u("ice.probeHeat",!0),onClick:()=>n("ice","probeHeat")})]})]}),F=()=>s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"WINDOW HEAT"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"4px",marginBottom:"8px"},children:[s.jsx(A,{label:"L SIDE",active:!0,onClick:()=>{},subLabel:"ON"}),s.jsx(A,{label:"L FWD",active:!0,onClick:()=>{},subLabel:"ON"}),s.jsx(A,{label:"R FWD",active:!0,onClick:()=>{},subLabel:"ON"}),s.jsx(A,{label:"R SIDE",active:!0,onClick:()=>{},subLabel:"ON"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"8px",borderTop:"1px solid #444",paddingTop:"4px"},children:[s.jsx(A,{label:"PROBE A",active:u("ice.probeHeat",!0),onClick:()=>n("ice","probeHeat"),subLabel:"ON"}),s.jsx(A,{label:"PROBE B",active:u("ice.probeHeat",!0),onClick:()=>n("ice","probeHeat"),subLabel:"ON"})]}),s.jsx("h4",{className:"panel-title",style:{marginTop:"4px"},children:"WING / ENG ANTI-ICE"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:[s.jsx(A,{label:"WING",active:u("ice.wingAntiIce"),onClick:()=>n("ice","wingAntiIce"),annunciator:{label:"VALVE OPEN",active:u("ice.wingAntiIce"),color:"blue"}}),s.jsx(A,{label:"ENG 1",active:u("ice.eng1AntiIce"),onClick:()=>n("ice","eng1AntiIce"),annunciator:{label:"COWL VALVE",active:u("ice.eng1AntiIce"),color:"blue"}}),s.jsx(A,{label:"ENG 2",active:u("ice.eng2AntiIce"),onClick:()=>n("ice","eng2AntiIce"),annunciator:{label:"COWL VALVE",active:u("ice.eng2AntiIce"),color:"blue"}})]})]}),z=()=>s.jsxs("div",{className:"panel-section",children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[s.jsxs("div",{children:[s.jsx("h4",{className:"panel-title",children:"EQUIP COOLING"}),s.jsxs("div",{style:{display:"flex",gap:"5px",justifyContent:"center"},children:[s.jsx(A,{label:"SUPPLY",active:!0,onClick:()=>{},subLabel:"NORM"}),s.jsx(A,{label:"EXHAUST",active:!0,onClick:()=>{},subLabel:"NORM"})]}),s.jsx("div",{style:{textAlign:"center",marginTop:"5px",border:"1px solid red",color:"red",fontSize:"10px",transform:"rotate(-5deg)",opacity:.7},children:"INOP"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"panel-title",children:"EMER LIGHTS"}),s.jsx("div",{style:{display:"flex",gap:"5px",justifyContent:"center"},children:s.jsx(A,{label:"EMER LTS",active:u("lighting.emergencyLights",!0),onClick:()=>n("lighting","emergencyLights"),subLabel:"ARM",annunciator:{label:"NOT ARMED",active:!u("lighting.emergencyLights",!0),color:"amber"}})})]})]}),s.jsxs("div",{style:{borderTop:"1px solid #444",marginTop:"10px",paddingTop:"5px"},children:[s.jsx("h4",{className:"panel-title",children:"SIGNS"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"15px"},children:[s.jsx(A,{label:"SEAT BELTS",active:u("signs.seatBelts"),onClick:()=>n("signs","seatBelts"),subLabel:"ON",invertLight:!0}),s.jsx(A,{label:"NO SMOKE",active:u("signs.noSmoking"),onClick:()=>n("signs","noSmoking"),subLabel:"ON",invertLight:!0}),s.jsx(A,{label:"ATTEND",active:!1,onClick:()=>{},subLabel:"CALL"}),s.jsx(A,{label:"GRD CALL",active:!1,onClick:()=>{},subLabel:"CALL"})]})]})]}),ne=()=>s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"FLT CONTROL"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px",justifyItems:"center"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"8px",color:"#aaa",marginBottom:"2px"},children:"FLT CONTROL"}),s.jsxs("div",{style:{display:"flex",gap:"4px"},children:[s.jsx(A,{label:"A",active:!1,onClick:()=>{},subLabel:"STBY RUD",annunciator:{label:"LOW PRESS",active:!1,color:"amber"}}),s.jsx(A,{label:"B",active:!1,onClick:()=>{},subLabel:"STBY RUD",annunciator:{label:"LOW PRESS",active:!1,color:"amber"}})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"8px",color:"#aaa",marginBottom:"2px"},children:"SPOILER"}),s.jsxs("div",{style:{display:"flex",gap:"4px"},children:[s.jsx(A,{label:"A",active:!1,onClick:()=>{}}),s.jsx(A,{label:"B",active:!1,onClick:()=>{}})]})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:"5px",gap:"10px"},children:[s.jsx(A,{label:"YAW DAMPER",active:u("flightControls.yawDamper",!0),onClick:()=>n("flightControls","yawDamper"),annunciator:{label:"YAW DAMPER",active:!u("flightControls.yawDamper",!0),color:"amber"}}),s.jsx(A,{label:"ALT FLAPS",active:!1,onClick:()=>{},subLabel:"ARM"})]}),s.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-15deg)",border:"2px solid red",color:"red",padding:"2px 5px",fontSize:"14px",fontWeight:"bold",pointerEvents:"none",opacity:.7},children:"INOP"})]}),oe=()=>s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"NAVIGATION"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[s.jsx(R,{label:"VHF NAV",active:!1,onClick:()=>{},subLabel:"NORMAL"}),s.jsx(R,{label:"IRS",active:!1,onClick:()=>{},subLabel:"NORMAL"}),s.jsx(R,{label:"FMC",active:!1,onClick:()=>{},subLabel:"NORMAL"}),s.jsx(R,{label:"DISPLAYS",active:!1,onClick:()=>{},subLabel:"AUTO"})]}),s.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-15deg)",border:"2px solid red",color:"red",padding:"2px 5px",fontSize:"14px",fontWeight:"bold",pointerEvents:"none",opacity:.7},children:"INOP"})]}),ie=()=>s.jsxs("div",{className:"b737-overhead-grid",children:[s.jsxs("div",{style:{gridArea:"col1",display:"flex",flexDirection:"column",gap:"5px"},children:[s.jsx(ne,{}),s.jsx(oe,{}),s.jsx(x,{}),s.jsx(ye,{}),s.jsx(_,{})]}),s.jsxs("div",{style:{gridArea:"col2",display:"flex",flexDirection:"column",gap:"5px"},children:[s.jsx(N,{}),s.jsx(V,{}),s.jsx(k,{}),s.jsx(ce,{})]}),s.jsxs("div",{style:{gridArea:"col3",display:"flex",flexDirection:"column",gap:"5px"},children:[s.jsx(F,{}),s.jsx(ae,{}),s.jsx(z,{}),s.jsx(ee,{})]})]}),ue=()=>s.jsxs("div",{className:"b737-overhead-grid",style:{gap:"15px"},children:[s.jsxs("div",{style:{gridArea:"col1",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx(H,{}),s.jsx(E,{}),s.jsx(ye,{}),s.jsx(_,{})]}),s.jsxs("div",{style:{gridArea:"col2",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx(ce,{}),s.jsx(pe,{}),s.jsx(V,{}),s.jsx(k,{}),s.jsx(B,{})]}),s.jsxs("div",{style:{gridArea:"col3",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx(ae,{}),s.jsx(j,{}),s.jsx(ee,{})]})]}),pe=()=>s.jsxs("div",{className:"panel-section",children:[s.jsx("h4",{className:"panel-title",children:"MISC"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[s.jsx(A,{label:"EMER LTS",active:u("lighting.emergencyLights",!0),onClick:()=>n("lighting","emergencyLights"),subLabel:"ARM",annunciator:{label:"OFF",active:!u("lighting.emergencyLights",!0),color:"amber"}}),s.jsx(A,{label:"SEAT BELTS",active:u("signs.seatBelts"),onClick:()=>n("signs","seatBelts"),subLabel:"ON",invertLight:!0}),s.jsx(A,{label:"NO SMOKE",active:u("signs.noSmoking"),onClick:()=>n("signs","noSmoking"),subLabel:"ON",invertLight:!0})]})]});return s.jsxs("div",{className:"overhead-overlay",children:[s.jsxs("div",{className:"overhead-container",children:[s.jsx("button",{className:"close-btn",onClick:t,children:"X"}),s.jsxs("div",{className:"overhead-grid",children:[i&&s.jsxs("div",{className:"airbus-overhead-grid",children:[s.jsx("div",{style:{gridArea:"adirs"},children:s.jsx(H,{})}),s.jsx("div",{style:{gridArea:"fire"},children:s.jsx(ce,{})}),s.jsx("div",{style:{gridArea:"lights"},children:s.jsx(ee,{})}),s.jsx("div",{style:{gridArea:"hyd"},children:s.jsx(ye,{})}),s.jsx("div",{style:{gridArea:"elec"},children:s.jsx(E,{})}),s.jsx("div",{style:{gridArea:"aircond"},children:s.jsx(ae,{})}),s.jsx("div",{style:{gridArea:"fuel"},children:s.jsx(B,{})}),s.jsx("div",{style:{gridArea:"engine"},children:s.jsx(V,{})}),s.jsx("div",{style:{gridArea:"apu"},children:s.jsx(k,{})}),s.jsxs("div",{style:{gridArea:"misc"},children:[s.jsx(_,{}),s.jsx(pe,{})]})]}),o&&!i&&s.jsx(ie,{}),c&&!i&&!o&&s.jsx(ue,{}),!i&&!o&&!c&&s.jsx(ue,{})]})]}),s.jsx("style",{children:`
        .overhead-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 2000;
            display: flex; justify-content: center; align-items: center;
        }
        .overhead-container {
            width: 960px; height: 720px;
            background: #252525;
            border: 4px solid #444; border-radius: 10px;
            display: flex; flexDirection: column;
            padding: 10px;
            color: #eee;
            font-family: 'Roboto', sans-serif;
            box-shadow: 0 0 50px #000;
            position: relative;
        }
        .close-btn {
            position: absolute; top: 10px; right: 10px;
            background: #c00; color: white; border: 1px solid #fff; 
            width: 24px; height: 24px;
            font-weight: bold; cursor: pointer; border-radius: 4px;
            z-index: 10; display: flex; align-items: center; justify-content: center;
        }
        .overhead-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px;
            flex: 1; overflow-y: auto;
            transform: scale(0.95); transform-origin: center top;
        }

        .b737-overhead-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-areas: "col1 col2 col3";
            gap: 5px;
            height: 100%;
        }
        .airbus-overhead-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr;
            grid-template-areas:
                "adirs fire lights"
                "hyd elec aircond"
                "fuel engine apu"
                "misc misc misc";
             gap: 4px;
        }
        .panel-section {
            background: #1a1a1a; border: 2px solid #333;
            border-radius: 6px; padding: 5px; margin-bottom: 0;
        }
        .panel-title {
            margin: 0 0 5px 0; border-bottom: 1px solid #444;
            font-size: 12px; color: #ccc; text-align: center;
            padding-bottom: 2px;
        }
        .fuel-qty {
            text-align: center; font-size: 10px; color: #aaa;
        }
        .fuel-qty .digital {
            display: block; font-size: 14px; color: #fff; font-family: monospace;
        }
        .digital-qty {
            font-family: monospace; color: #ffaa00;
            background: #222; padding: 2px 5px; border: 1px solid #444;
            font-size: 14px; min-width: 40px; text-align: right;
        }
        /* Boeing Switch Animation */
        .boeing-switch { transition: background 0.2s; }
        .boeing-switch.active { background: linear-gradient(to right, #ccc, #eee, #ccc); }
      `})]})},aw=({controlYaw:t,flightState:e})=>{const[n,r]=L.useState(!1),[a,i]=L.useState(0),o=L.useRef(null),l=50,c=L.useRef(0);L.useEffect(()=>{i(0)},[]);const u=L.useCallback(()=>{if(!n||e!=null&&e.autopilot||e!=null&&e.hasCrashed)return;const h=Date.now();if(h-c.current<50)return;c.current=h;const v=a/l;t(v)},[n,a,t,e]);L.useEffect(()=>{let h;return n&&(h=setInterval(u,50)),()=>clearInterval(h)},[n,u]);const d=h=>{e!=null&&e.autopilot||e!=null&&e.hasCrashed||(h.preventDefault(),r(!0))},y=L.useCallback(h=>{if(!n||!o.current)return;const v=o.current.getBoundingClientRect(),w=v.left+v.width/2,C=h.clientX-w,g=Math.max(-l,Math.min(l,C));i(g)},[n]),p=L.useCallback(()=>{n&&(r(!1),i(0),t(0))},[n,t]);return L.useEffect(()=>{if(n)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",p),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",p)}},[n,y,p]),s.jsxs("div",{style:{marginTop:"10px",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",padding:"10px",borderRadius:"8px",border:"2px solid #475569",width:"100%",maxWidth:"180px",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("div",{style:{fontSize:"10px",color:"#94a3b8",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"1px",fontWeight:"bold"},children:"Rudder / Steering"}),s.jsxs("div",{ref:o,className:e!=null&&e.autopilot||e!=null&&e.hasCrashed?"disabled":"",onMouseDown:d,style:{position:"relative",width:"140px",height:"30px",background:"#0f172a",borderRadius:"15px",border:"1px solid #334155",cursor:e!=null&&e.autopilot||e!=null&&e.hasCrashed?"not-allowed":"grab"},children:[s.jsx("div",{style:{position:"absolute",left:"50%",top:"5px",bottom:"5px",width:"2px",background:"#334155",transform:"translateX(-50%)"}}),s.jsxs("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"24px",background:"linear-gradient(to bottom, #f59e0b, #d97706)",borderRadius:"4px",transform:`translate(calc(-50% + ${a}px), -50%)`,border:"1px solid #b45309",boxShadow:"0 2px 4px rgba(0,0,0,0.5)",transition:n?"none":"transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1)",display:"flex",alignItems:"center",justifyContent:"center"},children:[s.jsx("div",{style:{width:"2px",height:"12px",background:"rgba(255,255,255,0.3)",margin:"0 2px"}}),s.jsx("div",{style:{width:"2px",height:"12px",background:"rgba(255,255,255,0.3)",margin:"0 2px"}})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:"4px",fontSize:"9px",color:"#64748b"},children:[s.jsx("span",{children:"L"}),s.jsx("span",{children:"R"})]})]})};const iw=({activePanel:t,onTogglePanel:e})=>{const n=[{id:"checklist",label:"Checklist",icon:"",disabled:!1},{id:"flight_computer",label:"F-Comp",icon:"",disabled:!1},{id:"systems",label:"Systems",icon:"",disabled:!1},{id:"timer",label:"Timer",icon:"",disabled:!1},{id:"save_load",label:"Save/Load",icon:"",disabled:!1},{id:"inspect",label:"Inspect",icon:"",disabled:!1},{id:"settings",label:"Settings",icon:"",disabled:!0}];return s.jsx("div",{className:"flight-sidebar",children:n.map(r=>s.jsxs("button",{className:`sidebar-btn ${t===r.id?"active":""} ${r.disabled?"disabled":""}`,onClick:()=>!r.disabled&&e(r.id),title:r.label,children:[s.jsx("span",{className:"sidebar-icon",children:r.icon}),s.jsx("span",{className:"sidebar-label",children:r.label})]},r.id))})},Ho="AIRCRASHSIM2025",ow=t=>{try{const e=JSON.stringify(t);let n="";for(let r=0;r<e.length;r++){const a=e.charCodeAt(r)^Ho.charCodeAt(r%Ho.length);n+=String.fromCharCode(a)}return btoa(n)}catch(e){return console.error("Encryption failed:",e),null}},sw=t=>{try{const e=atob(t);let n="";for(let r=0;r<e.length;r++){const a=e.charCodeAt(r)^Ho.charCodeAt(r%Ho.length);n+=String.fromCharCode(a)}return JSON.parse(n)}catch(e){return console.error("Decryption failed:",e),null}};const lw=({flightData:t,physicsState:e,physicsService:n,flightPlan:r,weatherData:a,aircraftModel:i,onClose:o,onLoadFlight:l})=>{var g,m,f,S,A,I;const[c,u]=L.useState(null),[d,y]=L.useState(null),{user:p}=Zc(),h=()=>{const R=n&&typeof n.getSerializableState=="function"?n.getSerializableState():e;return{version:"2.0",timestamp:Date.now(),flightData:t,physicsState:R,runwayGeometry:t==null?void 0:t.runwayGeometry,flightPlan:r,weatherData:a,aircraftModel:i}},v=()=>{try{const R=h(),x=ow(R);if(!x)throw new Error("Encryption failed");const N=new Blob([x],{type:"text/plain"}),E=URL.createObjectURL(N),k=document.createElement("a");k.href=E,k.download=`flight_save_${new Date().toISOString().replace(/[:.]/g,"-")}.acs`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(E),y("Flight saved successfully!"),setTimeout(()=>y(null),3e3)}catch(R){u("Failed to save flight: "+R.message)}},w=async()=>{try{const R=h(),{error:x}=await ec.saveFlight(R);if(x)throw x;y("Cloud save successful!"),setTimeout(()=>y(null),3e3)}catch(R){u("Failed to save to cloud: "+R.message)}},C=R=>{const x=R.target.files[0];if(!x)return;const N=new FileReader;N.onload=E=>{try{const k=E.target.result,B=sw(k);if(!B)throw new Error("Invalid save file or decryption failed");B.version!=="1.0"&&console.warn("Version mismatch, attempting to load anyway..."),l(B),y("Flight loaded successfully!"),setTimeout(()=>{y(null),o()},1500)}catch(k){u("Failed to load flight: "+k.message)}},N.readAsText(x)};return s.jsxs("div",{className:"save-load-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx("h3",{children:"Save & Load Flight"}),s.jsx("button",{className:"close-btn",onClick:o,children:""})]}),s.jsxs("div",{className:"panel-content",children:[s.jsxs("div",{className:"flight-manifest",children:[s.jsx("h4",{children:"Current Flight Manifest"}),s.jsxs("div",{className:"manifest-details",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Aircraft:"})," ",(i==null?void 0:i.name)||"Unknown"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Position:"})," ",(m=(g=t==null?void 0:t.position)==null?void 0:g.latitude)==null?void 0:m.toFixed(4),", ",(S=(f=t==null?void 0:t.position)==null?void 0:f.longitude)==null?void 0:S.toFixed(4)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Altitude:"})," ",(A=t==null?void 0:t.altitude)==null?void 0:A.toFixed(0)," ft"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Heading:"})," ",(I=t==null?void 0:t.heading)==null?void 0:I.toFixed(0),""]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phase:"})," ",r?"Active Flight Plan":"Free Flight"]})]})]}),s.jsxs("div",{className:"actions-row",children:[s.jsxs("div",{className:"action-card",children:[s.jsx("h5",{children:"Save Flight"}),s.jsx("p",{children:"Encrypt and download current flight state."}),s.jsx("button",{className:"action-btn save-btn",onClick:v,children:" Download Save File"})]}),p&&s.jsxs("div",{className:"action-card",children:[s.jsx("h5",{children:"Cloud Save"}),s.jsxs("p",{children:["Save to your account (",p.email,")."]}),s.jsx("button",{className:"action-btn save-btn",onClick:w,style:{background:"#3b82f6"},children:" Save to Cloud"})]}),s.jsxs("div",{className:"action-card",children:[s.jsx("h5",{children:"Load Flight"}),s.jsx("p",{children:"Restore flight from a previous save file."}),s.jsxs("label",{className:"action-btn load-btn",children:[" Upload Save File",s.jsx("input",{type:"file",accept:".acs",onChange:C,style:{display:"none"}})]})]})]}),c&&s.jsx("div",{className:"status-msg error",children:c}),d&&s.jsx("div",{className:"status-msg success",children:d})]})]})};const cw=({timeScale:t,setTimeScale:e,flightData:n,flightPlan:r,onClose:a})=>{const[i,o]=L.useState(!0),[l,c]=L.useState(!0),[u,d]=L.useState(!1),[y,p]=L.useState(5),[h,v]=L.useState(0),[w,C]=L.useState(!1);L.useEffect(()=>{C(t>1)},[t]),L.useEffect(()=>{let A;return w&&u&&h>0&&(A=setInterval(()=>{v(I=>I<=1?(e(1),0):I-1)},1e3/t)),()=>clearInterval(A)},[w,u,t,e]),L.useEffect(()=>{w&&(i&&(Math.abs(n.roll)>45||Math.abs(n.pitch)>25||!n.autopilotEngaged)&&(console.warn(" Auto-disengaging time accel: Unstable or AP off"),e(1)),l&&n.currentWaypointIndex)},[n,w,i,e]);const g=b.useRef(n==null?void 0:n.currentWaypointIndex);L.useEffect(()=>{w&&l&&(n==null?void 0:n.currentWaypointIndex)!==g.current&&(console.log(" Waypoint passed. Disengaging time accel."),e(1)),g.current=n==null?void 0:n.currentWaypointIndex},[n==null?void 0:n.currentWaypointIndex,w,l,e]);const m=()=>{if(!n.autopilotEngaged){alert("Autopilot must be engaged to enable time acceleration.");return}if(Math.abs(n.roll)>30||Math.abs(n.pitch)>15){alert("Aircraft is unstable. Cannot engage time acceleration.");return}u&&v(y*60),e(10)},f=()=>{e(1)},S=A=>{const I=Math.floor(A/60),R=Math.floor(A%60);return`${I}:${R.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"timer-panel",children:[s.jsxs("div",{className:"panel-header",children:[s.jsx("h3",{children:"Time Acceleration"}),s.jsx("button",{className:"close-btn",onClick:a,children:""})]}),s.jsxs("div",{className:"panel-content",children:[s.jsxs("div",{className:"status-card",children:[s.jsx("div",{className:`status-indicator ${w?"active":""}`,children:w?"10x SPEED":"REAL TIME"}),s.jsx("div",{className:"controls",children:w?s.jsx("button",{className:"stop-btn",onClick:f,children:" Disengage"}):s.jsx("button",{className:"start-btn",onClick:m,children:" Engage 10x"})})]}),s.jsxs("div",{className:"settings-section",children:[s.jsx("h4",{children:"Auto-Disengage Conditions"}),s.jsxs("label",{className:"checkbox-row",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:A=>o(A.target.checked)}),s.jsx("span",{children:"Unstable / AP Disconnect"})]}),s.jsxs("label",{className:"checkbox-row",children:[s.jsx("input",{type:"checkbox",checked:l,onChange:A=>c(A.target.checked)}),s.jsx("span",{children:"Next Waypoint"})]}),s.jsxs("label",{className:"checkbox-row",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:A=>d(A.target.checked)}),s.jsxs("span",{children:["Timer (",y," min)"]})]}),u&&s.jsxs("div",{className:"timer-input-row",children:[s.jsx("input",{type:"range",min:"1",max:"60",value:y,onChange:A=>p(parseInt(A.target.value)),disabled:w}),s.jsxs("span",{children:[y," min"]})]}),w&&u&&s.jsxs("div",{className:"countdown-display",children:["Remaining: ",S(h)]})]})]})]})};const uw=({flightPlan:t,onUpdateFlightPlan:e,flightState:n})=>{var Y;const{t:r}=qn(),[a,i]=L.useState("plan"),[o,l]=L.useState([]),[c,u]=L.useState(""),[d,y]=L.useState(""),[p,h]=L.useState(""),[v,w]=L.useState(""),[C,g]=L.useState([]),[m,f]=L.useState("all"),[S,A]=L.useState([]),[I,R]=L.useState(!1),[x,N]=L.useState(35e3),[E,k]=L.useState(""),[B,ae]=L.useState("ft"),[V,ce]=L.useState("m"),[ye,ee]=L.useState(null);L.useEffect(()=>{const T=parseFloat(E);if(isNaN(T)){ee(null);return}let q=0;B==="ft"&&V==="m"?q=T*.3048:B==="m"&&V==="ft"?q=T/.3048:B==="kts"&&V==="kmh"?q=T*1.852:B==="kmh"&&V==="kts"?q=T/1.852:B==="inHg"&&V==="hPa"?q=T*33.8639:B==="hPa"&&V==="inHg"?q=T/33.8639:B==="nm"&&V==="km"?q=T*1.852:B==="km"&&V==="nm"?q=T/1.852:B===V&&(q=T),ee(q)},[E,B,V]);const _=(()=>{let T="---",q="---",P="---";if(o.length>0&&n.groundSpeed>10){let Z=n.currentWaypointIndex||0;if(Z<o.length){const de=o[Z];P=de.label||`WP${Z+1}`;const U=Ve.calculateDistance({latitude:n.latitude,longitude:n.longitude},{latitude:de.latitude,longitude:de.longitude});q=U.toFixed(1)+" nm";const ve=U/n.groundSpeed,fe=Math.floor(ve*60),Ne=Math.floor(ve*3600%60);T=`${fe}m ${Ne}s`}else P="End of Flight Plan"}let O="---";const D=(n.engineFuelFlow||[0,0]).reduce((Z,de)=>Z+de,0);let G=0;if(D>.01){G=D*3600;const de=(n.fuel||0)/G,U=Math.floor(de*60);O=`${Math.floor(de)}h ${U%60}m`}let $="---";const M=n.verticalSpeed;if(Math.abs(M)>50){const Z=x-(n.altitude||0);if(Z>0&&M>0||Z<0&&M<0){const de=Math.abs(Z/M);$=`${Math.floor(de)}m ${Math.floor(de%1*60)}s`}else $="Wrong VS Direction"}else $="Stable";return{timeToWpt:T,distToWpt:q,nextWpLabel:P,timeFuel:O,timeAlt:$,totalFlow:G}})();L.useEffect(()=>{t&&(Array.isArray(t)?l(t):t.waypoints&&Array.isArray(t.waypoints)&&l(t.waypoints))},[t]);const j=T=>{l(T),e&&e(T)},F=T=>{const q=[...o];q.splice(T,1),j(q)},z=T=>{const q=[...o];q[T]={...q[T],isHold:!q[T].isHold},j(q)},ne=()=>{const T=parseFloat(c),q=parseFloat(d);if(isNaN(T)||isNaN(q)){alert("Please enter valid coordinates");return}const P={latitude:T,longitude:q,label:p||`WPT${o.length+1}`,type:"user"},O=[...o,P];j(O),u(""),y(""),h(""),i("waypoints")},oe=T=>{if(T.preventDefault(),v.length<2)return;const q=Ve.searchAirports(v,{type:m==="all"?"all":m,includeEmergency:m==="emergency"||m==="all"});g(q)},ie=(T,q)=>{if(!q)return{latitude:T.latitude,longitude:T.longitude,label:T.iata||T.icao};const P=Ve.getRunwayGeometry(T.iata||T.icao,q);if(P){const O=P.thresholdStart.latitude*Math.PI/180,D=P.thresholdStart.longitude*Math.PI/180,G=(P.heading+180)*Math.PI/180,$=15,M=3440.065,Z=Math.asin(Math.sin(O)*Math.cos($/M)+Math.cos(O)*Math.sin($/M)*Math.cos(G)),de=D+Math.atan2(Math.sin(G)*Math.sin($/M)*Math.cos(O),Math.cos($/M)-Math.sin(O)*Math.sin(Z)),ve=(Number(T.elevation)||0)+4e3;return{latitude:Z*180/Math.PI,longitude:de*180/Math.PI,altitude:ve,label:`${T.iata||T.icao}`}}return{latitude:T.latitude,longitude:T.longitude,label:T.iata||T.icao}},ue=T=>{const q=[];T.runways?T.runways.forEach($=>{$.name.split("/").forEach(Z=>q.push(Z.trim()))}):T.runway?T.runway.split("/").forEach(M=>q.push(M.trim())):(q.push("09"),q.push("27"));let P=q.length>0?q[0]:null;if(n&&n.latitude&&n.longitude&&q.length>1){const $=n.latitude*Math.PI/180,M=n.longitude*Math.PI/180,Z=T.latitude*Math.PI/180,de=T.longitude*Math.PI/180,U=Math.sin(de-M)*Math.cos(Z),ve=Math.cos($)*Math.sin(Z)-Math.sin($)*Math.cos(Z)*Math.cos(de-M),Ne=(Math.atan2(U,ve)*180/Math.PI+360)%360;let Fe=360;q.forEach(we=>{const xe=we.match(/^(\d{2})/);if(xe){const te=parseInt(xe[1])*10;let Me=Math.abs(Ne-te);Me>180&&(Me=360-Me),Me<Fe&&(Fe=Me,P=we)}})}const O=ie(T,P),D={latitude:O.latitude,longitude:O.longitude,label:O.label,type:"airport",details:T,availableRunways:q,selectedRunway:P},G=[...o,D];j(G),i("waypoints")},pe=(T,q)=>{const P=[...o],O=P[T],D=ie(O.details,q);P[T]={...O,selectedRunway:q,latitude:D.latitude,longitude:D.longitude,label:D.label},j(P)},Q=()=>{if(!n||!n.latitude||!n.longitude)return;R(!0);const q=Ve.getAllAirports().map(O=>{const D=Ve.calculateDistance({latitude:n.latitude,longitude:n.longitude},{latitude:O.latitude,longitude:O.longitude});return{airport:O,distance:D}});q.sort((O,D)=>O.distance-D.distance);const P=q.slice(0,20).map(O=>O.airport);A(P),R(!1)};return L.useEffect(()=>{a==="nearest"&&Q()},[a]),s.jsxs("div",{className:"flight-computer-panel",children:[s.jsxs("div",{className:"fc-header",children:[s.jsx("h3",{children:r("ui.flight_computer.title")}),s.jsx("button",{className:"close-btn",onClick:onClose,children:""})]}),s.jsxs("div",{className:"fc-tabs",children:[s.jsx("button",{className:a==="waypoints"?"active":"",onClick:()=>i("waypoints"),children:r("ui.flight_computer.tabs.plan")}),s.jsx("button",{className:a==="add"?"active":"",onClick:()=>i("add"),children:r("ui.flight_computer.tabs.add")}),s.jsx("button",{className:a==="nearest"?"active":"",onClick:()=>i("nearest"),children:r("ui.flight_computer.tabs.nearest")}),s.jsx("button",{className:a==="utils"?"active":"",onClick:()=>i("utils"),children:r("ui.flight_computer.tabs.perf")})]}),s.jsxs("div",{className:"fc-content",children:[a==="waypoints"&&s.jsx("div",{className:"waypoints-list",children:o.length===0?s.jsx("div",{className:"empty-state",children:r("ui.flight_computer.plan.empty")}):s.jsx("ul",{children:o.map((T,q)=>{var G,$;const P=n&&n.currentWaypointIndex!==void 0?n.currentWaypointIndex:0,O=q<P,D=q===P;return s.jsxs("li",{className:"waypoint-item",style:{opacity:O?.5:1,borderLeft:D?"3px solid #4facfe":"1px solid rgba(255, 255, 255, 0.05)",background:D?"rgba(79, 172, 254, 0.1)":"rgba(255, 255, 255, 0.03)"},children:[s.jsx("span",{className:"wp-index",style:{color:D?"#4facfe":"#666"},children:q+1}),s.jsxs("div",{className:"wp-info",children:[s.jsxs("span",{className:"wp-label",style:{color:D?"#fff":O?"#888":"#e0e0e0"},children:[T.label," ",D&&s.jsx("small",{style:{color:"#4facfe",marginLeft:"5px"},children:r("ui.flight_computer.plan.active")})]}),s.jsxs("span",{className:"wp-coords",children:[T.latitude.toFixed(4),", ",T.longitude.toFixed(4)]}),T.type==="airport"&&(T.availableRunways||((G=T.details)==null?void 0:G.runways))&&s.jsx("select",{value:T.selectedRunway||"",onChange:M=>pe(q,M.target.value),className:"runway-select",onClick:M=>M.stopPropagation(),style:{marginLeft:"8px",padding:"2px 4px",fontSize:"11px",background:"#333",color:"#0f0",border:"1px solid #0f0",borderRadius:"3px"},children:(T.availableRunways||(($=T.details)!=null&&$.runways?T.details.runways.flatMap(M=>M.name.split("/").map(Z=>Z.trim())):[])).map(M=>s.jsxs("option",{value:M,children:["RWY ",M]},M))})]}),s.jsx("button",{className:"hold-btn",onClick:()=>z(q),style:{marginLeft:"8px",background:T.isHold?"#eab308":"#334155",color:T.isHold?"black":"white",border:"1px solid #475569",borderRadius:"3px",cursor:"pointer",fontSize:"10px",padding:"2px 6px",fontWeight:"bold",transition:"all 0.2s"},title:"Toggle Hold Pattern (Orbit)",children:T.isHold?r("ui.flight_computer.plan.holding"):r("ui.flight_computer.plan.hold")}),s.jsx("button",{className:"delete-btn",onClick:()=>F(q),children:""})]},q)})})}),a==="add"&&s.jsxs("div",{className:"add-waypoint-section",children:[s.jsxs("div",{className:"manual-input",children:[s.jsx("h4",{children:r("ui.flight_computer.add.manual_entry")}),s.jsxs("div",{className:"input-group",children:[s.jsx("input",{type:"text",placeholder:r("ui.flight_computer.add.lat_placeholder"),value:c,onChange:T=>u(T.target.value)}),s.jsx("input",{type:"text",placeholder:r("ui.flight_computer.add.lon_placeholder"),value:d,onChange:T=>y(T.target.value)})]}),s.jsx("input",{type:"text",placeholder:r("ui.flight_computer.add.label_placeholder"),value:p,onChange:T=>h(T.target.value),className:"label-input"}),s.jsx("button",{className:"action-btn",onClick:ne,children:r("ui.flight_computer.add.add_coordinates")})]}),s.jsx("div",{className:"divider",children:r("ui.flight_computer.add.or")}),s.jsxs("div",{className:"search-input",children:[s.jsx("h4",{children:r("ui.flight_computer.add.airport_search")}),s.jsxs("form",{onSubmit:oe,children:[s.jsx("input",{type:"text",placeholder:r("ui.flight_computer.add.search_placeholder"),value:v,onChange:T=>w(T.target.value)}),s.jsxs("div",{className:"search-options",children:[s.jsxs("label",{children:[s.jsx("input",{type:"radio",checked:m==="all",onChange:()=>f("all")})," ",r("ui.flight_computer.add.search_types.all")]}),s.jsxs("label",{children:[s.jsx("input",{type:"radio",checked:m==="normal",onChange:()=>f("normal")})," ",r("ui.flight_computer.add.search_types.normal")]}),s.jsxs("label",{children:[s.jsx("input",{type:"radio",checked:m==="emergency",onChange:()=>f("emergency")})," ",r("ui.flight_computer.add.search_types.emergency")]})]}),s.jsx("button",{type:"submit",className:"action-btn secondary",children:r("ui.flight_computer.add.search_btn")})]}),s.jsx("div",{className:"search-results",children:C.map(T=>s.jsxs("div",{className:"search-result-item",children:[s.jsxs("div",{className:"airport-info",children:[s.jsxs("span",{className:"airport-code",children:[T.iata,"/",T.icao]}),s.jsx("span",{className:"airport-name",children:T.name})]}),s.jsx("button",{className:"add-btn",onClick:()=>ue(T),children:"+"})]},T.icao))})]})]}),a==="nearest"&&s.jsxs("div",{className:"nearest-section",children:[I?s.jsx("div",{children:"Finding airports..."}):S.length===0?s.jsx("div",{children:"No airports found."}):s.jsx("ul",{className:"nearest-list",children:S.map(T=>{const q=Ve.calculateDistance({latitude:n.latitude,longitude:n.longitude},{latitude:T.latitude,longitude:T.longitude});return s.jsxs("li",{className:"nearest-item",children:[s.jsxs("div",{className:"airport-details",children:[s.jsx("span",{className:"code",children:T.iata||T.icao}),s.jsx("span",{className:"name",children:T.name}),s.jsxs("span",{className:"dist",children:[q," nm"]}),T.type==="emergency"&&s.jsx("span",{className:"tag emergency",children:"EMERGENCY"})]}),s.jsx("button",{className:"direct-btn",onClick:()=>ue(T),children:"Add"})]},T.icao)})}),s.jsx("button",{className:"refresh-btn",onClick:Q,children:"Refresh"})]}),a==="radio"&&s.jsx("div",{className:"radio-section",style:{padding:"10px",color:"#e2e8f0"},children:s.jsxs("div",{className:"utils-block",style:{marginBottom:"20px",background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"4px"},children:[s.jsx("h4",{style:{margin:"0 0 10px 0",borderBottom:"1px solid #475569",paddingBottom:"5px"},children:"Navigation Radio"}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("div",{style:{color:"#94a3b8",fontSize:"12px",marginBottom:"5px"},children:"Current NAV1 Frequency"}),s.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4ade80",fontFamily:"monospace"},children:[(Y=n==null?void 0:n.autopilotDebug)!=null&&Y.nav1Frequency?n.autopilotDebug.nav1Frequency.toFixed(2):"---"," ",s.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:"MHz"})]})]}),s.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"flex-end"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("label",{style:{display:"block",color:"#94a3b8",fontSize:"12px",marginBottom:"5px"},children:"Set Frequency (MHz)"}),s.jsx("input",{type:"number",step:"0.05",placeholder:"108.00 - 117.95",value:nav1FreqInput,onChange:T=>setNav1FreqInput(T.target.value),style:{width:"100%",background:"#1e293b",border:"1px solid #475569",color:"white",padding:"8px",borderRadius:"4px",fontSize:"16px"}})]}),s.jsx("button",{onClick:()=>{const T=parseFloat(nav1FreqInput);!isNaN(T)&&T>=108&&T<=118?(e({...t,nav1Freq:T.toFixed(2)}),setNav1FreqInput("")):alert(r("flight_computer.add.alerts.invalid_freq"))},style:{background:"#0ea5e9",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",height:"38px"},children:"TUNE"})]}),s.jsx("div",{style:{marginTop:"10px",fontSize:"11px",color:"#64748b"},children:"Common ILS Frequencies: 108.10, 108.15, ..., 111.95"})]})}),a==="utils"&&s.jsxs("div",{className:"utils-section",style:{padding:"10px",color:"#e2e8f0"},children:[s.jsxs("div",{className:"utils-block",style:{marginBottom:"20px",background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"4px"},children:[s.jsx("h4",{style:{margin:"0 0 10px 0",borderBottom:"1px solid #475569",paddingBottom:"5px"},children:"Predictions"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"12px"},children:[s.jsx("div",{style:{color:"#94a3b8"},children:"Next Waypoint:"}),s.jsx("div",{style:{textAlign:"right",fontWeight:"bold"},children:_.nextWpLabel}),s.jsx("div",{style:{color:"#94a3b8"},children:"Distance:"}),s.jsx("div",{style:{textAlign:"right"},children:_.distToWpt}),s.jsx("div",{style:{color:"#94a3b8"},children:"ETE to WPT:"}),s.jsx("div",{style:{textAlign:"right",color:"#4ade80"},children:_.timeToWpt}),s.jsx("div",{style:{borderTop:"1px solid #334155",gridColumn:"1/-1",margin:"4px 0"}}),s.jsx("div",{style:{color:"#94a3b8"},children:"Fuel Flow:"}),s.jsxs("div",{style:{textAlign:"right"},children:[_.totalFlow.toFixed(0)," kg/h"]}),s.jsx("div",{style:{color:"#94a3b8"},children:"Time to Empty:"}),s.jsx("div",{style:{textAlign:"right",color:"#f59e0b"},children:_.timeFuel}),s.jsx("div",{style:{borderTop:"1px solid #334155",gridColumn:"1/-1",margin:"4px 0"}}),s.jsx("div",{style:{color:"#94a3b8",alignSelf:"center"},children:"Target Alt (ft):"}),s.jsx("div",{style:{textAlign:"right"},children:s.jsx("input",{type:"number",value:x,onChange:T=>N(parseFloat(T.target.value)),style:{width:"60px",background:"#1e293b",border:"1px solid #475569",color:"white",padding:"2px"}})}),s.jsx("div",{style:{color:"#94a3b8"},children:"Time to Alt:"}),s.jsx("div",{style:{textAlign:"right",color:"#60a5fa"},children:_.timeAlt})]})]}),s.jsxs("div",{className:"utils-block",style:{background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"4px"},children:[s.jsx("h4",{style:{margin:"0 0 10px 0",borderBottom:"1px solid #475569",paddingBottom:"5px"},children:"Unit Converter"}),s.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:s.jsx("input",{type:"number",value:E,onChange:T=>k(T.target.value),placeholder:"Value",style:{flex:1,background:"#1e293b",border:"1px solid #475569",color:"white",padding:"4px"}})}),s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"10px"},children:[s.jsxs("select",{value:B,onChange:T=>ae(T.target.value),style:{background:"#1e293b",border:"1px solid #475569",color:"white",padding:"4px",flex:1},children:[s.jsx("option",{value:"ft",children:"Feet (ft)"}),s.jsx("option",{value:"m",children:"Meters (m)"}),s.jsx("option",{value:"kts",children:"Knots (kts)"}),s.jsx("option",{value:"kmh",children:"Km/h"}),s.jsx("option",{value:"inHg",children:"inHg"}),s.jsx("option",{value:"hPa",children:"hPa"}),s.jsx("option",{value:"nm",children:"Naut. Miles"}),s.jsx("option",{value:"km",children:"Kilometers"})]}),s.jsx("span",{children:""}),s.jsxs("select",{value:V,onChange:T=>ce(T.target.value),style:{background:"#1e293b",border:"1px solid #475569",color:"white",padding:"4px",flex:1},children:[s.jsx("option",{value:"ft",children:"Feet (ft)"}),s.jsx("option",{value:"m",children:"Meters (m)"}),s.jsx("option",{value:"kts",children:"Knots (kts)"}),s.jsx("option",{value:"kmh",children:"Km/h"}),s.jsx("option",{value:"inHg",children:"inHg"}),s.jsx("option",{value:"hPa",children:"hPa"}),s.jsx("option",{value:"nm",children:"Naut. Miles"}),s.jsx("option",{value:"km",children:"Kilometers"})]})]}),s.jsxs("div",{style:{textAlign:"center",padding:"10px",background:"#0f172a",borderRadius:"4px",border:"1px solid #334155"},children:[s.jsx("span",{style:{color:"#94a3b8",fontSize:"12px"},children:"Result: "}),s.jsx("span",{style:{fontSize:"16px",fontWeight:"bold",color:"#fff"},children:ye!==null?ye.toFixed(2):"---"})]})]})]})]})]})},pr={PREFLIGHT:"PREFLIGHT",ENGINE_START:"ENG START",TAKEOFF:"TAKEOFF",DESCENT:"DESCENT",LANDING:"LANDING"},dw={[pr.PREFLIGHT]:[{id:"bat",label:"Battery Switch ON",validate:t=>{var e;return((e=t==null?void 0:t.electrical)==null?void 0:e.battery)===!0}},{id:"apu_start",label:"APU Master / Start",validate:t=>{var e,n;return((e=t==null?void 0:t.apu)==null?void 0:e.running)===!0&&((n=t==null?void 0:t.apu)==null?void 0:n.n2)>90}},{id:"apu_gen",label:"APU Generator ON",validate:t=>{var e;return((e=t==null?void 0:t.electrical)==null?void 0:e.apuGen)===!0}},{id:"apu_bleed",label:"APU Bleed ON",validate:t=>{var e;return((e=t==null?void 0:t.apu)==null?void 0:e.bleed)===!0}},{id:"nav_lights",label:"Position Lights ON",validate:t=>{var e;return((e=t==null?void 0:t.lighting)==null?void 0:e.nav)===!0}},{id:"logo_lights",label:"Logo Lights ON",validate:t=>{var e;return((e=t==null?void 0:t.lighting)==null?void 0:e.logo)===!0}}],[pr.ENGINE_START]:[{id:"beacon",label:"Anti-Collision Light ON",validate:t=>{var e;return((e=t==null?void 0:t.lighting)==null?void 0:e.beacon)===!0}},{id:"fuel_pumps",label:"Fuel Pumps ON",validate:t=>{const e=t==null?void 0:t.fuel;return e&&(e.leftPumps||e.centerPumps)&&(e.rightPumps||e.centerPumps)}},{id:"hyd_pumps",label:"Hydraulic Pumps ON",validate:t=>{var e,n,r,a;return((n=(e=t==null?void 0:t.hydraulics)==null?void 0:e.sysA)==null?void 0:n.engPump)===!0&&((a=(r=t==null?void 0:t.hydraulics)==null?void 0:r.sysB)==null?void 0:a.engPump)===!0}},{id:"engines_stab",label:"Engines Stabilized",validate:(t,e)=>{var n,r;return((n=e==null?void 0:e.engineN2)==null?void 0:n[0])>50&&((r=e==null?void 0:e.engineN2)==null?void 0:r[1])>50}},{id:"gen_on",label:"Engine Generators ON",validate:t=>{var e,n;return((e=t==null?void 0:t.electrical)==null?void 0:e.gen1)===!0&&((n=t==null?void 0:t.electrical)==null?void 0:n.gen2)===!0}},{id:"apu_off",label:"APU Shutdown & Gen OFF",validate:t=>{var e,n;return!((e=t==null?void 0:t.apu)!=null&&e.running)&&!((n=t==null?void 0:t.electrical)!=null&&n.apuGen)}},{id:"packs",label:"Air Conditioning Packs AUTO",validate:t=>{var e,n;return((e=t==null?void 0:t.pneumatics)==null?void 0:e.packL)&&((n=t==null?void 0:t.pneumatics)==null?void 0:n.packR)}}],[pr.TAKEOFF]:[{id:"flaps",label:"Flaps (5-15)",validate:(t,e)=>(e==null?void 0:e.flapsValue)>=1&&(e==null?void 0:e.flapsValue)<=3},{id:"autobrake",label:"Autobrake RTO",validate:t=>{var e;return((e=t==null?void 0:t.brakes)==null?void 0:e.autobrake)==="RTO"}},{id:"lights_land",label:"Landing Lights",validate:t=>{var e;return((e=t==null?void 0:t.lighting)==null?void 0:e.landing)===!0}},{id:"lights_strobe",label:"Strobe Lights",validate:t=>{var e;return((e=t==null?void 0:t.lighting)==null?void 0:e.strobe)===!0}},{id:"transponder",label:"Transponder TA/RA",validate:t=>{var e;return((e=t==null?void 0:t.transponder)==null?void 0:e.mode)==="TA/RA"}},{id:"parking_brake",label:"Parking Brake OFF",validate:t=>{var e;return((e=t==null?void 0:t.brakes)==null?void 0:e.parkingBrake)===!1}}],[pr.DESCENT]:[{id:"pressurization",label:"Pressurization Land Alt",validate:null},{id:"altimeters",label:"Altimeters Set",validate:null},{id:"autobrake_land",label:"Autobrake (1, 2, 3, or MAX)",validate:t=>{var e;return["1","2","3","MAX"].includes((e=t==null?void 0:t.brakes)==null?void 0:e.autobrake)}},{id:"approach_brief",label:"Approach Briefing",validate:null}],[pr.LANDING]:[{id:"gear",label:"Landing Gear DOWN",validate:(t,e)=>(e==null?void 0:e.gearValue)===1},{id:"flaps_land",label:"Flaps (30 or 40)",validate:(t,e)=>(e==null?void 0:e.flapsValue)>=3},{id:"speedbrake",label:"Speedbrake ARMED",validate:(t,e)=>{var n;return(e==null?void 0:e.airBrakesValue)===-1||((n=t==null?void 0:t.flightControls)==null?void 0:n.speedbrake)==="ARMED"}},{id:"cabin",label:"Cabin Ready",validate:null}]};const hw=({onClose:t,physicsState:e,flightState:n})=>{const[r,a]=L.useState(pr.PREFLIGHT),[i,o]=L.useState({}),[l,c]=L.useState(!1),u=L.useMemo(()=>dw[r]||[],[r]);L.useEffect(()=>{if(!e||!e.systems)return;const h={};let v=!1;u.forEach(w=>{if(!i[w.id]&&w.validate)try{w.validate(e.systems,n)&&(h[w.id]=!0,v=!0)}catch(C){console.warn(`Checklist validation error for ${w.id}`,C)}}),v&&o(w=>({...w,...h}))},[e,n,u,i]),L.useEffect(()=>{if(u.length>0&&u.every(v=>i[v.id])&&!l){c(!0);const v=setTimeout(()=>{t(),setTimeout(()=>{o(w=>{const C={...w};return u.forEach(g=>delete C[g.id]),C}),c(!1)},500)},1500);return()=>clearTimeout(v)}},[i,u,t,l]);const d=h=>{o(v=>({...v,[h]:!v[h]}))},y=u.filter(h=>i[h.id]).length,p=u.length>0?y/u.length*100:0;return s.jsxs("div",{className:"checklist-panel",children:[s.jsxs("div",{className:"checklist-header",children:[s.jsx("h3",{children:"CHECKLIST"}),s.jsx("button",{className:"checklist-close",onClick:t,children:""})]}),s.jsx("div",{className:"checklist-tabs",children:Object.values(pr).map(h=>s.jsx("button",{className:`checklist-tab ${r===h?"active":""}`,onClick:()=>a(h),children:h},h))}),s.jsxs("div",{className:"checklist-content",children:[u.map(h=>s.jsxs("div",{className:`checklist-item ${i[h.id]?"checked":""}`,onClick:()=>d(h.id),children:[s.jsx("div",{className:"checkbox",children:i[h.id]&&s.jsx("span",{className:"check-icon",children:""})}),s.jsx("span",{className:"item-label",children:h.label})]},h.id)),u.length===0&&s.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#64748b",fontSize:"12px"},children:"No items in this checklist."})]}),s.jsxs("div",{className:"checklist-progress",children:[s.jsx("div",{className:"progress-bar-bg",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${p}%`}})}),s.jsxs("div",{className:"progress-text",children:[y," / ",u.length," COMPLETED"]})]})]})},yw=({flightState:t})=>{const{t:e}=qn();if(!t)return null;const n=(a,i=0)=>a!=null&&typeof a=="number"?a.toFixed(i):"0",r=t.activeWarnings||[];return s.jsxs("div",{className:"system-status-panel",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[s.jsx("h3",{style:{margin:"5px 0",textAlign:"center",borderBottom:"1px solid #444"},children:e("ui.systems.status")}),s.jsxs("div",{className:"panel-content",style:{display:"flex",flex:1,overflow:"hidden"},children:[s.jsx("div",{className:"system-values",style:{flex:1,padding:"5px",overflowY:"auto",borderRight:"1px solid #444"},children:s.jsxs("div",{className:"system-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px"},children:[s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:"N1"}),s.jsxs("span",{className:"value",children:[t.engineN1?t.engineN1.map(a=>n(a,1)).join(" | "):"0","%"]})]}),s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:"EGT"}),s.jsxs("span",{className:"value",children:[t.engineEGT?t.engineEGT.map(a=>n(a)).join(" | "):"0","C"]})]}),s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:e("ui.flight.fuel")}),s.jsx("span",{className:"value",children:n(t.fuel)})]}),s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:e("ui.flight.oil")}),s.jsxs("span",{className:"value",children:[n(t.oilPressure),"psi"]})]}),s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:e("ui.systems.hydraulics_abbrev")}),s.jsxs("span",{className:"value",children:[n(t.hydraulicPressure),"psi"]})]}),s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:e("ui.systems.electrics_abbrev")}),s.jsxs("span",{className:"value",children:[n(t.electricalVoltage,1),"V"]})]}),s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:e("ui.flight.gear")}),s.jsx("span",{className:`value ${t.gearDown?"down":"up"}`,children:t.gearDown?e("ui.systems.on"):e("ui.systems.off")})]}),s.jsxs("div",{className:"system-item",children:[s.jsx("span",{className:"label",children:e("ui.flight.flaps")}),s.jsxs("span",{className:"value",children:[n(t.flaps),""]})]})]})}),s.jsxs("div",{className:"warnings-log",style:{flex:1,padding:"5px",overflowY:"auto",display:"flex",flexDirection:"column"},children:[s.jsx("h4",{style:{margin:"0 0 5px 0",fontSize:"0.9em",color:"#aaa"},children:e("ui.systems.warnings")}),r.length===0?s.jsx("div",{style:{color:"#555",fontStyle:"italic",fontSize:"0.8em"},children:e("ui.systems.no_warnings")}):r.map((a,i)=>s.jsx("div",{style:{marginBottom:"4px",padding:"2px 4px",backgroundColor:a.level==="CRITICAL"?"rgba(255, 0, 0, 0.2)":"rgba(255, 165, 0, 0.1)",borderLeft:`3px solid ${a.level==="CRITICAL"?"red":"orange"}`,fontSize:"0.85em",color:a.level==="CRITICAL"?"#ff4444":"#ffcc00"},children:typeof a.message=="object"?e(a.message.key,a.message.params):e(a.message)},`${a.id}-${i}`))]})]})]})},pw=({flightData:t,physicsState:e,physicsService:n,weatherData:r,onActionRequest:a,aircraftModel:i,selectedArrival:o,flightPlan:l,radioMessages:c,onRadioFreqChange:u,npcs:d,frequencyContext:y,currentRegion:p,timeScale:h,setTimeScale:v,onUpdateFlightPlan:w,availableRunways:C,startupStatus:g})=>{const{t:m}=qn(),[f,S]=L.useState(!1),[A,I]=L.useState(null),[R,x]=L.useState({heading:(t==null?void 0:t.heading)||270,trueAirspeed:(t==null?void 0:t.airspeed)||450,groundSpeed:(t==null?void 0:t.airspeed)||430,indicatedAirspeed:(t==null?void 0:t.indicatedAirspeed)||280,latitude:t&&t.position&&typeof t.position.latitude=="number"?t.position.latitude:0,longitude:t&&t.position&&typeof t.position.longitude=="number"?t.position.longitude:0,radioFreq:121.5,pitch:(t==null?void 0:t.pitch)||2.5,roll:(t==null?void 0:t.roll)||.5,verticalSpeed:(t==null?void 0:t.verticalSpeed)||1200,altitude:(t==null?void 0:t.altitude)||35e3,altimeter:29.92,localQNH:(r==null?void 0:r.pressureInHg)||29.92,engineN1:[85.2,85.1],engineN2:[95.3,95.2],engineEGT:[650,645],engineFuelFlow:[0,0],fuel:8500,hydraulicPressure:3e3,circuitBreakers:{engine1:!0,engine2:!0,hydraulics:!0,electrical:!0,instruments:!0},alarms:[],activeWarnings:[],autopilot:!0,autopilotMode:(t==null?void 0:t.autopilotMode)||"LNAV",flightDirector:!0,altitudeHold:!0,headingHold:!0,autopilotTargets:{ias:280,vs:1200,altitude:35e3},flapsPosition:"up",gearPosition:"up",airBrakesPosition:"up",flightPhase:"CRUISE",physicsActive:!1,currentNarrative:null,nextWaypoint:"WPT3",distanceToWaypoint:125.4,timeToWaypoint:18.2,crashWarning:null,timeToCrash:null,hasCrashed:!1,frame:(t==null?void 0:t.frame)||0});L.useEffect(()=>{t&&x(G=>{var $,M,Z,de,U;return{...G,heading:t.heading,trueAirspeed:t.airspeed,groundSpeed:t.groundSpeed!==void 0?t.groundSpeed:t.airspeed,indicatedAirspeed:t.indicatedAirspeed||0,radioFreq:G.radioFreq,latitude:t&&t.position&&typeof t.position.latitude=="number"?t.position.latitude:G.latitude,longitude:t&&t.position&&typeof t.position.longitude=="number"?t.position.longitude:G.longitude,pitch:t.pitch||0,roll:t.roll||0,verticalSpeed:t.verticalSpeed||0,altitude:t.altitude||0,altimeter:G.altimeter,localQNH:r&&typeof r.pressureInHg=="number"?r.pressureInHg:G.localQNH||29.92,terrainElevation:t.derived&&typeof t.derived.terrain_elevation_ft=="number"?t.derived.terrain_elevation_ft:G.terrainElevation||0,visibility:r==null?void 0:r.visibility,engineN1:t.engineParams&&t.engineParams.n1||t.engineN1||G.engineN1,engineN2:t.engineParams&&t.engineParams.n2||t.engineN2||G.engineN2,engineEGT:t.engineParams&&t.engineParams.egt||t.engineEGT||G.engineEGT,engineFuelFlow:t.engineParams&&t.engineParams.fuelFlow||t.engineFuelFlow||G.engineFuelFlow||[0,0],fuel:t.fuel||G.fuel,engineThrottles:t.engineThrottles||G.engineThrottles,hydraulicPressure:t.hydraulicPressure||G.hydraulicPressure,oilPressure:t.engineParams&&t.engineParams.oilPressure&&t.engineParams.oilPressure.length>0?Math.min(...t.engineParams.oilPressure):((Z=(M=($=t.systems)==null?void 0:$.engines)==null?void 0:M.left)==null?void 0:Z.oilPressure)||45,electricalVoltage:((U=(de=t.systems)==null?void 0:de.electrical)==null?void 0:U.acVolts)||115,circuitBreakers:G.circuitBreakers,alarms:t.alarms||G.alarms,activeWarnings:t.activeWarnings||[],physicsActive:t.physicsActive,currentNarrative:t.narrativeHistory&&t.narrativeHistory.length>0?t.narrativeHistory[t.narrativeHistory.length-1]:G.currentNarrative,flightPhase:t.phaseName||G.flightPhase,flapsValue:t.flapsValue,gearValue:t.gearValue,flaps:typeof t.flaps=="number"?t.flaps:t.flapsValue||0,gearDown:typeof t.gear=="boolean"?t.gear:t.gearValue>.5,airBrakesValue:t.airBrakesValue,trimValue:typeof t.trimValue=="number"?t.trimValue:G.trimValue,autopilot:t.autopilotEngaged||!1,autopilotMode:t.autopilotMode||G.autopilotMode||"LNAV",autopilotDebug:t.autopilotDebug||{},flightDirector:G.flightDirector,altitudeHold:G.altitudeHold,headingHold:G.headingHold,autopilotTargets:t.autopilotTargets||G.autopilotTargets,frame:typeof t.frame=="number"?t.frame:G.frame,systems:t.systems||G.systems||{},currentWaypointIndex:t.currentWaypointIndex!==void 0?t.currentWaypointIndex:G.currentWaypointIndex||0}})},[t,r]);const[N,E]=L.useState(!1),[k,B]=L.useState(""),[ae,V]=L.useState(!1),[ce,ye]=L.useState(0),ee=3e3;L.useEffect(()=>{let G=null;if(t!=null&&t.crashWarning)G=t.crashWarning;else if(t!=null&&t.activeWarnings){const M=t.activeWarnings.find(Z=>Z.isFlashing);M&&(G=M.message)}!G||Date.now()-ce<ee||(B(G),E(!0))},[t==null?void 0:t.crashWarning,t==null?void 0:t.activeWarnings,ce]);const H=L.useCallback(()=>{E(!1),ye(Date.now())},[]);L.useEffect(()=>{t!=null&&t.hasCrashed&&V(!0)},[t==null?void 0:t.hasCrashed]);const _=G=>{a&&a("pitch",G)},j=G=>{a&&a("roll",G)},F=G=>{a&&a("yaw",G)},z=(G,$)=>{console.log(" FlightPanelModular: Thrust control:",{engineIndex:G,throttleValue:$,percentage:($*100).toFixed(1)+"%"}),a&&a("throttle",$,G)},ne=()=>{a&&a("toggle-autopilot")},oe=G=>{a&&a("set-autopilot-targets",G)},ie=G=>{a&&a("set-autopilot-mode",G)},ue=(G,$)=>{a&&a("set-ils-runway",{airportCode:G,runwayName:$})},pe=G=>{a&&a("flaps",G)},Q=G=>{a&&a("airBrakes",G)},Y=G=>{a&&a("gear",G)},T=()=>{console.log("Reset flight requested"),a&&a("reset-to-initiation")},q=(G,$,M)=>{a&&a("system-action",{system:G,action:$,value:M})},P=G=>{G==="inspect"?a&&a("toggle-debug"):I($=>$===G?null:G)},O=G=>{a&&a("load-flight",G),I(null)},D=()=>{var $,M,Z,de;const G=["BOARDING","DEPARTURE_CLEARANCE","PUSHBACK"].includes(R.flightPhase);return!R.physicsActive||G?b.createElement("div",{className:"immersive-mode",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",background:"radial-gradient(circle at center, #1a1a2e 0%, #000000 100%)",color:"#e6e6e6",padding:"40px",boxSizing:"border-box",position:"relative"}},b.createElement("style",null,`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `),b.createElement("button",{onClick:()=>S(!0),style:{position:"absolute",top:"20px",right:"20px",padding:"10px 20px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid #4ade80",color:"#4ade80",borderRadius:"4px",cursor:"pointer",fontSize:"14px",zIndex:1e3,transition:"all 0.2s"},onMouseEnter:U=>{U.target.style.background="rgba(74, 222, 128, 0.2)"},onMouseLeave:U=>{U.target.style.background="rgba(0, 0, 0, 0.6)"}},m("ui.panels.overhead_button")),b.createElement("div",{style:{maxWidth:"800px",textAlign:"center",marginBottom:"40px",animation:"fadeIn 1s ease-out"}},b.createElement("h1",{style:{fontSize:"3rem",marginBottom:"20px",color:"#4ade80",textShadow:"0 0 20px rgba(74, 222, 128, 0.3)"}},m(($=R.currentNarrative)==null?void 0:$.title,(M=R.currentNarrative)==null?void 0:M.data)||R.flightPhase),b.createElement("p",{style:{fontSize:"1.5rem",lineHeight:"1.6",color:"#cbd5e1"}},m((Z=R.currentNarrative)==null?void 0:Z.content,(de=R.currentNarrative)==null?void 0:de.data)||m("ui.narrative.awaiting"))),b.createElement("div",{style:{width:"100%",maxWidth:"600px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid #334155",borderRadius:"8px",padding:"20px",marginBottom:"30px"}},b.createElement(Nh,{flightState:R,setRadioFreq:U=>{x(ve=>({...ve,radioFreq:U})),u&&u(U)},flightPlan:l,radioMessages:c,frequencyContext:y,currentRegion:p,immersiveMode:!0})),b.createElement("div",{style:{position:"relative"}},b.createElement("button",{onClick:()=>{(g?g.canContinue:!0)&&a&&a("skip-phase")},disabled:g&&!g.canContinue,style:{padding:"12px 30px",background:"transparent",border:`1px solid ${g&&!g.canContinue?"#6b7280":"#4ade80"}`,color:g&&!g.canContinue?"#6b7280":"#4ade80",borderRadius:"4px",cursor:g&&!g.canContinue?"not-allowed":"pointer",fontSize:"1rem",letterSpacing:"2px",transition:"all 0.3s ease",opacity:g&&!g.canContinue?.5:.8,textTransform:"uppercase"},onMouseEnter:U=>{g&&!g.canContinue||(U.target.style.background="rgba(74, 222, 128, 0.1)",U.target.style.opacity=1,U.target.style.boxShadow="0 0 15px rgba(74, 222, 128, 0.2)")},onMouseLeave:U=>{g&&!g.canContinue||(U.target.style.background="transparent",U.target.style.opacity=.8,U.target.style.boxShadow="none")}},`${m("ui.startup.continue")||"CONTINUE"} `),g&&!g.canContinue&&g.missingItems&&g.missingItems.length>0&&b.createElement("div",{style:{position:"absolute",top:"calc(100% + 10px)",right:"0",background:"rgba(17, 24, 39, 0.95)",border:"1px solid #ef4444",padding:"12px",borderRadius:"6px",fontSize:"12px",color:"#d1d5db",whiteSpace:"nowrap",zIndex:100,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.5)",minWidth:"200px"}},b.createElement("div",{style:{fontWeight:"bold",marginBottom:"6px",color:"#ef4444",borderBottom:"1px solid rgba(239, 68, 68, 0.3)",paddingBottom:"4px"}},` ${m("ui.startup.checklist_incomplete")||"STARTUP REQUIRED"}`),g.missingItems.map((U,ve)=>b.createElement("div",{key:U.key||ve,style:{marginBottom:"2px",display:"flex",alignItems:"center"}},b.createElement("span",{style:{color:"#ef4444",marginRight:"6px"}},""),U.key?m(U.key,U.params):U))))):b.createElement("div",{className:"modern-cockpit"},b.createElement("div",{style:{display:"flex",gap:"8px",marginBottom:"8px",width:"100%",alignItems:"stretch"}},b.createElement(Q2,{flightState:R,setAutopilotTargets:oe,toggleAutopilot:ne,setAutopilotMode:ie,setAltimeter:U=>x(ve=>({...ve,altimeter:U})),frequencyContext:y,availableRunways:C,selectedArrival:o,setILSRunway:ue}),b.createElement(Nh,{flightState:R,setRadioFreq:U=>{x(ve=>({...ve,radioFreq:U})),u&&u(U)},flightPlan:l,radioMessages:c,frequencyContext:y,currentRegion:p})),b.createElement("div",{className:"main-panels"},b.createElement(Z2,{flightState:R}),b.createElement(ew,{flightState:R,selectedArrival:o,flightPlan:l,npcs:d}),b.createElement(tw,{flightState:R,onToggleSystems:()=>S(U=>!U)})),b.createElement("div",{className:"manual-controls"},b.createElement("div",{className:"control-group-stick",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"5px"}},b.createElement(J2,{controlPitch:_,controlRoll:j,flightState:R}),b.createElement(aw,{controlYaw:F,flightState:R})),b.createElement("div",{className:"thrust-manager-wrapper"},b.createElement(X2,{controlThrust:z,flightState:R})),b.createElement(nw,{controlFlaps:pe,controlGear:Y,controlAirBrakes:Q,controlTrim:U=>a("trim",U),flightState:R,aircraftModel:i})))};return b.createElement("div",{className:"modern-flight-panel",style:{userSelect:"none",display:"flex",flexDirection:"row",gap:"10px",padding:0}},b.createElement(iw,{activePanel:A,onTogglePanel:P}),A==="flight_computer"&&b.createElement(uw,{onClose:()=>I(null),flightPlan:l,onUpdateFlightPlan:w,flightState:R,onActionRequest:a}),A==="timer"&&b.createElement(cw,{timeScale:h,setTimeScale:v,flightData:t,flightPlan:l,onClose:()=>I(null)}),A==="checklist"&&b.createElement(hw,{onClose:()=>I(null),physicsState:e,flightState:R}),A==="save_load"&&b.createElement(lw,{flightData:t,physicsState:e,flightPlan:l,weatherData:r,aircraftModel:i,onClose:()=>I(null),onLoadFlight:O}),A==="systems"&&b.createElement("div",{style:{position:"absolute",top:"60px",left:"80px",width:"350px",height:"400px",backgroundColor:"rgba(20, 24, 30, 0.95)",border:"1px solid #444",borderRadius:"8px",zIndex:100,display:"flex",flexDirection:"column",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"}},[b.createElement("div",{key:"header",style:{display:"flex",justifyContent:"flex-end",padding:"5px",borderBottom:"1px solid #333"}},b.createElement("button",{onClick:()=>I(null),style:{background:"none",border:"none",color:"#aaa",cursor:"pointer",fontSize:"18px",padding:"0 5px"}},"")),b.createElement("div",{key:"content",style:{flex:1,overflow:"hidden"}},b.createElement(yw,{flightState:R}))]),b.createElement("div",{style:{flex:1,position:"relative",padding:"20px"}},f&&b.createElement(rw,{onClose:()=>S(!1),flightState:R,onSystemAction:q,aircraftModel:i}),b.createElement(V2,{flashActive:N,flashText:k,onAlertComplete:H}),b.createElement(Y2,{showCrashPanel:ae,resetFlight:T}),b.createElement("div",{style:{position:"absolute",bottom:"10px",left:"10px",padding:"6px 10px",background:"rgba(0, 0, 0, 0.7)",color:"#0f0",fontSize:"12px",borderRadius:"4px",zIndex:1e3}},`Frame: ${R.frame!==void 0?R.frame:0}`),D()))},fw=({debugPhysicsData:t,thrust:e,drag:n,waypoints:r=[],flightData:a,groundStatus:i,remainingRunwayLength:o})=>{var ae,V,ce,ye,ee;if(!t)return null;const{theta:l,dynamicPressure_q:c,pitchMoment_y:u,pitchRate_q:d,altitude_z:y,altitude_amsl:p,altitude_agl:h,isOnGround:v,lift:w,pitchTorque:C,alpha:g,Cm:m,CL:f,elevator:S,trim:A}=t,I=(a==null?void 0:a.autopilotMode)||"N/A",R=((ae=a==null?void 0:a.autopilotTargets)==null?void 0:ae.heading)!==void 0?a.autopilotTargets.heading:"N/A",x=(a==null?void 0:a.heading)!==void 0?a.heading:"N/A",N=(V=a==null?void 0:a.position)==null?void 0:V.latitude,E=(ce=a==null?void 0:a.position)==null?void 0:ce.longitude,k=a==null?void 0:a.currentWaypointIndex;let B=null;return r&&typeof k=="number"&&r[k]&&(B=r[k]),s.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(0, 0, 0, 0.85)",color:"#00ff00",fontFamily:"monospace",fontSize:"11px",padding:"10px",borderRadius:"5px",zIndex:1e3,border:"1px solid #333",minWidth:"220px",maxHeight:"90vh",overflowY:"auto"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px",borderBottom:"1px solid #444",paddingBottom:"3px",color:"#cyan"},children:"NAV / LNAV DEBUG"}),s.jsxs("div",{children:["Mode: ",s.jsx("span",{style:{color:I==="LNAV"?"#3b82f6":"#8b5cf6",fontWeight:"bold"},children:I})]}),s.jsxs("div",{children:["Lat: ",typeof N=="number"?N.toFixed(4):"N/A"]}),s.jsxs("div",{children:["Lon: ",typeof E=="number"?E.toFixed(4):"N/A"]}),s.jsxs("div",{children:["Hdg (Cur): ",typeof x=="number"?x.toFixed(1):"N/A",""]}),s.jsxs("div",{children:["Hdg (Tgt): ",typeof R=="number"?R.toFixed(1):"N/A",""]}),s.jsxs("div",{children:["Next WP: ",B?B.label||B.name||`Idx ${k}`:"None"]}),B&&s.jsxs("div",{style:{paddingLeft:"8px",fontSize:"10px",color:"#aaa"},children:["Loc: ",(ye=B.latitude)==null?void 0:ye.toFixed(4),", ",(ee=B.longitude)==null?void 0:ee.toFixed(4)]}),s.jsx("div",{style:{fontWeight:"bold",marginTop:"8px",marginBottom:"5px",borderBottom:"1px solid #444",paddingBottom:"3px"},children:"DEBUG PHYSICS"}),s.jsxs("div",{children:["Pitch (): ",typeof l=="number"?(l*180/Math.PI).toFixed(2):"N/A"," deg"]}),s.jsxs("div",{children:["Alpha (): ",typeof g=="number"?(g*180/Math.PI).toFixed(2):"N/A"," deg"]}),s.jsxs("div",{children:["Pitch Rate (q): ",typeof d=="number"?(d*180/Math.PI).toFixed(2):"N/A"," deg/s"]}),s.jsxs("div",{children:["Pitch Moment: ",typeof u=="number"?u.toFixed(0):"N/A"," Nm"]}),s.jsxs("div",{children:["Cm: ",typeof m=="number"?m.toFixed(4):"N/A"]}),s.jsxs("div",{children:["Elevator: ",typeof S=="number"?S.toFixed(2):"N/A"]}),s.jsxs("div",{children:["Trim: ",typeof A=="number"?A.toFixed(2):"N/A"]}),s.jsxs("div",{children:["Ground Moment Y: ",t.groundMomentY?t.groundMomentY.toFixed(0):"0"]}),s.jsxs("div",{children:["Lift: ",typeof w=="number"?(w/1e3).toFixed(1):"N/A"," kN (CL: ",typeof f=="number"?f.toFixed(2):"N/A",")"]}),s.jsxs("div",{children:["Dynamic Pressure (q): ",typeof c=="number"?c.toFixed(2):"N/A"," Pa"]}),s.jsxs("div",{children:["Altitude (Z - Rel): ",typeof y=="number"?y.toFixed(2):"N/A"," m"]}),s.jsxs("div",{children:["Altitude (AMSL): ",typeof p=="number"?p.toFixed(2):"N/A"," m (",(p*3.28084).toFixed(0)," ft)"]}),s.jsxs("div",{children:["Altitude (AGL): ",typeof h=="number"?h.toFixed(2):"N/A"," m (",(h*3.28084).toFixed(0)," ft)"]}),s.jsxs("div",{children:["On Ground: ",v?"YES":"NO"]}),s.jsx("div",{style:{fontWeight:"bold",marginTop:"8px",marginBottom:"5px",borderBottom:"1px solid #444",paddingBottom:"3px"},children:"GROUND STATUS"}),s.jsxs("div",{children:["Status:"," ",s.jsx("span",{style:{color:(i||"UNKNOWN")==="RUNWAY"?"#0f0":(i||"UNKNOWN")==="GRASS"?"#ff0":"#f00",fontWeight:"bold"},children:i||"UNKNOWN"})]}),s.jsxs("div",{children:["Remaining Runway:"," ",typeof o=="number"?o.toFixed(0):"0"," ","m"]}),s.jsx("div",{style:{fontWeight:"bold",marginTop:"8px",marginBottom:"5px",borderBottom:"1px solid #444",paddingBottom:"3px"},children:"FORCES"}),s.jsxs("div",{children:["Thrust: ",typeof e=="number"?(e/1e3).toFixed(1):"0.0"," kN"]}),s.jsxs("div",{children:["Drag: ",typeof n=="number"?(n/1e3).toFixed(1):"0.0"," kN"]}),Array.isArray(r)&&r.length>0&&s.jsxs("div",{style:{marginTop:"8px",borderTop:"1px solid #444",paddingTop:"3px"},children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:["WAYPOINTS (",r.length,")"]}),r.map((H,_)=>s.jsxs("div",{children:[H.name," (",typeof H.latitude=="number"?H.latitude.toFixed(2):"N/A",", ",typeof H.longitude=="number"?H.longitude.toFixed(2):"N/A",")"]},_))]})]})},gw=({physicsService:t,onClose:e})=>{var h,v,w,C,g,m,f,S;const[n,r]=L.useState([]),[a,i]=L.useState(new Map),[o,l]=L.useState(null),[c,u]=L.useState(Date.now());L.useEffect(()=>{if(!t||!t.failureSystem)return;t.failureSystem.registry&&i(new Map(t.failureSystem.registry));const A=setInterval(()=>{const I=t.failureSystem;if(!I)return;const R=Array.from(I.activeFailures.values());r(R),I.settings&&l(I.settings),u(Date.now())},200);return()=>clearInterval(A)},[t]);const d=A=>{t&&t.failureSystem&&t.failureSystem.triggerFailure(A)},y=()=>{t&&t.failureSystem&&t.failureSystem.reset()},p=L.useMemo(()=>{const A={};return a.forEach((I,R)=>{const x=I.system||"OTHER";A[x]||(A[x]=[]),A[x].push(I)}),A},[a]);return!t||!t.failureSystem?null:s.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(10, 15, 20, 0.95)",color:"#e0e0e0",fontFamily:'"JetBrains Mono", monospace',fontSize:"12px",padding:"20px",borderRadius:"12px",zIndex:9999,border:"1px solid #334455",width:"900px",height:"700px",display:"flex",flexDirection:"column",boxShadow:"0 0 80px rgba(0, 0, 0, 0.8)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #334455",paddingBottom:"15px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("div",{style:{width:"12px",height:"12px",background:n.length>0?"#ff3333":"#4ade80",borderRadius:"50%",boxShadow:n.length>0?"0 0 10px #ff3333":"0 0 10px #4ade80"}}),s.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#fff"},children:"FAILURE INJECTION CONSOLE"})]}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsxs("div",{style:{fontSize:"11px",color:"#8899aa",display:"flex",alignItems:"center",marginRight:"15px"},children:["DIFFICULTY: ",s.jsx("span",{style:{color:"#fff",marginLeft:"5px"},children:(t.difficulty||"ROOKIE").toUpperCase()})]}),s.jsx("button",{onClick:y,style:{background:"#2d1b1b",border:"1px solid #552222",color:"#ff6666",cursor:"pointer",fontSize:"11px",padding:"6px 12px",borderRadius:"4px",transition:"all 0.2s"},children:"RESET ALL"}),s.jsx("button",{onClick:e,style:{background:"transparent",border:"none",color:"#667788",cursor:"pointer",fontSize:"20px"},children:""})]})]}),s.jsxs("div",{style:{display:"flex",flex:1,gap:"20px",overflow:"hidden"},children:[s.jsx("div",{style:{flex:2,overflowY:"auto",paddingRight:"10px"},children:Object.entries(p).map(([A,I])=>s.jsxs("div",{style:{marginBottom:"25px"},children:[s.jsxs("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#66aaee",borderBottom:"1px solid #223344",paddingBottom:"5px",marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:A}),s.jsx("span",{style:{opacity:.5},children:I.length})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"8px"},children:I.map(R=>{const x=n.some(N=>N.id===R.id);return s.jsxs("button",{onClick:()=>d(R.id),disabled:x,style:{background:x?"linear-gradient(45deg, #331111, #220000)":"#1a222a",border:x?"1px solid #ff3333":"1px solid #2a3b4c",color:x?"#ff9999":"#ccddee",padding:"10px",cursor:x?"default":"pointer",textAlign:"left",fontSize:"11px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:"4px",transition:"all 0.2s",opacity:x?.8:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:R.label||R.name||R.id}),x&&s.jsx("span",{style:{fontSize:"9px",color:"#ff3333"},children:"ACTIVE"})]},R.id)})})]},A))}),s.jsxs("div",{style:{flex:1.2,display:"flex",flexDirection:"column",gap:"15px",borderLeft:"1px solid #334455",paddingLeft:"20px"},children:[s.jsxs("div",{style:{background:"#11161b",padding:"15px",borderRadius:"6px",border:"1px solid #223344"},children:[s.jsx("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#8899aa",marginBottom:"10px",textTransform:"uppercase"},children:"Vitals Monitor"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"11px"},children:[s.jsx(Mn,{label:"ENG 1",status:(h=t.engines[0])!=null&&h.failed?"FAIL":"OK"}),s.jsx(Mn,{label:"ENG 2",status:(v=t.engines[1])!=null&&v.failed?"FAIL":"OK"}),s.jsx(Mn,{label:"HYD A",status:((C=(w=t.systems.hydraulics)==null?void 0:w.sysA)==null?void 0:C.pressure)>2e3?"OK":"LOW"}),s.jsx(Mn,{label:"HYD B",status:((m=(g=t.systems.hydraulics)==null?void 0:g.sysB)==null?void 0:m.pressure)>2e3?"OK":"LOW"}),s.jsx(Mn,{label:"ELEC",status:((f=t.systems.electrical)==null?void 0:f.dcVolts)>20?"OK":"FAIL"}),s.jsx(Mn,{label:"CABIN",status:(S=t.systems.pressurization)!=null&&S.breach?"BREACH":"OK"}),s.jsx(Mn,{label:"GEAR",status:t.controls.gear===1?"DOWN":"UP"}),s.jsx(Mn,{label:"FLAPS",status:`${(t.controls.flaps*100).toFixed(0)}%`,color:"#aaa"})]})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[s.jsxs("div",{style:{fontSize:"11px",fontWeight:"bold",color:"#ff6666",marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"ACTIVE ALERTS"}),s.jsx("span",{children:n.length})]}),s.jsx("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px",paddingRight:"5px"},children:n.length===0?s.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#334455",fontStyle:"italic",border:"1px dashed #223344",borderRadius:"6px"},children:"System Nominal"}):n.map((A,I)=>s.jsxs("div",{style:{background:"linear-gradient(90deg, rgba(60, 20, 20, 0.5), rgba(40, 10, 10, 0.2))",borderLeft:"3px solid #ff3333",padding:"10px",borderRadius:"0 4px 4px 0"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[s.jsx("span",{style:{fontWeight:"bold",color:"#ffaaaa"},children:A.name||A.id}),s.jsx("span",{style:{fontSize:"10px",color:"#ff6666",border:"1px solid #552222",padding:"0 4px",borderRadius:"2px"},children:(A.currentStage||"UNKNOWN").toUpperCase()})]}),s.jsx("div",{style:{fontSize:"10px",color:"#998888",marginBottom:"4px",lineHeight:"1.4"},children:A.getDescription()}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#665555",marginTop:"6px"},children:[s.jsxs("span",{children:["T+",A.timeInStage.toFixed(1),"s"]}),A.context&&Object.keys(A.context).length>0&&s.jsx("span",{style:{fontFamily:"monospace"},children:Object.keys(A.context).join(", ")})]})]},A.id+I))})]})]})]})]})},Mn=({label:t,status:e,color:n})=>{const a=n||(e==="OK"||e==="DOWN"||e==="UP"?"#4ade80":"#ef4444");return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px",background:"rgba(255,255,255,0.03)",borderRadius:"3px"},children:[s.jsx("span",{style:{color:"#667788"},children:t}),s.jsx("span",{style:{fontWeight:"bold",color:a},children:e})]})},mw={boarding:[{title:"narrative.phases.boarding.default.0.title",content:"narrative.phases.boarding.default.0.content"},{title:"narrative.phases.boarding.default.1.title",content:"narrative.phases.boarding.default.1.content"},{title:"narrative.phases.boarding.default.2.title",content:"narrative.phases.boarding.default.2.content"}],departure_clearance:[{title:"narrative.phases.departure_clearance.default.0.title",content:"narrative.phases.departure_clearance.default.0.content"},{title:"narrative.phases.departure_clearance.default.1.title",content:"narrative.phases.departure_clearance.default.1.content"},{title:"narrative.phases.departure_clearance.default.2.title",content:"narrative.phases.departure_clearance.default.2.content"}],pushback:[{title:"narrative.phases.pushback.default.0.title",content:"narrative.phases.pushback.default.0.content"},{title:"narrative.phases.pushback.default.1.title",content:"narrative.phases.pushback.default.1.content"},{title:"narrative.phases.pushback.default.2.title",content:"narrative.phases.pushback.default.2.content"}],taxiing:[{title:"narrative.phases.taxiing.default.0.title",content:"narrative.phases.taxiing.default.0.content"},{title:"narrative.phases.taxiing.default.1.title",content:"narrative.phases.taxiing.default.1.content"},{title:"narrative.phases.taxiing.default.2.title",content:"narrative.phases.taxiing.default.2.content"}],takeoff_prep:[{title:"narrative.phases.takeoff_prep.default.0.title",content:"narrative.phases.takeoff_prep.default.0.content"},{title:"narrative.phases.takeoff_prep.default.1.title",content:"narrative.phases.takeoff_prep.default.1.content"},{title:"narrative.phases.takeoff_prep.default.2.title",content:"narrative.phases.takeoff_prep.default.2.content"}],takeoff:[{title:"narrative.phases.takeoff.default.0.title",content:"narrative.phases.takeoff.default.0.content"},{title:"narrative.phases.takeoff.default.1.title",content:"narrative.phases.takeoff.default.1.content"},{title:"narrative.phases.takeoff.default.2.title",content:"narrative.phases.takeoff.default.2.content"}],initial_climb:[{title:"narrative.phases.initial_climb.default.0.title",content:"narrative.phases.initial_climb.default.0.content"},{title:"narrative.phases.initial_climb.default.1.title",content:"narrative.phases.initial_climb.default.1.content"},{title:"narrative.phases.initial_climb.default.2.title",content:"narrative.phases.initial_climb.default.2.content"}],main_climb:[{title:"narrative.phases.main_climb.default.0.title",content:"narrative.phases.main_climb.default.0.content"},{title:"narrative.phases.main_climb.default.1.title",content:"narrative.phases.main_climb.default.1.content"},{title:"narrative.phases.main_climb.default.2.title",content:"narrative.phases.main_climb.default.2.content"}],cruise:[{title:"Cruising at FL350",content:'Level at 35,000 feet. The horizon is a curved line of haze. "Maintain Mach 0.78." The engines hum with a steady, reassuring rhythm. Passengers are settling in for the flight to ${arrival}.'},{title:"The Long Haul",content:"The sun moves slowly across the cockpit. Waypoints tick by on the navigation display. Fuel flow is nominal. The world below is a patchwork of clouds and terrain. A peaceful moment at 450 knots true airspeed."},{title:"Cruise Phase",content:"Coffee is served in the cockpit. You monitor the systems - all green. Outside, the temperature is -54C. The ${aircraft} cuts through the thin air effortlessly. Estimated time to destination: 2 hours."}],descent:[{title:"Top of Descent",content:'Throttles back. The pitch drops slightly as we begin our descent. "Descend and maintain 10,000 feet." The destination ${arrival} lies ahead.'},{title:"Descent Initiation",content:'The engines spool down to idle. The wind noise increases slightly as the speedbrakes extend to manage speed. "${callsign}, cross WPT at FL240." Descending through the flight levels.'},{title:"Descending",content:'The clouds below are getting closer. Seatbelt sign back on. "Cabin crew, prepare for landing." We are beginning our arrival into the ${arrival} area. Altimeters reset to local pressure.'}],approach:[{title:"Approach to ${arrival}",content:'Lined up for runway ${landingRunway}. "Gear down, flaps 30." The runway threshold looms ahead through the haze. Speed checked, localizer captured.'},{title:"Final Approach",content:'Turning base to final. The runway lights pierce the gloom. "Three green, flaps full." Speed is Vref + 5. The PAPI lights show two white, two red. Perfect profile.'},{title:"On Final",content:'"${callsign}, cleared to land runway ${landingRunway}." Disengaging autopilot. The controls feel heavy and responsive. Crosswind correction applied. The runway numbers expand in the windscreen.'}],landing:[{title:"Touchdown",content:'Flare... Touchdown. Spoilers deployed. Reverse thrust roaring. "${callsign}, welcome to ${arrival}." Braking to taxi speed.'},{title:"Landing Roll",content:'The wheels kiss the pavement. A firm landing. Nose gear down. "Decel." Manual braking. You turn off the high-speed exit. "Contact Ground on 121.9."'},{title:"Arrival",content:"Main gear down... smoke from the tires. Reversers green. 80 knots. 60 knots. We have arrived at ${arrival}. The cabin erupts in the usual shuffling sounds of arrival."}],after_land_taxiing:[{title:"Taxi to Gate",content:'"Turn left next taxiway, contact Ground." The flight is over. Taxing past other aircraft to our assigned gate.'},{title:"Taxiing In",content:'Flaps retracting. APU starting up. We navigate the busy apron of ${arrival}. "Hold short of gate B4, waiting for aircraft pushback." Almost there.'},{title:"Arrival Taxi",content:'The gate guidance system lights up. "Left... left... stop." Parking brake set. Engines spooling down. The jetway starts to move toward the door.'}],shutoff:[{title:"Engine Shutdown",content:'Parking brake set. Fuel cutoff. The engines spin down into silence. APU off. "Thank you for flying with us." Flight complete.'},{title:"Shutdown Checklist",content:"Seatbelt sign off. Hydraulics off. The aircraft goes dark as we switch to ground power. The last passengers are deplaning. Another successful flight in the logbook."},{title:"Post-Flight",content:"The cockpit becomes quiet. completing the shutdown checklist. Outside, the baggage handlers are already unloading. Time to head to the hotel."}]},vw=t=>{const e=mw[t];return!e||e.length===0?null:e[Math.floor(Math.random()*e.length)]},ww={boarding:{default:[{title:"narrative.phases.boarding.default.0.title",content:"narrative.phases.boarding.default.0.content"},{title:"narrative.phases.boarding.default.1.title",content:"narrative.phases.boarding.default.1.content"},{title:"narrative.phases.boarding.default.2.title",content:"narrative.phases.boarding.default.2.content"}],sunny:[{title:"narrative.phases.boarding.sunny.0.title",content:"narrative.phases.boarding.sunny.0.content"}],rainy:[{title:"narrative.phases.boarding.rainy.0.title",content:"narrative.phases.boarding.rainy.0.content"}],shakespearean:[{title:"narrative.phases.boarding.shakespearean.0.title",content:"narrative.phases.boarding.shakespearean.0.content"}]},departure_clearance:{default:[{title:"narrative.phases.departure_clearance.default.0.title",content:"narrative.phases.departure_clearance.default.0.content"},{title:"narrative.phases.departure_clearance.default.1.title",content:"narrative.phases.departure_clearance.default.1.content"},{title:"narrative.phases.departure_clearance.default.2.title",content:"narrative.phases.departure_clearance.default.2.content"}],shakespearean:[{title:"narrative.phases.departure_clearance.shakespearean.0.title",content:"narrative.phases.departure_clearance.shakespearean.0.content"}]},pushback:{default:[{title:"narrative.phases.pushback.default.0.title",content:"narrative.phases.pushback.default.0.content"},{title:"narrative.phases.pushback.default.1.title",content:"narrative.phases.pushback.default.1.content"},{title:"narrative.phases.pushback.default.2.title",content:"narrative.phases.pushback.default.2.content"}],rainy:[{title:"narrative.phases.pushback.rainy.0.title",content:"narrative.phases.pushback.rainy.0.content"}],shakespearean:[{title:"narrative.phases.pushback.shakespearean.0.title",content:"narrative.phases.pushback.shakespearean.0.content"}]},taxiing:{default:[{title:"narrative.phases.taxiing.default.0.title",content:"narrative.phases.taxiing.default.0.content"},{title:"narrative.phases.taxiing.default.1.title",content:"narrative.phases.taxiing.default.1.content"},{title:"narrative.phases.taxiing.default.2.title",content:"narrative.phases.taxiing.default.2.content"}],sunny:[{title:"narrative.phases.taxiing.sunny.0.title",content:"narrative.phases.taxiing.sunny.0.content"}],rainy:[{title:"narrative.phases.taxiing.rainy.0.title",content:"narrative.phases.taxiing.rainy.0.content"}],shakespearean:[{title:"narrative.phases.taxiing.shakespearean.0.title",content:"narrative.phases.taxiing.shakespearean.0.content"}]},takeoff_prep:{default:[{title:"narrative.phases.takeoff_prep.default.0.title",content:"narrative.phases.takeoff_prep.default.0.content"},{title:"narrative.phases.takeoff_prep.default.1.title",content:"narrative.phases.takeoff_prep.default.1.content"},{title:"narrative.phases.takeoff_prep.default.2.title",content:"narrative.phases.takeoff_prep.default.2.content"}],rookie:{title:"narrative.phases.takeoff_prep.rookie.title",content:"narrative.phases.takeoff_prep.rookie.content"},shakespearean:[{title:"narrative.phases.takeoff_prep.shakespearean.0.title",content:"narrative.phases.takeoff_prep.shakespearean.0.content"}]},takeoff:{default:[{title:"narrative.phases.takeoff.default.0.title",content:"narrative.phases.takeoff.default.0.content"},{title:"narrative.phases.takeoff.default.1.title",content:"narrative.phases.takeoff.default.1.content"},{title:"narrative.phases.takeoff.default.2.title",content:"narrative.phases.takeoff.default.2.content"}],rookie:{title:"narrative.phases.takeoff.rookie.title",content:"narrative.phases.takeoff.rookie.content"},rainy:[{title:"narrative.phases.takeoff.rainy.0.title",content:"narrative.phases.takeoff.rainy.0.content"}],shakespearean:[{title:"narrative.phases.takeoff.shakespearean.0.title",content:"narrative.phases.takeoff.shakespearean.0.content"}]},initial_climb:{default:[{title:"narrative.phases.initial_climb.default.0.title",content:"narrative.phases.initial_climb.default.0.content"},{title:"narrative.phases.initial_climb.default.1.title",content:"narrative.phases.initial_climb.default.1.content"},{title:"narrative.phases.initial_climb.default.2.title",content:"narrative.phases.initial_climb.default.2.content"}],rookie:{title:"narrative.phases.initial_climb.rookie.title",content:"narrative.phases.initial_climb.rookie.content"},sunny:[{title:"narrative.phases.initial_climb.sunny.0.title",content:"narrative.phases.initial_climb.sunny.0.content"}],rainy:[{title:"narrative.phases.initial_climb.rainy.0.title",content:"narrative.phases.initial_climb.rainy.0.content"}],shakespearean:[{title:"narrative.phases.initial_climb.shakespearean.0.title",content:"narrative.phases.initial_climb.shakespearean.0.content"}]},main_climb:{default:[{title:"narrative.phases.main_climb.default.0.title",content:"narrative.phases.main_climb.default.0.content"},{title:"narrative.phases.main_climb.default.1.title",content:"narrative.phases.main_climb.default.1.content"},{title:"narrative.phases.main_climb.default.2.title",content:"narrative.phases.main_climb.default.2.content"}],shakespearean:[{title:"narrative.phases.main_climb.shakespearean.0.title",content:"narrative.phases.main_climb.shakespearean.0.content"}]},cruise:{default:[{title:"narrative.phases.cruise.default.0.title",content:"narrative.phases.cruise.default.0.content"},{title:"narrative.phases.cruise.default.1.title",content:"narrative.phases.cruise.default.1.content"},{title:"narrative.phases.cruise.default.2.title",content:"narrative.phases.cruise.default.2.content"}],sunny:[{title:"narrative.phases.cruise.sunny.0.title",content:"narrative.phases.cruise.sunny.0.content"}],shakespearean:[{title:"narrative.phases.cruise.shakespearean.0.title",content:"narrative.phases.cruise.shakespearean.0.content"}]},descent:{default:[{title:"narrative.phases.descent.default.0.title",content:"narrative.phases.descent.default.0.content"},{title:"narrative.phases.descent.default.1.title",content:"narrative.phases.descent.default.1.content"},{title:"narrative.phases.descent.default.2.title",content:"narrative.phases.descent.default.2.content"}],rainy:[{title:"narrative.phases.descent.rainy.0.title",content:"narrative.phases.descent.rainy.0.content"}],shakespearean:[{title:"narrative.phases.descent.shakespearean.0.title",content:"narrative.phases.descent.shakespearean.0.content"}]},approach:{default:[{title:"narrative.phases.approach.default.0.title",content:"narrative.phases.approach.default.0.content"},{title:"narrative.phases.approach.default.1.title",content:"narrative.phases.approach.default.1.content"},{title:"narrative.phases.approach.default.2.title",content:"narrative.phases.approach.default.2.content"}],rainy:[{title:"narrative.phases.approach.rainy.0.title",content:"narrative.phases.approach.rainy.0.content"}],shakespearean:[{title:"narrative.phases.approach.shakespearean.0.title",content:"narrative.phases.approach.shakespearean.0.content"}]},landing:{default:[{title:"narrative.phases.landing.default.0.title",content:"narrative.phases.landing.default.0.content"},{title:"narrative.phases.landing.default.1.title",content:"narrative.phases.landing.default.1.content"},{title:"narrative.phases.landing.default.2.title",content:"narrative.phases.landing.default.2.content"}],rainy:[{title:"narrative.phases.landing.rainy.0.title",content:"narrative.phases.landing.rainy.0.content"}],shakespearean:[{title:"narrative.phases.landing.shakespearean.0.title",content:"narrative.phases.landing.shakespearean.0.content"}]},after_land_taxiing:{default:[{title:"narrative.phases.after_land_taxiing.default.0.title",content:"narrative.phases.after_land_taxiing.default.0.content"},{title:"narrative.phases.after_land_taxiing.default.1.title",content:"narrative.phases.after_land_taxiing.default.1.content"},{title:"narrative.phases.after_land_taxiing.default.2.title",content:"narrative.phases.after_land_taxiing.default.2.content"}],shakespearean:[{title:"narrative.phases.after_land_taxiing.shakespearean.0.title",content:"narrative.phases.after_land_taxiing.shakespearean.0.content"}]},shutoff:{default:[{title:"narrative.phases.shutoff.default.0.title",content:"narrative.phases.shutoff.default.0.content"},{title:"narrative.phases.shutoff.default.1.title",content:"narrative.phases.shutoff.default.1.content"},{title:"narrative.phases.shutoff.default.2.title",content:"narrative.phases.shutoff.default.2.content"}],shakespearean:[{title:"narrative.phases.shutoff.shakespearean.0.title",content:"narrative.phases.shutoff.shakespearean.0.content"}]}},Aw={engine:{minor:"failures.engine.minor",critical:"failures.engine.critical",resolved:"failures.engine.resolved"},hydraulic:{minor:"failures.hydraulic.minor",critical:"failures.hydraulic.critical",resolved:"failures.hydraulic.resolved"},electrical:{minor:"failures.electrical.minor",critical:"failures.electrical.critical",resolved:"failures.electrical.resolved"},fuel:{minor:"failures.fuel.minor",critical:"failures.fuel.critical",resolved:"failures.fuel.resolved"}},xw={failure:{minor:"failures.default.minor",critical:"failures.default.critical",resolved:"failures.default.resolved"}},lr={phases:ww,failures:Aw,defaults:xw},xr={POWER_UP:"POWER_UP",ENGINE_START:"ENGINE_START"},tc=(t,e,n=[])=>{var a,i,o,l,c,u,d,y;const r=[];if(!e)return{canContinue:!1,missingItems:[{key:"startup.checklist.systems_not_init"}]};if(e.electrical&&(e.electrical.gen1||e.electrical.gen2||e.electrical.apuGen||e.electrical.extPower),t===xr.POWER_UP)(a=e.electrical)!=null&&a.battery||r.push({key:"startup.checklist.battery_on"}),e.adirs&&((e.adirs.ir1!=="NAV"||e.adirs.ir2!=="NAV")&&r.push({key:"startup.checklist.adirs_nav"}),e.adirs.aligned||e.adirs.alignState<100&&r.push({key:"startup.checklist.adirs_aligning",params:{progress:Math.floor(e.adirs.alignState)}})),(i=e.apu)!=null&&i.bleed||r.push({key:"startup.checklist.apu_bleed_on"}),(o=e.electrical)!=null&&o.apuGen||r.push({key:"startup.checklist.apu_gen_on"}),(!((l=e.apu)!=null&&l.running)||((c=e.apu)==null?void 0:c.n2)<90)&&r.push({key:"startup.checklist.apu_running"});else if(t===xr.ENGINE_START){const p=[];Array.isArray(n)?n.forEach(w=>p.push(w)):n&&typeof n=="object"&&Object.keys(n).sort((w,C)=>{const g=parseInt(String(w).replace("eng",""),10)||0,m=parseInt(String(C).replace("eng",""),10)||0;return g-m}).forEach(w=>{p.push(n[w])});const v=p.length||2;for(let w=0;w<v;w++){const C=p[w],g=C?typeof C.n2=="number"?C.n2:C.state&&C.state.n2:null;typeof g=="number"&&g>50||r.push({key:"startup.checklist.engine_running",params:{index:w+1}})}for(let w=0;w<v;w++){const C=`gen${w+1}`;(u=e.electrical)!=null&&u[C]||r.push({key:"startup.checklist.gen_on",params:{index:w+1}})}((d=e.apu)!=null&&d.running||(y=e.electrical)!=null&&y.apuGen)&&r.push({key:"startup.checklist.apu_shutdown"}),e.adirs&&!e.adirs.aligned&&r.push({key:"startup.checklist.adirs_complete"})}return{canContinue:r.length===0,missingItems:r}},qe={BOARDING:"boarding",DEPARTURE_CLEARANCE:"departure_clearance",PUSHBACK:"pushback",TAXIING:"taxiing",TAKEOFF_PREP:"takeoff_prep",TAKEOFF:"takeoff",CLIMB:"climb",INITIAL_CLIMB:"initial_climb",MAIN_CLIMB:"main_climb",CRUISE:"cruise",DESCENT:"descent",APPROACH:"approach",LANDING:"landing",AFTER_LAND_TAXIING:"after_land_taxiing",SHUTOFF:"shutoff",EMERGENCY:"emergency",POST_MORTEM:"post_mortem"},bw={id:"realistic-flight-1",name:"Realistic Transcontinental Flight",difficulty:"medium",aircraftModel:"Boeing 737-800",callsign:"SKY123",departure:"KJFK",arrival:"KLAX",targetCruiseAltitude:35e3,phases:[{id:"phase-boarding",name:"Boarding",type:qe.BOARDING,durationSeconds:3600,physics:{mode:"off"},narrative:{title:"Boarding at ${departure}",content:'The smell of jet fuel and coffee fills the cabin as passengers stow their luggage. Outside, the ground crew is prepping for our departure. "Welcome aboard ${callsign}," the flight attendant announces over the PA. The ${aircraft} is ready for the journey to ${arrival}.'}},{id:"phase-departure-clearance",name:"Departure Clearance",type:qe.DEPARTURE_CLEARANCE,durationSeconds:3600,physics:{mode:"off"},narrative:{title:"IFR Clearance",content:'The radio crackles. "${callsign}, cleared to ${arrival} via flight plan route. Climb and maintain FL350. Departure frequency 124.7. Squawk 4211." You read back the clearance as the systems come online.'}},{id:"phase-pushback",name:"Pushback & Start",type:qe.PUSHBACK,durationSeconds:3600,physics:{mode:"off"},narrative:{title:"Pushback Approved",content:'A gentle jolt as the tug connects. "Ground to Cockpit, brakes released." The terminal building slowly drifts away as you start the engines. The hum of the APU is replaced by the roar of the main turbines.'}},{id:"phase-taxiing",name:"Taxi",type:qe.TAXIING,durationSeconds:3600,physics:{mode:"off"},narrative:{title:"Taxi to Runway ${departureRunway}",content:'"${callsign}, taxi to runway ${departureRunway} via Alpha, Bravo." You release the parking brake. The tires thump rhythmically over the concrete joints as you weave through the maze of taxiways. Sunlight glints off the tarmac.'}},{id:"phase-takeoff-prep",name:"Takeoff Preparation",type:qe.TAKEOFF_PREP,durationSeconds:3600,physics:{mode:"continuous",initialAltitude:0,initialSpeed:0},narrative:{title:"Lined Up and Waiting",content:'Lined up on runway ${departureRunway}. Brakes set. Engines at idle. "Tower, ${callsign} holding in position ${departureRunway}, ready for takeoff." Check flaps, trim, and verify takeoff data.'}},{id:"phase-takeoff",name:"Takeoff Roll",type:qe.TAKEOFF,durationSeconds:30,physics:{mode:"continuous",initialAltitude:0,targetAltitude:1e3,targetSpeed:150},narrative:{title:"Takeoff Clearance",content:'Lined up on runway ${departureRunway}. "Wind 130 at 8, runway ${departureRunway} cleared for takeoff." Throttles forward. The engines roar to life, pressing you back into the seat. Rotate at Vr.'}},{id:"phase-initial-climb",name:"Initial Climb",type:qe.INITIAL_CLIMB,durationSeconds:120,physics:{mode:"continuous",targetAltitude:5e3,targetSpeed:250},narrative:{title:"Positive Rate",content:'The ground falls away beneath you. "Gear up." Punching through the lower cloud layer into the sunlight. The city of ${departure} shrinks into a miniature grid below. Speed increasing to 250 knots.'}},{id:"phase-main-climb",name:"Main Climb",type:qe.MAIN_CLIMB,durationSeconds:300,physics:{mode:"continuous",targetAltitude:35e3,targetSpeed:270},narrative:{title:"Climb to Cruise",content:'Passing 10,000 feet. "Accelerate to cruise speed." The sky darkens to a deeper blue as we ascend. The air is smooth. Climbing steadily to Flight Level 350.'}},{id:"phase-cruise",name:"Cruise Flight",type:qe.CRUISE,durationSeconds:3600,physics:{mode:"continuous",targetAltitude:35e3,targetSpeed:450},narrative:{title:"Cruising at FL350",content:'Level at 35,000 feet. The horizon is a curved line of haze. "Maintain Mach 0.78." The engines hum with a steady, reassuring rhythm. Passengers are settling in for the flight to ${arrival}.'},failurePoints:[{id:"failure-engine-1",type:"engine",engineIndex:0,probability:.3,triggerTime:60},{id:"failure-hydraulic",type:"hydraulic",system:"primary",probability:.2,triggerTime:90}]},{id:"phase-descent",name:"Descent Initiation",type:qe.DESCENT,durationSeconds:120,physics:{mode:"continuous",targetAltitude:1e4,targetSpeed:300},narrative:{title:"Top of Descent",content:'Throttles back. The pitch drops slightly as we begin our descent. "Descend and maintain 10,000 feet." The destination ${arrival} lies ahead.'}},{id:"phase-approach",name:"Final Approach",type:qe.APPROACH,durationSeconds:60,physics:{mode:"continuous",targetAltitude:2e3,targetSpeed:180},narrative:{title:"Approach to ${arrival}",content:'Lined up for runway ${landingRunway}. "Gear down, flaps 30." The runway threshold looms ahead through the haze. Speed checked, localized captured.'}},{id:"phase-landing",name:"Landing Roll",type:qe.LANDING,durationSeconds:30,physics:{mode:"continuous",targetAltitude:0,targetSpeed:0},narrative:{title:"Touchdown",content:'Flare... Touchdown. Spoilers deployed. Reverse thrust roaring. "${callsign}, welcome to ${arrival}." Braking to taxi speed.'}},{id:"phase-after-land-taxiing",name:"Taxi to Gate",type:qe.AFTER_LAND_TAXIING,durationSeconds:30,physics:{mode:"off"},narrative:{title:"Taxi to Gate",content:'"Turn left next taxiway, contact Ground." The flight is over. Taxing past other aircraft to our assigned gate.'}},{id:"phase-shutoff",name:"Shutdown",type:qe.SHUTOFF,durationSeconds:15,physics:{mode:"off"},narrative:{title:"Engine Shutdown",content:'Parking brake set. Fuel cutoff. The engines spin down into silence. APU off. "Thank you for flying with us." Flight complete.'}}]};class Cw{constructor(e=bw){this.scenario=e,this.currentIndex=0,this.elapsedInPhase=0,this.totalElapsed=0,this.status="idle",this.lastCommand=null,this.activeFailures=new Map,this.completedPhases=new Set,this.currentPhaseData=null,this.narrativeHistory=[],this.takeoffClearanceReceived=!1,this.unsubscribeClearance=Le.subscribe("atc.clearance.takeoff",()=>{console.log(" SceneManager: Takeoff Clearance Received"),this.takeoffClearanceReceived=!0}),this.unsubscribeCommand=Le.subscribe("command.input",n=>{var r;this.lastCommand=n,Le.publishWithMetadata(Mt.COMMAND_EXECUTED,{scenarioId:this.scenario.id,phaseId:(r=this.currentPhase())==null?void 0:r.id,payload:n})}),this.unsubscribeFailureResolved=Le.subscribe(Mt.FAILURE_RESOLVED,n=>{this.activeFailures.delete(n.failureId)})}currentPhase(){return this.scenario.phases[this.currentIndex]||null}getPhaseNarrative(e){const n=lr.phases[e.type];if(n){let r=null;if(n[this.scenario.difficulty]?r=n[this.scenario.difficulty]:n.default&&(r=n.default),r)return Array.isArray(r)?r[Math.floor(Math.random()*r.length)]:r}return e.narrative}applyNarrativeTemplate(e,n){if(this.scenario.difficulty==="rookie"&&[qe.TAKEOFF_PREP,qe.TAKEOFF,qe.INITIAL_CLIMB].includes(n))return e;const r=vw(n);return r?{...e,...r}:e}skipPhase(){const e=this.currentPhase();e&&(console.log(` Skipping phase: ${e.name}`),this.userSkipped=!0,this.elapsedInPhase=e.durationSeconds+1,this.checkPhaseCompletion(0,null))}start(){if(!this.currentPhase())return;this.status="running",this.userSkipped=!1,this.elapsedInPhase=0,this.totalElapsed=0,this.activeFailures.clear(),this.completedPhases.clear(),this.narrativeHistory=[],this.currentPhaseData=null,this.takeoffClearanceReceived=!1;const e=this.currentPhase();Le.publishWithMetadata(Mt.PHASE_CHANGED,{scenarioId:this.scenario.id,phase:e,totalElapsed:this.totalElapsed});const n=this.getPhaseNarrative(e);if(n){let r=this.applyNarrativeTemplate(n,e.type);this.currentPhaseData={startTime:Date.now(),activeNarrative:r},this.publishNarrative(r)}}nextPhase(){const e=this.currentPhase();e&&(this.completedPhases.add(e.id),Le.publishWithMetadata(Mt.PHASE_COMPLETE,{scenarioId:this.scenario.id,phase:e,totalElapsed:this.totalElapsed,elapsedInPhase:this.elapsedInPhase})),this.currentIndex+=1,this.elapsedInPhase=0,this.userSkipped=!1,this.currentPhaseData=null,this.takeoffClearanceReceived=!1;const n=this.currentPhase();if(!n){this.status="completed",Le.publishWithMetadata("scenario.completed",{scenarioId:this.scenario.id,totalElapsed:this.totalElapsed,completedPhases:Array.from(this.completedPhases),activeFailures:Array.from(this.activeFailures.values())});return}this.setPhaseInitialConditions(n,e),Le.publishWithMetadata(Mt.PHASE_CHANGED,{scenarioId:this.scenario.id,phase:n,totalElapsed:this.totalElapsed,previousPhase:e});const r=this.getPhaseNarrative(n);if(r){let a=this.applyNarrativeTemplate(r,n.type);this.currentPhaseData={...this.currentPhaseData,activeNarrative:a},this.publishNarrative(a)}}updateScenario(e){if(this.scenario={...this.scenario,...e},this.currentPhaseData&&this.currentPhaseData.activeNarrative)this.publishNarrative(this.currentPhaseData.activeNarrative);else{const n=this.currentPhase(),r=n?this.getPhaseNarrative(n):null;r&&this.publishNarrative(r)}return this.scenario}update(e,n=null){if(this.status!=="running")return;const r=this.currentPhase();if(!r){this.status="completed";return}this.elapsedInPhase+=e,this.totalElapsed+=e,this.checkFailureTriggers(r),this.updateActiveFailures(e),Le.publishWithMetadata("phase.tick",{scenarioId:this.scenario.id,phaseId:r.id,phaseType:r.type,elapsedInPhase:this.elapsedInPhase,totalElapsed:this.totalElapsed,activeFailures:Array.from(this.activeFailures.values()),physicsActive:this.physicsActive()}),this.checkPhaseCompletion(e,n)}checkPhaseCompletion(e,n){var i,o,l,c,u,d,y,p,h,v,w,C;const r=this.currentPhase();if(!r)return;let a=!1;if(r.type===qe.TAKEOFF){const m=(((i=n==null?void 0:n.position)==null?void 0:i.z)||0)*3.28084;let f=0;typeof((o=n==null?void 0:n.velocity)==null?void 0:o.z)=="number"?f=n.velocity.z*60*3.28084:typeof((l=n==null?void 0:n.velocity)==null?void 0:l.w)=="number"?f=n.velocity.w*60:n!=null&&n.verticalSpeed&&(f=n.verticalSpeed),f>200&&m>=400&&(a=!0)}else if(r.type===qe.TAKEOFF_PREP){if(this.takeoffClearanceReceived)if(["pro","devil"].includes(this.scenario.difficulty.toLowerCase())){const m=((c=n==null?void 0:n.controls)==null?void 0:c.throttle)||(n==null?void 0:n.throttle)||0,f=((d=(u=n==null?void 0:n.engineParams)==null?void 0:u.n1)==null?void 0:d[0])||((h=(p=(y=n==null?void 0:n.systems)==null?void 0:y.engines)==null?void 0:p.eng1)==null?void 0:h.n1)||0;(this.userSkipped||m>.4||f>40)&&(a=!0)}else a=!0}else if(r.type===qe.INITIAL_CLIMB)(((v=n==null?void 0:n.position)==null?void 0:v.z)||0)*3.28084>=5e3&&(a=!0);else if(r.type===qe.MAIN_CLIMB)(((w=n==null?void 0:n.position)==null?void 0:w.z)||0)*3.28084>=this.scenario.targetCruiseAltitude-1e3&&(a=!0);else if(r.type===qe.CRUISE){if(this.scenario.arrival&&(n!=null&&n.geo)){const g=airportService.getAirportByCode(this.scenario.arrival);if(g){const m=airportService.calculateDistance({latitude:n.geo.latitude,longitude:n.geo.longitude},{latitude:g.latitude,longitude:g.longitude});m<=200&&(a=!0,console.log(` Initiating descent: Distance to ${this.scenario.arrival} is ${m}nm`))}}}else if(r.type===qe.PUSHBACK){const g=["pro","devil"].includes(this.scenario.difficulty.toLowerCase()),m=((C=n==null?void 0:n.systems)==null?void 0:C.engines)&&Object.values(n.systems.engines).some(f=>f.n2>15);if(g)if(n&&n.systems){const f=tc(xr.ENGINE_START,n.systems,n.systems.engines);if(this.userSkipped)a=!0;else if(a=!1,this.elapsedInPhase>=r.durationSeconds&&f.missingItems.length>0){const S=Math.floor(this.elapsedInPhase-r.durationSeconds);if(S>0&&S%15===5){const A=this.lastChecklistWarningTime||0,I=Date.now();I-A>2e3&&(this.publishNarrative({title:"Startup Checklist Incomplete",content:`Cannot proceed to next phase. Missing: ${f.missingItems.join(", ")}`,severity:"warning"}),this.lastChecklistWarningTime=I)}}}else this.userSkipped?a=!0:a=!1;else(this.userSkipped||this.elapsedInPhase>20&&m||this.elapsedInPhase>300)&&(a=!0)}else if(r.type===qe.TAXIING)if(["pro","devil"].includes(this.scenario.difficulty.toLowerCase()))this.userSkipped?a=!0:a=!1;else{const m=(n==null?void 0:n.airspeed)||0;this.userSkipped?a=!0:this.elapsedInPhase>30&&m>5?this.elapsedInPhase>120&&(a=!0):this.elapsedInPhase>300&&(a=!0)}else if(["pro","devil"].includes(this.scenario.difficulty.toLowerCase()))if([qe.BOARDING,qe.DEPARTURE_CLEARANCE,qe.PUSHBACK].includes(r.type)&&n&&n.systems){const f=tc(r.type===qe.PUSHBACK?xr.ENGINE_START:xr.POWER_UP,n.systems,n.engines||[]);if(this.userSkipped)a=!0;else if(a=!1,this.elapsedInPhase>=r.durationSeconds&&f.missingItems.length>0){const S=Math.floor(this.elapsedInPhase-r.durationSeconds);if(S>0&&S%15===5){const A=this.lastChecklistWarningTime||0,I=Date.now();I-A>2e3&&(this.publishNarrative({title:"Startup Checklist Incomplete",content:`Cannot proceed to next phase. Missing: ${f.missingItems.join(", ")}`,severity:"warning"}),this.lastChecklistWarningTime=I)}}}else this.userSkipped?a=!0:a=!1;else a=this.userSkipped||this.elapsedInPhase>=r.durationSeconds;a&&(Le.publishWithMetadata("phase.ended",{scenarioId:this.scenario.id,phaseId:r.id,elapsedInPhase:this.elapsedInPhase}),this.nextPhase())}checkFailureTriggers(e){}triggerFailure(e){var r;const n={id:e.id,type:e.type,severity:"minor",progress:0,startTime:this.totalElapsed,data:{...e},isCritical:!1,timeToCritical:null};this.activeFailures.set(n.id,n),Le.publishWithMetadata(Mt.FAILURE_OCCURRED,{failureId:n.id,failure:n,phaseId:(r=this.currentPhase())==null?void 0:r.id,scenarioId:this.scenario.id,totalElapsed:this.totalElapsed}),this.publishNarrative({title:"System Alert",content:this.getFailureNarrative(n),severity:"warning"})}updateActiveFailures(e){var n;for(const[r,a]of this.activeFailures.entries())a.progress+=e*(5+Math.random()*10),a.progress>=75&&!a.isCritical&&(a.isCritical=!0,a.timeToCritical=this.totalElapsed,Le.publishWithMetadata(Mt.FAILURE_PROGRESSED,{failureId:a.id,failure:a,phaseId:(n=this.currentPhase())==null?void 0:n.id,scenarioId:this.scenario.id,totalElapsed:this.totalElapsed}),this.publishNarrative({title:"Critical Failure Alert",content:this.getCriticalFailureNarrative(a),severity:"critical"})),a.progress>=100&&this.resolveFailure(r,!1)}resolveFailure(e,n=!0){var a;const r=this.activeFailures.get(e);r&&(Le.publishWithMetadata(Mt.FAILURE_RESOLVED,{failureId:r.id,failure:r,resolvedByUser:n,phaseId:(a=this.currentPhase())==null?void 0:a.id,scenarioId:this.scenario.id,totalElapsed:this.totalElapsed}),this.activeFailures.delete(e),n&&this.publishNarrative({title:"System Restored",content:this.getResolutionNarrative(r),severity:"success"}))}publishNarrative(e){var r;const n={id:`narrative-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:this.totalElapsed,phaseId:(r=this.currentPhase())==null?void 0:r.id,title:e.title,content:e.content,severity:e.severity,data:{callsign:this.scenario.callsign||"Flight 123",departure:this.scenario.departureName||this.scenario.departure||"Unknown",arrival:this.scenario.arrivalName||this.scenario.arrival||"Unknown",aircraft:this.scenario.aircraftModel||"Unknown Aircraft",difficulty:this.scenario.difficulty||"Unknown",...e.data}};this.narrativeHistory.push(n),Le.publishWithMetadata(Mt.NARRATIVE_UPDATE,n),e.severity==="critical"&&Le.publishWithMetadata(Mt.CRITICAL_MESSAGE,n)}parseTemplate(e,n){if(!e)return"";const r={callsign:this.scenario.callsign||"Flight 123",departure:this.scenario.departure||"Unknown",arrival:this.scenario.arrival||"Unknown",aircraft:this.scenario.aircraftModel||"Unknown Aircraft",difficulty:this.scenario.difficulty||"Unknown",...n};return e.replace(/\${([^}]+)}/g,(a,i)=>{const l=i.trim().split(".").reduce((c,u)=>c&&c[u]!==void 0?c[u]:void 0,r);return l!==void 0?l:a})}getFailureNarrative(e){return(lr.failures[e.type]||lr.defaults.failure).minor}getCriticalFailureNarrative(e){return(lr.failures[e.type]||lr.defaults.failure).critical}getResolutionNarrative(e){return(lr.failures[e.type]||lr.defaults.failure).resolved}physicsActive(){const e=this.currentPhase();if(!e||!e.physics||e.physics.mode==="off")return!1;if(e.physics.mode==="continuous")return!0;if(e.physics.mode==="window"){const n=typeof e.physics.activeUntilSeconds=="number"?e.physics.activeUntilSeconds:e.durationSeconds;return this.elapsedInPhase<=n}return!1}getState(){const e=this.currentPhase();return{scenarioId:this.scenario.id,status:this.status,phaseId:e?e.id:null,phaseName:e?e.name:null,phaseType:e?e.type:null,elapsedInPhase:this.elapsedInPhase,totalElapsed:this.totalElapsed,physicsActive:this.physicsActive(),activeFailures:Array.from(this.activeFailures.values()),completedPhases:Array.from(this.completedPhases),lastCommand:this.lastCommand,takeoffClearanceReceived:this.takeoffClearanceReceived,narrativeHistory:this.narrativeHistory.slice(-5)}}setPhaseInitialConditions(e,n=null){if(!e||!e.physics)return;const r=e.physics,a=n&&n.physics&&n.physics.mode==="continuous",i=r.mode==="continuous";if(a&&i&&!r.forceReset){const c={};e.type===qe.TAKEOFF&&(c.brakes=0),Le.publishWithMetadata(Mt.PHYSICS_INITIALIZE,{phaseId:e.id,phaseType:e.type,initialConditions:Object.keys(c).length>0?c:void 0});return}const l={position:{x:0,y:0,z:0},velocity:{u:0,v:0,w:0},orientation:{phi:0,theta:0,psi:0},throttle:0};if(r.initialAltitude!==void 0&&(l.position.z=r.initialAltitude*.3048),r.initialSpeed!==void 0&&(l.velocity.u=r.initialSpeed*.514444),r.initialHeading!==void 0&&(l.orientation.psi=r.initialHeading*Math.PI/180),e.type===qe.TAKEOFF||e.type===qe.TAKEOFF_PREP){l.position.z=0,l.velocity.u=0,l.velocity.v=0,l.velocity.w=0,l.orientation.theta=0,l.gear=!0;let c=130;this.scenario.initialHeading!==void 0?c=this.scenario.initialHeading:c=this.getDepartureRunwayHeading()||130,l.orientation.psi=c*Math.PI/180,e.type===qe.TAKEOFF_PREP?(l.throttle=0,l.brakes=1):(l.throttle=.4,l.brakes=0)}Le.publishWithMetadata(Mt.PHYSICS_INITIALIZE,{phaseId:e.id,phaseType:e.type,initialConditions:l,targetAltitude:r.targetAltitude?r.targetAltitude*.3048:void 0,targetSpeed:r.targetSpeed?r.targetSpeed*.514444:void 0,targetHeading:r.targetHeading?r.targetHeading*Math.PI/180:void 0})}getDepartureRunwayHeading(){var n;const e=(n=this.scenario)==null?void 0:n.departureRunway;return typeof e=="string"&&e.length>0?Jc(e):130}}const wn=new Cw,Mh={DELIVERY:[{id:"req_clearance",label:"Request IFR Clearance",template:"{station}, {callsign} requesting IFR clearance to {destination} via {sid}, {altitude}, {route}.",params:["destination","sid","altitude","route"],type:"request",allowedTypes:["Delivery","Ground"]},{id:"req_startup",label:"Request Startup",template:"{station}, {callsign} requesting startup and pushback.",type:"request",allowedTypes:["Delivery","Ground"]},{id:"req_pdc",label:"Request PDC",template:"{station}, {callsign} requesting Pre-Departure Clearance.",type:"request",allowedTypes:["Delivery"]},{id:"req_alt_brief",label:"Alternate Airport Brief",template:"{station}, {callsign} confirming alternate airport {alternate}.",params:["alternate"],type:"inform",allowedTypes:["Delivery"]},{id:"req_runway_confirm",label:"Confirm Departure Runway",template:"{station}, {callsign} requesting confirmation of departure runway.",type:"request",allowedTypes:["Delivery","Ground"]},{id:"ack_clearance",label:"Acknowledge Clearance",template:"Cleared to {destination} via {sid}, climb {altitude}, squawk {squawk}, {callsign}.",params:["destination","sid","altitude","squawk"],type:"readback",allowedTypes:["Delivery","Ground"]},{id:"ack_squawk",label:"Readback Squawk",template:"Squawk {code}, {callsign}.",params:["code"],type:"readback",allowedTypes:["Delivery","Ground"]},{id:"report_unable",label:"Report Unable",template:"Unable {instruction}, request alternative, {callsign}.",params:["instruction"],type:"inform",allowedTypes:["ALL"]}],GROUND:[{id:"req_taxi",label:"Request Taxi",template:"{station}, {callsign} ready for taxi to runway {runway}.",params:["runway"],type:"request",allowedTypes:["Ground"]},{id:"req_pushback",label:"Request Pushback",template:"{station}, {callsign} requesting pushback facing {direction}.",params:["direction"],type:"request",allowedTypes:["Ground"]},{id:"req_deice",label:"Request De-icing",template:"{station}, {callsign} requesting de-icing at current position.",type:"request",allowedTypes:["Ground"]},{id:"req_hold_short",label:"Hold Short Instructions",template:"{station}, {callsign} requesting hold short instructions.",type:"request",allowedTypes:["Ground","Tower"]},{id:"req_cross_runway",label:"Request Runway Crossing",template:"{station}, {callsign} requesting to cross runway {runway}.",params:["runway"],type:"request",allowedTypes:["Ground","Tower"]},{id:"req_return_gate",label:"Return to Gate",template:"{station}, {callsign} requesting return to gate due to {reason}.",params:["reason"],type:"request",allowedTypes:["Ground"]},{id:"report_ground_issue",label:"Report Ground Issue",template:"{station}, {callsign} reporting {issue}.",params:["issue"],type:"inform",allowedTypes:["Ground","Tower"]}],TOWER:[{id:"req_takeoff",label:"Ready for Departure",template:"{station}, {callsign} ready for departure runway {runway}.",params:["runway"],type:"request",allowedTypes:["Tower"]},{id:"req_lineup",label:"Line Up and Wait",template:"{station}, {callsign} ready to line up and wait runway {runway}.",params:["runway"],type:"request",allowedTypes:["Tower"]},{id:"req_land",label:"Request Landing",template:"{station}, {callsign} inbound for landing runway {runway}.",params:["runway"],type:"request",allowedTypes:["Tower"]},{id:"req_go_around",label:"Going Around",template:"Going around, {callsign}.",type:"inform",allowedTypes:["Tower"]},{id:"req_missed_approach",label:"Missed Approach",template:"Missed approach, {callsign}.",type:"inform",allowedTypes:["Tower","Approach"]},{id:"req_short_approach",label:"Request Short Approach",template:"{station}, {callsign} requesting short approach.",type:"request",allowedTypes:["Tower"]},{id:"abort_takeoff",label:"Abort Takeoff",template:"Stopping, {callsign}. Rejecting takeoff due to {reason}.",params:["reason"],type:"inform",allowedTypes:["Tower"]},{id:"report_windshear",label:"Report Wind Shear",template:"Wind shear reported on {location}, {callsign}.",params:["location"],type:"inform",allowedTypes:["Tower","Approach"]}],APPROACH:[{id:"inf_checkin",label:"Check In",template:"{station}, {callsign} passing {altitude} for {target_alt}.",params:["altitude","target_alt"],type:"inform",allowedTypes:["Approach","Departure","Center"]},{id:"req_alt_change",label:"Request Altitude Change",template:"{station}, {callsign} requesting {altitude}.",params:["altitude"],type:"request",allowedTypes:["Approach","Departure","Center"]},{id:"req_vectors_ils",label:"Request Vectors ILS",template:"{station}, {callsign} requesting vectors for ILS approach runway {runway}.",params:["runway"],type:"request",allowedTypes:["Approach"]},{id:"req_visual",label:"Request Visual Approach",template:"{station}, {callsign} requesting visual approach runway {runway}.",params:["runway"],type:"request",allowedTypes:["Approach","Tower"]},{id:"req_holding",label:"Request Holding",template:"{station}, {callsign} requesting holding at {waypoint}.",params:["waypoint"],type:"request",allowedTypes:["Approach","Center"]},{id:"req_weather_dev",label:"Weather Deviation",template:"{station}, {callsign} requesting deviation {direction} due to weather.",params:["direction"],type:"request",allowedTypes:["Approach","Departure","Center"]}],CENTER:[{id:"req_step_climb",label:"Request Step Climb",template:"{station}, {callsign} requesting step climb to {altitude}.",params:["altitude"],type:"request",allowedTypes:["Center"]},{id:"req_direct",label:"Request Direct",template:"{station}, {callsign} requesting direct {waypoint}.",params:["waypoint"],type:"request",allowedTypes:["Center","Approach"]},{id:"req_reroute",label:"Request Reroute",template:"{station}, {callsign} requesting reroute due to {reason}.",params:["reason"],type:"request",allowedTypes:["Center"]},{id:"req_turbulence",label:"Report Turbulence",template:"{station}, {callsign} reporting {severity} turbulence.",params:["severity"],type:"inform",allowedTypes:["Center"]}],EMERGENCY:[{id:"inf_mayday",label:"MAYDAY",template:"MAYDAY MAYDAY MAYDAY, {station}, {callsign} declaring emergency. {nature}. Requesting immediate priority.",params:["nature"],type:"inform",allowedTypes:["ALL"]},{id:"inf_pan",label:"PAN-PAN",template:"PAN-PAN PAN-PAN PAN-PAN, {station}, {callsign}. {nature}.",params:["nature"],type:"inform",allowedTypes:["ALL"]},{id:"req_priority_landing",label:"Request Priority Landing",template:"{station}, {callsign} requesting priority landing runway {runway}.",params:["runway"],type:"request",allowedTypes:["ALL"]},{id:"req_emergency_descent",label:"Emergency Descent",template:"Emergency descent, {callsign}. Descending to {altitude}.",params:["altitude"],type:"inform",allowedTypes:["ALL"]},{id:"report_failure",label:"Report Failure",template:"{station}, {callsign} reporting {failure} failure.",params:["failure"],type:"inform",allowedTypes:["ALL"]},{id:"inf_fuel_emergency",label:"Fuel Emergency",template:"MAYDAY, {callsign}, fuel emergency. Remaining endurance {minutes} minutes.",params:["minutes"],type:"inform",allowedTypes:["ALL"]},{id:"req_crash_crew",label:"Request Crash Crew",template:"{station}, {callsign} requesting crash crews on standby.",type:"request",allowedTypes:["Tower","Approach","Ground"]}]},Tw=({onTransmit:t,currentStation:e="Unicom",callsign:n="Cessna 172",flightPlan:r,isChannelBusy:a,frequencyType:i="UNICOM"})=>{const{t:o}=qn(),[l,c]=L.useState("REQUEST"),[u,d]=L.useState(null),[y,p]=L.useState({}),v=(Array.isArray(r)?r:(r==null?void 0:r.waypoints)||[]).map(f=>f.name||f.label||f.id||"WPT").filter(Boolean),w=f=>{c(f),d(null),p({})},C=f=>{d(f);const S={};f.params&&f.params.forEach(A=>{S[A]="",A==="runway"&&!Array.isArray(r)&&(r!=null&&r.departureRunway)&&(S[A]=r.departureRunway)}),p(S)},g=(f,S)=>{p(A=>({...A,[f]:S}))},m=f=>{if(f.preventDefault(),!u)return;const S={station:e,callsign:n,...y},A=o(`radio.template.${u.id}.text`,S);t({type:u.type,templateId:u.id,text:A,params:y,sender:"Pilot",timestamp:Date.now()}),d(null),p({})};return s.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",background:"rgba(15, 23, 42, 0.95)",borderRadius:"8px",border:"1px solid #334155",overflow:"hidden",color:"#e2e8f0"},children:[s.jsx("div",{style:{display:"flex",borderBottom:"1px solid #334155"},children:Object.keys(Mh).map(f=>s.jsx("button",{onClick:()=>w(f),style:{flex:1,padding:"4px 2px",background:l===f?"#1e293b":"transparent",border:"none",borderBottom:l===f?"2px solid #38bdf8":"none",color:l===f?"#38bdf8":"#94a3b8",fontSize:"10px",fontWeight:"bold",cursor:"pointer"},children:o(`radio.tabs.${f}`)||f},f))}),s.jsx("div",{style:{flex:"none",height:"80px",padding:"4px",overflowY:"auto"},children:u?s.jsxs("form",{onSubmit:m,style:{display:"flex",flexDirection:"column",gap:"6px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:"#38bdf8"},children:o(`radio.template.${u.id}.label`)||u.label}),s.jsx("button",{type:"button",onClick:()=>d(null),style:{background:"none",border:"none",color:"#94a3b8",cursor:"pointer",fontSize:"9px"},children:o("radio.cancel")})]}),u.params&&u.params.map(f=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:[s.jsx("label",{style:{fontSize:"9px",textTransform:"uppercase",color:"#94a3b8"},children:f}),f==="waypoint"&&v.length>0?s.jsxs("select",{value:y[f]||"",onChange:S=>g(f,S.target.value),style:{background:"#0f172a",border:"1px solid #334155",borderRadius:"4px",padding:"4px",color:"white",fontSize:"11px",cursor:"pointer"},children:[s.jsx("option",{value:"",children:o("radio.select")}),v.map(S=>s.jsx("option",{value:S,children:S},S))]}):s.jsx("input",{type:"text",value:y[f],onChange:S=>g(f,S.target.value),placeholder:o("radio.enter",{param:f}),style:{background:"#0f172a",border:"1px solid #334155",borderRadius:"4px",padding:"4px",color:"white",fontSize:"11px"},autoFocus:f===u.params[0]})]},f)),s.jsxs("div",{style:{fontSize:"10px",color:"#94a3b8",background:"#0f172a",padding:"4px",borderRadius:"4px",border:"1px dashed #334155",marginTop:"2px",lineHeight:"1.2"},children:['"',o(`radio.template.${u.id}.text`,{station:e,callsign:n,...y}),'"']}),s.jsx("button",{type:"submit",disabled:a,style:{marginTop:"2px",padding:"6px",background:a?"#475569":"#38bdf8",color:a?"#94a3b8":"#0f172a",border:"none",borderRadius:"4px",fontWeight:"bold",fontSize:"11px",cursor:a?"not-allowed":"pointer"},children:o(a?"radio.busy":"radio.transmit")})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:Mh[l].filter(f=>{if(!f.allowedTypes||f.allowedTypes.includes("ALL"))return!0;const S=i.toUpperCase(),A=S.charAt(0).toUpperCase()+S.slice(1).toLowerCase();return f.allowedTypes.includes(A)}).map(f=>s.jsxs("button",{onClick:()=>C(f),style:{textAlign:"left",padding:"4px 6px",background:"#1e293b",border:"1px solid #334155",borderRadius:"4px",color:"#e2e8f0",fontSize:"11px",cursor:"pointer",transition:"background 0.2s",lineHeight:"1.2"},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"10px"},children:o(`radio.template.${f.id}.label`)||f.label}),s.jsx("div",{style:{fontSize:"9px",color:"#94a3b8",fontStyle:"italic",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o(`radio.template.${f.id}.text`,{station:e,callsign:n})})]},f.id))})})]})},Vs=t=>t&&t.difficulty?t.difficulty:"Intermediate",Ys={req_clearance:(t,e)=>{const n=t.destination||"DEST",r=t.sid||"SID1",a=t.altitude||"FL300",i=Math.floor(1e3+Math.random()*6e3),o=Vs(e);return o==="Rookie"?`Cleared to ${n}, via ${r}, climb ${a}, squawk ${i}. (Hint: Set transponder to ${i} and altitude to ${a})`:o==="Devil"?`Cleared to ${n}, via COMPLEX2A transition, climb via SID except maintain 3000 until 5 DME, squawk ${i}.`:`Cleared to ${n} via ${r}, climb ${a}, squawk ${i}, {callsign}.`},req_startup:(t,e)=>"Startup and pushback approved, face East, Altimeter 29.92, {callsign}.",req_pdc:(t,e)=>"PDC is available. Cleared as filed. Squawk 4201, {callsign}.",req_alt_brief:(t,e)=>`Alternate ${t.alternate} noted, {callsign}.`,req_runway_confirm:(t,e)=>`Departure runway is ${e.departureRunway||"09L"}, {callsign}.`,ack_clearance:()=>null,ack_squawk:()=>null,report_unable:(t,e)=>"Roger, state intentions or preferred routing, {callsign}.",req_taxi:(t,e)=>{const n=t.runway||e.departureRunway||"09L",a=["A","B","C","D"].slice(0,3).join("-");return Vs(e)==="Rookie"?`Taxi to runway ${n} via ${a}, {callsign}. (Use rudder/tiller to steer)`:`Taxi to holding point runway ${n} via ${a}, {callsign}.`},req_pushback:(t,e)=>`Pushback approved facing ${t.direction||"East"}, {callsign}.`,req_deice:()=>"De-icing truck dispatched, hold position, {callsign}.",req_hold_short:()=>"Hold short of runway/taxiway intersection, {callsign}.",req_cross_runway:t=>`Crossing approved runway ${t.runway}, {callsign}.`,req_return_gate:()=>"Roger, taxi back to gate via Alpha, {callsign}.",report_ground_issue:t=>"Roger, {callsign}. Do you require assistance?",req_takeoff:(t,e)=>{const n=t.runway||e.departureRunway||"09L";let r="Wind 270 at 8";return e.weather&&(r=`Wind ${Math.round(e.weather.windDirection||270)} at ${Math.round(e.weather.windSpeed||8)}`),Vs(e)==="Devil"&&Math.random()>.7?"Hold position, traffic on runway, {callsign}.":`${r}, runway ${n} cleared for takeoff, {callsign}.`},req_lineup:t=>`Runway ${t.runway}, line up and wait, {callsign}.`,req_land:(t,e)=>{const n=t.runway||e.arrivalRunway||"27R";let r="Wind 270 at 10";return e.weather&&(r=`Wind ${Math.round(e.weather.windDirection||270)} at ${Math.round(e.weather.windSpeed||10)}`),`Runway ${n} cleared to land, ${r}, {callsign}.`},req_go_around:()=>"Roger, fly runway heading, climb 3000, {callsign}.",req_missed_approach:()=>"Roger missed approach, contact Departure, {callsign}.",req_short_approach:()=>"Short approach approved, make short final, {callsign}.",abort_takeoff:()=>"Roger, exit runway when able, contact Ground, {callsign}.",report_windshear:()=>"Copy wind shear, alerting other aircraft.",inf_checkin:(t,e)=>"Radar contact, altimeter 29.92, {callsign}.",req_alt_change:(t,e)=>Math.random()>.2?`Climb and maintain ${t.altitude}, {callsign}.`:`Unable ${t.altitude} due to traffic, {callsign}.`,req_vectors_ils:t=>`Turn left heading 240, intercept LOC runway ${t.runway}, {callsign}.`,req_visual:t=>`Cleared visual approach runway ${t.runway}, report field in sight, {callsign}.`,req_holding:t=>`Hold at ${t.waypoint}, right turns, 1 minute legs, {callsign}.`,req_weather_dev:t=>`Deviation ${t.direction} approved, report clear of weather, {callsign}.`,req_step_climb:t=>`Climb and maintain ${t.altitude}, {callsign}.`,req_direct:t=>`Proceed direct ${t.waypoint}, {callsign}.`,req_reroute:()=>"Standby for reroute... Cleared to destination via present position direct VOR, {callsign}.",req_turbulence:()=>"Roger, PIREP received. Smooth air reported at FL350.",inf_mayday:t=>"MAYDAY acknowledged, {callsign}. Squawk 7700. State souls on board and fuel remaining. All runways available for you. Winds calm.",inf_pan:t=>"PAN-PAN acknowledged, {callsign}. Report intentions.",req_priority_landing:t=>`Priority landing approved runway ${t.runway||"any"}, wind calm, you are number one, {callsign}.`,req_emergency_descent:t=>"Emergency descent received, clear of traffic below you, altimeter 29.92, {callsign}.",report_failure:()=>"Roger, advise if assistance required, {callsign}.",inf_fuel_emergency:()=>"Roger fuel emergency, cleared direct to field, runway 09L, priority handling, {callsign}.",req_crash_crew:()=>"Crash crews have been alerted and are standing by, {callsign}.",req_atis:(t,e)=>{if(e&&e.weather){const n=e.weather,r=`${Math.round(n.windDirection||0)} at ${Math.round(n.windSpeed||0)} knots`,a=(n.visibility||1e4)>9e3?"10km or more":`${Math.round(n.visibility)} meters`,i=Math.round(n.temperature||15),o=Math.round(n.pressure||1013);return`Current Weather: Wind ${r}, Visibility ${a}, Temperature ${i}, QNH ${o}. {callsign}.`}return"Information Kilo. Wind Calm, Visibility 10km, Sky Clear, Temperature 15, QNH 1013. {callsign}."},req_freq_change:(t,e)=>`Frequency change approved. Contact Center on ${(118+Math.random()*10).toFixed(3)}. Good day, {callsign}.`,ack:()=>null,wilco:()=>null,rb_alt:()=>null,rb_hdg:()=>null,rb_freq:()=>null,sys_traffic_alert:(t,e)=>{const n=t.diff>0?"descend and maintain":"climb and maintain";return`${e.callsign||"Station"}, traffic alert. Check altitude. Immediately ${n} ${t.assignedAltitude}.`},sys_readback_wrong:(t,e)=>`Negative ${e.callsign}, maintain ${t.assignedAltitude}.`,default:()=>"Station calling, say again."},Sw={req_clearance:t=>` ${t.destination||""},  ${t.sid||"SID"},  ${t.altitude||"FL300"},  ${Math.floor(1e3+Math.random()*6e3)}, {callsign}.`,req_startup:()=>", ,  29.92, {callsign}.",req_taxi:(t,e)=>` A, B  ${t.runway||e.departureRunway||"09L"} , {callsign}.`,req_takeoff:(t,e)=>` ${t.runway||e.departureRunway||"09L"} , {callsign}.`,req_land:(t,e)=>` ${t.runway||e.arrivalRunway||"27R"} , {callsign}.`,inf_checkin:()=>",  29.92, {callsign}.",req_alt_change:t=>` ${t.altitude}, {callsign}.`,inf_mayday:()=>" MAYDAY, {callsign}.  7700. . .",inf_pan:()=>" PAN-PAN, {callsign}. .",req_atis:(t,e)=>{if(e&&e.weather){const n=e.weather,r=`${Math.round(n.windDirection||0)} , ${Math.round(n.windSpeed||0)} `,a=(n.visibility||1e4)>9e3?"10":`${Math.round(n.visibility)} `,i=Math.round(n.temperature||15),o=Math.round(n.pressure||1013);return` Kilo.  ${r},  ${a},  ${i},  ${o}. {callsign}.`}return" Kilo. ,  10, ,  15,  1013. {callsign}."},req_freq_change:()=>" 120.5. , {callsign}.",default:()=>", ."},Qi=(t,e,n,r="en")=>{const a=r==="zh"?Sw:Ys,i=a[t]||(r==="zh"?Ys[t]:null)||a.default||Ys.default;if(i){let o=i(e,n);return o?(n.callsign&&(o=o.replace("{callsign}",n.callsign)),o):null}return"Station calling, say again."};class Iw{constructor(){this.pendingResponse=null,this.responseTimeout=null,this.frequencyLocks=new Map,this.assignedAltitude=null,this.lastAssignmentTime=0,this.atisTimer=0,this.lastComplianceCheck=0,this.lastReadbackError=0,this.nextOrderTime=Date.now()+6e4}isBusy(e){if(!e)return!1;const n=this.frequencyLocks.get(e)||0;return Date.now()<n}blockChannel(e,n){if(!e)return;const r=this.frequencyLocks.get(e)||0;this.frequencyLocks.set(e,Math.max(r,Date.now()+n))}update(e,n,r,a,i){if(!(!n||!r)){if(r.type==="ATIS"||r.station&&r.station.includes("ATIS")){if(this.atisTimer-=e,this.atisTimer<=0){this.atisTimer=60;const o=Qi("req_atis",{},{weather:n.weather,callsign:"ALL STATIONS"},i);a({sender:"ATIS",text:o,timestamp:Date.now(),frequency:r.frequency})}}else this.atisTimer=0;if(this.assignedAltitude&&Date.now()-this.lastComplianceCheck>5e3&&(this.lastComplianceCheck=Date.now(),Date.now()-this.lastAssignmentTime>6e4)){const o=n.altitude-this.assignedAltitude;if(Math.abs(o)>500){const l=n.verticalSpeed||0;if(!(o>0&&l<-500||o<0&&l>500)){const u=Qi("sys_traffic_alert",{diff:o,assignedAltitude:this.assignedAltitude},{callsign:n.callsign},i);a({sender:"ATC",text:u,timestamp:Date.now(),frequency:r.frequency}),this.lastAssignmentTime=Date.now()}}}Date.now()>this.nextOrderTime&&(this.nextOrderTime=Date.now()+12e4+Math.random()*18e4,!this.isBusy(r.frequency)&&r.type!=="UNICOM"&&r.type!=="ATIS"&&this.generateRandomOrder(n,r,a,i))}}generateRandomOrder(e,n,r,a){const o=[{text:`${e.callsign}, check altimeter setting 29.92.`,condition:()=>Math.abs(e.altitude)>18e3},{text:`${e.callsign}, radar contact, maintain present heading.`,condition:()=>!0},{text:`${e.callsign}, traffic is 2 o'clock, 5 miles, 3000 feet below you, report in sight.`,condition:()=>Math.random()>.5},{text:`${e.callsign}, monitor guard 121.5.`,condition:()=>!0},{text:`${e.callsign}, climb and maintain FL${Math.ceil((e.altitude+2e3)/1e3)*10}.`,condition:()=>e.verticalSpeed>500}].filter(c=>c.condition());if(o.length===0)return;const l=o[Math.floor(Math.random()*o.length)];r({sender:"ATC",text:l.text,timestamp:Date.now(),frequency:n.frequency})}processMessage(e,n,r){if(n&&n.frequencyType==="UNICOM")return;if(e.templateId==="rb_alt"){const i=parseInt(e.params.altitude,10);if(this.assignedAltitude&&Math.abs(i-this.assignedAltitude)>100){setTimeout(()=>{const o=Qi("sys_readback_wrong",{assignedAltitude:this.assignedAltitude},{callsign:n.callsign},n.language);r({sender:"ATC",text:o,timestamp:Date.now()})},1500);return}}this.responseTimeout&&(clearTimeout(this.responseTimeout),this.responseTimeout=null);const a=Qi(e.templateId,e.params||{},n,n.language||"en");if(e.templateId==="req_alt"&&a.includes("Unable")===!1&&(this.assignedAltitude=parseInt(e.params.altitude,10),this.lastAssignmentTime=Date.now()),a){const i=1e3+Math.random()*2e3;this.responseTimeout=setTimeout(()=>{r({sender:"ATC",text:a,timestamp:Date.now()}),this.responseTimeout=null},i)}}cancel(){this.responseTimeout&&(clearTimeout(this.responseTimeout),this.responseTimeout=null)}}const ka=new Iw,Rw=[{iata:"ATL",icao:"KATL",name:"HartsfieldJackson Atlanta International Airport",city:"Atlanta",country:"United States",latitude:33.6366998,longitude:-84.4280976,elevation:1026,category:"4F",runways:[{name:"08L/26R",length:12390,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:9e3,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:9e3,surface:"Asphalt",category:"Heavy"},{name:"10/28",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"11/29",length:9e3,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126.025},{type:"Tower",frequency:118.25},{type:"Ground",frequency:121.95}]},{iata:"LAX",icao:"KLAX",name:"Los Angeles International Airport",city:"Los Angeles",country:"United States",latitude:33.9425011,longitude:-118.4079971,elevation:128,category:"4F",runways:[{name:"06L/24R",length:12091,surface:"Asphalt",category:"Heavy"},{name:"06R/24L",length:10885,surface:"Asphalt",category:"Heavy"},{name:"07L/25R",length:8975,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:11095,surface:"Asphalt",category:"Heavy"},{name:"08/26",length:8926,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:128.55},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"ORD",icao:"KORD",name:"O'Hare International Airport",city:"Chicago",country:"United States",latitude:41.9786005,longitude:-87.9048004,elevation:668,category:"4F",runways:[{name:"04L/22R",length:10800,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:13e3,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126.05},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DFW",icao:"KDFW",name:"Dallas-Fort Worth International Airport",city:"Dallas",country:"United States",latitude:32.8968,longitude:-97.0372,elevation:607,category:"4F",runways:[{name:"01L/19R",length:13400,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:13400,surface:"Concrete",category:"Heavy"},{name:"09L/27R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"17L/35R",length:13400,surface:"Concrete",category:"Heavy"},{name:"17R/35L",length:13400,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"YVR",icao:"CYVR",name:"Vancouver International Airport",city:"Vancouver",country:"Canada",latitude:49.1947002,longitude:-123.1832016,elevation:13,category:"4F",runways:[{name:"08L/26R",length:10500,surface:"Concrete",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Concrete",category:"Heavy"},{name:"12/30",length:8e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"YYZ",icao:"CYYZ",name:"Toronto Pearson International Airport",city:"Toronto",country:"Canada",latitude:43.6772003,longitude:-79.6306992,elevation:568,category:"4F",runways:[{name:"05/23",length:11120,surface:"Concrete",category:"Heavy"},{name:"06L/24R",length:1e4,surface:"Concrete",category:"Heavy"},{name:"06R/24L",length:1e4,surface:"Concrete",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Concrete",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MEX",icao:"MMMX",name:"Mexico City International Airport",city:"Mexico City",country:"Mexico",latitude:19.4363003,longitude:-99.0720978,elevation:7385,category:"4F",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DEN",icao:"KDEN",name:"Denver International Airport",city:"Denver",country:"United States",latitude:39.8616982,longitude:-104.6731954,elevation:5431,category:"4F",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"17L/35R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"17R/35L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"JFK",icao:"KJFK",name:"John F. Kennedy International Airport",city:"New York",country:"United States",latitude:40.6397511,longitude:-73.7789256,elevation:13,category:"4F",runways:[{name:"04L/22R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07L/25R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"13L/31R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"13R/31L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"SFO",icao:"KSFO",name:"San Francisco International Airport",city:"San Francisco",country:"United States",latitude:37.6189995,longitude:-122.375,elevation:13,category:"4F",runways:[{name:"01L/19R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"19L/01R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"19R/01L",length:8e3,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"SEA",icao:"KSEA",name:"Seattle-Tacoma International Airport",city:"Seattle",country:"United States",latitude:47.4490013,longitude:-122.3093987,elevation:433,category:"4F",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16L/34R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16R/34L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"LAS",icao:"KLAS",name:"McCarran International Airport",city:"Las Vegas",country:"United States",latitude:36.0800991,longitude:-115.1522979,elevation:2181,category:"4F",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07L/25R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"19L/01R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"19R/01L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MIA",icao:"KMIA",name:"Miami International Airport",city:"Miami",country:"United States",latitude:25.7931995,longitude:-80.2905959,elevation:7,category:"4F",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"IAH",icao:"KIAH",name:"George Bush Intercontinental Airport",city:"Houston",country:"United States",latitude:29.9843998,longitude:-95.3414001,elevation:97,category:"4F",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"PHX",icao:"KPHX",name:"Phoenix Sky Harbor International Airport",city:"Phoenix",country:"United States",latitude:33.4341993,longitude:-112.0119972,elevation:1117,category:"4F",runways:[{name:"07L/25R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CLT",icao:"KCLT",name:"Charlotte Douglas International Airport",city:"Charlotte",country:"United States",latitude:35.2140007,longitude:-80.9431998,elevation:748,category:"4F",runways:[{name:"05L/23R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"05R/23L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"BOS",icao:"KBOS",name:"Logan International Airport",city:"Boston",country:"United States",latitude:42.3655999,longitude:-71.0091991,elevation:19,category:"4F",runways:[{name:"04L/22R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:8e3,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:8e3,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"EWR",icao:"KEWR",name:"Newark Liberty International Airport",city:"Newark",country:"United States",latitude:40.6895001,longitude:-74.1744003,elevation:18,category:"4F",runways:[{name:"04L/22R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"11L/29R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"11R/29L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DTW",icao:"KDTW",name:"Detroit Metropolitan Wayne County Airport",city:"Detroit",country:"United States",latitude:42.2123995,longitude:-83.3534012,elevation:644,category:"4F",runways:[{name:"03L/21R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"03R/21L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MSP",icao:"KMSP",name:"Minneapolis-Saint Paul International Airport",city:"Minneapolis",country:"United States",latitude:44.8819008,longitude:-93.2217987,elevation:831,category:"4F",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12L/30R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12R/30L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"13L/31R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"13R/31L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"BWI",icao:"KBWI",name:"Baltimore/Washington International Thurgood Marshall Airport",city:"Baltimore",country:"United States",latitude:39.1750002,longitude:-76.6689987,elevation:152,category:"4F",runways:[{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15L/33R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"15R/33L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"PHL",icao:"KPHL",name:"Philadelphia International Airport",city:"Philadelphia",country:"United States",latitude:39.8718996,longitude:-75.2410965,elevation:39,category:"4F",runways:[{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"17L/35R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"17R/35L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"STL",icao:"KSTL",name:"St. Louis Lambert International Airport",city:"St. Louis",country:"United States",latitude:38.7483006,longitude:-90.3700027,elevation:614,category:"4F",runways:[{name:"12L/30R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12R/30L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DCA",icao:"KDCA",name:"Ronald Reagan Washington National Airport",city:"Washington",country:"United States",latitude:38.8512993,longitude:-77.0372991,elevation:15,category:"4F",runways:[{name:"01/19",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"15/33",length:7e3,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"IAD",icao:"KIAD",name:"Washington Dulles International Airport",city:"Washington",country:"United States",latitude:38.9530983,longitude:-77.4568987,elevation:312,category:"4F",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12L/30R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12R/30L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MDW",icao:"KMDW",name:"Chicago Midway International Airport",city:"Chicago",country:"United States",latitude:41.7868004,longitude:-87.7521973,elevation:619,category:"4F",runways:[{name:"13L/31R",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"13R/31L",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"22L/04R",length:7e3,surface:"Asphalt",category:"Heavy"},{name:"22R/04L",length:7e3,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"SLC",icao:"KSLC",name:"Salt Lake City International Airport",city:"Salt Lake City",country:"United States",latitude:40.7883987,longitude:-111.9770012,elevation:4226,category:"4F",runways:[{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16L/34R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16R/34L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CVG",icao:"KCVG",name:"Cincinnati/Northern Kentucky International Airport",city:"Cincinnati",country:"United States",latitude:39.0488014,longitude:-84.6678991,elevation:893,category:"4F",runways:[{name:"09L/27R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MCO",icao:"KMCO",name:"Orlando International Airport",city:"Orlando",country:"United States",latitude:28.4293995,longitude:-81.3089981,elevation:96,category:"4F",runways:[{name:"07L/25R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18L/36R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"FLL",icao:"KFLL",name:"Fort Lauderdale-Hollywood International Airport",city:"Fort Lauderdale",country:"United States",latitude:26.0725994,longitude:-80.1527987,elevation:6,category:"4F",runways:[{name:"08L/26R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08R/26L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10L/28R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"10R/28L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]}],Lw={airports:Rw},Ew=[{iata:"PEK",icao:"ZBAA",name:"Beijing Capital International Airport",city:"Beijing",country:"China",latitude:40.0800991,longitude:116.5899963,elevation:118,category:"4F",runways:[{name:"01/19",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"HND",icao:"RJTT",name:"Haneda Airport",city:"Tokyo",country:"Japan",latitude:35.5494003,longitude:139.7799988,elevation:13,category:"4F",runways:[{name:"04/22",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"05/23",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"06/24",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"HKG",icao:"VHHH",name:"Hong Kong International Airport",city:"Hong Kong",country:"Hong Kong",latitude:22.3080006,longitude:113.9189987,elevation:20,category:"4F",runways:[{name:"07L/25R",length:12467,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12467,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"PVG",icao:"ZSPD",name:"Shanghai Pudong International Airport",city:"Shanghai",country:"China",latitude:31.1433001,longitude:121.8050003,elevation:13,category:"4F",runways:[{name:"17L/35R",length:13123,surface:"Concrete",category:"Heavy"},{name:"17R/35L",length:13123,surface:"Concrete",category:"Heavy"},{name:"18L/36R",length:13123,surface:"Concrete",category:"Heavy"},{name:"18R/36L",length:13123,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CAN",icao:"ZGGG",name:"Guangzhou Baiyun International Airport",city:"Guangzhou",country:"China",latitude:23.3958,longitude:113.3089981,elevation:118,category:"4F",runways:[{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02/20",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"SIN",icao:"WSSS",name:"Changi Airport",city:"Singapore",country:"Singapore",latitude:1.3591,longitude:103.989,elevation:22,category:"4F",runways:[{name:"02L/20R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"05/23",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"ICN",icao:"RKSI",name:"Incheon International Airport",city:"Seoul",country:"South Korea",latitude:37.4602,longitude:126.4406,elevation:20,category:"4F",runways:[{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"BKK",icao:"VTBS",name:"Suvarnabhumi Airport",city:"Bangkok",country:"Thailand",latitude:13.6899996,longitude:100.7400055,elevation:7,category:"4F",runways:[{name:"01L/19R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01R/19L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"03/21",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DEL",icao:"VIDP",name:"Indira Gandhi International Airport",city:"Delhi",country:"India",latitude:28.5665,longitude:77.1031,elevation:706,category:"4F",runways:[{name:"09L/27R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"11/29",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"BOM",icao:"VABB",name:"Chhatrapati Shivaji Maharaj International Airport",city:"Mumbai",country:"India",latitude:19.0886993,longitude:72.867897,elevation:13,category:"4F",runways:[{name:"09/27",length:1e4,surface:"Concrete",category:"Heavy"},{name:"14/32",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"KUL",icao:"WMKK",name:"Kuala Lumpur International Airport",city:"Kuala Lumpur",country:"Malaysia",latitude:2.7456,longitude:101.7092,elevation:60,category:"4F",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"15/33",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"TPE",icao:"RCTP",name:"Taiwan Taoyuan International Airport",city:"Taipei",country:"Taiwan",latitude:25.0775995,longitude:121.2379989,elevation:200,category:"4F",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DOH",icao:"OTHH",name:"Hamad International Airport",city:"Doha",country:"Qatar",latitude:25.2644,longitude:51.6033,elevation:10,category:"4F",runways:[{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DXB",icao:"OMDB",name:"Dubai International Airport",city:"Dubai",country:"United Arab Emirates",latitude:25.2528,longitude:55.3644,elevation:10,category:"4F",runways:[{name:"12L/30R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"12R/30L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"14/32",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CGK",icao:"WIII",name:"Soekarno-Hatta International Airport",city:"Jakarta",country:"Indonesia",latitude:-6.125,longitude:106.65,elevation:10,category:"4F",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09/27",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"NRT",icao:"RJAA",name:"Narita International Airport",city:"Tokyo",country:"Japan",latitude:35.7647018,longitude:140.3860016,elevation:63,category:"4F",runways:[{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05/23",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"SZX",icao:"ZGSZ",name:"Shenzhen Bao'an International Airport",city:"Shenzhen",country:"China",latitude:22.6399994,longitude:113.8100052,elevation:16,category:"4F",runways:[{name:"15L/33R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"15R/33L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"01/19",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CTU",icao:"ZUUU",name:"Chengdu Shuangliu International Airport",city:"Chengdu",country:"China",latitude:30.5705002,longitude:103.9449997,elevation:1887,category:"4F",runways:[{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"WUH",icao:"ZHHH",name:"Wuhan Tianhe International Airport",city:"Wuhan",country:"China",latitude:30.7447004,longitude:114.2870026,elevation:118,category:"4F",runways:[{name:"04L/22R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"04R/22L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"XIY",icao:"ZLXY",name:"Xi'an Xianyang International Airport",city:"Xi'an",country:"China",latitude:34.3461001,longitude:108.7479935,elevation:1024,category:"4F",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"12/30",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CGO",icao:"ZHCC",name:"Zhengzhou Xinzheng International Airport",city:"Zhengzhou",country:"China",latitude:34.5656996,longitude:113.8009949,elevation:496,category:"4F",runways:[{name:"09L/27R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"HGH",icao:"ZSHC",name:"Hangzhou Xiaoshan International Airport",city:"Hangzhou",country:"China",latitude:30.2280998,longitude:120.3930054,elevation:33,category:"4F",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"19/01",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"TSN",icao:"ZBTJ",name:"Tianjin Binhai International Airport",city:"Tianjin",country:"China",latitude:39.1300011,longitude:117.3600006,elevation:10,category:"4F",runways:[{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CKG",icao:"ZUCK",name:"Chongqing Jiangbei International Airport",city:"Chongqing",country:"China",latitude:29.7177,longitude:106.6439972,elevation:1200,category:"4F",runways:[{name:"02L/20R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"02R/20L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"15/33",length:1e4,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"NKG",icao:"ZSNJ",name:"Nanjing Lukou International Airport",city:"Nanjing",country:"China",latitude:31.9408005,longitude:118.7879944,elevation:300,category:"4F",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]}],_w={airports:Ew},kw=[{iata:"LHR",icao:"EGLL",name:"Heathrow Airport",city:"London",country:"United Kingdom",latitude:51.4706001,longitude:-.461941,elevation:83,category:"4F",runways:[{name:"09L/27R",length:12799,surface:"Asphalt",category:"Heavy"},{name:"09R/27L",length:12799,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126.25},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CDG",icao:"LFPG",name:"Charles de Gaulle International Airport",city:"Paris",country:"France",latitude:49.0096998,longitude:2.547799,elevation:394,category:"4F",runways:[{name:"08L/26R",length:12009,surface:"Concrete",category:"Heavy"},{name:"08R/26L",length:12009,surface:"Concrete",category:"Heavy"},{name:"09L/27R",length:11811,surface:"Concrete",category:"Heavy"},{name:"09R/27L",length:11811,surface:"Concrete",category:"Heavy"},{name:"10/28",length:9843,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126.05},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"FRA",icao:"EDDF",name:"Frankfurt am Main International Airport",city:"Frankfurt",country:"Germany",latitude:50.0331001,longitude:8.57055,elevation:364,category:"4F",runways:[{name:"07L/25R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18L/36R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18R/36L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"25C/07C",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MUC",icao:"EDDM",name:"Munich Airport",city:"Munich",country:"Germany",latitude:48.3538,longitude:11.7861,elevation:449,category:"4F",runways:[{name:"08L/26R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"08R/26L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"09/27",length:9843,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"ZRH",icao:"LSZH",name:"Zurich Airport",city:"Zurich",country:"Switzerland",latitude:47.4647,longitude:8.54917,elevation:1416,category:"4F",runways:[{name:"10/28",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"16/34",length:9843,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"FCO",icao:"LIRF",name:"Leonardo da Vinci-Fiumicino Airport",city:"Rome",country:"Italy",latitude:41.7999,longitude:12.2516,elevation:16,category:"4F",runways:[{name:"05L/23R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"16L/34R",length:9843,surface:"Asphalt",category:"Heavy"},{name:"16R/34L",length:9843,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"BCN",icao:"LEBL",name:"Barcelona-El Prat Airport",city:"Barcelona",country:"Spain",latitude:41.2974,longitude:2.0781,elevation:10,category:"4F",runways:[{name:"07L/25R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"07R/25L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"09/27",length:9843,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MAD",icao:"LEMD",name:"Adolfo Surez MadridBarajas Airport",city:"Madrid",country:"Spain",latitude:40.4722,longitude:-3.56194,elevation:2195,category:"4F",runways:[{name:"18L/36R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"18R/36L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"14L/32R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"14R/32L",length:12e3,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"IST",icao:"LTFM",name:"Istanbul Airport",city:"Istanbul",country:"Turkiye",latitude:41.2667,longitude:28.75,elevation:100,category:"4F",runways:[{name:"05L/23R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"05R/23L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16L/34R",length:12e3,surface:"Concrete",category:"Heavy"},{name:"16R/34L",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"DUB",icao:"EIDW",name:"Dublin Airport",city:"Dublin",country:"Ireland",latitude:53.4213,longitude:-6.27007,elevation:249,category:"4E",runways:[{name:"10/28",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"16/34",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"CPH",icao:"EKCH",name:"Copenhagen Airport",city:"Copenhagen",country:"Denmark",latitude:55.6181,longitude:12.6561,elevation:23,category:"4E",runways:[{name:"04L/22R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"04R/22L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"09/27",length:9843,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"ARN",icao:"ESSA",name:"Stockholm Arlanda Airport",city:"Stockholm",country:"Sweden",latitude:59.6519,longitude:17.9186,elevation:98,category:"4E",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"08/26",length:9843,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"OSL",icao:"ENGM",name:"Oslo Gardermoen Airport",city:"Oslo",country:"Norway",latitude:60.1939,longitude:11.07,elevation:200,category:"4E",runways:[{name:"01L/19R",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"01R/19L",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"PRG",icao:"LKPR",name:"Vclav Havel Airport Prague",city:"Prague",country:"Czech Republic",latitude:50.1009,longitude:14.26,elevation:1200,category:"4E",runways:[{name:"06/24",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"12/30",length:9843,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"AMS",icao:"EHAM",name:"Amsterdam Airport Schiphol",city:"Amsterdam",country:"Netherlands",latitude:52.3086014,longitude:4.763889,elevation:-11,category:"4F",runways:[{name:"06/24",length:11483,surface:"Concrete",category:"Heavy"},{name:"18C/36C",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18R/36L",length:12e3,surface:"Concrete",category:"Heavy"},{name:"18L/36R",length:12e3,surface:"Concrete",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"MXP",icao:"LIMC",name:"Milan Malpensa Airport",city:"Milan",country:"Italy",latitude:45.6397,longitude:8.72167,elevation:83,category:"4F",runways:[{name:"17L/35R",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"17R/35L",length:12e3,surface:"Asphalt",category:"Heavy"},{name:"01/19",length:9843,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]},{iata:"LIS",icao:"LPPT",name:"Lisbon Portela Airport",city:"Lisbon",country:"Portugal",latitude:38.7756,longitude:-9.135,elevation:23,category:"4F",runways:[{name:"03/21",length:1e4,surface:"Asphalt",category:"Heavy"},{name:"17/35",length:1e4,surface:"Asphalt",category:"Heavy"}],frequencies:[{type:"ATIS",frequency:126},{type:"Tower",frequency:118.2},{type:"Ground",frequency:121.75}]}],qw={airports:kw},Pw=[{iata:"ABE",icao:"KABE",name:"Lehigh Valley International Airport",latitude:40.6523,longitude:-75.4404,category:"4C",runway:"18/36",runwayLength:7e3,runwayCode:"18/36"},{iata:"AGS",icao:"KAGS",name:"Augusta Regional Airport",latitude:33.4674,longitude:-81.9662,category:"4C",runway:"08/26",runwayLength:8e3,runwayCode:"08/26"},{iata:"ALB",icao:"KALB",name:"Albany International Airport",latitude:42.7485,longitude:-73.8003,category:"4C",runway:"01/19",runwayLength:8500,runwayCode:"01/19"},{iata:"ANC",icao:"PANC",name:"Ted Stevens Anchorage International Airport",latitude:61.1744,longitude:-149.9983,category:"4F",runway:"07L/25R",runwayLength:12e3,runwayCode:"07L/25R"},{iata:"ASE",icao:"KASE",name:"Aspen-Pitkin County Airport",latitude:39.2204,longitude:-106.8628,category:"3C",runway:"15/33",runwayLength:7800,runwayCode:"15/33"},{iata:"AUS",icao:"KAUS",name:"Austin-Bergstrom International Airport",latitude:30.1975,longitude:-97.6669,category:"4E",runway:"17L/35R",runwayLength:9e3,runwayCode:"17L/35R"},{iata:"AVL",icao:"KAVL",name:"Asheville Regional Airport",latitude:35.4362,longitude:-82.5429,category:"4C",runway:"16/34",runwayLength:8e3,runwayCode:"16/34"},{iata:"AVP",icao:"KAVP",name:"Wilkes-Barre/Scranton International Airport",latitude:41.3391,longitude:-75.7273,category:"4C",runway:"04/22",runwayLength:6500,runwayCode:"04/22"},{iata:"BDL",icao:"KBDL",name:"Bradley International Airport",latitude:41.9389,longitude:-72.6862,category:"4E",runway:"06/24",runwayLength:9500,runwayCode:"06/24"},{iata:"BFL",icao:"KBFL",name:"Meadows Field Airport",latitude:35.2966,longitude:-119.0563,category:"4C",runway:"12L/30R",runwayLength:8500,runwayCode:"12L/30R"},{iata:"BGR",icao:"KBGR",name:"Bangor International Airport",latitude:44.8084,longitude:-68.8281,category:"4D",runway:"15/33",runwayLength:9e3,runwayCode:"15/33"},{iata:"BHM",icao:"KBHM",name:"Birmingham-Shuttlesworth International Airport",latitude:33.5629,longitude:-86.7535,category:"4D",runway:"06/24",runwayLength:8500,runwayCode:"06/24"},{iata:"BIL",icao:"KBIL",name:"Billings Logan International Airport",latitude:45.8095,longitude:-108.537,category:"4D",runway:"10L/28R",runwayLength:8500,runwayCode:"10L/28R"},{iata:"BMI",icao:"KBMI",name:"Central Illinois Regional Airport",latitude:40.477,longitude:-88.916,category:"4C",runway:"02/20",runwayLength:6500,runwayCode:"02/20"},{iata:"BNA",icao:"KBNA",name:"Nashville International Airport",latitude:36.1634,longitude:-86.7812,category:"4E",runway:"02L/20R",runwayLength:8e3,runwayCode:"02L/20R"},{iata:"BOI",icao:"KBOI",name:"Boise Airport",latitude:43.5645,longitude:-116.223,category:"4D",runway:"10R/28L",runwayLength:8500,runwayCode:"10R/28L"},{iata:"BPT",icao:"KBPT",name:"Jack Brooks Regional Airport",latitude:29.9513,longitude:-94.0207,category:"4C",runway:"12/30",runwayLength:6500,runwayCode:"12/30"},{iata:"BRO",icao:"KBRO",name:"Brownsville/South Padre Island International Airport",latitude:25.9068,longitude:-97.4259,category:"4C",runway:"14L/32R",runwayLength:7e3,runwayCode:"14L/32R"},{iata:"BTV",icao:"KBTV",name:"Burlington International Airport",latitude:44.4718,longitude:-73.1533,category:"4D",runway:"15/33",runwayLength:8e3,runwayCode:"15/33"},{iata:"BZN",icao:"KBZN",name:"Bozeman Yellowstone International Airport",latitude:45.7774,longitude:-111.153,category:"4D",runway:"12/30",runwayLength:9e3,runwayCode:"12/30"},{iata:"CAK",icao:"KCAK",name:"Akron-Canton Airport",latitude:40.916,longitude:-81.4422,category:"4D",runway:"05/23",runwayLength:8e3,runwayCode:"05/23"},{iata:"CHA",icao:"KCHA",name:"Chattanooga Metropolitan Airport",latitude:35.0353,longitude:-85.2039,category:"4D",runway:"02/20",runwayLength:7500,runwayCode:"02/20"},{iata:"CHS",icao:"KCHS",name:"Charleston International Airport",latitude:32.8986,longitude:-80.0404,category:"4D",runway:"15/33",runwayLength:9e3,runwayCode:"15/33"},{iata:"CID",icao:"KCID",name:"The Eastern Iowa Airport",latitude:41.8847,longitude:-91.7011,category:"4D",runway:"09/27",runwayLength:8500,runwayCode:"09/27"},{iata:"CLE",icao:"KCLE",name:"Cleveland Hopkins International Airport",latitude:41.4114,longitude:-81.8497,category:"4E",runway:"06R/24L",runwayLength:9e3,runwayCode:"06R/24L"},{iata:"CLL",icao:"KCLL",name:"Easterwood Airport",latitude:30.7168,longitude:-96.3696,category:"4C",runway:"03/21",runwayLength:6500,runwayCode:"03/21"},{iata:"CMH",icao:"KCMH",name:"John Glenn Columbus International Airport",latitude:39.998,longitude:-82.8919,category:"4D",runway:"10R/28L",runwayLength:8e3,runwayCode:"10R/28L"},{iata:"COS",icao:"KCOS",name:"Colorado Springs Airport",latitude:38.8404,longitude:-104.7216,category:"4D",runway:"17L/35R",runwayLength:8500,runwayCode:"17L/35R"},{iata:"COU",icao:"KCOU",name:"Columbia Regional Airport",latitude:38.8181,longitude:-92.2197,category:"4C",runway:"13/31",runwayLength:6500,runwayCode:"13/31"},{iata:"CPR",icao:"KCPR",name:"Casper/Natrona County International Airport",latitude:42.898,longitude:-106.4634,category:"4D",runway:"03/21",runwayLength:8500,runwayCode:"03/21"},{iata:"CRW",icao:"KCRW",name:"Charleston Yeager Airport",latitude:38.3739,longitude:-81.5933,category:"4C",runway:"05/23",runwayLength:7e3,runwayCode:"05/23"},{iata:"CSG",icao:"KCSG",name:"Columbus Metropolitan Airport",latitude:32.5167,longitude:-84.9389,category:"4C",runway:"06/24",runwayLength:6500,runwayCode:"06/24"},{iata:"CSP",icao:"KCSP",name:"Cape Girardeau Regional Airport",latitude:37.2264,longitude:-89.5708,category:"4C",runway:"02/20",runwayLength:6500,runwayCode:"02/20"},{iata:"CYS",icao:"KCYS",name:"Cheyenne Regional Airport",latitude:41.1558,longitude:-104.8117,category:"4C",runway:"09/27",runwayLength:8200,runwayCode:"09/27"},{iata:"DAB",icao:"KDAB",name:"Daytona Beach International Airport",latitude:29.1797,longitude:-81.0575,category:"4D",runway:"07L/25R",runwayLength:8e3,runwayCode:"07L/25R"},{iata:"DBQ",icao:"KDBQ",name:"Dubuque Regional Airport",latitude:42.3997,longitude:-90.7095,category:"4C",runway:"13/31",runwayLength:6500,runwayCode:"13/31"},{iata:"DLH",icao:"KDLH",name:"Duluth International Airport",latitude:46.8415,longitude:-92.1836,category:"4D",runway:"09/27",runwayLength:8500,runwayCode:"09/27"},{iata:"DSM",icao:"KDSM",name:"Des Moines International Airport",latitude:41.534,longitude:-93.6637,category:"4D",runway:"05/23",runwayLength:9e3,runwayCode:"05/23"},{iata:"ELM",icao:"KELM",name:"Elmira Corning Regional Airport",latitude:42.1599,longitude:-76.8916,category:"4C",runway:"06/24",runwayLength:6500,runwayCode:"06/24"},{iata:"ERI",icao:"KERI",name:"Erie International Airport",latitude:42.0831,longitude:-80.1736,category:"4D",runway:"06/24",runwayLength:8e3,runwayCode:"06/24"},{iata:"ESC",icao:"KESC",name:"Escanaba County Airport",latitude:45.7228,longitude:-87.0339,category:"3C",runway:"09/27",runwayLength:5200,runwayCode:"09/27"},{iata:"EVV",icao:"KEVV",name:"Evansville Regional Airport",latitude:38.0412,longitude:-87.5325,category:"4D",runway:"04/22",runwayLength:8e3,runwayCode:"04/22"},{iata:"EYW",icao:"KEYW",name:"Key West International Airport",latitude:24.5567,longitude:-81.7518,category:"4C",runway:"09/27",runwayLength:8e3,runwayCode:"09/27"},{iata:"FAR",icao:"KFAR",name:"Hector International Airport",latitude:46.9187,longitude:-96.8197,category:"4D",runway:"09/27",runwayLength:9e3,runwayCode:"09/27"},{iata:"FCA",icao:"KFCA",name:"Glacier Park International Airport",latitude:48.3109,longitude:-114.2507,category:"4D",runway:"02/20",runwayLength:8500,runwayCode:"02/20"},{iata:"FHR",icao:"KFHR",name:"Friday Harbor Airport",latitude:48.5217,longitude:-123.0247,category:"3C",runway:"07/25",runwayLength:3400,runwayCode:"07/25"},{iata:"FLG",icao:"KFLG",name:"Flagstaff Pulliam Airport",latitude:35.1381,longitude:-111.6693,category:"4C",runway:"03/21",runwayLength:7e3,runwayCode:"03/21"},{iata:"FNT",icao:"KFNT",name:"Bishop International Airport",latitude:43.0034,longitude:-83.7443,category:"4D",runway:"05/23",runwayLength:8500,runwayCode:"05/23"},{iata:"FSD",icao:"KFSD",name:"Joe Foss Field Airport",latitude:43.5814,longitude:-96.7417,category:"4D",runway:"03/21",runwayLength:8500,runwayCode:"03/21"},{iata:"FSM",icao:"KFSM",name:"Fort Smith Regional Airport",latitude:35.3366,longitude:-94.3984,category:"4D",runway:"07/25",runwayLength:8e3,runwayCode:"07/25"},{iata:"FWA",icao:"KFWA",name:"Fort Wayne International Airport",latitude:40.9785,longitude:-85.1951,category:"4D",runway:"05/23",runwayLength:8e3,runwayCode:"05/23"},{iata:"GCK",icao:"KGCK",name:"Garden City Regional Airport",latitude:37.9303,longitude:-100.7244,category:"4C",runway:"17/35",runwayLength:6500,runwayCode:"17/35"},{iata:"GEG",icao:"KGEG",name:"Spokane International Airport",latitude:47.6589,longitude:-117.4383,category:"4C",runway:"03/21",runwayLength:9e3,runwayCode:"03/21"},{iata:"GFK",icao:"KGFK",name:"Grand Forks International Airport",latitude:47.9492,longitude:-97.1761,category:"4D",runway:"09L/27R",runwayLength:8500,runwayCode:"09L/27R"},{iata:"GSO",icao:"KGSO",name:"Piedmont Triad International Airport",latitude:36.1018,longitude:-79.9373,category:"4E",runway:"05/23",runwayLength:1e4,runwayCode:"05/23"},{iata:"HDN",icao:"KHDN",name:"Yampa Valley Regional Airport",latitude:40.4812,longitude:-107.2187,category:"3C",runway:"10/28",runwayLength:8e3,runwayCode:"10/28"},{iata:"HNL",icao:"PHNL",name:"Daniel K. Inouye International Airport",city:"Honolulu",country:"United States",latitude:21.3245,longitude:-157.9251,elevation:13,category:"4F",runway:"08L/26R",runwayLength:12200,runwayCode:"08L/26R"},{iata:"HPN",icao:"KHPN",name:"Westchester County Airport",latitude:41.0669,longitude:-73.7076,category:"3C",runway:"01/19",runwayLength:6e3,runwayCode:"01/19"},{iata:"HSV",icao:"KHSV",name:"Huntsville International Airport",latitude:34.6403,longitude:-86.7736,category:"4E",runway:"18R/36L",runwayLength:12600,runwayCode:"18R/36L"},{iata:"ICT",icao:"KICT",name:"Wichita Dwight D. Eisenhower National Airport",latitude:37.6489,longitude:-97.4331,category:"4D",runway:"01L/19R",runwayLength:10300,runwayCode:"01L/19R"},{iata:"IND",icao:"KIND",name:"Indianapolis International Airport",city:"Indianapolis",country:"United States",latitude:39.7173,longitude:-86.2944,elevation:796,category:"4E",runway:"05L/23R",runwayLength:12e3,runwayCode:"05L/23R"},{iata:"JAX",icao:"KJAX",name:"Jacksonville International Airport",latitude:30.4941,longitude:-81.6879,category:"4E",runway:"07/25",runwayLength:1e4,runwayCode:"07/25"},{iata:"KSA",icao:"VOPB",name:"Kansai International Airport",latitude:34.4273,longitude:135.244,category:"4F",runway:"04R/22L",runwayLength:13e3,runwayCode:"04R/22L"},{iata:"LGB",icao:"KLGB",name:"Long Beach Airport",latitude:33.8177,longitude:-118.1516,category:"4C",runway:"07R/25L",runwayLength:1e4,runwayCode:"07R/25L"},{iata:"LIT",icao:"KLIT",name:"Bill and Hillary Clinton National Airport",latitude:34.7294,longitude:-92.2244,category:"4E",runway:"04L/22R",runwayLength:9e3,runwayCode:"04L/22R"},{iata:"LNK",icao:"KLNK",name:"Lincoln Airport",latitude:40.8507,longitude:-96.7544,category:"3C",runway:"14/32",runwayLength:12900,runwayCode:"14/32"},{iata:"LOU",icao:"KLOU",name:"B Bowman Airport",latitude:38.2291,longitude:-85.6637,category:"3C",runway:"06/24",runwayLength:5500,runwayCode:"06/24"},{iata:"MCI",icao:"KMCI",name:"Kansas City International Airport",latitude:39.2976,longitude:-94.7139,category:"4E",runway:"01R/19L",runwayLength:10700,runwayCode:"01R/19L"},{iata:"MEM",icao:"KMEM",name:"Memphis International Airport",latitude:35.0424,longitude:-89.9767,category:"4F",runway:"18R/36L",runwayLength:11200,runwayCode:"18R/36L"},{iata:"MHT",icao:"KMHT",name:"Manchester-Boston Regional Airport",latitude:42.9326,longitude:-71.4358,category:"4D",runway:"06/24",runwayLength:9200,runwayCode:"06/24"},{iata:"MKE",icao:"KMKE",name:"Milwaukee Mitchell International Airport",latitude:42.9477,longitude:-87.8966,category:"4E",runway:"01L/19R",runwayLength:8400,runwayCode:"01L/19R"},{iata:"MSY",icao:"KMSY",name:"Louis Armstrong New Orleans International Airport",latitude:29.9934,longitude:-90.258,category:"4E",runway:"10/28",runwayLength:10100,runwayCode:"10/28"},{iata:"OAK",icao:"KOAK",name:"Oakland International Airport",latitude:37.7275,longitude:-122.2167,category:"4D",runway:"10R/28L",runwayLength:1e4,runwayCode:"10R/28L"},{iata:"OKC",icao:"KOKC",name:"Will Rogers World Airport",latitude:35.3931,longitude:-97.6009,category:"4E",runway:"17L/35R",runwayLength:9800,runwayCode:"17L/35R"},{iata:"OMA",icao:"KOMA",name:"Eppley Airfield",latitude:41.3032,longitude:-95.8936,category:"4E",runway:"03L/21R",runwayLength:9500,runwayCode:"03L/21R"},{iata:"PDX",icao:"KPDX",name:"Portland International Airport",latitude:45.5887,longitude:-122.5975,category:"4F",runway:"10L/28R",runwayLength:8200,runwayCode:"10L/28R"},{iata:"PIT",icao:"KPIT",name:"Pittsburgh International Airport",latitude:40.4914,longitude:-80.2329,category:"4E",runway:"10L/28R",runwayLength:11500,runwayCode:"10L/28R"},{iata:"PVD",icao:"KPVD",name:"T. F. Green Airport",latitude:41.7251,longitude:-71.434,category:"4D",runway:"05/23",runwayLength:8716,runwayCode:"05/23"},{iata:"PWM",icao:"KPWM",name:"Portland International Jetport",latitude:43.6465,longitude:-70.3087,category:"4D",runway:"11/29",runwayLength:7200,runwayCode:"11/29"},{iata:"RDU",icao:"KRDU",name:"Raleigh-Durham International Airport",latitude:35.8776,longitude:-78.7875,category:"4E",runway:"05L/23R",runwayLength:9e3,runwayCode:"05L/23R"},{iata:"RNO",icao:"KRNO",name:"Reno-Tahoe International Airport",latitude:39.4993,longitude:-119.7681,category:"4E",runway:"07L/25R",runwayLength:1e4,runwayCode:"07L/25R"},{iata:"RSW",icao:"KRSW",name:"Southwest Florida International Airport",latitude:26.5362,longitude:-81.7551,category:"4E",runway:"06/24",runwayLength:1e4,runwayCode:"06/24"},{iata:"SAT",icao:"KSAT",name:"San Antonio International Airport",latitude:29.5334,longitude:-98.4699,category:"4E",runway:"03L/21R",runwayLength:8500,runwayCode:"03L/21R"},{iata:"SBA",icao:"KSBA",name:"Santa Barbara Airport",latitude:34.4265,longitude:-119.8424,category:"4C",runway:"07/25",runwayLength:6500,runwayCode:"07/25"},{iata:"SCE",icao:"KSCE",name:"University Park Airport",latitude:40.8525,longitude:-77.8274,category:"3C",runway:"06/24",runwayLength:5100,runwayCode:"06/24"},{iata:"SDF",icao:"KSDF",name:"Louisville Muhammad Ali International Airport",latitude:38.1743,longitude:-85.736,category:"4E",runway:"17R/35L",runwayLength:12e3,runwayCode:"17R/35L"},{iata:"SGF",icao:"KSGF",name:"Springfield-Branson National Airport",latitude:37.2456,longitude:-93.3887,category:"4C",runway:"02/20",runwayLength:8e3,runwayCode:"02/20"},{iata:"SHV",icao:"KSHV",name:"Shreveport Regional Airport",latitude:32.4462,longitude:-93.8256,category:"4E",runway:"06/24",runwayLength:8500,runwayCode:"06/24"},{iata:"SJC",icao:"KSJC",name:"San Jose International Airport",latitude:37.3639,longitude:-121.929,category:"4E",runway:"07L/25R",runwayLength:11e3,runwayCode:"07L/25R"},{iata:"SJU",icao:"TJSJ",name:"Luis Muoz Marn International Airport",latitude:18.4394,longitude:-66.0018,category:"4E",runway:"08/26",runwayLength:10040,runwayCode:"08/26"},{iata:"SMF",icao:"KSMF",name:"Sacramento International Airport",latitude:38.6911,longitude:-121.5837,category:"4E",runway:"16L/34R",runwayLength:8600,runwayCode:"16L/34R"},{iata:"SMJ",icao:"KSMJ",name:"Southwest Georgia Regional Airport",latitude:31.5356,longitude:-84.1941,category:"3C",runway:"04/22",runwayLength:5e3,runwayCode:"04/22"},{iata:"SPI",icao:"KSPI",name:"Abraham Lincoln Capital Airport",latitude:39.8441,longitude:-89.6779,category:"3C",runway:"04/22",runwayLength:6500,runwayCode:"04/22"},{iata:"SRQ",icao:"KSRQ",name:"Sarasota-Bradenton International Airport",latitude:27.3955,longitude:-82.5544,category:"4D",runway:"04/22",runwayLength:6800,runwayCode:"04/22"},{iata:"TPA",icao:"KTPA",name:"Tampa International Airport",latitude:27.9755,longitude:-82.5332,category:"4F",runway:"01L/19R",runwayLength:9e3,runwayCode:"01L/19R"},{iata:"TUL",icao:"KTUL",name:"Tulsa International Airport",latitude:36.1984,longitude:-95.8881,category:"4E",runway:"08L/26R",runwayLength:1e4,runwayCode:"08L/26R"},{iata:"TYS",icao:"KTYS",name:"McGhee Tyson Airport",latitude:35.8114,longitude:-83.994,category:"4E",runway:"05L/23R",runwayLength:9e3,runwayCode:"05L/23R"},{iata:"WRV",icao:"PWRV",name:"Whittier Airport",latitude:60.7875,longitude:-148.7169,category:"3C",runway:"01/19",runwayLength:5800,runwayCode:"01/19"},{iata:"YEG",icao:"CYEG",name:"Edmonton International Airport",latitude:53.3097,longitude:-113.5801,category:"4E",runway:"02/20",runwayLength:8500,runwayCode:"02/20"},{iata:"YHM",icao:"CYHM",name:"Hamilton International Airport",latitude:43.1734,longitude:-79.9377,category:"4C",runway:"06/24",runwayLength:6500,runwayCode:"06/24"},{iata:"YMM",icao:"CYMM",name:"Fort McMurray Airport",latitude:56.6537,longitude:-111.2214,category:"3C",runway:"07/25",runwayLength:8e3,runwayCode:"07/25"},{iata:"YUL",icao:"CYUL",name:"Montreal-Pierre Elliott Trudeau International Airport",latitude:45.4706,longitude:-73.7497,category:"4E",runway:"06L/24R",runwayLength:9e3,runwayCode:"06L/24R"},{iata:"YWG",icao:"CYWG",name:"Winnipeg James Armstrong Richardson International Airport",latitude:49.9099,longitude:-97.2399,category:"4E",runway:"13/31",runwayLength:8500,runwayCode:"13/31"},{iata:"YXE",icao:"CYXE",name:"Saskatoon John G. Diefenbaker International Airport",latitude:52.1708,longitude:-106.7016,category:"4E",runway:"09/27",runwayLength:8100,runwayCode:"09/27"},{iata:"YYC",icao:"CYYC",name:"Calgary International Airport",latitude:51.0447,longitude:-114.0719,category:"4F",runway:"11/29",runwayLength:12600,runwayCode:"11/29"}],Nw=[{iata:"AAN",icao:"OMAL",name:"Al Ain Airport",city:"Al Ain",country:"United Arab Emirates"},{iata:"ABJ",icao:"DIAP",name:"Felix Houphouet Boigny Airport",city:"Abidjan",country:"Ivory Coast"},{iata:"ACC",icao:"KACC",name:"Kotoka International Airport",city:"Accra",country:"Ghana"},{iata:"ALA",icao:"UAAA",name:"Almaty International Airport",city:"Almaty",country:"Kazakhstan"},{iata:"ATH",icao:"LGAV",name:"Athens International Airport",city:"Athens",country:"Greece"},{iata:"BAH",icao:"OBBI",name:"Bahrain International Airport",city:"Manama",country:"Bahrain"},{iata:"BEL",icao:"SBEG",name:"Eduardo Gomes International Airport",city:"Manaus",country:"Brazil"},{iata:"BEN",icao:"HLLB",name:"Benina Airport",city:"Benghazi",country:"Libya"},{iata:"BEY",icao:"OLBA",name:"Beirut-Rafic Hariri International Airport",city:"Beirut",country:"Lebanon"},{iata:"BJL",icao:"GBYD",name:"Banjul International Airport",city:"Banjul",country:"Gambia"},{iata:"BME",icao:"YBRM",name:"Broome Airport",city:"Broome",country:"Australia"},{iata:"BSB",icao:"SBBR",name:"Presidente Juscelino Kubitschek Airport",city:"Braslia",country:"Brazil"},{iata:"BSR",icao:"ORBI",name:"Basra International Airport",city:"Basra",country:"Iraq"},{iata:"BSS",icao:"GABS",name:" Osvaldo Vieira International Airport",city:"Bissau",country:"Guinea-Bissau"},{iata:"CCS",icao:"SVMI",name:"Simn Bolvar International Airport",city:"Caracas",country:"Venezuela"},{iata:"CLJ",icao:"LRCL",name:"Cluj Avram Iancu Airport",city:"Cluj-Napoca",country:"Romania"},{iata:"CMB",icao:"VCBI",name:"Bandaranaike International Airport",city:"Colombo",country:"Sri Lanka"},{iata:"CNF",icao:"SBCF",name:"Tancredo Neves International Airport",city:"Belo Horizonte",country:"Brazil"},{iata:"CNS",icao:"YBCS",name:"Cairns Airport",city:"Cairns",country:"Australia"},{iata:"COK",icao:"VOCI",name:"Cochin International Airport",city:"Kochi",country:"India"},{iata:"CPT",icao:"FACT",name:"Cape Town International Airport",city:"Cape Town",country:"South Africa"},{iata:"CUR",icao:"TNCC",name:"Hato International Airport",city:"Willemstad",country:"Curaao"},{iata:"CWB",icao:"SBCT",name:"Afonso Pena Airport",city:"Curitiba",country:"Brazil"},{iata:"DAR",icao:"HTDA",name:"Julius Nyerere International Airport",city:"Dar es Salaam",country:"Tanzania"},{iata:"EVN",icao:"UDYZ",name:"Zvartnots International Airport",city:"Yerevan",country:"Armenia"},{iata:"FAMN",icao:"FAMN",name:"Matsapha Airport",latitude:-26.5294,longitude:31.3069,category:"4B",runway:"09/27",runwayLength:6800},{iata:"FDF",icao:"TFFF",name:"Aim Csaire Airport",city:"Fort-de-France",country:"Martinique"},{iata:"FLN",icao:"SBFL",name:"Herclio Luz International Airport",city:"Florianpolis",country:"Brazil"},{iata:"FNA",icao:"FAAA",name:"Lungi International Airport",city:"Freetown",country:"Sierra Leone"},{iata:"FPO",icao:"MYGF",name:"Grand Bahama Airport",city:"Freeport",country:"Bahamas"},{iata:"GIG",icao:"SBGL",name:"Tom Jobim Airport",city:"Rio de Janeiro",country:"Brazil"},{iata:"GRJ",icao:"FAGG",name:"George Airport",city:"George",country:"South Africa"},{iata:"HLA",icao:"FALA",name:"Lanseria Airport",city:"Johannesburg",country:"South Africa"},{iata:"HRG",icao:"HEGN",name:"Hurghada International Airport",city:"Hurghada",country:"Egypt"},{iata:"IKA",icao:"OIII",name:"Imam Khomeini International Airport",city:"Tehran",country:"Iran"},{iata:"JNB",icao:"FAOR",name:"O.R. Tambo International Airport",city:"Johannesburg",country:"South Africa"},{iata:"KJA",icao:"UNKL",name:"Krasnoyarsk International Airport",city:"Krasnoyarsk",country:"Russia"},{iata:"KMG",icao:"ZPPP",name:"Kunming Changshui International Airport",city:"Kunming",country:"China"},{iata:"KRT",icao:"HSNN",name:"Khartoum International Airport",city:"Khartoum",country:"Sudan"},{iata:"LBV",icao:"FOOO",name:"Libreville Leon M'ba Airport",city:"Libreville",country:"Gabon"},{iata:"LIM",icao:"SPIM",name:"Jorge Chavez International Airport",city:"Lima",country:"Peru"},{iata:"LXR",icao:"HELX",name:"Luxor International Airport",city:"Luxor",country:"Egypt"},{iata:"MBA",icao:"HKMO",name:"Mombasa Airport",city:"Mombasa",country:"Kenya"},{iata:"MOS",icao:"ORBM",name:"Mosul Airport",city:"Mosul",country:"Iraq"},{iata:"MRU",icao:"FIMP",name:"Sir Seewoosagur Ramgoolam Airport",city:"Port Louis",country:"Mauritius"},{iata:"MSQ",icao:"UMMS",name:"Minsk National Airport",city:"Minsk",country:"Belarus"},{iata:"NBO",icao:"HKJK",name:"Jomo Kenyatta International Airport",city:"Nairobi",country:"Kenya"},{iata:"NIM",icao:"DRRN",name:"Diori Hamani International Airport",city:"Niamey",country:"Niger"},{iata:"NQZ",icao:"UACC",name:"Nursultan Nazarbayev Airport",city:"Nursultan",country:"Kazakhstan"},{iata:"PHE",icao:"YPPD",name:"Port Hedland Airport",city:"Port Hedland",country:"Australia"},{iata:"PKC",icao:"UHPP",name:"Petropavlovsk Airport",city:"Petropavlovsk-Kamchatsky",country:"Russia"},{iata:"POS",icao:"TTPP",name:"Piarco International Airport",city:"Port of Spain",country:"Trinidad and Tobago"},{iata:"PTY",icao:"MPTO",name:"Tocumen International Airport",city:"Panama City",country:"Panama"},{iata:"REC",icao:"SBRF",name:"Guararapes International Airport",city:"Recife",country:"Brazil"},{iata:"SABR",icao:"SBRB",name:"Plcido de Castro Airport",latitude:-9.8668,longitude:-67.7981,category:"4C",runway:"09/27",runwayLength:8200},{iata:"SAEI",icao:"SAEI",name:"Recife International Airport",latitude:-8.1269,longitude:-34.9236,category:"4E",runway:"14/32",runwayLength:8800},{iata:"SAMI",icao:"SAMI",name:"Mount Pleasant Airport",latitude:-51.8228,longitude:-58.4472,category:"4C",runway:"09/27",runwayLength:7800},{iata:"SAMM",icao:"SAMM",name:"Mar del Plata Airport",latitude:-37.7447,longitude:-57.6291,category:"4C",runway:"09/27",runwayLength:6800},{iata:"SANT",icao:"SANT",name:"Tucumn Airport",latitude:-26.84,longitude:-65.0968,category:"4C",runway:"07/25",runwayLength:8200},{iata:"SAVC",icao:"SAVC",name:"Comodoro Rivadavia Airport",latitude:-45.785,longitude:-67.4608,category:"4C",runway:"07/25",runwayLength:8500},{iata:"SBAR",icao:"SBAR",name:"Santa Maria Airport",latitude:-10.1879,longitude:-48.2641,category:"4C",runway:"08/26",runwayLength:7500},{iata:"SBCY",icao:"SBCY",name:"Cuiab Airport",latitude:-15.595,longitude:-56.1199,category:"4C",runway:"13/31",runwayLength:8200},{iata:"SBFN",icao:"SBFN",name:"Fernando de Noronha Airport",latitude:-3.8546,longitude:-32.4233,category:"4B",runway:"14/32",runwayLength:5800},{iata:"SBGO",icao:"SBBG",name:"Governador Valadares Airport",latitude:-18.8953,longitude:-41.9231,category:"4C",runway:"03/21",runwayLength:6500},{iata:"SBJU",icao:"SBJU",name:"Campo Grande Airport",latitude:-20.4692,longitude:-54.6719,category:"4C",runway:"05/23",runwayLength:7800},{iata:"SBMC",icao:"SBMO",name:"Macei Airport",latitude:-9.5107,longitude:-35.7917,category:"4C",runway:"17/35",runwayLength:7200},{iata:"SBMQ",icao:"SBMQ",name:"Macap Airport",latitude:.0506,longitude:-51.0722,category:"4C",runway:"09/27",runwayLength:7200},{iata:"SBPN",icao:"SBCN",name:"Campina Grande Airport",latitude:-7.2689,longitude:-35.8963,category:"4B",runway:"11/29",runwayLength:6e3},{iata:"SBUL",icao:"SBBU",name:"Uberlndia Airport",latitude:-18.8839,longitude:-48.2253,category:"4C",runway:"08/26",runwayLength:7500},{iata:"SBVT",icao:"SBVT",name:"Vitria Airport",latitude:-20.2593,longitude:-40.286,category:"4C",runway:"05/23",runwayLength:7800},{iata:"SSA",icao:"SBPS",name:"Deputado Lus Eduardo Magalhes Airport",city:"Salvador",country:"Brazil"},{iata:"SSH",icao:"HEAL",name:"Sharm El Sheikh Airport",city:"Sharm El Sheikh",country:"Egypt"},{iata:"SVO",icao:"UUEE",name:"Sheremetyevo International Airport",city:"Moscow",country:"Russia"},{iata:"TBS",icao:"UGTB",name:"Tbilisi International Airport",city:"Tbilisi",country:"Georgia"},{iata:"TIP",icao:"HLLT",name:"Tripoli International Airport",city:"Tripoli",country:"Libya"},{iata:"TLV",icao:"LLBG",name:"Ben Gurion Airport",city:"Tel Aviv",country:"Israel"},{iata:"TUN",icao:"DTTA",name:"Tunis Carthage International Airport",city:"Tunis",country:"Tunisia"},{iata:"TUPA",icao:"TUPA",name:"Tabuk Airport",latitude:28.4194,longitude:36.6178,category:"4B",runway:"07/25",runwayLength:6500},{iata:"VCP",icao:"SBKP",name:"Viracopos Airport",city:"Campinas",country:"Brazil"},{iata:"WITT",icao:"WITT",name:"Sultan Iskandar Airport",latitude:1.6419,longitude:103.6694,category:"4C",runway:"15/33",runwayLength:7800},{iata:"YBHI",icao:"YBHI",name:"Broken Hill Airport",latitude:-31.8296,longitude:141.4699,category:"4C",runway:"07/25",runwayLength:6500},{iata:"LOS",icao:"DNMM",name:"Murtala Muhammed International Airport",latitude:6.577417,longitude:3.321917,category:"4C",runway:"18R/36L",runwayLength:12467,runwayCode:"18R/36L"},{iata:"QUO",icao:"DNSO",name:"Sam Mbakwe Airport",latitude:5.427167,longitude:6.948167,category:"4C",runway:"03/21",runwayLength:9843,runwayCode:"03/21"},{iata:"ASW",icao:"HEAS",name:"Aswan International Airport",latitude:23.963889,longitude:32.819722,category:"4C",runway:"17/35",runwayLength:10827,runwayCode:"17/35"},{iata:"ADD",icao:"HAAB",name:"Addis Ababa Bole International Airport",latitude:9.003333,longitude:38.799444,category:"4F",runway:"07L/25R",runwayLength:12467,runwayCode:"07L/25R"},{iata:"DIR",icao:"HADR",name:"Aba Tenna Dejazmatch Yilma Airport",latitude:9.624722,longitude:41.854167,category:"4C",runway:"08/26",runwayLength:8858,runwayCode:"08/26"},{iata:"JUB",icao:"HSSJ",name:"Juba International Airport",latitude:4.872006,longitude:31.601111,category:"4C",runway:"11/29",runwayLength:11483,runwayCode:"11/29"},{iata:"JRO",icao:"HTJK",name:"Kilimanjaro International Airport",latitude:-3.429444,longitude:37.074167,category:"4C",runway:"09/27",runwayLength:12136,runwayCode:"09/27"},{iata:"ZNZ",icao:"HTZA",name:"Abeid Amani Karume International Airport",latitude:-6.221944,longitude:39.224722,category:"4C",runway:"09/27",runwayLength:8202,runwayCode:"09/27"},{iata:"TNR",icao:"FMMI",name:"Ivato International Airport",latitude:-18.766944,longitude:47.478611,category:"4C",runway:"17/35",runwayLength:10827,runwayCode:"17/35"},{iata:"RUN",icao:"FMEE",name:"Roland Garros Airport",latitude:-20.887139,longitude:55.510139,category:"4C",runway:"12/30",runwayLength:10827,runwayCode:"12/30"},{iata:"CMN",icao:"GMMN",name:"Mohammed V International Airport",latitude:33.3675,longitude:-7.589861,category:"4F",runway:"01L/19R",runwayLength:12467,runwayCode:"01L/19R"},{iata:"RAK",icao:"GMMX",name:"Marrakesh Menara Airport",latitude:31.606944,longitude:-8.036667,category:"4C",runway:"10/28",runwayLength:11483,runwayCode:"10/28"},{iata:"RBA",icao:"GMTT",name:"Sale Airport",latitude:34.051111,longitude:-6.747778,category:"4C",runway:"04/22",runwayLength:11155,runwayCode:"04/22"},{iata:"ALG",icao:"DAAG",name:"Houari Boumediene Airport",latitude:36.691,longitude:3.215444,category:"4C",runway:"05/23",runwayLength:11155,runwayCode:"05/23"},{iata:"ORN",icao:"DAOO",name:"Oran Es Senia Airport",latitude:35.623889,longitude:-.621111,category:"4C",runway:"07/25",runwayLength:10827,runwayCode:"07/25"},{iata:"LAD",icao:"FNLU",name:"Quatro de Fevereiro Airport",latitude:-8.858333,longitude:13.231167,category:"4C",runway:"07/25",runwayLength:12136,runwayCode:"07/25"},{iata:"MPM",icao:"FQMA",name:"Maputo International Airport",latitude:-25.920833,longitude:32.5725,category:"4C",runway:"17/35",runwayLength:11483,runwayCode:"17/35"},{iata:"HRE",icao:"FVHA",name:"Robert Gabriel Mugabe International Airport",latitude:-17.897222,longitude:31.0925,category:"4C",runway:"05/23",runwayLength:10827,runwayCode:"05/23"},{iata:"LVI",icao:"FLLS",name:"Harry Mwanga Nkumbula International Airport",latitude:-17.821778,longitude:25.822667,category:"4C",runway:"10/28",runwayLength:11483,runwayCode:"10/28"},{iata:"DSS",icao:"GOBD",name:"Blaise Diagne International Airport",latitude:14.671389,longitude:-17.071667,category:"4F",runway:"01L/19R",runwayLength:11483,runwayCode:"01L/19R"},{iata:"DKR",icao:"GOOO",name:"Leopold Sedar Senghor International Airport",latitude:14.670833,longitude:-17.490278,category:"4C",runway:"02/20",runwayLength:11483,runwayCode:"02/20"},{iata:"ABV",icao:"DNAA",name:"Nnamdi Azikiwe International Airport",latitude:9.006667,longitude:7.263056,category:"4C",runway:"05/23",runwayLength:11811,runwayCode:"05/23"},{iata:"PHC",icao:"DNPO",name:"Port Harcourt International Airport",latitude:5.015389,longitude:6.967583,category:"4C",runway:"03/21",runwayLength:10827,runwayCode:"03/21"},{iata:"KGL",icao:"HRYR",name:"Kigali International Airport",latitude:-1.968628,longitude:30.139444,category:"4C",runway:"29/11",runwayLength:10827,runwayCode:"29/11"},{iata:"DLA",icao:"FKKD",name:"Douala International Airport",latitude:4.006111,longitude:9.719444,category:"4C",runway:"12/30",runwayLength:10827,runwayCode:"12/30"},{iata:"NSI",icao:"FKYS",name:"Yaounde Nsimalen International Airport",latitude:3.722556,longitude:11.553278,category:"4C",runway:"03/21",runwayLength:11483,runwayCode:"03/21"},{iata:"BJM",icao:"HBBA",name:"Bujumbura International Airport",latitude:-3.324,longitude:29.318528,category:"4C",runway:"03/21",runwayLength:11483,runwayCode:"03/21"},{iata:"EBB",icao:"HUEN",name:"Entebbe International Airport",latitude:.0425,longitude:32.4435,category:"4C",runway:"17/35",runwayLength:12136,runwayCode:"17/35"},{iata:"LUJ",icao:"FALU",name:"Lusaka International Airport",latitude:-15.330556,longitude:28.4525,category:"4C",runway:"10/28",runwayLength:13123,runwayCode:"10/28"},{iata:"LUN",icao:"FLLL",name:"Kenneth Kaunda International Airport",latitude:-15.386111,longitude:28.452444,category:"4C",runway:"10/28",runwayLength:13123,runwayCode:"10/28"},{iata:"FIH",icao:"FZAA",name:"Ndjili International Airport",latitude:-4.385556,longitude:15.444444,category:"4C",runway:"06L/24R",runwayLength:12136,runwayCode:"06L/24R"},{iata:"BZV",icao:"FCBB",name:"Maya-Maya Airport",latitude:-4.243889,longitude:15.253056,category:"4C",runway:"03/21",runwayLength:10827,runwayCode:"03/21"}];class Mw{constructor(){this.airports=[],this.gridSize=2,this.init()}init(){const e=(n,r)=>{n&&(Array.isArray(n)?n.forEach(a=>this.addAirport(a)):n.airports&&n.airports.forEach(a=>this.addAirport(a)))};e(Lw),e(_w),e(qw),e(Pw),e(Nw),console.log(`RegionControlService: Loaded ${this.airports.length} airports.`)}addAirport(e){if(!e.latitude||!e.longitude)return;let n=e.city;n||(n=e.name.replace(/International Airport|Airport|Regional|Field/gi,"").trim()),this.airports.push({lat:e.latitude,lon:e.longitude,name:n||"Unknown",icao:e.icao})}getGridCenter(e,n){const r=Math.floor(e/this.gridSize)*this.gridSize+this.gridSize/2,a=Math.floor(n/this.gridSize)*this.gridSize+this.gridSize/2;return{lat:r,lon:a}}getRegionInfo(e,n){const r=this.getGridCenter(e,n),a=`${r.lat.toFixed(1)},${r.lon.toFixed(1)}`;let i=null,o=1/0;for(const y of this.airports){if(Math.abs(y.lat-r.lat)>5||Math.abs(y.lon-r.lon)>5)continue;const p=(y.lat-r.lat)**2+(y.lon-r.lon)**2;p<o&&(o=p,i=y)}const l=i?i.name:`Sector ${a}`;let c=0;for(let y=0;y<a.length;y++)c=(c<<5)-c+a.charCodeAt(y),c|=0;const d=123+Math.abs(c)%260*.05;return{name:`${l} Center`,frequency:d.toFixed(3).slice(0,7),displayFreq:d.toFixed(2)}}}const Sf=new Mw,Rt={CRUISE:"CRUISE",DESCENT:"DESCENT",APPROACH:"APPROACH",CLIMB:"CLIMB",VECTOR:"VECTOR",LANDED:"LANDED"};class Fw{constructor(e,n,r,a){this.id=e,this.callsign=n,this.latitude=r.latitude,this.longitude=r.longitude,this.altitude=r.altitude||3e4,this.heading=r.heading||0,this.speed=r.speed||450,this.verticalSpeed=0,this.targetAltitude=this.altitude,this.targetHeading=this.heading,this.targetSpeed=this.speed,this.destination=a,this.stage=r.stage||Rt.CRUISE,this.lastCommTime=Date.now(),this.nextCommDelay=1e4+Math.random()*6e4,this.pendingMessage=null,this.conversationQueue=[],this.conversationState="IDLE",this.conversationTimer=0,this.decideNextAction()}decideNextAction(){if(this.stage===Rt.CRUISE){if(Math.random()>.5&&(this.targetHeading=(this.heading+(Math.random()*60-30))%360,this.targetHeading<0&&(this.targetHeading+=360)),Math.random()<.3){const e=[3e4,32e3,34e3,36e3,38e3];this.targetAltitude=e[Math.floor(Math.random()*e.length)]}}else this.stage===Rt.CLIMB?(this.targetAltitude=3e4,this.targetSpeed=450):this.stage===Rt.APPROACH&&(this.targetAltitude=0,this.targetSpeed=140)}update(e,n){let r=this.targetHeading-this.heading;r<-180&&(r+=360),r>180&&(r-=360);const a=3*e;Math.abs(r)<a?this.heading=this.targetHeading:this.heading+=Math.sign(r)*a,this.heading=(this.heading+360)%360;const i=this.targetAltitude-this.altitude;let o=2e3,l=1500;this.stage===Rt.CLIMB&&(o=3e3,this.altitude>28e3&&(this.stage=Rt.CRUISE)),this.stage===Rt.APPROACH&&(l=1e3,this.altitude<100&&(this.stage=Rt.LANDED)),Math.abs(i)>50?i>0?(this.verticalSpeed=o,this.altitude+=this.verticalSpeed/60*e):(this.verticalSpeed=-l,this.altitude+=this.verticalSpeed/60*e):(this.verticalSpeed=0,this.altitude=this.targetAltitude);const c=this.targetSpeed-this.speed;this.speed+=Math.sign(c)*Math.min(Math.abs(c),5*e);const d=this.speed*(e/3600)/60,y=this.heading*Math.PI/180;this.latitude+=d*Math.cos(y),this.longitude+=d*Math.sin(y)/Math.cos(this.latitude*Math.PI/180),this.updateLogic(e,n)}updateLogic(e,n){if(this.conversationState==="IDLE")Date.now()-this.lastCommTime>this.nextCommDelay&&this.generateConversation();else if(this.conversationState==="QUEUED"){if(this.conversationQueue.length>0){const r=this.conversationQueue[0];(n?n.isBusy(r.frequency):!1)||this.popAndSend(n)}}else this.conversationState==="WAITING"&&(this.conversationTimer-=e,this.conversationTimer<=0&&this.popAndSend(n))}determineFreqInfo(){if(this.altitude>=5e3){const e=Sf.getRegionInfo(this.latitude,this.longitude);return{station:e.name,freq:parseFloat(e.frequency)}}else{if(this.altitude<50)return{station:"Ground",freq:"GROUND"};if(this.altitude<3e3)return{station:"Tower",freq:"TOWER"}}return{station:"Center",freq:"CENTER"}}generateConversation(){const{station:e,freq:n}=this.determineFreqInfo();let r="",a="",i="",o=!0;if(this.stage===Rt.CLIMB){const l=Math.round(this.targetAltitude/100);r=`${e}, ${this.callsign} climbing FL${l}.`,a=`${this.callsign}, radar contact, climb and maintain FL${l}.`,i=`Climb maintain FL${l}, ${this.callsign}.`}else if(this.stage===Rt.APPROACH)r=`${e}, ${this.callsign} with you, request approach.`,a=`${this.callsign}, expect vectors for visual approach.`,i=`Expect vectors, ${this.callsign}.`;else if(Math.abs(this.verticalSpeed)>100){const l=this.verticalSpeed>0?"climbing":"descending",c=Math.round(this.targetAltitude/100);r=`${e}, ${this.callsign} ${l} FL${c}.`,a=`${this.callsign}, roger.`,i="",o=!1}else r=`${e}, ${this.callsign} FL${Math.round(this.altitude/100)}.`,a=`${this.callsign}, roger.`,o=!1;this.conversationQueue=[],this.conversationQueue.push({sender:this.callsign,text:r,frequency:n,duration:3e3}),o&&(this.conversationQueue.push({sender:"ATC",text:a,frequency:n,duration:3e3,delay:2e3}),i&&this.conversationQueue.push({sender:this.callsign,text:i,frequency:n,duration:2e3,delay:1e3})),this.conversationState="QUEUED"}popAndSend(e){const n=this.conversationQueue.shift();if(!n){this.finishConversation();return}if(this.pendingMessage={sender:n.sender,text:n.text,timestamp:Date.now(),type:"traffic",frequency:n.frequency},e){const r=this.conversationQueue.length>0&&this.conversationQueue[0].delay||0;e.blockChannel(n.frequency,n.duration+r)}if(this.conversationQueue.length>0){const r=this.conversationQueue[0].delay||1e3;this.conversationTimer=(n.duration+r)/1e3,this.conversationState="WAITING"}else this.finishConversation()}finishConversation(){this.conversationState="IDLE",this.lastCommTime=Date.now(),this.nextCommDelay=3e4+Math.random()*6e4}popMessage(){const e=this.pendingMessage;return this.pendingMessage=null,e}}class jw{constructor(){this.npcs=[],this.airlines=Qp.airlines||[],this.nextId=1,this.spawnRadius=80,this.despawnRadius=320,this.maxNPCs=5,this.minNPCs=1}calculateDistance(e,n){if(!e||!n)return 9999;const r=3440.065,a=(n.latitude-e.latitude)*Math.PI/180,i=(n.longitude-e.longitude)*Math.PI/180,o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e.latitude*Math.PI/180)*Math.cos(n.latitude*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return r*l}generateRandomPos(e,n){const r=Math.random()*n,a=Math.random()*2*Math.PI,i=r/60;return{latitude:e.latitude+i*Math.cos(a),longitude:e.longitude+i*Math.sin(a),altitude:2e4+Math.random()*2e4,heading:Math.random()*360,speed:350+Math.random()*150}}generateCallsign(){if(this.airlines.length===0)return`N${Math.floor(Math.random()*900)+100}GA`;const e=this.airlines[Math.floor(Math.random()*this.airlines.length)],n=Math.floor(Math.random()*9e3)+100;return`${e.callsign} ${n}`}update(e,n){if(!n||!n.latitude)return[];const r=[];this.npcs.forEach(i=>{i.update(e);const o=i.popMessage();o&&r.push(o)}),this.npcs=this.npcs.filter(i=>this.calculateDistance({latitude:i.latitude,longitude:i.longitude},n)<=this.despawnRadius);const a=this.npcs.filter(i=>this.calculateDistance({latitude:i.latitude,longitude:i.longitude},n)<=this.spawnRadius).length;return a<this.minNPCs?this.spawnNPC(n):a<this.maxNPCs&&Math.random()<.002&&this.spawnNPC(n),r}spawnNPC(e){const n=Math.random();let r=null,a=null;const i=this.generateCallsign();if(n<.4)r=this.generateRandomPos(e,this.spawnRadius),r.stage=Rt.CRUISE;else{const c=Ve.getAirportsWithinRadius(e.latitude,e.longitude,this.spawnRadius).filter(u=>this.calculateDistance(e,{latitude:u.latitude,longitude:u.longitude})>5);if(c.length===0)r=this.generateRandomPos(e,this.spawnRadius),r.stage=Rt.CRUISE;else{const u=c[Math.floor(Math.random()*c.length)];if(a=u.iata,n<.7){const d=Math.random()*360,p=(1+Math.random())/60;r={latitude:u.latitude+p*Math.cos(d*Math.PI/180),longitude:u.longitude+p*Math.sin(d*Math.PI/180),altitude:500+Math.random()*1e3,heading:d,speed:160+Math.random()*40,stage:Rt.CLIMB}}else{const d=10+Math.random()*10,y=Math.random()*2*Math.PI,p=d/60,h=u.latitude+p*Math.cos(y),v=u.longitude+p*Math.sin(y),w=u.latitude-h,C=(u.longitude-v)*Math.cos(h*Math.PI/180),g=Math.atan2(C,w)*180/Math.PI;r={latitude:h,longitude:v,altitude:3e3+Math.random()*2e3,heading:(g+360)%360,speed:200+Math.random()*30,stage:Rt.APPROACH}}}}const o=new Fw(this.nextId++,i,r,a);this.npcs.push(o)}getNPCs(){return this.npcs}}const Fh=new jw,Ow=({callsign:t,aircraftModel:e,difficulty:n,selectedDeparture:r,selectedArrival:a,initialDeparture:i,saveData:o,flightPlan:l,airline:c,pax:u,payload:d,fuelReserve:y,cruiseHeight:p,useRandomTime:h,timeZulu:v,useRandomSeason:w,season:C,handleResetFlight:g,formatDistance:m,formatFlightTime:f,formatFuel:S,weatherData:A,setWeatherData:I,failureType:R,crewCount:x,physicsModel:N="realistic",routeDetails:E})=>{var su,lu,cu,uu,du,hu,yu,pu,fu,gu,mu,vu,wu,Au,xu,bu,Cu,Tu,Su,Iu,Ru,Lu,Eu,_u,ku,qu,Pu,Nu,Mu,Fu,ju,Ou,Gu,Hu,Du,Bu,$u;const{t:k,language:B}=qn(),ae=90,V=90,ce=parseInt(u)||0,ye=parseInt(x)||0,ee=parseFloat(d)||0,H=ce*ae,_=ye*V,j=ee,F=H+_+j,z=l&&l.fuel&&typeof l.fuel.totalFuel=="number"?l.fuel.totalFuel:0,ne=(E==null?void 0:E.departureRunway)||((cu=(lu=(su=l==null?void 0:l.departure)==null?void 0:su.runways)==null?void 0:lu[0])==null?void 0:cu.name)||"36L",oe=a&&r?a.longitude>r.longitude:null,ie=Jc(ne,oe),ue=ie*Math.PI/180;let pe=(i==null?void 0:i.latitude)||37.6188,Q=(i==null?void 0:i.longitude)||-122.375;if(i&&ne){const W=i.iata||i.icao;if(W){const X=Ve.getRunwayGeometry(W,ne);if(X&&X.thresholdStart){console.log(`Spawn Point Adjusted to Runway ${ne} Threshold:`,X.thresholdStart),pe=X.thresholdStart.latitude,Q=X.thresholdStart.longitude;const Ie=100,je=111111,Ce=111111*Math.cos(pe*Math.PI/180),Ge=Ie*Math.cos(ue)/je,Ae=Ie*Math.sin(ue)/Ce;pe+=Ge,Q+=Ae}}}const Y={aircraftModel:e,payloadWeight:F,fuelWeight:z,cruiseHeight:p,windSpeedKts:A&&typeof A.windSpeed=="number"?A.windSpeed:0,initialLatitude:pe,initialLongitude:Q,initialHeading:ie,airportElevation:(i==null?void 0:i.elevation)||0,flightPlan:(E==null?void 0:E.waypoints)||(l==null?void 0:l.waypoints)||[],departure:r,arrival:a,departureRunway:(E==null?void 0:E.departureRunway)||((hu=(du=(uu=l==null?void 0:l.departure)==null?void 0:uu.runways)==null?void 0:du[0])==null?void 0:hu.name),arrivalRunway:(E==null?void 0:E.landingRunway)||((fu=(pu=(yu=l==null?void 0:l.arrival)==null?void 0:yu.runways)==null?void 0:pu[0])==null?void 0:fu.name),difficulty:n,failureType:R},{flightData:T,physicsState:q,isInitialized:P,error:O,isCrashed:D,resetAircraft:G,updatePhysics:$,setThrottle:M,setPitch:Z,setRoll:de,setYaw:U,setFlaps:ve,setAirBrakes:fe,setGear:Ne,setTrim:Fe,performSystemAction:we,setEnvironment:xe,physicsService:te,setTimeScale:Me,timeScale:Xe,updateFlightPlan:re,setEngineThrottle:be,setMotionEnabled:Ee}=_2(Y,!1,N),[K,_e]=L.useState(0);L.useState("");const[Pe,Re]=L.useState([]),[tt,ze]=L.useState(121.5),[Qe,cn]=L.useState(!0),[It,Er]=L.useState(wn.getState()),[He,Ti]=L.useState(null);L.useEffect(()=>{var je;if(!Ee||!P)return;const W=(je=It.currentPhase)==null?void 0:je.type,Ie=["boarding","departure_clearance","pushback","taxiing","takeoff_prep"].includes(W)&&!It.takeoffClearanceReceived;Ee(!Ie)},[It.currentPhase,It.takeoffClearanceReceived,Ee,P]);const If=(W,X,Ie,je)=>{if(ka.isBusy()){Re(ir=>[...ir,{sender:"System",text:k("ui.flight.messages.freq_busy"),timestamp:Date.now(),type:"system"}]);return}let Ce,Ge,Ae,Te;typeof W=="object"&&W!==null?(Ce=W.text,Ge=W.type,Ae=W.templateId,Te=W.params):(Ce=W,Ge=X,Ae=Ie,Te=je);const nt=Si(tt),mn={sender:t,text:Ce,timestamp:Date.now(),type:Ge||"transmission",frequency:nt};Re(ir=>[...ir,mn]);const wa={callsign:t,altitude:Math.round(T.altitude),heading:Math.round(T.heading),weather:A,frequencyType:nt,language:B,departureRunway:Y.departureRunway,arrivalRunway:Y.arrivalRunway,difficulty:n||"Intermediate"};ka.processMessage({type:Ge,templateId:Ae,params:Te,text:Ce},wa,ir=>{Re(us=>[...us,{...ir,frequency:nt}]),Ae==="req_takeoff"&&(console.log(" Takeoff Clearance Received - Triggering Event"),Le.publish("atc.clearance.takeoff",{timestamp:Date.now(),runway:Te==null?void 0:Te.runway}))})},[ss,eu]=L.useState([]),[Rf,Lf]=L.useState(""),[tu,Ef]=L.useState(!1),[_f,nu]=L.useState(!1),[ru,kf]=L.useState(!1),[qf,Pf]=L.useState([]),[_r,Nf]=L.useState(null),[ls,au]=L.useState(l),[gn,cs]=L.useState(()=>{const W=n==="pro"||n==="devil";return{canContinue:!W,missingItems:W?[{key:"startup.sys_init"}]:[]}});L.useEffect(()=>{var Ie;if(!q||!q.systems)return;if(n!=="pro"&&n!=="devil"){gn.canContinue||cs({canContinue:!0,missingItems:[]});return}let W=null;const X=(Ie=It.currentPhase)==null?void 0:Ie.type;if(X==="boarding"||X==="takeoff_prep"||X==="departure_clearance"?W=xr.POWER_UP:X==="pushback"&&(W=xr.ENGINE_START),W){const je=tc(W,q.systems,q.engines);(je.canContinue!==gn.canContinue||JSON.stringify(je.missingItems)!==JSON.stringify(gn.missingItems))&&cs(je)}else gn.canContinue||cs({canContinue:!0,missingItems:[]})},[q,It.currentPhase,n]),L.useEffect(()=>{au(W=>JSON.stringify(W)!==JSON.stringify(l)?l:W)},[l]),L.useEffect(()=>{P&&o&&te&&(console.log(" Loading Saved Flight State into Physics Engine...",o),setTimeout(()=>{te.loadFlightState(o),o.weatherData&&I(o.weatherData)},500))},[P,o,te]);const Mf=W=>{console.log(" Flight Plan Updated:",W);let X;Array.isArray(W)?X={...ls,waypoints:W}:X=W,au(X),re&&re(X)},iu=b.useRef(Date.now()),ou=b.useRef(0),Si=W=>{var Ge,Ae;const X=parseFloat(W),Ie=(T==null?void 0:T.altitude)||0,je=(Ge=T==null?void 0:T.position)==null?void 0:Ge.latitude,Ce=(Ae=T==null?void 0:T.position)==null?void 0:Ae.longitude;if(_r&&Math.abs(X-parseFloat(_r.frequency))<.005)return"CENTER";if(Ie>5e3)return Math.abs(X-121.5)<.1?"GUARD":"UNICOM";if(je&&Ce){const Te=Ve.getAirportsWithinRadius(je,Ce,20);if(Te.length>0){Te.sort((mn,wa)=>{const ir=Ve.calculateDistance({latitude:je,longitude:Ce},mn),us=Ve.calculateDistance({latitude:je,longitude:Ce},wa);return ir-us});const nt=Te[0];if(nt.frequencies){const mn=nt.frequencies.find(wa=>Math.abs(X-wa.frequency)<.005);if(mn)return mn.type.toUpperCase()}}}return Math.abs(X-118)<.1?"TOWER":Math.abs(X-121.9)<.1?"GROUND":Math.abs(X-121.5)<.1?"GUARD":Math.abs(X-119)<.1?"CENTER":"UNICOM"};L.useEffect(()=>{if(!T||!T.position)return;const W=Date.now();let X=(W-iu.current)/1e3;iu.current=W,X>1&&(X=.016);const Ie=ka.isBusy();if(Ie!==ru&&kf(Ie),(!_r||W-ou.current>5e3)&&T.position){const Te=Sf.getRegionInfo(T.position.latitude,T.position.longitude);console.log("Region Update:",Te),Nf(Te),ou.current=W}const je=X*(Xe||1),Ce=Fh.update(je,T.position,ka);Pf([...Fh.npcs]);const Ge=Si(tt),Ae={frequency:tt,type:Ge,station:Ge==="CENTER"&&_r?_r.name:Ge};ka.update(je,{altitude:T.altitude,verticalSpeed:T.verticalSpeed,callsign:t,weather:A},Ae,Te=>{Re(nt=>[...nt,{...Te,frequency:Te.frequency||Ge}])},B||"en"),Ce.length>0&&Ce.forEach(Te=>{Re(nt=>[...nt,Te])})},[T.frame,T.position]),L.useEffect(()=>{const W=Le.subscribe(Le.Types.NARRATIVE_UPDATE,Ae=>{Ti(Ae)}),X=Le.subscribe(Le.Types.CRITICAL_MESSAGE,Ae=>{Ti(Ae)}),Ie=Le.subscribe(Le.Types.PHASE_CHANGED,Ae=>{Lf(Ae.phase.name),Ae.phase.narrative&&Ti(Ae.phase.narrative)}),je=Le.subscribe(Le.Types.FAILURE_OCCURRED,Ae=>{const Te=wn.getState();eu(Te.activeFailures)}),Ce=Le.subscribe(Le.Types.FAILURE_RESOLVED,Ae=>{const Te=wn.getState();eu(Te.activeFailures)}),Ge=Le.subscribe(Le.Types.PHYSICS_INITIALIZE,Ae=>{if(te&&typeof te.setInitialConditions=="function"&&Ae.initialConditions&&te.setInitialConditions(Ae.initialConditions),te&&typeof te.updateAutopilotTargets=="function"){const Te={};Ae.targetAltitude!==void 0&&(Te.altitude=Ae.targetAltitude),Ae.targetSpeed!==void 0&&(Te.speed=Ae.targetSpeed),Object.keys(Te).length>0&&te.updateAutopilotTargets(Te)}});return()=>{W(),X(),Ie(),je(),Ce(),Ge()}},[te]),L.useEffect(()=>{let W;if(Qe){const X=async()=>{var Ce,Ge,Ae,Te;const Ie=((Ge=(Ce=te==null?void 0:te.state)==null?void 0:Ce.geo)==null?void 0:Ge.lat)||(i==null?void 0:i.latitude)||37.6188,je=((Te=(Ae=te==null?void 0:te.state)==null?void 0:Ae.geo)==null?void 0:Te.lon)||(i==null?void 0:i.longitude)||-122.375;try{const nt=await U2.getWeather(Ie,je);I(mn=>JSON.stringify(mn)!==JSON.stringify(nt)?(console.log(" Real Weather Updated:",nt),xe&&xe(nt),nt):mn)}catch(nt){console.error(" Real Weather Fetch Failed",nt)}};X(),W=setInterval(X,5*60*1e3)}else W=setInterval(()=>{I(X=>D2(X,Lt.atisUpdateIntervalMinutes))},Lt.atisUpdateIntervalMinutes*60*1e3);return()=>clearInterval(W)},[Qe,xe,te]),L.useEffect(()=>{let W=0;const X=5;let Ie=!0;const Ce=setInterval(async()=>{if(!Ie||!te||!te.state||!te.state.geo)return;const{lat:Ge,lon:Ae}=te.state.geo;try{const Te=Bn.getTerrainHeight(Ge,Ae);if(Te!==null){te.terrainElevation=Te*.3048;return}const nt=await K2.getElevation(Ge,Ae);nt!==null&&typeof nt=="number"&&(te.terrainElevation=nt,W=0)}catch(Te){W++,W>X?(console.warn(" Terrain fetch failed too many times. Disabling terrain updates."),Ie=!1):console.warn(` Terrain fetch failed (${W}/${X})`,Te)}},1e3);return()=>clearInterval(Ce)},[te]),L.useEffect(()=>{r&&a&&(console.log("  FlightInProgress: Updating scene manager with flight parameters:",{callsign:t,departure:r.iata||r.icao,arrival:a.iata||a.icao,aircraftModel:e,departureRunway:E==null?void 0:E.departureRunway,landingRunway:E==null?void 0:E.landingRunway,initialHeading:ie}),wn.updateScenario({callsign:t,departure:r.iata||r.icao,departureName:r.name,arrival:a.iata||a.icao,arrivalName:a.name,aircraftModel:e,departureRunway:E==null?void 0:E.departureRunway,landingRunway:E==null?void 0:E.landingRunway,initialHeading:ie}),console.log(" FlightInProgress: Scene manager updated successfully"))},[t,r,a,e,E,ie]),L.useEffect(()=>{if(te&&P){const W={waypoints:(E==null?void 0:E.waypoints)||(l==null?void 0:l.waypoints)||[],departure:r,arrival:a};te.handleRadioTuning(tt,W)}},[tt,P,te,E,l,r,a]),L.useEffect(()=>{wn.start();let W=null,X=performance.now();const Ie=je=>{const Ce=(je-X)/1e3;X=je;const Ge=Math.min(Ce,.1);wn.getState();let Ae=null;P&&(Ae=$(Ge,je)),wn.update(Ce,Ae);const Te=wn.getState();Er(Te),W=requestAnimationFrame(Ie)};return W=requestAnimationFrame(Ie),()=>{W&&cancelAnimationFrame(W)}},[P,$]);const Ff=(W,X)=>{console.log(" FlightInProgress: Throttle control received:",{engineIndex:W,throttleValue:X,percentage:(X*100).toFixed(1)+"%"});const Ie=Math.max(-.7,Math.min(1,X));_e(Ie*100),be?(be(W,Ie),console.log(` FlightInProgress: Engine ${W} throttle set to:`,Ie)):(M(Ie),console.log(" FlightInProgress: Global throttle set to:",Ie))},jf=W=>{console.log(` Flaps control: ${W}`),ve(W)},Of=W=>{console.log(` Gear control: ${W}`),Ne(W)},Gf=W=>{console.log(` Air brakes control: ${W}`),fe(W)};return!P&&!O?s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#0a0a0a",color:"white"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsxs("div",{style:{fontSize:"24px",marginBottom:"20px"},children:[" ",k("ui.loading.starting_simulation")]}),s.jsx("div",{style:{color:"#4ade80"},children:k("ui.loading.initializing_physics")})]})}):O?s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#0a0a0a",color:"white"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsxs("div",{style:{fontSize:"24px",marginBottom:"20px",color:"#ef4444"},children:[" ",k("ui.error.initialization_error")]}),s.jsx("div",{style:{marginBottom:"20px"},children:O}),s.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#dc2626",color:"white",border:"none",padding:"12px 25px",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:k("ui.error.reload_page")})]})}):s.jsxs("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"#0a0a0a",overflow:"hidden",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:"12px 20px",borderBottom:"1px solid rgba(148, 163, 184, 0.4)",background:"linear-gradient(to right, rgba(15,23,42,0.95), rgba(30,64,175,0.85))",display:"flex",gap:"16px",alignItems:"flex-start",justifyContent:"space-between",zIndex:10},children:[s.jsxs("div",{style:{flex:2,minWidth:0},children:[s.jsx("div",{style:{fontSize:"12px",letterSpacing:"0.14em",textTransform:"uppercase",color:"#9CA3AF",marginBottom:"4px"},children:Rf||k("ui.header.situation")}),(It.physicsActive||(He==null?void 0:He.severity)==="warning"||(He==null?void 0:He.severity)==="critical")&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:"18px",fontWeight:600,color:(He==null?void 0:He.severity)==="critical"?"#ef4444":(He==null?void 0:He.severity)==="warning"?"#f59e0b":"#E5E7EB",marginBottom:"4px"},children:k(He==null?void 0:He.title,He==null?void 0:He.data)||k("ui.header.awaiting")}),s.jsx("div",{style:{fontSize:"13px",color:"#D1D5DB",opacity:.9,marginBottom:"8px"},children:k(He==null?void 0:He.content,He==null?void 0:He.data)||k("ui.header.prepare")})]}),!gn.canContinue&&(n==="pro"||n==="devil")&&s.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[s.jsx("div",{style:{fontSize:"11px",textTransform:"uppercase",color:"#f59e0b",marginBottom:"4px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"6px"},children:s.jsx("span",{children:k("ui.header.checklist_incomplete")})}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:gn.missingItems.map((W,X)=>s.jsxs("div",{style:{fontSize:"11px",color:"#fbbf24",padding:"6px 8px",background:"rgba(69, 26, 3, 0.6)",borderRadius:"4px",borderLeft:"3px solid #f59e0b",display:"flex",alignItems:"center"},children:[s.jsx("span",{style:{marginRight:"6px"},children:""})," ",W.key?k(W.key,W.params):W]},W.key||X))})]}),ss.length>0&&s.jsxs("div",{style:{marginTop:"8px"},children:[s.jsxs("div",{style:{fontSize:"11px",textTransform:"uppercase",color:"#ef4444",marginBottom:"4px"},children:[k("ui.panels.active_failures")," (",ss.length,")"]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"3px"},children:ss.map((W,X)=>s.jsxs("div",{style:{fontSize:"10px",color:W.isCritical?"#ef4444":"#f59e0b",padding:"4px 6px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"3px",display:"flex",justifyContent:"space-between"},children:[s.jsxs("span",{children:[W.type.toUpperCase()," ",W.data.engineIndex!==void 0?`ENGINE ${W.data.engineIndex+1}`:""]}),s.jsx("span",{children:W.isCritical?k("ui.common.critical"):`${Math.round(W.progress)}%`})]},X))})]})]}),s.jsx("div",{style:{flex:1.3,minWidth:"260px",height:"120px"},children:s.jsx(Tw,{onTransmit:If,currentStation:tt.toFixed(3),callsign:t||"N12345",flightPlan:ls,isChannelBusy:ru,frequencyType:Si(tt)})})]}),s.jsxs("div",{style:{flex:1,display:"flex",position:"relative"},children:[tu&&s.jsx(fw,{debugPhysicsData:T==null?void 0:T.debugPhysics,thrust:T==null?void 0:T.thrust,drag:T==null?void 0:T.drag,waypoints:Y.flightPlan,flightData:T,groundStatus:(gu=te==null?void 0:te.groundStatus)==null?void 0:gu.status,remainingRunwayLength:((mu=te==null?void 0:te.groundStatus)==null?void 0:mu.remainingLength)??0}),_f&&s.jsx(gw,{physicsService:te,onClose:()=>nu(!1)}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",zIndex:10},children:s.jsx(pw,{flightData:{...T,physicsActive:It.physicsActive,narrativeHistory:It.narrativeHistory,phaseName:(vu=It.phase)==null?void 0:vu.name},physicsState:q,physicsService:te,weatherData:A,aircraftModel:e,selectedArrival:a,flightPlan:ls,radioMessages:Pe,onRadioFreqChange:ze,npcs:qf,frequencyContext:Si(tt),currentRegion:_r,timeScale:Xe,setTimeScale:Me,onUpdateFlightPlan:Mf,startupStatus:gn,onActionRequest:(W,X,Ie)=>{const je=typeof X=="number"?X.toFixed(5):JSON.stringify(X);switch(console.log(` UI Action: ${W} = ${je}, Extra: ${Ie}`),W){case"throttle":Ff(Ie!==void 0?Ie:0,X),console.log(` FlightPanel Action: ${W} = ${X}, Engine: ${Ie}`);break;case"flaps":jf(X),console.log(` FlightPanel Action: ${W} = ${X}`);break;case"airBrakes":Gf(X),console.log(` FlightPanel Action: ${W} = ${X}`);break;case"gear":Of(X),console.log(` FlightPanel Action: ${W} = ${X}`);break;case"trim":Fe(X),console.log(` FlightPanel Action: ${W} = ${X}`);break;case"pitch":Z(X),console.log(` FlightPanel Action: ${W} = ${X}`);break;case"roll":de(X),console.log(` FlightPanel Action: ${W} = ${X}`);break;case"yaw":U(X),console.log(` FlightPanel Action: ${W} = ${X}`);break;case"toggle-autopilot":{if(te&&typeof te.setAutopilot=="function"){const Ce=typeof te.getAutopilotStatus=="function"?te.getAutopilotStatus():null,Ge=Ce&&typeof Ce.engaged=="boolean"?Ce.engaged:!1;te.setAutopilot(!Ge)}console.log(` FlightPanel Action: ${W}`);break}case"set-autopilot-mode":{te&&typeof te.setAutopilotMode=="function"&&te.setAutopilotMode(X),console.log(` FlightPanel Action: ${W} = ${X}`);break}case"set-autopilot-targets":{if(te&&typeof te.updateAutopilotTargets=="function"&&X){const Ce={altitude:X.altitude,speed:X.ias,vs:X.vs,heading:X.heading};te.updateAutopilotTargets(Ce)}console.log(` FlightPanel Action: ${W} = ${JSON.stringify(X)}`);break}case"set-nav-frequency":{te&&te.autopilot&&typeof te.autopilot.setNavFrequency=="function"&&(te.autopilot.setNavFrequency(X),console.log(` FlightPanel Action: ${W} = ${X}`));break}case"system-action":{we&&X&&we(X.system,X.action,X.value),console.log(` FlightPanel Action: ${W} = ${JSON.stringify(X)}`);break}case"load-flight":{te&&typeof te.loadFlightState=="function"&&te.loadFlightState(X),console.log(` FlightPanel Action: ${W} = ${JSON.stringify(X)}`);break}case"toggle-debug":{Ef(Ce=>!Ce),nu(Ce=>!Ce),console.log(` FlightPanel Action: ${W} -> Toggling Debug & Failure Panels`);break}case"skip-phase":{if((n==="pro"||n==="devil")&&!gn.canContinue){const Ce=gn.missingItems.map(Ae=>Ae.key?k(Ae.key,Ae.params):Ae).join(", "),Ge={title:k("ui.header.checklist_incomplete"),content:k("ui.messages.cannot_proceed_missing_items",{items:Ce}),severity:"warning"};Ti(Ge),console.warn(" Cannot skip phase:",Ce);return}wn.skipPhase(),console.log(` FlightPanel Action: ${W}`);break}default:console.log("Unhandled action:",W)}}})})]}),tu&&T&&s.jsxs("div",{style:{position:"absolute",top:"90px",right:"20px",background:"rgba(10, 15, 30, 0.85)",color:"#4ade80",padding:"12px",fontFamily:"monospace",fontSize:"11px",borderRadius:"6px",border:"1px solid rgba(74, 222, 128, 0.3)",zIndex:100,pointerEvents:"none",width:"220px",boxShadow:"0 4px 6px rgba(0,0,0,0.3)"},children:[s.jsxs("div",{style:{fontSize:"12px",fontWeight:"bold",borderBottom:"1px solid rgba(74, 222, 128, 0.3)",paddingBottom:"4px",marginBottom:"8px",display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"FLIGHT DATA & LNAV"}),s.jsxs("span",{children:[(wu=T.derived)==null?void 0:wu.heading.toFixed(0),""]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 8px"},children:[s.jsx("span",{style:{color:"#9ca3af"},children:"Lat:"}),s.jsx("span",{children:(xu=(Au=T.position)==null?void 0:Au.latitude)==null?void 0:xu.toFixed(5)}),s.jsx("span",{style:{color:"#9ca3af"},children:"Lon:"}),s.jsx("span",{children:(Cu=(bu=T.position)==null?void 0:bu.longitude)==null?void 0:Cu.toFixed(5)}),s.jsx("span",{style:{color:"#9ca3af"},children:"Alt:"}),s.jsxs("span",{children:[(Su=(Tu=T.derived)==null?void 0:Tu.altitude_ft)==null?void 0:Su.toFixed(0)," ft"]}),s.jsx("span",{style:{color:"#9ca3af"},children:"IAS:"}),s.jsxs("span",{children:[(Iu=T.indicatedAirspeed)==null?void 0:Iu.toFixed(0)," kts"]}),s.jsx("span",{style:{color:"#9ca3af"},children:"GS:"}),s.jsxs("span",{children:[(Lu=(Ru=T.derived)==null?void 0:Ru.airspeed)==null?void 0:Lu.toFixed(0)," kts"]})]}),s.jsx("div",{style:{margin:"8px 0",borderTop:"1px solid rgba(74, 222, 128, 0.2)"}}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:"4px 8px"},children:[s.jsx("span",{style:{color:"#9ca3af"},children:"Mode:"}),s.jsx("span",{style:{fontWeight:"bold"},children:((Eu=T.autopilotDebug)==null?void 0:Eu.mode)||"OFF"}),s.jsx("span",{style:{color:"#9ca3af"},children:"Engaged:"}),s.jsx("span",{style:{color:(_u=T.autopilotDebug)!=null&&_u.engaged?"#4ade80":"#ef4444"},children:(ku=T.autopilotDebug)!=null&&ku.engaged?"ACTIVE":"OFF"}),s.jsx("span",{style:{color:"#9ca3af"},children:"Target Hdg:"}),s.jsxs("span",{children:[((Pu=(qu=T.autopilotTargets)==null?void 0:qu.heading)==null?void 0:Pu.toFixed(1))||"---",""]}),s.jsx("span",{style:{color:"#9ca3af"},children:"Hdg Error:"}),s.jsxs("span",{style:{color:Math.abs((Nu=T.autopilotDebug)==null?void 0:Nu.headingError)>5?"#f59e0b":"#4ade80"},children:[((Fu=(Mu=T.autopilotDebug)==null?void 0:Mu.headingError)==null?void 0:Fu.toFixed(2))||"0.00",""]}),s.jsx("span",{style:{color:"#9ca3af"},children:"Tgt Roll:"}),s.jsxs("span",{children:[((Ou=(ju=T.autopilotDebug)==null?void 0:ju.targetRoll)==null?void 0:Ou.toFixed(1))||"0.0",""]}),s.jsx("span",{style:{color:"#9ca3af"},children:"Act Roll:"}),s.jsxs("span",{children:[(((Gu=T.orientation)==null?void 0:Gu.phi)*180/Math.PI).toFixed(1),""]})]}),((Du=(Hu=T.autopilotDebug)==null?void 0:Hu.ils)==null?void 0:Du.active)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{margin:"8px 0",borderTop:"1px solid rgba(74, 222, 128, 0.2)"}}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:"4px 8px"},children:[s.jsx("span",{style:{color:"#f59e0b",fontWeight:"bold"},children:"ILS STATUS"}),s.jsx("span",{style:{color:"#f59e0b",fontWeight:"bold",textAlign:"right"},children:T.autopilotDebug.ils.runway}),s.jsx("span",{style:{color:"#9ca3af"},children:"Dist:"}),s.jsxs("span",{children:[(T.autopilotDebug.ils.distAlong/6076).toFixed(1)," nm"]}),s.jsx("span",{style:{color:"#9ca3af"},children:"LOC Err:"}),s.jsxs("span",{style:{color:Math.abs(T.autopilotDebug.ils.distCross)>50?"#ef4444":"#4ade80"},children:[T.autopilotDebug.ils.distCross.toFixed(0)," ft"]}),s.jsx("span",{style:{color:"#9ca3af"},children:"G/S Err:"}),s.jsxs("span",{style:{color:Math.abs(T.autopilotDebug.ils.altError)>50?"#ef4444":"#4ade80"},children:[T.autopilotDebug.ils.altError.toFixed(0)," ft"]}),s.jsxs("span",{style:{color:"#9ca3af"},children:[k("ui.panels.tgt_alt"),":"]}),s.jsxs("span",{children:[T.autopilotDebug.ils.targetAltitude.toFixed(0)," ft"]})]})]}),s.jsx("div",{style:{margin:"8px 0",borderTop:"1px solid rgba(74, 222, 128, 0.2)"}}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxs("span",{style:{color:"#9ca3af"},children:[k("ui.panels.next_wp"),":"]}),s.jsx("span",{children:((Bu=((E==null?void 0:E.waypoints)||(l==null?void 0:l.waypoints)||[])[T.currentWaypointIndex])==null?void 0:Bu.name)||(($u=((E==null?void 0:E.waypoints)||(l==null?void 0:l.waypoints)||[])[T.currentWaypointIndex])==null?void 0:$u.id)||`IDX ${T.currentWaypointIndex}`})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsxs("span",{style:{color:"#9ca3af"},children:[k("ui.panels.wp_index"),":"]}),s.jsxs("span",{children:[T.currentWaypointIndex," / ",((E==null?void 0:E.waypoints)||(l==null?void 0:l.waypoints)||[]).length]})]})]})]}),D&&s.jsx("div",{className:"end-scene-overlay",children:s.jsxs("div",{className:"end-scene-content",children:[s.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:k("narrative.phases.shutoff.0.title")||"Flight Ended"}),s.jsx("div",{style:{marginBottom:"20px",maxWidth:"420px"},children:k("narrative.phases.shutoff.2.content")||"Placeholder: post-incident summary and narrative debrief will appear here."}),s.jsx("button",{onClick:()=>{window.location.reload()},style:{background:"linear-gradient(135deg, #DC2626, #F97316)",color:"white",border:"none",padding:"12px 25px",borderRadius:"8px",fontSize:"15px",cursor:"pointer",fontWeight:600},children:k("ui.menu.quit")||"Return to Initialization"})]})})]})};const Gw=({isOpen:t,onConfirm:e,onSkip:n,difficulty:r,departure:a,arrival:i})=>{const[o,l]=L.useState({departureGate:"",departureTaxiway:"",departureRunway:"",sid:"",waypoints:[],star:"",landingRunway:"",landingTaxiway:"",arrivalGate:""}),[c,u]=L.useState([]),[d,y]=L.useState([]),[p,h]=L.useState([]),[v,w]=L.useState(!1);L.useEffect(()=>{if(t&&a&&i){const I=th(a),R=th(i);u(I),y(R),(async()=>{w(!0);const N=await Zd(a,i);console.log(" Generated route waypoints:",N),h(N);const E=js(N[0]&&N[0].name||"ABC"),k=Os(N[N.length-1]&&N[N.length-1].name||"ABC"),B=$i(),ae=$i(),V=eh(),ce=eh(),ye=i.longitude>a.longitude,ee=I.length>0?[...I].sort((z,ne)=>parseInt(z)-parseInt(ne))[ye?0:I.length-1]:"",H=R.length>0?[...R].sort((z,ne)=>parseInt(z)-parseInt(ne))[ye?0:R.length-1]:"",_=["amateur","intermediate","advanced","pro","devil"].includes(r),j=["intermediate","advanced","pro","devil"].includes(r),F=["advanced","pro","devil"].includes(r);l({departureGate:_?"":B,departureTaxiway:V,departureRunway:_?"":ee,sid:F?"":E,waypoints:j?[]:N,star:F?"":k,landingRunway:_?"":H,landingTaxiway:ce,arrivalGate:_?"":ae}),w(!1)})()}},[t,a,i,r]);const C=(I,R)=>{l(x=>({...x,[I]:R}))},g=async()=>{w(!0);const I=await Zd(a,i);h(I),C("waypoints",I),o.sid||C("sid",js(I[0]&&I[0].name||"ABC")),o.star||C("star",Os(I[I.length-1]&&I[I.length-1].name||"ABC")),w(!1)},m=()=>r==="rookie"?!0:!(!o.departureGate||!o.departureRunway||!o.arrivalGate||!o.landingRunway||["intermediate","advanced","pro","devil"].includes(r)&&o.waypoints.length===0||["advanced","pro","devil"].includes(r)&&(!o.sid||!o.star));if(!t)return null;const f=r==="rookie",S=["intermediate","advanced","pro","devil","rookie"].includes(r),A=["advanced","pro","devil","rookie"].includes(r);return s.jsx("div",{className:"route-selection-overlay",children:s.jsxs("div",{className:"route-selection-frame",children:[s.jsx("h2",{children:"Detailed Route Selection"}),s.jsxs("div",{className:"route-difficulty-badge",children:[r.toUpperCase()," MODE"]}),s.jsxs("div",{className:"route-grid",children:[s.jsxs("div",{className:"route-section",children:[s.jsxs("h3",{children:["Departure (",a==null?void 0:a.iata,")"]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Gate/Ramp"}),s.jsx("input",{type:"text",value:o.departureGate,onChange:I=>C("departureGate",I.target.value),placeholder:"e.g. A12"}),s.jsx("button",{className:"generate-btn",onClick:()=>C("departureGate",$i()),children:""})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Taxiway"}),s.jsx("input",{type:"text",value:o.departureTaxiway,onChange:I=>C("departureTaxiway",I.target.value),placeholder:"e.g. A"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Runway"}),s.jsxs("select",{value:o.departureRunway,onChange:I=>C("departureRunway",I.target.value),children:[s.jsx("option",{value:"",children:"Select Runway"}),c.map(I=>s.jsx("option",{value:I,children:I},I))]})]}),A&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"SID"}),s.jsx("input",{type:"text",value:o.sid,onChange:I=>C("sid",I.target.value),placeholder:"e.g. OMA12D"}),s.jsx("button",{className:"generate-btn",onClick:()=>C("sid",js(o.waypoints[0]&&o.waypoints[0].name||"ABC")),children:""})]})]}),S&&s.jsxs("div",{className:"route-section center-section",children:[s.jsx("h3",{children:"Enroute"}),s.jsxs("div",{className:"form-group full-width",children:[s.jsx("label",{children:"Waypoints"}),s.jsx("div",{className:"waypoints-display",children:Array.isArray(o.waypoints)&&o.waypoints.length>0?o.waypoints.map(I=>typeof I=="string"?I:I.name||"WPT").join("  "):""}),s.jsx("button",{className:"action-btn",onClick:g,disabled:v,children:v?"Generating...":"Generate New Route"})]})]}),s.jsxs("div",{className:"route-section",children:[s.jsxs("h3",{children:["Arrival (",i==null?void 0:i.iata,")"]}),A&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"STAR"}),s.jsx("input",{type:"text",value:o.star,onChange:I=>C("star",I.target.value),placeholder:"e.g. DXB45A"}),s.jsx("button",{className:"generate-btn",onClick:()=>C("star",Os(o.waypoints[o.waypoints.length-1]&&o.waypoints[o.waypoints.length-1].name||"ABC")),children:""})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Runway"}),s.jsxs("select",{value:o.landingRunway,onChange:I=>C("landingRunway",I.target.value),children:[s.jsx("option",{value:"",children:"Select Runway"}),d.map(I=>s.jsx("option",{value:I,children:I},I))]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Taxiway"}),s.jsx("input",{type:"text",value:o.landingTaxiway,onChange:I=>C("landingTaxiway",I.target.value),placeholder:"e.g. B"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Gate/Ramp"}),s.jsx("input",{type:"text",value:o.arrivalGate,onChange:I=>C("arrivalGate",I.target.value),placeholder:"e.g. D05"}),s.jsx("button",{className:"generate-btn",onClick:()=>C("arrivalGate",$i()),children:""})]})]})]}),s.jsxs("div",{className:"route-actions",children:[f&&s.jsx("button",{className:"skip-btn",onClick:n,children:"Skip (Use Defaults)"}),s.jsx("button",{className:"confirm-btn",onClick:()=>e(o),disabled:!m(),children:"Confirm Flight Plan"})]})]})})};const Zi=t=>Math.floor(Math.random()*t.length),Hw=(t,e)=>{const{difficulty:n,departure:r,arrival:a,pax:i}=t,o=n?n.toLowerCase():"rookie",l=e("narrative_generator.roles"),c=Array.isArray(l)?l[Zi(l)]:l,u=e(`narrative_generator.experience.${o}`)||e("narrative_generator.experience.rookie"),d=Array.isArray(u)?u[Zi(u)]:u,y=e("narrative_generator.flight_plan"),p=Array.isArray(y)?Zi(y):0,h=e(`narrative_generator.flight_plan.${p}`,{departure:(r==null?void 0:r.name)||(r==null?void 0:r.iata)||"Departure",arrival:(a==null?void 0:a.name)||(a==null?void 0:a.iata)||"Arrival",pax:i||150}),v=e(`narrative_generator.difficulty.${o}`)||e("narrative_generator.difficulty.rookie"),w=Array.isArray(v)?Zi(v):0,C=e(`narrative_generator.difficulty.${o}.${w}`);return{role:c,experience:d,plan:h,potentialDifficulty:C}},Dw=({onComplete:t,context:e})=>{const{t:n}=qn(),[r,a]=L.useState(null),[i,o]=L.useState(0),[l,c]=L.useState(!1);return L.useEffect(()=>{a(Hw(e,n))},[]),L.useEffect(()=>{if(!r)return;(async()=>{await new Promise(d=>setTimeout(d,1e3)),o(1),await new Promise(d=>setTimeout(d,2500)),o(2),await new Promise(d=>setTimeout(d,3e3)),o(3),await new Promise(d=>setTimeout(d,3e3)),o(4),await new Promise(d=>setTimeout(d,2e3)),c(!0)})()},[r]),r?s.jsx("div",{className:"narrative-container",children:s.jsxs("div",{className:"narrative-content",children:[s.jsxs("div",{className:`narrative-line role ${i>=1?"visible":""}`,children:[s.jsx("span",{className:"label",children:n("narrative_scene.designation")})," ",r.role," ",e.callsign||"UNKNOWN"]}),s.jsxs("div",{className:`narrative-line experience ${i>=2?"visible":""}`,children:[s.jsx("span",{className:"label",children:n("narrative_scene.background")})," ",n("narrative_scene.you_are")," ",r.experience]}),s.jsxs("div",{className:`narrative-line plan ${i>=3?"visible":""}`,children:[s.jsx("span",{className:"label",children:n("narrative_scene.mission")})," ",r.plan]}),s.jsxs("div",{className:`narrative-line difficulty ${i>=4?"visible":""}`,children:[s.jsx("span",{className:"label",children:n("narrative_scene.intelligence")})," ",r.potentialDifficulty]}),s.jsx("div",{className:`narrative-action ${l?"visible":""}`,children:s.jsx("button",{className:"accept-btn",onClick:t,children:n("narrative_scene.accept")})})]})}):s.jsx("div",{className:"narrative-container"})};const jh=({phase:t,children:e})=>b.createElement("div",{className:`fade-overlay ${t}`},e),Bw=({callsign:t,selectedDeparture:e,selectedArrival:n,aircraftModel:r,weatherData:a,crewCount:i,failureType:o,difficulty:l,pax:c,payload:u,routeDetails:d,onComplete:y})=>{const p=a||{windSpeed:0,visibility:0,cloudCover:0,turbulence:"none"},h=p.turbulence||"none",v=t||"UNNAMED",w=(e==null?void 0:e.iata)||"DEP",C=(n==null?void 0:n.iata)||"ARR",g=r||"UNKNOWN",m=i||2,f=o||"none",S=l||"rookie",A=c||0,I=u||0,R=new Date().toISOString().split("T")[0],x=new Date().toISOString().split("T")[1].substring(0,5)+"Z";return s.jsx("div",{className:"cinematic-review",children:s.jsxs("div",{className:"fax-paper",children:[s.jsx("div",{className:"stamp-box",children:"CONFIDENTIAL"}),s.jsxs("div",{className:"fax-header",children:[s.jsxs("div",{className:"fax-title-group",children:[s.jsx("h1",{className:"fax-title",children:"FLIGHT MANIFEST"}),s.jsxs("div",{style:{fontSize:"0.8rem",letterSpacing:"2px"},children:["OFFICIAL DISPATCH DOCUMENT // ",v]})]}),s.jsxs("div",{className:"fax-meta",children:[s.jsxs("div",{children:["DATE: ",R]}),s.jsxs("div",{children:["TIME: ",x]}),s.jsx("div",{children:"PAGE: 1 OF 1"})]})]}),s.jsxs("div",{className:"fax-content",children:[s.jsxs("div",{className:"fax-section",children:[s.jsx("div",{className:"fax-section-title",children:"01. FLIGHT DATA"}),s.jsxs("div",{className:"fax-grid",children:[s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"OPERATOR"})," ",s.jsx("span",{className:"fax-value",children:"ULTIMATE AIR"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"AIRCRAFT"})," ",s.jsx("span",{className:"fax-value",children:g})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"ORIGIN"})," ",s.jsx("span",{className:"fax-value",children:w})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"DESTINATION"})," ",s.jsx("span",{className:"fax-value",children:C})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"PAX/CREW"})," ",s.jsxs("span",{className:"fax-value",children:[A,"/",m]})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"PAYLOAD"})," ",s.jsxs("span",{className:"fax-value",children:[I," KG"]})]})]})]}),s.jsxs("div",{className:"fax-section",children:[s.jsx("div",{className:"fax-section-title",children:"02. ROUTE LOGISTICS"}),s.jsxs("div",{className:"fax-grid",children:[s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"DEPARTURE GATE"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.departureGate)||"AUTO"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"ARRIVAL GATE"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.arrivalGate)||"AUTO"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"TAXIWAY OUT"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.departureTaxiway)||"AUTO"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"TAXIWAY IN"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.landingTaxiway)||"AUTO"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"DEPARTURE RWY"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.departureRunway)||"DEFAULT"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"LANDING RWY"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.landingRunway)||"DEFAULT"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"SID"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.sid)||"N/A"})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"STAR"})," ",s.jsx("span",{className:"fax-value",children:(d==null?void 0:d.star)||"N/A"})]})]}),(d==null?void 0:d.waypoints)&&d.waypoints.length>0&&s.jsxs("div",{className:"fax-row",style:{marginTop:"1rem",borderBottom:"none"},children:[s.jsx("span",{className:"fax-label",children:"WAYPOINTS:"}),s.jsx("span",{className:"fax-value",style:{textAlign:"right",fontSize:"0.8rem"},children:d.waypoints.map(N=>typeof N=="string"?N:N.name||"WPT").join(" > ")})]})]}),s.jsxs("div",{className:"fax-section",children:[s.jsx("div",{className:"fax-section-title",children:"03. METAR & ENV"}),s.jsxs("div",{className:"fax-grid",children:[s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"WIND"})," ",s.jsxs("span",{className:"fax-value",children:[p.windSpeed," KTS"]})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"VISIBILITY"})," ",s.jsxs("span",{className:"fax-value",children:[p.visibility," MI"]})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"TURBULENCE"})," ",s.jsx("span",{className:"fax-value",children:h.toUpperCase()})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"CLOUD COVER"})," ",s.jsxs("span",{className:"fax-value",children:[p.cloudCover,"%"]})]})]})]}),s.jsxs("div",{className:"fax-section",children:[s.jsx("div",{className:"fax-section-title",children:"04. OPERATIONAL RISK"}),s.jsxs("div",{className:"fax-grid",children:[s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"DIFFICULTY"})," ",s.jsx("span",{className:"fax-value",children:S.toUpperCase()})]}),s.jsxs("div",{className:"fax-row",children:[s.jsx("span",{className:"fax-label",children:"FAILURE MODE"})," ",s.jsx("span",{className:"fax-value",children:f.toUpperCase()})]})]})]})]}),y&&s.jsx("div",{className:"fax-footer",style:{marginTop:"2rem",display:"flex",justifyContent:"center"},children:s.jsx("button",{className:"accept-btn",onClick:y,style:{background:"#000",color:"#fff",border:"2px solid #000",padding:"10px 30px",fontFamily:"monospace",fontSize:"1.2rem",cursor:"pointer",letterSpacing:"2px"},children:"ACKNOWLEDGE DISPATCH"})})]})})};const Js=({style:t})=>{const{language:e,toggleLanguage:n,t:r}=qn();return s.jsxs("button",{className:"language-switcher",onClick:n,style:t,title:"Switch Language / ",children:[s.jsx("span",{className:"lang-icon",children:""}),s.jsx("span",{className:"lang-text",children:e==="en"?"EN":""})]})},$w=({devMode:t,setDevMode:e,handleDevStart:n})=>{const{t:r}=qn(),{user:a,signInWithSSO:i,signOut:o}=Zc();return s.jsxs("header",{className:"app-header",children:[s.jsx("div",{className:"auth-status",style:{position:"absolute",top:"20px",left:"20px"},children:a?s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[s.jsx("span",{style:{fontSize:"14px",color:"#fff"},children:a.email}),s.jsx("button",{onClick:o,style:{background:"transparent",border:"1px solid #fff",color:"#fff",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Sign Out"})]}):s.jsxs("button",{onClick:i,style:{backgroundColor:"#333",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{children:""})," SSO Sign in"]})}),s.jsx("h1",{children:r("initialization.title")}),s.jsx("p",{children:r("initialization.subtitle")}),s.jsx("div",{className:"dev-mode-toggle",style:{marginTop:"10px"},children:s.jsx("button",{onClick:()=>e(!t),style:{backgroundColor:t?"#ff6b6b":"#4ecdc4",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:t?" Dev Mode: ON":" Dev Mode: OFF"})}),t&&s.jsx("div",{className:"dev-start",style:{marginTop:"10px"},children:s.jsx("button",{onClick:n,style:{backgroundColor:"#ff4757",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:" Quick Start Physics Test"})})]})};function Uw(){const[t,e]=L.useState(!1),n=()=>{console.log(" Development Mode: Starting flight simulation directly");const re=oe("KSFO")||oe("KATL"),be=oe("KLAX")||oe("KJFK");re&&be?(console.log(" Dev Mode: Using default airports",re.iata,"->",be.iata),F(re),z(be),setTimeout(()=>{V(!0),D("none")},100)):(console.warn(" Dev Mode: Could not find default airports"),V(!0),D("none"))},[r,a]=L.useState("rookie"),[i,o]=L.useState("Test Airline"),[l,c]=L.useState("TEST001"),[u,d]=L.useState("B737-800"),[y,p]=L.useState(150),[h,v]=L.useState(2e4),[w,C]=L.useState(.1),[g,m]=L.useState(35e3),[f,S]=L.useState(""),[A,I]=L.useState(!0),[R,x]=L.useState(""),[N,E]=L.useState(!0),[k,B]=L.useState(""),[ae,V]=L.useState(!1),[ce,ye]=L.useState(null),{searchResults:ee,selectedDeparture:H,selectedArrival:_,searchAirports:j,selectDeparture:F,selectArrival:z,clearSelection:ne,getAirportByCode:oe}=cm(),[ie,ue]=L.useState([]),[pe,Q]=L.useState("random"),[Y,T]=L.useState({type:"clear",windSpeed:0,visibility:10,ceiling:5e3,precipitation:0,turbulence:0}),[q,P]=L.useState(2);L.useState(!1);const[O,D]=L.useState("none"),[G,$]=L.useState(!1),[M,Z]=L.useState(null),[de,U]=L.useState(null),ve=re=>{console.log(" Loading Cloud Save:",re),re.aircraftModel&&d(re.aircraftModel),re.flightData&&re.flightData.callsign&&c(re.flightData.callsign),U(re),V(!0),D("none")};L.useEffect(()=>{(async()=>{try{const be=await Sn.getPopularAircraft();ue(be)}catch(be){console.error("Error loading popular aircraft:",be),ue([])}})()},[]),L.useEffect(()=>{(async()=>{if(H&&_&&u)try{const be=await vm(H,_,u,h,w);ye(be)}catch(be){console.error("Error calculating flight plan:",be),ye(null)}else ye(null)})()},[H,_,u,h,w]);const fe=re=>{j(re)},Ne=()=>{if(!H||!_){alert("Please select both departure and arrival airports");return}$(!0)},Fe=re=>{if(re.landingRunway&&_&&H){const be=_.longitude>H.longitude,Ee=Jc(re.landingRunway,be);console.log(` Approach for ${re.landingRunway}: Heading ${Ee} (Eastward: ${be})`);const K=(Ee+180)%360,_e=10,Pe=_.latitude*Math.PI/180,Re=_.longitude*Math.PI/180,tt=K*Math.PI/180,ze=_e,Qe=3440.065,cn=Math.asin(Math.sin(Pe)*Math.cos(ze/Qe)+Math.cos(Pe)*Math.sin(ze/Qe)*Math.cos(tt)),It=Re+Math.atan2(Math.sin(tt)*Math.sin(ze/Qe)*Math.cos(Pe),Math.cos(ze/Qe)-Math.sin(Pe)*Math.sin(cn)),Er={name:"FINAL",latitude:cn*180/Math.PI,longitude:It*180/Math.PI},He={name:re.landingRunway||"RWY",latitude:_.latitude,longitude:_.longitude};re.waypoints||(re.waypoints=[]),re.waypoints.push(Er),re.waypoints.push(He),console.log(" Added 10nm approach fix and runway:",Er,He)}Z(re),$(!1),ye(be=>{if(!be)return be;const Ee={...be};return Array.isArray(re.waypoints)&&re.waypoints.length>0&&(Ee.waypoints=re.waypoints),re!=null&&re.departureRunway&&(Ee.departure={...Ee.departure,runways:[{name:re.departureRunway}]}),re!=null&&re.landingRunway&&(Ee.arrival={...Ee.arrival,runways:[{name:re.landingRunway}]}),Ee}),xe()},we=()=>{$(!1),Z(null),xe()},xe=re=>{let Ee=R;if(N){const Pe=["spring","summer","autumn","winter"];Ee=Pe[Math.floor(Math.random()*Pe.length)],x(Ee)}let K=f;A&&(K=new Date().toISOString(),S(K));const _e=H2(H.latitude,H.longitude,Ee,K);T(_e),D("fade_out"),setTimeout(()=>{D("cinematic_review")},2500)},te=()=>{D("narrative_scene")},Me=()=>{D("fade_in"),setTimeout(()=>{V(!0),D("none")},2500)},Xe=()=>{V(!1),ye(null)};return O!=="none"?b.createElement(Hs,null,b.createElement("div",{className:`cinematic-container ${O}`},b.createElement(Js,{style:{position:"absolute",top:"20px",right:"20px",zIndex:2e3}}),O==="fade_out"&&b.createElement(jh,{phase:"fade-out"},b.createElement("div",{className:"fade-content"},b.createElement("h1",null,"Initializing Flight Simulation"),b.createElement("p",null,"Preparing for takeoff..."))),O==="cinematic_review"&&b.createElement(Bw,{callsign:l,selectedDeparture:H,selectedArrival:_,aircraftModel:u,weatherData:Y,setWeatherData:T,crewCount:q,failureType:pe,difficulty:r,pax:y,payload:h,routeDetails:M,onComplete:te}),O==="narrative_scene"&&b.createElement(Dw,{onComplete:Me,context:{difficulty:r,departure:H,arrival:_,pax:y,callsign:l}}),O==="fade_in"&&b.createElement(jh,{phase:"fade-in"},b.createElement("div",{className:"fade-content"},b.createElement("h1",null,"Simulation Active"),b.createElement("p",null,"Flight controls are now available"))))):ae?b.createElement(Hs,null,b.createElement(Js,{style:{position:"fixed",top:"10px",right:"120px",zIndex:2e3}}),b.createElement(Ow,{callsign:l,saveData:de,aircraftModel:u,difficulty:r,selectedDeparture:H,selectedArrival:_,initialDeparture:H,flightPlan:ce,airline:i,pax:y,payload:h,fuelReserve:w,cruiseHeight:g,useRandomTime:A,timeZulu:f,useRandomSeason:N,season:R,handleResetFlight:Xe,formatDistance:nh,formatFlightTime:rh,formatFuel:ah,weatherData:Y,setWeatherData:T,failureType:pe,crewCount:q,routeDetails:M})):b.createElement(Hs,null,b.createElement("div",{className:"App"},b.createElement(Js,{style:{position:"absolute",top:"20px",right:"20px"}}),b.createElement($w,{devMode:t,setDevMode:e,handleDevStart:n}),b.createElement("main",{className:"app-main"},G?b.createElement(Gw,{isOpen:G,onConfirm:Fe,onSkip:we,difficulty:r,departure:H,arrival:_}):b.createElement(l2,{difficulty:r,setDifficulty:a,airline:i,setAirline:o,callsign:l,setCallsign:c,aircraftModel:u,setAircraftModel:d,pax:y,setPax:p,payload:h,setPayload:v,fuelReserve:w,setFuelReserve:C,cruiseHeight:g,setCruiseHeight:m,timeZulu:f,setTimeZulu:S,useRandomTime:A,setUseRandomTime:I,season:R,setSeason:x,useRandomSeason:N,setUseRandomSeason:E,selectedDeparture:H,selectedArrival:_,searchResults:ee,searchAirports:j,selectDeparture:F,selectArrival:z,flightPlan:ce,formatDistance:nh,formatFlightTime:rh,formatFuel:ah,failureType:pe,setFailureType:Q,weatherData:Y,setWeatherData:T,crewCount:q,setCrewCount:P,aircraftSuggestions:ie,handleInitializeFlight:Ne,handleSearch:fe,handleLoadSave:ve,apiKey:k,setApiKey:B})),b.createElement("footer",{className:"app-footer"},b.createElement("p",null,"2026, GeeksProductionStudio. All Rights Reserved."))))}Xs.createRoot(document.getElementById("root")).render(b.createElement(b.StrictMode,null,b.createElement(s2,null,b.createElement(Uw))));

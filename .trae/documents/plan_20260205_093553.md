# Supabase Integration & Cloud Save System Plan

## 1. Setup & Dependencies
- [ ] Install `@supabase/supabase-js`.
- [ ] Create `src/lib/supabase.js` for client initialization.
- [ ] Create `.env` template for Supabase credentials (`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`).

## 2. Authentication (SSO)
- [ ] Create `AuthContext` (`src/contexts/AuthContext.jsx`) to manage user session.
- [ ] Implement `signIn` function supporting SSO for domain `geeksproductionstudio.com`.
- [ ] Add `LoginButton` component to `Header.jsx`.

## 3. Cloud Save Service
- [ ] Create `src/services/cloudSaveService.js`.
- [ ] Define methods:
    - `saveFlight(userId, flightData)`: Upsert flight data to `flight_saves` table.
    - `getLatestFlight(userId)`: Fetch the most recent active save.
    - `discardFlight(saveId)`: Soft delete or mark as discarded.
- [ ] **Schema Definition**: Create a SQL file `supabase_schema.sql` for the user to run (tables: `profiles`, `flight_saves`).

## 4. Flight Initialization UI
- [ ] Modify `FlightInitialization.jsx`:
    - [ ] Subscribe to `AuthContext`.
    - [ ] On mount, check for existing cloud saves.
    - [ ] **Banner Component**: Implement a dismissal banner "Previous Flight Found".
        - **Resume**: Loads data into the app state (context/redux equivalent).
        - **Discard**: Calls `discardFlight`.

## 5. Save System Integration
- [ ] Update `SaveLoadPanel.jsx` (or where saving happens) to save to Cloud if user is logged in.
- [ ] Ensure all data (Physics, Flight Plan, Weather, Difficulty) is captured.

## 6. Verification
- [ ] Verify Login flow (mock/placeholder credentials).
- [ ] Verify Save/Load data integrity.
